"use strict";(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([[54300],{40414:(e,t,i)=>{i.d(t,{_:()=>r});var n=i(11379);const s=["fetch"],o=["includes"],a=["values","entries","getOwnPropertyDescriptors"];function r(){return(0,n.sH)(this,void 0,void 0,(function*(){"Promise"in window?(s.some((e=>!(e in window)))&&(yield i.e(62844).then(i.bind(i,22313))),(o.some((e=>!(e in Array.prototype)))||a.some((e=>!(e in Object))))&&(yield Promise.all([i.e(72837).then(i.t.bind(i,19687,23)),i.e(72837).then(i.t.bind(i,63186,23)),i.e(72837).then(i.t.bind(i,87630,23)),i.e(72837).then(i.t.bind(i,55173,23))]))):window.location.href="https://www.tiktok.com/unsupported"}))}},21730:(e,t,i)=>{i.d(t,{ZC:()=>p,_g:()=>d,d7:()=>l});var n=i(42824),s=i.n(n),o=i(23791),a=i.n(o),r=i(65622);function d(e,t,i){return(0,r.useMemo)((()=>s()(e,i)),t)}function l(e,t,i){return(0,r.useMemo)((()=>a()(e,i)),t)}function p(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}},56295:(e,t,i)=>{i.d(t,{$mG:()=>l,G2o:()=>s,fJR:()=>d,l3z:()=>c});var n=i(53814);const{getPureLivePath:s,getPureMusicPath:o,getPureTagPath:a,getPureStickerPath:r,getPureUserPath:d,getPureVideoPath:l,getPureQuestionPath:p}=n.h,{getPureUniqueId:c,hasIllegalText:u,isPureNumber:v,isRealUniqueId:g,purifyMusicName:m,purifyPlainText:_}=n.A},95763:(e,t,i)=>{i.d(t,{n:()=>a});var n=i(59158),s=i(47733),o=i(94488);const a=({msg:e,shouldShowMsg:t=!1,prevent:i=!0,callback:a})=>r=>r.pipe((0,o.W)((o=>(t&&console.error("Effect error: ",null!=e?e:o),null==a||a(),i?n.w:(0,s.$)((()=>o))))))},10593:(e,t,i)=>{i.d(t,{rO:()=>s});const n="assets/perf_images/performance.jpeg",s=()=>{const e=Boolean("");Boolean("sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static");return e?`https:///tiktok/webapp/main/${n}`:`https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/tiktok/webapp/main/${n}`}},29278:(e,t,i)=>{i.d(t,{gc:()=>p});var n=i(88457),s=i(52602);const o='video/mp4;codecs="hev1.1.6.L93.B0"',a="hevc_support_key_v4",r="hevc_support_key_time",d=12096e5;let l;function p(){if((0,n.fU)())return!1;if(void 0!==l)return l;const e=(0,s._S)(a,""),t=Number((0,s._S)(r,"0"));return Date.now()-t>d||""===e?(l=!(0,n.fU)()&&"undefined"!=typeof MediaSource&&!(!MediaSource.isTypeSupported(o)||"probably"!==document.createElement("video").canPlayType(o)),(0,s.AP)(a,l?"1":"0"),(0,s.AP)(r,String(Date.now())),l&&navigator.mediaCapabilities.decodingInfo({type:"file",video:{contentType:o,width:1920,height:1080,bitrate:1e4,framerate:30}}).then((({supported:e})=>{l=e,(0,s.AP)(a,e?"1":"0")})).catch((e=>console.error(e))),l):"1"===e}},4251:(e,t,i)=>{let n;function s(e){n=e}function o(e,t){var i,n;return(null===(i=e.match(/stream-[0-9_a-z]+/))||void 0===i?void 0:i[0])===(null===(n=t.match(/stream-[0-9_a-z]+/))||void 0===n?void 0:n[0])}function a(e){return e?`${e}${e.includes("?")?"&":"?"}_webnoredir=1`:e}i.d(t,{Kd:()=>o,T4:()=>s,X$:()=>a}),i(69872),i(65622)},62389:(e,t,i)=>{i.d(t,{ey:()=>a,d0:()=>o}),i(65622);const n="ENTER_ROOM_TIME_STAMP_STORAGE_KEY";var s=i(52602);const o=()=>(0,s.AP)(n,String(Date.now())),a=()=>(0,s._S)(n,"")},90028:(e,t,i)=>{i.d(t,{Xc:()=>n,qt:()=>r});const n="LIVE_AUTO_PLAY_STORAGE_KEY";var s,o,a;!function(e){e[e.On=1]="On",e[e.Off=2]="Off"}(s||(s={})),function(e){e[e.init=0]="init",e[e.connect=1]="connect",e[e.stop=8]="stop"}(o||(o={})),function(e){e.LD="ld",e.SD="sd",e.HD="hd",e.HD60="hd_60",e.UHD="uhd",e.UHD60="uhd_60",e.ORIGIN="origin",e.AUTO="auto"}(a||(a={}));const r={origin:"Original",uhd_60:"1080p60",uhd:"1080p",hd_60:"720p60",hd:"720p",sd:"540p",ld:"360p"};var d,l,p;!function(e){e.H264="h264",e.Bytevc1="bytevc1",e.H265="h265"}(d||(d={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.OBS=1]="OBS",e[e.MEDIA=2]="MEDIA",e[e.AUDIO=3]="AUDIO",e[e.SCREEN=4]="SCREEN",e[e.SOCIAL_LIVE=5]="SOCIAL_LIVE",e[e.STUDIO=6]="STUDIO"}(l||(l={})),function(e){e.Normal="normal",e.PoorConnection="poor_connection",e.Offline="offline"}(p||(p={}))},5651:(e,t,i)=>{i.d(t,{Eo:()=>r});var n=i(56139),s=i(29385),o=i(65622),a=i(29219);function r(){var e;const[t]=(0,n.S)(s.P),[i,r]=(0,o.useState)(!1),[d,l]=(0,o.useState)(!1),p=(0,a.Us)();return(0,o.useEffect)((()=>{r(t.engagementCountHide),l(t.guardianComplianceSettingInited)}),[t.engagementCountHide,t.guardianComplianceSettingInited]),!!Boolean(null===(e=p.appContext)||void 0===e?void 0:e.user)&&(!d||i)}},29385:(e,t,i)=>{i.d(t,{P:()=>_});var n=i(11379),s=i(83238),o=i(68055),a=i(54954),r=i(33293),d=i(91109),l=i(94488),p=i(73766),c=i(90245),u=i(49610),v=i(2070);let g=class{constructor(e){this.fetch=e}getComplianceSettings(){return this.fetch.get("/api/compliance/settings/",{query:{aid:1988,fromWeb:1}})}getGuardianComplianceSettings(e){return this.fetch.get("/tiktok/v1/compliance/guadig/settings/",{query:e,baseUrlType:2})}};g=(0,n.Cg)([(0,u._)(),(0,n.Sn)("design:paramtypes",[v.pM])],g);var m=i(53065);let _=class extends s.E{constructor(e){super(),this.service=e,this.defaultState={engagementCountHide:!1,guardianComplianceSettingInited:!1}}setEngagementCountHide(e,t){e.engagementCountHide=t}setGuardianComplianceSettingInited(e,t){e.guardianComplianceSettingInited=t}getComplianceSettings(e){return e.pipe((0,r.Z)((()=>this.service.getComplianceSettings().pipe((0,d.T)((e=>(null==e||e.status_code,this.noop())))))))}getGuardianComplianceSettingsEffect(e){return e.pipe((0,r.Z)((e=>this.getGuardianComplianceSettings(e).pipe((0,d.T)((()=>this.noop()))))))}getGuardianComplianceSettings(e){return this.service.getGuardianComplianceSettings(e).pipe((0,d.T)((e=>{var t,i;if(this.store.dispatch(this.getActions().setGuardianComplianceSettingInited(!0)),0===(null==e?void 0:e.status_code)){const n=null===(i=null===(t=e.fp.restriction)||void 0===t?void 0:t.engagement_count_settings)||void 0===i?void 0:i.engagement_count_status;return this.store.dispatch(this.getActions().setEngagementCountHide(n===m.Jt.off)),e}return null})),(0,l.W)((e=>(this.store.dispatch(this.getActions().setGuardianComplianceSettingInited(!0)),(0,p.of)(null)))))}};(0,n.Cg)([(0,o.uk)(),(0,n.Sn)("design:type",c.c)],_.prototype,"dispose$",void 0),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],_.prototype,"setEngagementCountHide",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],_.prototype,"setGuardianComplianceSettingInited",null),(0,n.Cg)([(0,o.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[c.c]),(0,n.Sn)("design:returntype",void 0)],_.prototype,"getComplianceSettings",null),(0,n.Cg)([(0,o.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[c.c]),(0,n.Sn)("design:returntype",void 0)],_.prototype,"getGuardianComplianceSettingsEffect",null),_=(0,n.Cg)([(0,a.n)("ComplianceSettingsModule"),(0,n.Sn)("design:paramtypes",[g])],_)},89728:(e,t,i)=>{i.d(t,{q:()=>S});var n=i(98281),s=i(22616),o=i(2576),a=i(99971),r=i(65622),d=i(96095),l=i(11379),p=i(25724),c=i(29756),u=i(2070);const v={isPPFInitialized:!1,isNonPersonalized:!1},g=(0,p.atom)(v);g.debugLabel="ppfAtom";const{useAtomService:m,useServiceState:_,useServiceDispatchers:h}=(0,c.i)(g,((e,t)=>({setPPFState(e){t(g,(t=>Object.assign(Object.assign({},t),e)))},setIsNonPersonalization(e){t(g,(t=>Object.assign(Object.assign({},t),{isNonPersonalized:e})))},setIsPPFInitialized(e){t(g,(t=>Object.assign(Object.assign({},t),{isPPFInitialized:e})))}})));var y=i(52602);i(45489);const f="webapp_popup_ppf_personalization_toast",S=()=>{const e=(0,n.L$)((0,s.W)((()=>["user","abTestVersion"]),[])),t=(0,d.Qi)(),[{isNonPersonalized:i,isPPFInitialized:p}]=(()=>{const e=_(),t=h(),i=(0,n.L$)((0,s.W)((()=>["user","abTestVersion"]),[])),{user:{uid:o=""}={}}=i;return(0,r.useEffect)((()=>{o&&!e.isPPFInitialized&&(0,l.sH)(void 0,void 0,void 0,(function*(){const e=yield((e,t)=>(0,l.sH)(void 0,void 0,void 0,(function*(){const i=yield(e=>(0,l.sH)(void 0,void 0,void 0,(function*(){return u.hd.post("/tiktok/ppf/api/eligibility/v1",{body:JSON.stringify({uid:e}),baseUrlType:2,headers:{}})})))(e),n=0===i.status_code&&"object"==typeof i.eligibility_list&&i.eligibility_list.length>0&&i.eligibility_list.some((e=>"ca_no_personalized_go_rule"===e.id_value&&e.is_eligible));return Object.assign(Object.assign({},t),{isNonPersonalized:n})})))(o,v);t.setPPFState(Object.assign(Object.assign({},e),{isPPFInitialized:!0}))}))}),[o,e.isPPFInitialized,t]),[e]})(),{abTestVersion:c,user:{uid:g=""}={}}=e,m=(0,o.Vq)(!0),S=(0,o.Vq)(),b=(0,o.Vq)(void 0,!0),w=(e,i=!0)=>{const n=!e;i&&(m(n),S(n),b(n)),t.setIsSearchPersonalized(n),t.setIsFeedPersonalized(n)},T=((e,t)=>{const i=(0,o.o0)(!t);return(0,r.useEffect)((()=>{e&&(0,y.Hd)(f,void 0)&&((0,y.X)(f),i())}),[e,i]),()=>{e&&(0,y.J2)(f,"1")}})(Boolean(g&&p),i);(0,r.useEffect)((()=>{if(!g||!p)return;const e=(0,a.Sw)(g),t=(0,a.mx)(c,g);i!==e?(w(i),setTimeout((()=>{T(),window.location.reload()}),100)):e&&t&&w(t,!1)}),[g,c,i,p])}},78329:(e,t,i)=>{i.d(t,{s:()=>ge});var n=i(56139),s=i(18898),o=i(65622),a=i(42099),r=i(53065),d=i(29219),l=i(22616),p=i(12688),c=i(54469),u=i(11379),v=i(83238),g=i(68055),m=i(54954),_=i(60842),h=i(49610),y=i(90064),f=i(2070),S=i(50374);function b(e){return 0===e.length?"":function(e){let t="";for(let i=0;i<e.length;i++)t+=(5^e.charCodeAt(i)).toString(16);return t}(parseInt(e)*parseInt(e)+"dmt")}let w=class{constructor(e){this.fetch=e,this.uploadScreenTime=this.uploadScreenTime.bind(this),this.uploadScreenTimeKidsMode=this.uploadScreenTimeKidsMode.bind(this),this.uploadAppOpentimes=this.uploadAppOpentimes.bind(this),this.uploadAppOpentimesKidsMode=this.uploadAppOpentimesKidsMode.bind(this),this.getSTMDashboard=this.getSTMDashboard.bind(this),this.getSTMDashboardKidsMode=this.getSTMDashboardKidsMode.bind(this)}uploadMetric(e,t){S.f.event(e,t)}uploadScreenTime(e){return this.fetch.post("/tiktok/v1/screen_time/upload/",{body:JSON.stringify(e),headers:{"content-type":"application/json"},baseUrlType:2})}uploadScreenTimeKidsMode(e){return this.fetch.post("/tiktok/v1/kids/screen_time/upload/",{body:JSON.stringify(e),headers:{"content-type":"application/json"},baseUrlType:2})}uploadAppOpentimes(e){return this.fetch.post("/tiktok/v1/app_open_times/upload/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:2})}uploadAppOpentimesKidsMode(e){return this.fetch.post("/tiktok/v1/kids/app_open_times/upload/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:2})}getSTMDashboard(e){return this.fetch.get("/tiktok/v1/screen_time/list/",{query:e,baseUrlType:2})}getSTMDashboardKidsMode(e){return this.fetch.get("/tiktok/v1/kids/screen_time/list/",{query:e,baseUrlType:2})}getSTMManagement(e){return this.fetch.get("/tiktok/v1/compliance/guadig/settings/",{query:e,baseUrlType:2})}setDailySTM(e){return this.fetch.post("/tiktok/v1/screen_time/settings/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"},baseUrlType:2})}checkDailySTMPopupShow(e){return this.fetch.post("/tiktok/v1/screen_time/popup/show/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:2})}uploadDailySTMPopupSuccess(e){return this.fetch.post("/tiktok/v1/screen_time/popup/complete/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:2})}uploadDailySTMTeenPinSuccess(e){const t=new URLSearchParams;return t.append("pass_code",e),this.fetch.post("/aweme/v2/guardian/platform/verify/password/",{body:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},baseUrlType:2})}setSleepReminder(e){return this.fetch.post("/tiktok/v1/night_screen_time/settings/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"},baseUrlType:2})}uploadSleepReminderAction(e){return this.fetch.post("/tiktok/v1/night_screen_time/popup/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:2})}checkSleepReminderShow(e){return this.fetch.post("/tiktok/v1/night_screen_time/reminder/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:2})}setMinorSetting(e){const t=new URLSearchParams;return t.append("settings",JSON.stringify(e.settings)),this.fetch.post("/aweme/v1/minor/user/set/settings/",{body:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",[y.nk]:this.fetch.csrfToken},baseUrlType:2})}getParentInfo(e){return this.fetch.get("/aweme/v1/guardian/platform/parent/info/",{query:e,baseUrlType:2})}getIsPinSet(){const e=JSON.stringify([{event_type:2,event_value:"",password:""}]);return this.fetch.post("/tiktok/v1/kids/user/set/settings/",{headers:{"Content-Type":"application/json; charset=UTF-8"},query:{settings:e},baseUrlType:2})}setPin(e){const t=JSON.stringify([{event_type:1,event_value:"1",password:b(e.password)}]);return this.fetch.post("/tiktok/v1/kids/user/set/settings/",{headers:{"Content-Type":"application/json; charset=UTF-8"},query:{settings:t},baseUrlType:2})}checkPin(e){return this.fetch.post("/tiktok/v1/kids/user/check/password/",{body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"},query:{password:b(e.password)},baseUrlType:2})}};w=(0,u.Cg)([(0,h._)(),(0,u.Sn)("design:paramtypes",[f.pM])],w);var T=i(29385),C=i(60057),k=i(91109),M=i(94488),O=i(73766),P=i(33293),I=i(33152),L=i(33583),j=i(21438),x=i(88314),E=i(72038),A=i(31862),D=i(95831),F=i(89060),U=i(38787),R=i(90245),B=i(45489),N=i.n(B),$=(i(84258),i(34543),i(8523),i(12827)),V=i.n($);const W=e=>{const t=new Date,i=t.getTime(),n=new Date(t).setHours(e.sleep_time_start_hour,e.sleep_time_start_minute);let s=new Date(t).setHours(e.sleep_time_end_hour,e.sleep_time_end_minute);return s<=n&&(s+=864e5),n-i},H=e=>(e=e||new Date,N()(e).hour()>=18),q=e=>(e=e||new Date,Math.floor((e.getTime()-6e4*e.getTimezoneOffset())/864e5)),z=e=>0===(e=e||new Date).getDay()?7:e.getDay(),K=e=>{const{fp:t,dw:i}=e;let n;return n=t&&2===t.user_identity?t.restriction:i,n},G=e=>{const t=K(e);if(!t)return 0;if(2===t.screen_time_management_repeat_type){const e=z();return t.screen_time_management_week_settings[e-1].screen_time_limit}return t.screen_time_management},Z=e=>{let t=e.screen_time_management;if(2===e.screen_time_management_repeat_type){const i=z();t=e.screen_time_management_week_settings[i-1].screen_time_limit}return t},J=e=>Math.floor(e.getTime()/1e3),Q=(e,t,i=r.o4)=>{if(localStorage)try{localStorage.setItem(i,JSON.stringify({event:e,value:t}))}catch(e){console.error("stm localstroage occurs error",e)}},Y=()=>{try{if(!localStorage)return 0;const e=localStorage.getItem(r.LH);if(!e)return 0;const t=JSON.parse(e);return(new Date).getTime()<=t.timeStamp+5e3&&t.activeTimeUsage||0}catch(e){return console.error(e),0}},X=(e,t)=>{const i=t?(()=>{const e=z();return 1===e?7:e-1})():z(),n=N()(),s=t?n.subtract(1,"day"):n,o=e.screen_down_time_day_setting.find((e=>e.day===i));if(!o)return{status:!1,rule:{startTime:"",endTime:""}};const a=N()().millisecond(0).second(0).minute(o.start_min).hour(o.start_hour).day(s.day()),r=o.end_hour<o.start_hour||o.end_hour===o.start_hour&&o.end_min<o.start_min,d=N()().millisecond(0).second(0).hour(o.end_hour).minute(o.end_min).day(r?s.add(1,"day").day():s.day());return n.isBefore(a)||n.isAfter(d)||n.isSame(d,"minute")?{status:!1,rule:{startTime:"",endTime:""}}:{status:!0,rule:{startTime:o.startTime||"",endTime:o.endTime||""}}},ee=(e,t)=>{const i=e>=12?"PM":"AM";return`${e%12||12}:${t.toString().padStart(2,"0")} ${i}`},te=e=>{const{time_usage:t}=e;let i=0;if("object"==typeof t&&t.length){const{night_usage:e,day_usage:n}=t[t.length-1];"number"==typeof e&&"number"==typeof n&&(i=e+n)}return i};var ie=i(27334),ne=i(40923),se=i(54086),oe=i(2032),ae=i(53240);const re=(0,oe.default)("div",{target:"e6q1x1a0"})((({theme:{direction:e}})=>[{display:"flex",justifyContent:"center",gap:"10px",alignItems:"center"},(0,ae.mp)({direction:e})]),"label:DivShowToastContent;"),de=(0,oe.default)("div",{target:"e6q1x1a1"})((({theme:{direction:e}})=>[{color:"rgba(11, 224, 155, 1)"},(0,ae.mp)({direction:e})]),"label:DivShowToastIcon;"),le=(0,oe.default)("div",{target:"e6q1x1a2"})((({theme:{direction:e}})=>[(0,ae.mp)({direction:e})]),"label:DivShowToastText;"),pe=(e,t=3,i="padding")=>{se.F.destroy(),se.F.open({content:(0,ie.jsxs)(re,{children:[(0,ie.jsx)(de,{children:(0,ie.jsx)(ne.I,{color:"Positive",size:24})}),(0,ie.jsx)(le,{children:e})]}),duration:t,widthType:i})},ce=(e,t=3,i="padding")=>{se.F.destroy(),se.F.open({content:e,duration:t,widthType:i})};var ue=i(35999);let ve=class extends v.E{constructor(e,t,i,n){super(),this.service=e,this.home=t,this.ComplianceSettings=i,this.t=n,this.defaultState={timeUsageToday:0,userSTMSetting:null,defaultDailySTMPopup:!1,parentUsername:"",userSTMLimit:0,STMInterventionType:1,STMManagementType:0,scheduledBreakSetting:void 0,shouldShowScheduledBreak:!1,scheduledBreakEnabled:!1,scheduledBreakActive:!1,scheduledBreakActiveRule:{startTime:"",endTime:""},STMManagementRepeatType:1,STMManagementDaySetting:[],FPSTMManagementDaySetting:[],isFpTeenOpenDailySTM:!1,showDailyScreenTimeLimitsWeb:!0,lastUploadTime:new Date,dayChange:new Date,tenMinutesInterval:0,weeklyScreenTimeUpdates:!1,durationReminder:0,durationReminderType:0,isDisplayOtherPopupWhenTimeBreak:!1,isTimeBreakSnooze:!1,isOpenSleepReminder:!1,sleepTimeSettings:void 0,isMinor:!1,sleepReminderPopup:!1,breakReminderPopup:!1,isPageHidden:!1,isLogin:!1,activeTimeUsage:0,isOpenDailySTM:!1,userIdentity:1,defaultDailyLimitKmPopup:!1,isPinSet:!1,kmPopupExtendCount:0}}setUserSTMSetting(e,t){e.userSTMSetting=Object.assign(Object.assign({},e.userSTMSetting),t)}setDefaultDailySTMPopup(e,t){e.defaultDailySTMPopup=t}setparentUsername(e,t){e.parentUsername=t}setSleepReminderPopup(e,t){e.sleepReminderPopup=t}setBreakReminderPopup(e,t){e.breakReminderPopup=t}setDefaultDailyLimitKmPopup(e,t){e.defaultDailyLimitKmPopup=t}showDefaultDailyLimitKmPopup(e){e.defaultDailyLimitKmPopup=!0}hideDefaultDailyLimitKmPopup(e){e.defaultDailyLimitKmPopup=!1}extendLimitKidsMode(e){const t=e.timeUsageToday+1e3*e.activeTimeUsage,i=Math.ceil((t-36e5)/18e5),n=Math.max(e.kmPopupExtendCount,i);e.kmPopupExtendCount=n}setIsPinSet(e,t){e.isPinSet=t}setPageHidden(e){e.isPageHidden=!0}setPageVisible(e){e.isPageHidden=!1}setLogin(e){e.isLogin=!0}setNotLogin(e){e.isLogin=!1}setIsLogin(e,t){e.isLogin=t}setActiveTimeUsage(e,t){e.activeTimeUsage=t}setTimeUsageToday(e,t){e.timeUsageToday=t}setIsOpenDailySTM(e,t){e.isOpenDailySTM=t}setUserIdentity(e,t){e.userIdentity=t}setUserSTMLimit(e,t){e.userSTMLimit=t}setSTMInterventionType(e,t){e.STMInterventionType=t}setLastUploadTime(e,t){e.lastUploadTime=t}setDayChange(e,t){e.dayChange=t}setTenMinutesInterval(e,t){e.tenMinutesInterval=t}setDurationReminder(e,t){e.durationReminder=t}setDurationReminderType(e,t){e.durationReminderType=t}setIsDisplayOtherPopupWhenTimeBreak(e,t){e.isDisplayOtherPopupWhenTimeBreak=t}setIsTimeBreakSnooze(e,t){e.isTimeBreakSnooze=t}setIsOpenSleepReminder(e,t){e.isOpenSleepReminder=t}setWeeklyScreenTimeUpdates(e,t){e.weeklyScreenTimeUpdates=t}setSTMManagementType(e,t){e.STMManagementType=t}setScheduledBreakSetting(e,t){var i,n,s;e.scheduledBreakSetting=t;const o=null!==(n=null===(i=e.scheduledBreakSetting)||void 0===i?void 0:i.show_stm_down_time)&&void 0!==n&&n;e.shouldShowScheduledBreak=o;const a=(null===(s=e.scheduledBreakSetting)||void 0===s?void 0:s.screen_down_time_status)===r.qL.on;e.scheduledBreakEnabled=a}disableScheduledBreak(e){e.shouldShowScheduledBreak=!1,e.scheduledBreakEnabled=!1}setScheduledBreakHidden(e){e.scheduledBreakActive=!1}setScheduledBreakShow(e){e.scheduledBreakActive=!0}setScheduledBreakRule(e,t){e.scheduledBreakActiveRule=t}setSTMManagementRepeatType(e,t){e.STMManagementRepeatType=t}setSTMManagementDaySetting(e,t){e.STMManagementDaySetting=t}setFPSTMManagementDaySetting(e,t){e.FPSTMManagementDaySetting=t}setSleepTimeSettings(e,t){e.sleepTimeSettings=t;const i=(null==t?void 0:t.sleep_reminder_enabled)&&(0!==t.sleep_time_start_hour||0!==t.sleep_time_start_minute||0!==t.sleep_time_end_hour||0!==t.sleep_time_end_minute);e.isOpenSleepReminder=i||!1}setIsFpTeenOpenDailySTM(e,t){e.isFpTeenOpenDailySTM=t}setIsMinor(e,t){e.isMinor=t}setShowDailyScreenTimeLimitsWeb(e,t){e.showDailyScreenTimeLimitsWeb=t}uploadAppOpentimes(e){return e.pipe((0,C.n)((e=>{const{reqPayload:t,kidsMode:i=!1}=e;return(i?this.service.uploadAppOpentimesKidsMode:this.service.uploadAppOpentimes)(t).pipe((0,k.T)((()=>this.noop())))})),(0,M.W)((e=>(console.error("uploadAppOpentimes error occurs",e),(0,O.of)(this.noop())))))}uploadSleepReminderAction(e){return e.pipe((0,C.n)((e=>this.service.uploadSleepReminderAction(e).pipe((0,k.T)((()=>this.noop()))))),(0,M.W)((e=>(console.error("uploadSleepReminderAction error occurs",e),(0,O.of)(this.noop())))))}getSTMManagement(e){return e.pipe((0,P.Z)((e=>this.ComplianceSettings.getGuardianComplianceSettings(e).pipe((0,P.Z)((e=>{var t,i;if(e){let n=e.dw.screen_time_management_status;const s=null===(t=e.fp.restriction)||void 0===t?void 0:t.screen_time_management_status,o=G(e),a=K(e);return(2===e.fp.user_identity||4===e.fp.user_identity&&s)&&(n=s),(0,O.of)(this.getActions().setIsOpenDailySTM(Boolean(n)),this.getActions().setIsFpTeenOpenDailySTM(Boolean(s)),this.getActions().setIsMinor(Boolean(e.user_details.is_minor)),this.getActions().setUserIdentity(e.fp.user_identity),this.getActions().setUserSTMSetting(e),this.getActions().setUserSTMLimit(o||0),this.getActions().setDurationReminder(e.dw.session_duration_reminder||0),this.getActions().setDurationReminderType(e.dw.session_duration_type||0),this.getActions().setSTMManagementRepeatType((null==a?void 0:a.screen_time_management_repeat_type)||1),this.getActions().setFPSTMManagementDaySetting((null===(i=e.fp.restriction)||void 0===i?void 0:i.screen_time_management_week_settings)||[]),this.getActions().setSTMManagementDaySetting(e.dw.screen_time_management_week_settings||[]),this.getActions().setWeeklyScreenTimeUpdates(1===e.dw.screen_time_update),this.getActions().setSleepTimeSettings(e.dw.sleep_time_settings))}return(0,O.of)(this.noop())}))))))}getParentInfo(e){return e.pipe((0,P.Z)((e=>this.service.getParentInfo(e).pipe((0,P.Z)((e=>{var t,i;return e?(0,O.of)(this.getActions().setparentUsername((null===(t=e.parent)||void 0===t?void 0:t.unique_id)||(null===(i=e.parent)||void 0===i?void 0:i.short_id)||"")):(0,O.of)(this.noop())}))))),(0,M.W)((e=>(console.error("getParentInfo error occurs",e),(0,O.of)(this.noop())))))}weeklyUpdateChangeHandler(e){return e.pipe((0,C.n)((e=>this.service.setMinorSetting({settings:[{event_type:4,event_value:e?"1":"0"}]}).pipe((0,P.Z)((t=>0===t.status_code?(0,O.of)(this.getActions().setWeeklyScreenTimeUpdates(e)):(0,O.of)(this.noop())))))))}init(e){return e.pipe((0,C.n)((()=>this.ComplianceSettings.getGuardianComplianceSettings({date:q(new Date)}).pipe((0,I.E)(this.home.state$),(0,P.Z)((([e,t])=>{var i,n,s,o,a;if(!e)return(0,L.h)((0,O.of)(this.noop()));let d=e.dw.screen_time_management_status;const l=(2===e.fp.user_identity||4===e.fp.user_identity)&&Boolean(null===(i=e.fp.restriction)||void 0===i?void 0:i.screen_time_management_status);(2===e.fp.user_identity||4===e.fp.user_identity&&l)&&(d=l?1:0);const p=(e=>{var t;let i;if("object"==typeof(null==e?void 0:e.fp)){i=null===(t=e.fp.restriction)||void 0===t?void 0:t.screen_down_time_settings;const n=null==i?void 0:i.screen_down_time_day_setting;if(i&&V()(n)){const e=(e=>[7,1,2,3,4,5,6].map((t=>{const i=e.find((e=>e.day===t)),{dayName:n,defaultDayName:s}=(e=>{let t="",i="N/A";switch(e){case 1:t="FPscheduledBreak_parentDetailpage_monday",i="Monday";break;case 2:t="FPscheduledBreak_parentDetailpage_tuesday",i="Tuesday";break;case 3:t="FPscheduledBreak_parentDetailpage_wednesday",i="Wednesday";break;case 4:t="FPscheduledBreak_parentDetailpage_thursday",i="Thursday";break;case 5:t="FPscheduledBreak_parentDetailpage_friday",i="Friday";break;case 6:t="FPscheduledBreak_parentDetailpage_saturday",i="Saturday";break;case 7:t="FPscheduledBreak_parentDetailpage_sunday",i="Sunday"}return{defaultDayName:i,dayName:t}})(t);if(i){const[e,t,o]=((e,t,i,n)=>{const s=ee(e,t),o=ee(i,n);return[`${s} - ${o}`,s,o]})(i.start_hour,i.start_min,i.end_hour,i.end_min);return Object.assign(Object.assign({},i),{dayName:n,defaultDayName:s,daySettingTime:e,startTime:t,endTime:o})}return{start_hour:0,start_min:0,end_hour:0,end_min:0,day:t,screen_down_time_status_day:r.qL.off,dayName:n,daySettingTime:void 0,startTime:void 0,endTime:void 0}})))(n);i.screen_down_time_day_setting=e}}return i})(e),c=K(e),u=G(e),v=new Date;let g=1;l&&(g=3),1===e.dw.screen_time_management_eligible&&(g=2);const m=Y(),_=void 0===e.dw.show_daily_screen_time_limits_web||e.dw.show_daily_screen_time_limits_web;return((e,t)=>{try{if(!sessionStorage)return;let i=!1;if(i=JSON.parse(sessionStorage.getItem(r.w7)||"{}").isUpload||!1,i)return;if(e.isOpenDailySTM){const i=new Date;t.uploadMetric("web_daily_screen_time_limit_status",{status:"on",type:1===e.STMManagementRepeatType?"set the same limit every day":"set a custom limit per day",time:e.userSTMLimit,days:1===e.STMManagementRepeatType?7:i.getDay()})}else t.uploadMetric("web_daily_screen_time_limit_status",{status:"off",type:"null"});e.durationReminder?t.uploadMetric("web_screen_time_break_status",{status:"on",select_time:String(e.durationReminder)}):t.uploadMetric("web_screen_time_break_status",{status:"off",select_time:"null"}),e.isOpenSleepReminder&&e.sleepTimeSettings?t.uploadMetric("web_sleep_reminder_status",{status:"on",sleep_time:`${e.sleepTimeSettings.sleep_time_start_hour.toString()}:${e.sleepTimeSettings.sleep_time_start_minute.toString().padStart(2,"0")}`}):t.uploadMetric("web_sleep_reminder_status",{status:"off",sleep_time:"null"}),t.uploadMetric("web_weekly_screen_time_update_status",{status:e.weeklyScreenTimeUpdates?"on":"off"}),sessionStorage.setItem(r.w7,JSON.stringify({isUpload:!0}))}catch(e){console.error(e)}})({isOpenDailySTM:Boolean(d),STMManagementRepeatType:(null==c?void 0:c.screen_time_management_repeat_type)||1,userSTMLimit:u||0,durationReminder:e.dw.session_duration_reminder||0,isOpenSleepReminder:Boolean(null===(n=null==e?void 0:e.dw.sleep_time_settings)||void 0===n?void 0:n.sleep_reminder_enabled),sleepTimeSettings:e.dw.sleep_time_settings,weeklyScreenTimeUpdates:1===e.dw.screen_time_update},this.service),(0,L.h)((0,O.of)(this.getActions().setUserSTMSetting(e),this.getActions().setIsFpTeenOpenDailySTM(Boolean(l)),this.getActions().setIsMinor(Boolean(e.user_details.is_minor)),this.getActions().setUserIdentity(e.fp.user_identity),this.getActions().setTimeUsageToday(e.user_details.time_usage_today||this.state.timeUsageToday),this.getActions().setUserSTMLimit(u||0),this.getActions().setSTMInterventionType(g),this.getActions().setSTMManagementType((null==c?void 0:c.screen_time_management_type)||0),this.getActions().setScheduledBreakSetting(p),this.getActions().setSTMManagementRepeatType((null==c?void 0:c.screen_time_management_repeat_type)||1),this.getActions().setSTMManagementDaySetting((null==c?void 0:c.screen_time_management_week_settings)||[]),this.getActions().setIsMinor(e.user_details.is_minor||!1),this.getActions().setIsOpenDailySTM(Boolean(d)),this.getActions().setFPSTMManagementDaySetting((null===(s=e.fp.restriction)||void 0===s?void 0:s.screen_time_management_week_settings)||[]),this.getActions().setShowDailyScreenTimeLimitsWeb(_),this.getActions().setLastUploadTime(new Date(v.getTime())),this.getActions().setIsLogin(Boolean(null===(o=t.appContext)||void 0===o?void 0:o.user)),this.getActions().setDurationReminder(e.dw.session_duration_reminder||0),this.getActions().setDurationReminderType(e.dw.session_duration_type||0),this.getActions().setActiveTimeUsage(m),this.getActions().setWeeklyScreenTimeUpdates(1===e.dw.screen_time_update),this.getActions().setSleepTimeSettings(e.dw.sleep_time_settings),this.getActions().setIsOpenSleepReminder(Boolean(null===(a=null==e?void 0:e.dw.sleep_time_settings)||void 0===a?void 0:a.sleep_reminder_enabled))))}))))),(0,M.W)((e=>(console.error("init error occurs",e),(0,O.of)(this.noop())))))}initKidsMode(e){return e.pipe((0,C.n)((()=>this.ComplianceSettings.getGuardianComplianceSettings({date:q(new Date)}).pipe((0,I.E)(this.home.state$),(0,P.Z)((([e,t])=>{var i;const n=new Date,s=Y();return(0,L.h)((0,O.of)(this.getActions().setLastUploadTime(new Date(n.getTime())),this.getActions().setIsLogin(Boolean(null===(i=t.appContext)||void 0===i?void 0:i.user)),this.getActions().setActiveTimeUsage(s)))}))))),(0,M.W)((e=>(console.error("init error occurs",e),(0,O.of)(this.noop())))))}checkDailySTMPopupShow(e){return e.pipe((0,P.Z)((e=>this.service.checkDailySTMPopupShow(e).pipe((0,P.Z)((e=>0===e.status_code&&e.can_view_popup?(0,O.of)(this.getActions().setDefaultDailySTMPopup(!0)):(0,O.of)(this.getActions().setDefaultDailySTMPopup(!1))))))))}dailySTMUpdateHandler(e){return e.pipe((0,C.n)((e=>this.service.setDailySTM(e).pipe((0,I.E)(this.state$),(0,P.Z)((([t,i])=>{if(0!==t.status_code)return(0,O.of)(this.noop());pe(this.t("dailyscreentime_featurescreen_toast_editedtime"),3,"auto");const n=Z(e);return Q("updateDailySTM",e),(0,O.of)(this.getActions().setIsOpenDailySTM(Boolean(e.screen_time_management_status)),this.getActions().setUserSTMLimit(n),this.getActions().setSTMManagementType(e.screen_time_management_type),this.getActions().setSTMManagementRepeatType(e.screen_time_management_repeat_type||i.STMManagementRepeatType),this.getActions().setSTMManagementDaySetting(e.screen_time_management_week_settings||i.STMManagementDaySetting))}))))),(0,M.W)((e=>(console.error("dailySTMUpdateHandler error occurs",e),(0,O.of)(this.noop())))))}syncDailySTMUpdateHandler(e){return e.pipe((0,I.E)(this.state$),(0,C.n)((([e,t])=>{const i=Z(e),n=[(0,O.of)(this.getActions().setIsOpenDailySTM(Boolean(e.screen_time_management_status))),(0,O.of)(this.getActions().setUserSTMLimit(i)),(0,O.of)(this.getActions().setSTMManagementType(e.screen_time_management_type)),(0,O.of)(this.getActions().setSTMManagementRepeatType(e.screen_time_management_repeat_type||t.STMManagementRepeatType)),(0,O.of)(this.getActions().setSTMManagementDaySetting(e.screen_time_management_week_settings||t.STMManagementDaySetting))];return(0,L.h)(...n)})))}startAccumulateActiveTime(e){return e.pipe((0,C.n)((()=>(0,j.Y)(15e3).pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>(0,O.of)(this.getActions().setActiveTimeUsage(t.activeTimeUsage+15)))),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin)),(0,E.q)(this.getActions().setActiveTimeUsage(0))))))}startMonitorDayChange(e){return e.pipe((0,C.n)((()=>(0,j.Y)(3e4).pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const i=new Date;return t.lastUploadTime.getDate()!==i.getDate()?(0,O.of)(this.getActions().setDayChange(i)):(0,O.of)(this.noop())})),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.stopTimer$))))))}startMonitorTimeLimit(e){return e.pipe((0,C.n)((()=>(0,j.Y)(3e4).pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const i=[];return t.timeUsageToday+t.activeTimeUsage>=60*t.userSTMLimit&&t.timeUsageToday+t.activeTimeUsage<60*t.userSTMLimit+30&&i.push(this.service.checkDailySTMPopupShow({date:0,screen_time_limit_type:t.STMInterventionType}).pipe((0,k.T)((e=>0===e.status_code&&e.can_view_popup?this.getActions().setDefaultDailySTMPopup(!0):this.getActions().setDefaultDailySTMPopup(!1))))),(0,L.h)(...i)})),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.getAction$().setDayChange,this.stopTimer$))))))}startUploadSTMEveryTenMinutes(e){return e.pipe((0,C.n)((()=>(0,j.Y)(6e5).pipe((0,I.E)(this.state$),(0,k.T)((([e,t])=>this.getActions().setTenMinutesInterval(t.tenMinutesInterval+1))),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.stopTimer$))))))}uploadScreenTime(e){return e.pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const{uploadType:i,kidsMode:n=!1}=e||{},s=new Date,o=J(s),a=J(t.lastUploadTime);if(s.getTime()<=t.lastUploadTime.getTime()+18e4&&5!==i)return(0,O.of)(this.noop());const r=q(s),d=H(s),l=d?0:o-a,p=d?o-a:0;if(l<=0&&p<=0)return(0,O.of)(this.noop());const c={upload_timestamp:s.getTime(),stm_enabled:t.isOpenDailySTM?1:0,upload_type:i||2,time_usage:[{upload_date:r,day_usage:l,night_usage:p}]};return(n?this.service.uploadScreenTimeKidsMode:this.service.uploadScreenTime)(c).pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{let i=e;if("string"==typeof e&&(i=JSON.parse(e)),0!==i.status_code)return(0,O.of)(this.noop());const o=[(0,O.of)(this.getActions().setLastUploadTime(s))];return n?o.push((0,O.of)(this.getActions().getTodayUsage())):o.push((0,O.of)(this.getActions().setTimeUsageToday(i.time_usage_today||t.timeUsageToday))),(0,L.h)(...o)})))})),(0,M.W)((e=>(console.error("uploadScreenTime error occurs",e),(0,O.of)(this.noop())))))}uploadScreenTimeWhenDayChange(e){return e.pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const{kidsMode:i=!1}=e||{},n=new Date,s=q(n),o=H(n),a=J(n),r=J(t.lastUploadTime);if(n.getDate()===t.lastUploadTime.getDate())return(0,O.of)(this.noop());const d=new Date(n).setHours(0,0,0,0)/1e3;return(i?this.service.uploadScreenTimeKidsMode:this.service.uploadScreenTime)({upload_timestamp:n.getTime(),stm_enabled:t.isOpenDailySTM?1:0,upload_type:2,time_usage:[{upload_date:s-1,day_usage:o?0:d-r,night_usage:o?d-r:0},{upload_date:s,day_usage:o?0:a-d,night_usage:o?a-d:0}]}).pipe((0,I.E)(this.state$),(0,P.Z)((([e])=>(0,O.of)(this.getActions().setLastUploadTime(n),this.getActions().setTimeUsageToday(e.time_usage_today||0)))))})))}sessionDurationChangeHandler(e){return e.pipe((0,C.n)((e=>this.service.setMinorSetting({settings:[{event_type:0===e.type?5:6,event_value:e.value.toString()}]}).pipe((0,P.Z)((t=>0===t.status_code?(pe(this.t("screenTime_screenTimeBreaks_manageTime_editBreak_toast",{},"You’ve edited your screen time break"),3,"auto"),Q("updateTimeBreak",{event_type:0===e.type?5:6,event_value:e.value.toString()}),(0,O.of)(this.getActions().setDurationReminder(e.value),this.getActions().setDurationReminderType(e.type))):(ce(this.t("error_toast")),(0,O.of)(this.noop()))))))))}syncSessionDurationHandler(e){return e.pipe((0,C.n)((e=>(0,O.of)(this.getActions().setDurationReminder(Number(e.event_value)),this.getActions().setDurationReminderType(e.event_type)))))}startTimeBreakTimer(e){return(0,A.O)(1e3*(60*e.durationReminder-e.activeTimeUsage)).pipe((0,I.E)(this.state$),(0,C.n)((([e,t])=>t.isDisplayOtherPopupWhenTimeBreak||t.isTimeBreakSnooze?(0,O.of)(this.getActions().setBreakReminderPopup(!1),this.getActions().setIsDisplayOtherPopupWhenTimeBreak(!1)):(0,O.of)(this.getActions().setBreakReminderPopup(!0)))),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.stopTimer$,this.stopTimeBreak$)))}processTimeBreak(e){return e.pipe((0,I.E)(this.state$),(0,C.n)((([e,t])=>t.activeTimeUsage/60>=t.durationReminder&&!t.isDisplayOtherPopupWhenTimeBreak&&!t.isTimeBreakSnooze?(0,O.of)(this.getActions().setBreakReminderPopup(!0)):(0,L.h)((0,O.of)(this.getActions().setBreakReminderPopup(!1)),this.startTimeBreakTimer(t)))))}startTimeBreakSnoozeTimer(e){return e.pipe((0,C.n)((()=>{const e=[(0,O.of)(this.getActions().setIsTimeBreakSnooze(!0))];return e.push((0,A.O)(6e5).pipe((0,P.Z)((()=>(0,O.of)(this.getActions().setIsTimeBreakSnooze(!1),this.getActions().setBreakReminderPopup(!0)))),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.stopTimer$)))),(0,L.h)(...e)})))}startSleepReminderTimer(e,t){return(0,A.O)(e).pipe((0,I.E)(this.state$),(0,C.n)((([e,i])=>this.service.checkSleepReminderShow({sleep_time_settings:i.sleepTimeSettings,user_real_timestamp:t}).pipe((0,C.n)((e=>0===e.status_code&&e.show_reminder?(0,O.of)(this.getActions().setSleepReminderPopup(!0)):(0,O.of)(this.noop())))))),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.stopTimer$,this.stopSleepReminder$)))}sleepReminderProcess(e){const t=new Date,i=J(t),n=function(e){if(!e.sleep_reminder_enabled||!e)return!1;const t=new Date,i=t.getTime(),n=new Date(t).setHours(e.sleep_time_start_hour,e.sleep_time_start_minute);let s=new Date(t).setHours(e.sleep_time_end_hour,e.sleep_time_end_minute);return s<=n&&(s+=864e5),i>=n&&i<=s}(e);if(n)return this.service.checkSleepReminderShow({sleep_time_settings:e,user_real_timestamp:i}).pipe((0,C.n)((e=>0===e.status_code&&e.show_reminder?(0,O.of)(this.getActions().setSleepReminderPopup(!0)):0===e.status_code&&e.next_timestamp?this.startSleepReminderTimer(1e3*(e.next_timestamp-i),i):(0,O.of)(this.getActions().setSleepReminderPopup(!1)))));const s=W(e);return(0,L.h)((0,O.of)(this.getActions().setSleepReminderPopup(!1)),this.startSleepReminderTimer(s,i))}openSleepReminder(e){return e.pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>this.sleepReminderProcess(t.sleepTimeSettings))))}sleepReminderChangeHandler(e){return e.pipe((0,C.n)((e=>this.service.setSleepReminder(e).pipe((0,C.n)((t=>{if(0===t.status_code){pe(this.t(void 0===this.state.sleepTimeSettings?"screenTime_sleepReminders_setSleepTime_toast":"nightscreentimemgmt_sleepreminders_toast_editsleeptime",{},void 0===this.state.sleepTimeSettings?"You’ve set your sleep time":"You’ve edited your sleep time"),3,"auto"),Q("updateSleepTime",e.sleep_time_settings);const t=new Date,i=J(t),n=[],s=W(e.sleep_time_settings);return n.push(this.startSleepReminderTimer(s,i)),n.push((0,O.of)(this.getActions().setSleepTimeSettings({sleep_time_start_hour:e.sleep_time_settings.sleep_time_start_hour,sleep_time_start_minute:e.sleep_time_settings.sleep_time_start_minute,sleep_time_end_hour:e.sleep_time_settings.sleep_time_end_hour,sleep_time_end_minute:e.sleep_time_settings.sleep_time_end_minute,sleep_reminder_enabled:e.sleep_time_settings.sleep_reminder_enabled}))),(0,L.h)(...n)}return ce(this.t("error_toast")),(0,O.of)(this.noop())}))))),(0,M.W)((e=>(console.error("sleepReminderChangeHandler error occurs",e),(0,O.of)(this.noop())))))}syncSleepSettingHandler(e){return e.pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const i=[];return i.push((0,O.of)(this.getActions().setSleepTimeSettings({sleep_time_start_hour:e.sleep_time_start_hour,sleep_time_start_minute:e.sleep_time_start_minute,sleep_time_end_hour:e.sleep_time_end_hour,sleep_time_end_minute:e.sleep_time_end_minute,sleep_reminder_enabled:e.sleep_reminder_enabled}))),t.isPageHidden||(i.push((0,O.of)(this.getActions().stopSleepReminder$())),i.push(this.sleepReminderProcess(e))),(0,L.h)(...i)})),(0,M.W)((e=>(console.error("syncSleepSettingHandler error occurs",e),(0,O.of)(this.noop())))))}delaySleep(e){return e.pipe((0,D.p)((()=>(0,A.O)(6e5).pipe((0,k.T)((()=>this.getActions().setSleepReminderPopup(!0))),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.stopTimer$))))))}scheduledBreakProcess(e){return e.pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const i=[],n=t.scheduledBreakSetting;if(n){const e=t.scheduledBreakActive,{status:s,rule:o}=(e=>{const t=X(e);if(t.status)return t;const i=X(e,!0);return i.status?i:t})(n);e&&!s?i.push((0,O.of)(this.getActions().setScheduledBreakHidden())):!s||e&&t.scheduledBreakActiveRule.endTime===o.endTime&&t.scheduledBreakActiveRule.startTime===o.startTime||(i.push((0,O.of)(this.getActions().setScheduledBreakShow())),i.push((0,O.of)(this.getActions().setScheduledBreakRule(o))))}return(0,L.h)(...i)})))}startScheduledBreakTimer(e){return e.pipe((0,C.n)((()=>(0,j.Y)(15e3).pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const i=[];return t.scheduledBreakSetting&&i.push((0,O.of)(this.getActions().scheduledBreakProcess())),(0,L.h)(...i)})),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.getAction$().setDayChange,this.stopTimer$,this.stopScheduleBreak$))))))}stmLimitKidsModeProcess(e){return e.pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>{const i=[],n=t.defaultDailyLimitKmPopup,s=t.timeUsageToday+1e3*t.activeTimeUsage>=36e5+18e5*t.kmPopupExtendCount;return n&&!s?i.push((0,O.of)(this.getActions().hideDefaultDailyLimitKmPopup())):!n&&s&&i.push((0,O.of)(this.getActions().showDefaultDailyLimitKmPopup())),(0,L.h)(...i)})))}extendLimitKidsModeProcess(e){return e.pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>(0,F.x)((0,O.of)(this.getActions().extendLimitKidsMode()),(0,O.of)(this.getActions().stmLimitKidsModeProcess())))))}startStmLimitKidsModeTimer(e){return e.pipe((0,C.n)((()=>(0,j.Y)(15e3).pipe((0,I.E)(this.state$),(0,P.Z)((([e,t])=>(0,L.h)((0,O.of)(this.getActions().stmLimitKidsModeProcess())))),(0,x.Q)((0,L.h)(this.getAction$().setPageHidden,this.getAction$().setNotLogin,this.getAction$().setDayChange,this.stopTimer$,this.stopStmLimitKidsMode$))))))}getTodayUsage(e){return e.pipe((0,C.n)((()=>this.service.getSTMDashboardKidsMode({count:1}).pipe((0,I.E)(this.home.state$),(0,P.Z)((([e,t])=>{const i=te(e);return(0,L.h)((0,O.of)(this.getActions().setTimeUsageToday(i),this.getActions().setActiveTimeUsage(0)))}))))),(0,M.W)((e=>(console.error("getTodayUsage error occurs",e),(0,O.of)(this.noop())))))}initCallKmDefaultLimit(e){return e.pipe((0,C.n)((()=>(0,U.p)({listRes:this.service.getSTMDashboardKidsMode({count:1}),pinRes:this.service.getIsPinSet()}).pipe((0,P.Z)((({listRes:e,pinRes:t})=>{const i=te(e),n=2702===t.status_code;return(0,F.x)((0,O.of)(this.getActions().setTimeUsageToday(i),this.getActions().setActiveTimeUsage(0),this.getActions().setIsPinSet(n)),(0,O.of)(this.getActions().stmLimitKidsModeProcess()))})),(0,M.W)((e=>(console.error("Error during parallel API calls:",e),(0,O.of)(this.noop()))))))))}};function ge(){var e,t,i,u;const[v,g]=(0,n.S)(ve),m=(0,d.Us)(),{abTestVersion:_}=null!==(e=(0,l.W)((()=>["abTestVersion"]),[]))&&void 0!==e?e:{},h=null!==(t=(0,p.qt)(_,"digital_wellbeing_web"))&&void 0!==t?t:"v0",y=null!==(i=(0,p.qt)(_,"scheduled_breaks_teens"))&&void 0!==i?i:"v0",{user:f}=(0,s.P)(c.L,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),S=Boolean(f);(0,o.useEffect)((()=>{if("v0"===h||!S)return;const e=new Date,t=J(e),i=e.getTime(),n=H(i),s=q(e);g.uploadAppOpentimes({reqPayload:{upload_timestamp:t,upload_type:1,app_open_times:[{upload_date:s,day_open_times:n?0:1,night_open_times:n?1:0}]}}),g.init();const o=(0,a.R)(document,"visibilitychange").subscribe((()=>{"hidden"===document.visibilityState?(g.setPageHidden(),Q("updateActiveTimeUsage",{value:{activeTimeUsage:v.activeTimeUsage,timeStamp:(new Date).getTime()}},r.LH)):"visible"===document.visibilityState&&g.setPageVisible()})),d=(0,a.R)(window,"storage").subscribe((e=>{const t=e;if(t.key!==r.o4&&t.key!==r.LH)return;const i=JSON.parse(t.newValue||"");switch(i.event){case"upload":const e=Number(i.value);e&&g.setLastUploadTime(new Date(e));break;case"updateDailySTM":i&&g.syncDailySTMUpdateHandler(i.value);break;case"updateSleepTime":i&&g.syncSleepSettingHandler(i.value);break;case"updateTimeBreak":i&&g.syncSessionDurationHandler(i.value)}}));return()=>{g.stopTimer$(),o&&o.unsubscribe(),d&&d.unsubscribe()}}),[]),(0,o.useEffect)((()=>{"v0"!==h&&S&&v.isPageHidden&&v.isOpenDailySTM&&g.uploadScreenTime()}),[v.isPageHidden]),(0,o.useEffect)((()=>{"v0"!==h&&S&&v.isOpenDailySTM&&!v.isPageHidden&&(g.startMonitorDayChange(),g.startMonitorTimeLimit(),g.startUploadSTMEveryTenMinutes(),g.startAccumulateActiveTime())}),[v.isOpenDailySTM,v.isPageHidden]),(0,o.useEffect)((()=>{if(!v.isOpenDailySTM||v.isPageHidden)return;const e=v.userSTMLimit;v.timeUsageToday>=60*e?g.checkDailySTMPopupShow({date:q(v.lastUploadTime),screen_time_limit_type:v.STMInterventionType}):g.setDefaultDailySTMPopup(!1)}),[v.isOpenDailySTM,v.userSTMLimit,v.isPageHidden,v.timeUsageToday]),function(e,t,i={immediate:!1}){const{immediate:n}=i,s=(0,o.useRef)(),a=(0,o.useRef)(!1);(0,o.useEffect)((()=>{const i=()=>t(s.current);a.current?i():(a.current=!0,n&&i()),s.current=e}),[e])}(null===(u=m.appContext)||void 0===u?void 0:u.user,(e=>{var t,i;"v0"!==h&&S&&(!e&&Boolean(null===(t=m.appContext)||void 0===t?void 0:t.user)?(g.init(),g.setLogin()):e&&!Boolean(null===(i=m.appContext)||void 0===i?void 0:i.user)&&(g.uploadScreenTime(),g.setNotLogin()))})),(0,o.useEffect)((()=>{"v0"!==h&&S&&(g.uploadScreenTimeWhenDayChange(),g.init())}),[v.dayChange]),(0,o.useEffect)((()=>{"v0"!==h&&S&&v.tenMinutesInterval&&g.uploadScreenTime()}),[v.tenMinutesInterval]),(0,o.useEffect)((()=>{"v0"!==h&&S&&v.defaultDailySTMPopup&&(g.setIsDisplayOtherPopupWhenTimeBreak(!0),g.uploadScreenTime({uploadType:5}))}),[v.defaultDailySTMPopup]),(0,o.useEffect)((()=>{"v0"!==h&&S&&(2===v.userIdentity||4===v.userIdentity&&v.isFpTeenOpenDailySTM)&&g.getParentInfo({})}),[v.userIdentity,v.isFpTeenOpenDailySTM]),(0,o.useEffect)((()=>{"v0"!==h&&S&&(v.isOpenSleepReminder&&!1===v.isPageHidden?(g.stopSleepReminder$(),g.openSleepReminder()):g.stopSleepReminder$())}),[v.isOpenSleepReminder,v.isPageHidden]),(0,o.useEffect)((()=>{"v0"!==h&&S&&v.sleepReminderPopup&&!v.isPageHidden&&g.setIsDisplayOtherPopupWhenTimeBreak(!0)}),[v.sleepReminderPopup,v.isPageHidden]),(0,o.useEffect)((()=>{"v0"!==h&&S&&v.durationReminder&&!v.isPageHidden&&(g.stopTimeBreak$(),g.processTimeBreak())}),[v.durationReminder,v.isPageHidden]),(0,o.useEffect)((()=>{"v0"!==h&&S&&localStorage.setItem(r.o4,JSON.stringify({event:"upload",value:v.lastUploadTime}))}),[v.lastUploadTime]),(0,o.useEffect)((()=>{"v0"===y&&v.shouldShowScheduledBreak&&g.disableScheduledBreak()}),[y,v.shouldShowScheduledBreak]),(0,o.useEffect)((()=>{"v0"!==h&&S&&"v0"!==y&&!v.isPageHidden&&v.scheduledBreakEnabled&&(g.scheduledBreakProcess(),g.stopScheduleBreak$(),g.startScheduledBreakTimer())}),[v.scheduledBreakEnabled,v.isPageHidden])}(0,u.Cg)([(0,g.uk)(),(0,u.Sn)("design:type",R.c)],ve.prototype,"stopTimer$",void 0),(0,u.Cg)([(0,g.uk)(),(0,u.Sn)("design:type",R.c)],ve.prototype,"stopSleepReminder$",void 0),(0,u.Cg)([(0,g.uk)(),(0,u.Sn)("design:type",R.c)],ve.prototype,"stopTimeBreak$",void 0),(0,u.Cg)([(0,g.uk)(),(0,u.Sn)("design:type",R.c)],ve.prototype,"stopScheduleBreak$",void 0),(0,u.Cg)([(0,g.uk)(),(0,u.Sn)("design:type",R.c)],ve.prototype,"stopStmLimitKidsMode$",void 0),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setUserSTMSetting",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setDefaultDailySTMPopup",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,String]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setparentUsername",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setSleepReminderPopup",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setBreakReminderPopup",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setDefaultDailyLimitKmPopup",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"showDefaultDailyLimitKmPopup",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"hideDefaultDailyLimitKmPopup",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"extendLimitKidsMode",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsPinSet",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setPageHidden",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setPageVisible",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setLogin",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setNotLogin",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsLogin",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setActiveTimeUsage",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setTimeUsageToday",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsOpenDailySTM",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setUserIdentity",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setUserSTMLimit",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setSTMInterventionType",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Date]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setLastUploadTime",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Date]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setDayChange",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setTenMinutesInterval",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setDurationReminder",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setDurationReminderType",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsDisplayOtherPopupWhenTimeBreak",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsTimeBreakSnooze",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsOpenSleepReminder",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setWeeklyScreenTimeUpdates",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setSTMManagementType",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setScheduledBreakSetting",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"disableScheduledBreak",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setScheduledBreakHidden",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setScheduledBreakShow",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setScheduledBreakRule",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Number]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setSTMManagementRepeatType",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Array]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setSTMManagementDaySetting",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Array]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setFPSTMManagementDaySetting",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Object]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setSleepTimeSettings",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsFpTeenOpenDailySTM",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setIsMinor",null),(0,u.Cg)([(0,g.h5)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[Object,Boolean]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"setShowDailyScreenTimeLimitsWeb",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"uploadAppOpentimes",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"uploadSleepReminderAction",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"getSTMManagement",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"getParentInfo",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"weeklyUpdateChangeHandler",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"init",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"initKidsMode",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"checkDailySTMPopupShow",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"dailySTMUpdateHandler",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"syncDailySTMUpdateHandler",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"startAccumulateActiveTime",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"startMonitorDayChange",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"startMonitorTimeLimit",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"startUploadSTMEveryTenMinutes",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"uploadScreenTime",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"uploadScreenTimeWhenDayChange",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"sessionDurationChangeHandler",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"syncSessionDurationHandler",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"processTimeBreak",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"startTimeBreakSnoozeTimer",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"openSleepReminder",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"sleepReminderChangeHandler",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"syncSleepSettingHandler",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"delaySleep",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"scheduledBreakProcess",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"startScheduledBreakTimer",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"stmLimitKidsModeProcess",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"extendLimitKidsModeProcess",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"startStmLimitKidsModeTimer",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"getTodayUsage",null),(0,u.Cg)([(0,g.Mj)(),(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[R.c]),(0,u.Sn)("design:returntype",void 0)],ve.prototype,"initCallKmDefaultLimit",null),ve=(0,u.Cg)([(0,m.n)("STMModule"),(0,u.Qj)(3,(0,_.y)(ue.hp)),(0,u.Sn)("design:paramtypes",[w,c.L,T.P,Function])],ve)},88149:(e,t,i)=>{i.d(t,{$4:()=>q,$r:()=>P,AP:()=>x,E1:()=>N,Eo:()=>y,Fl:()=>E,IX:()=>D,M4:()=>C,NF:()=>$,RC:()=>j,TP:()=>k,Tt:()=>O,Vn:()=>K,Vv:()=>R,WE:()=>U,ZO:()=>I,aO:()=>G,ac:()=>T,cE:()=>f,eb:()=>L,gQ:()=>B,gR:()=>w,hn:()=>A,kb:()=>S,tL:()=>F,tc:()=>M,u6:()=>b,vP:()=>H,vY:()=>z,vh:()=>V,yc:()=>W});var n=i(65622),s=i(63161),o=(i(12883),i(38527)),a=i(57180),r=i(22616),d=i(93122),l=i(97523),p=i(75935),c=i(98281),u=i(12688),v=i(23298),g=i(84770),m=i(64183),_=i(70965);const h="abTestVersion";function y(){const{isSmartPlayer:e}=(0,a.Qt)();return{isMobileUiOptimize:!e}}const f=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>[h]),[]));return{hasNonPersonalizedMenu:"v2"===(null!==(e=(0,u.qt)(t,l.W$))&&void 0!==e?e:"v1")}},S=e=>{var t,i;const{abTestVersion:n}=(0,c.L$)((0,r.W)((()=>[h]),[])),s=null!==(t=(0,u.qt)(n,"desktop_ui_reply"))&&void 0!==t?t:"v1",o="v5"===s,a="v6"===s;return{shouldAvatarShowNickName:"v2"===(null!==(i=(0,u.qt)(n,"desktop_avatar_nick_name"))&&void 0!==i?i:"v1"),shouldOptimizeCta:"v2"===s||o,allowRightPanelScroll:o||a,shouldOptimizeReply:o||a,onlyOptimizeCta:"v2"===s,shouldShowCommentsCnt:"v2"===s||"v3"===s||o||a,isDesktopUiOptDebugOn:(0,u.TQ)("desktop_ui_opt_debug")&&!e,shouldIncludeV3V4:a}};function b(e){const{vgeo:t}=(0,c.L$)((0,d.U)((()=>["vgeo"]),[])),{wid:i}=(0,c.L$)((0,r.W)((()=>["wid"]),[])),n=function(e){var t;const{abTestVersion:i}=(0,c.L$)((0,r.W)((()=>[h]),[]));return null!==(t=(0,u.qt)(i,e))&&void 0!==t?t:"v1"}(e);return{vgeo:t,wid:i,vid:n}}function w(){var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>[h]),[])),i=null!==(e=(0,u.qt)(t,"remove_tooltip"))&&void 0!==e?e:"v0";return{removeUploadPop:"v1"===i,removeLivePop:"v1"===i,removeEditProfilePop:"v1"===i,removeOtherPop:"v4"===i,removeShortcutPop:"v5"===i}}function T(){const{pathname:e}=(0,s.zy)(),t=(0,p.Ig)()?"v1":"v2",i=(0,o.Fj)(e),n="v1"!==t,a="v1"!==t;return{isVideoPlayerOptimization:n,hasPip:a,isUIOptimization:!1,isVideoDetailUIOptimization:!1,hasVideoDetailPip:a&&i,isVideoDetailExperiment:"v1"!==t&&i,isVideoDetailPlayerExperiment:n&&i}}const C=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return{isOpenNewTab:"v2"===(null!==(e=(0,u.qt)(t,"webapp_browser_mode_new_tab"))&&void 0!==e?e:"v1")}},k=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,u.qt)(t,"sidenav_test"))&&void 0!==e?e:"v1")},M=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,u.qt)(t,"use_follow_v2"))&&void 0!==e?e:"v1")},O=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return"v1"===(null!==(e=(0,u.qt)(t,"enable_ml_model_suggest_content"))&&void 0!==e?e:"v0")},P=({enterFrom:e,linkIncludeVid:t})=>{var i;const{abTestVersion:n}=(0,c.L$)((0,r.W)((()=>[h]),[])),s=null!==(i=(0,u.qt)(n,"studio_web_eh_entrance_v3"))&&void 0!==i?i:"v1";let o="https://effecthouse.tiktok.com/download?utm_source=tiktok_webapp_main";return e&&(o=`${o}&enter_from=${e}`),t&&(o=`${o}&utm_campaign=ttweb_entrance_${s}`),{showEhEntrance:!0,entranceVariant:s,ehLink:o}},I=()=>{const{abTestVersion:e}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),t=(0,u.qt)(e,"project_ace_control");return"v0"===t||"v1"===t},L=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,u.qt)(t,"add_profile_left_bar"))&&void 0!==e?e:"v0";return{showProfileLeftBar:"v1"===i||"v3"===i,enableClickTopRightIcon:"v2"===i||"v3"===i}},j=()=>{var e;const{abTestVersion:t,user:i}=(0,c.L$)((0,r.W)((()=>["abTestVersion","user"]),[])),n=!!i;return"v1"===(null!==(e=(0,u.qt)(t,"friends_tab"))&&void 0!==e?e:"v0")&&n},x=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,u.qt)(t,"use_profile_avatar"))&&void 0!==e?e:"v1")},E=()=>{var e,t,i,n;return{isRepostLabelEnabled:"v0"!==(null!==(e=(0,u.d)("webapp_repost_label"))&&void 0!==e?e:"v0"),isRepostTabEnabled:"v0"!==(null!==(t=(0,u.d)("webapp_repost_tab"))&&void 0!==t?t:"v0"),repostActionVid:null!==(i=(0,u.d)("webapp_repost_action"))&&void 0!==i?i:"v0",isRepostNoticeEnabled:"v0"!==(null!==(n=(0,u.d)("webapp_repost_notice"))&&void 0!==n?n:"v0")}},A=()=>E(),D=()=>{var e;const t=null!==(e=(0,u.d)("webapp_jotai_foryou"))&&void 0!==e?e:"v0",i=Number(t.substring(1));return{foryou:{isForyouListJotai:"v1"===t||"v3"===t,isLoginJotai:i>=2,isSeekBarJotai:i>=2,isContextMenuJotai:i>=2,isAppPromotionJotai:i>=2}}},F=()=>(0,n.useMemo)(D,[]),U=()=>{var e;const t="webapp_auto_dark_mode_data_collection",{abTestVersion:i}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),s=null!==(e=(0,_.sT)(i,t))&&void 0!==e?e:"v0",{isInAutoDarkModeExperiment:o,isInAutoDarkModeControl:a,isInAutoDarkModeTreatment:d}=(0,n.useMemo)((()=>({isInAutoDarkModeExperiment:"v0"===s||"v1"===s,isInAutoDarkModeControl:"v0"===s,isInAutoDarkModeTreatment:"v1"===s})),[s]);return{baseExpId:t,isInAutoDarkModeControl:a,isInAutoDarkModeTreatment:d,isInAutoDarkModeExperiment:o}},R=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,u.qt)(t,"use_container_exp"))&&void 0!==e?e:"v0";return{isInProductHoldout:"v1"===i||"v3"===i,isInPerformanceHoldout:"v2"===i||"v3"===i}},B=()=>{var e,t;const{abTestVersion:i}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return{count:null!==(t={v0:10,v1:5,v2:8,v3:12}[null!==(e=(0,u.qt)(i,"search_yml_guess_count"))&&void 0!==e?e:"v0"])&&void 0!==t?t:10}},N=()=>{var e;const{abTestVersion:t,user:i}=(0,c.L$)((0,r.W)((()=>["abTestVersion","user"]),[])),n=null!==(e=(0,u.qt)(t,"use_navigation_refactor"))&&void 0!==e?e:"v0";return{showUpload:!("v5"===n&&!i),condenseProfileDropdown:"v5"===n}},$=()=>{var e,t;const{abTestVersion:i,user:n}=(0,c.L$)((0,r.W)((()=>["abTestVersion","user"]),[])),s=!!n;return{enableUploadRefactor:"v1"===(null!==(e=(0,u.qt)(i,"enable_upload_refactor"))&&void 0!==e?e:"v0")&&s,enableMessageRefactor:"v1"===(null!==(t=(0,u.qt)(i,"enable_message_refactor"))&&void 0!==t?t:"v0")&&s}},V=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,u.qt)(t,"use_left_navigation_refactor"))&&void 0!==e?e:"v0";return{showNewLiveIcon:"v1"===i||"v3"===i,isCollapsibleFooter:"v2"===i||"v3"===i}},W=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return null!==(e=(0,u.qt)(t,"webapp_explore_nav_order"))&&void 0!==e?e:"v0"},H=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,u.qt)(t,"detail_page_comments_right_side"))&&void 0!==e?e:"v0";return{showRightSideComments:"v0"!==i,showCommentTabDefault:"v1"===i||"v3"===i,showFloatingDescription:"v3"===i||"v4"===i}},q=()=>{var e;const t=null!==(e=(0,u.d)("webapp_inapp_notice"))&&void 0!==e?e:"v0";return{isInAppNotificationEnabled:"v0"!==t,placement:"v1"===t||"v2"===t?"topEnd":"bottomEnd",layoutType:"v1"===t||"v3"===t?"withoutHeader":"withHeader"}},z=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,u.qt)(t,"nav_phase_3"))&&void 0!==e?e:"v0",n="v0"!==i,o=[v.OZ.messages,v.OZ.setting,v.OZ.settingBlockList,v.OZ.feedback,v.OZ.feedbackReport,v.OZ.feedbackHistory,v.OZ.upload,g.vI.kycSubmission,g.vI.kyc,g.vI.kycLoading,g.vI.kycPoa,m.tH.loginHome,m.tH.signupHome,v.OZ.download,...v.OZ.downloadWithLang],{pathname:a}=(0,s.zy)();return{vid:i,isInNavPhase3:n,showFullSideNav:!(0,s.B6)(a,{path:o,exact:!0})&&"v0"!==i}},K=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[]));return"v0"!==(null!==(e=(0,u.qt)(t,"global_web_footer"))&&void 0!==e?e:"v0")},G=()=>{var e;const{abTestVersion:t}=(0,c.L$)((0,r.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,u.qt)(t,"guest_mode_interest"))&&void 0!==e?e:"v0";return{showGuestModeInterestSelector:"v0"!==i,showContinueButton:"v2"!==i}}},14218:(e,t,i)=>{i.d(t,{Ah:()=>$,F3:()=>l,HF:()=>B,Iw:()=>T,K2:()=>L,Kt:()=>s,LA:()=>I,Ly:()=>E,M2:()=>P,Nd:()=>W,Nj:()=>C,Nu:()=>j,O_:()=>S,QI:()=>w,RM:()=>m,S0:()=>y,Uw:()=>A,VD:()=>F,Z3:()=>a,_:()=>c,_O:()=>v,aF:()=>O,em:()=>f,fm:()=>d,gM:()=>h,iJ:()=>b,i_:()=>U,je:()=>_,n9:()=>N,rd:()=>x,se:()=>z,sj:()=>p,tD:()=>g,tS:()=>R,un:()=>u,vt:()=>o,vu:()=>D,xE:()=>M,z$:()=>k,z3:()=>r});var n=i(29343);const s="webapp-live-nav-click",o="webapp_showed_profile_tip",a="search_history_list",r="webapp_showed_explore_new_label",d="showed_desktop_app_download",l="time_of_last_prediction",p="timeOfLastPopup",c="pc_app_auto_tip",u="pc_floating_player_guide_show_3",v="pc_floating_player_guide_ack_3",g="pc_floating_player_guide_show_4",m="pc_floating_player_guide_ack_4",_="pc_floating_player_guide_show_sw",h="suggest_account_bind_last_show",y="last_watch_live_on_pc",f="webapp_original_traffic_type",S="webapp_launch_mode",b="webapp_tiktok_open",w="webapp_tiktok_privious",T="webapp_open_edit_profile_modal_from",C="watch_live_on_pc",k="Sorry, something wrong with the server, please try again.",M=1988,O="tiktok_web",P=12,I=3e4,L=9,j=30,x=9,E=9,A=9,D=30,F=30,U="tiktok_webapp_feed_mode",R="tiktok_webapp_theme",B="tiktok_webapp_theme_manual",N="tiktok_webapp_theme_source",$={secure:!0,expires:300,domain:"www.tiktok.com"};var V;!function(e){e.DarkTheme="dark",e.LightTheme="light"}(V||(V={}));const W=n.$m.concat(["CH","US","GB"]),H="https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/",q="https://lf16-tiktok-web.tiktokcdn-us.com/obj/tiktok-web-tx/",z={ROW:{remScript:`${H}tiktok/static/nginx/rem-script.js`,slardarWeb:`${H}slardar/sdk-pre/browser.web.pre.js`,serviceWorker:`${H}tiktok/static/nginx/service-worker.js`},TTP:{remScript:`${q}tiktok/static/nginx/rem-script.js`,slardarWeb:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/tiktok-infra/csp/sdk-pre/slardar.web.pre.js",serviceWorker:`${q}tiktok/static/nginx/service-worker.js`}}},80312:(e,t,i)=>{i.d(t,{lD:()=>n,yH:()=>s});const n="tiktok_webapp_live",s="tiktok_webapp_login"},75572:(e,t,i)=>{i.d(t,{g:()=>l,l:()=>d});var n=i(45372),s=i.n(n),o=i(65622),a=i(52602);const r=(0,o.createContext)({counterRef:{current:0},scrollWidthRef:{current:0},subscribeRef:{current:[]},setCounter:s(),setScrollWidth:s(),subscribeModalChange:()=>s()});function d(){const e=(0,o.useRef)(0),t=(0,o.useRef)(0),i=(0,o.useRef)([]),n=(0,o.useCallback)((t=>{e.current=t}),[]),s=(0,o.useCallback)((e=>{t.current=e}),[]),a=(0,o.useCallback)((e=>(i.current.push(e),()=>{const t=i.current.indexOf(e);i.current.splice(t)})),[]),d=(0,o.useMemo)((()=>({counterRef:e,subscribeRef:i,scrollWidthRef:t,setCounter:n,setScrollWidth:s,subscribeModalChange:a})),[a,n,s]);return{GlobalModalProvider:r.Provider,value:d}}function l(){const{counterRef:e,setCounter:t,setScrollWidth:i,subscribeRef:n,scrollWidthRef:s,subscribeModalChange:d}=(0,o.useContext)(r),l=(0,o.useCallback)((e=>{n.current.forEach((t=>{t({hasModal:e,scrollWidth:s.current})}))}),[s,n]);return{showModal:(0,o.useCallback)(((n,s)=>{if(!(0,a.Lm)()&&!n||s)return;const{current:o}=e;if(t(o+1),0===o){const e=(0,a.aP)();i(e),document.body.style.paddingRight=`${e}px`,document.body.className+=" hidden",l(!0)}}),[e,l,t,i]),hideModal:(0,o.useCallback)((()=>{const{current:n}=e,s=Math.max(0,n-1);t(s),0===s&&(i(0),document.body.className=document.body.className.replace(/\s?hidden/g,""),document.body.style.paddingRight="0px",l(!1))}),[e,l,t,i]),subscribeModalChange:d}}},67093:(e,t,i)=>{i.d(t,{K:()=>r});var n=i(65622),s=i(18898),o=i(56139),a=i(61942);function r(e,t,i){function r(o,r,d){const l=e(),p=i.useServiceState(o,null!=r?r:a.bN),c=(0,s.P)(t,{selector:o,dependencies:null!=d?d:[]});return(0,n.useMemo)((()=>l?p:c),[l,p,c])}function d(){const s=e(),a=i.useServiceDispatchers(),r=(0,o.w)(t);return(0,n.useMemo)((()=>s?a:r),[s,a,r])}return{useSigiOrJotaiService:function(e,t,i){const s=r(e,t,i),o=d();return(0,n.useMemo)((()=>[s,o]),[s,o])},useSigiOrJotaiState:r,useSigiOrJotaiDispatchers:d}}},75935:(e,t,i)=>{i.d(t,{Ig:()=>d,_Y:()=>l});var n=i(63161),s=i(23298),o=i(97614),a=i(61942),r=i(1114);const d=()=>{const{search:e}=(0,n.zy)();return"business"===new URLSearchParams(e).get("scene")},l=e=>{const t=(0,o.VR)((e=>e.businessPermission),a.bN),{isElectronApp:i}=(0,r.B)();return{path:t.message?`/business-suite/messages?from=homepage&lang=${e}`:`${s.OZ.messages}?lang=${e}`,target:i&&t.message?"_blank":void 0}}},19892:(e,t,i)=>{i.d(t,{Qb:()=>v,Ti:()=>g});var n,s=i(11379),o=i(41735),a=i(25724),r=i(29756),d=i(14424),l=i(38397),p=i(27737),c=i(14874);!function(e){e.Basic="basic",e.Inference="inference"}(n||(n={}));const u=(0,a.atom)({});u.debugLabel="experimentAtom";const{useServiceDispatchers:v,useServiceState:g}=(0,r.i)(u,((e,t)=>({getAbTestVidWithQuerySPA:i=>{var s,o,a,r,d;const{baseExpId:l,inferenceExpId:p,baseVid:c,inferenceVid:v,wid:g,upliftModelInfo:m}=i;let _={};try{_=JSON.parse(null!==(s=m)&&void 0!==s?s:"{}")}catch(e){console.error("Error. Failed to parse uplift model info. ",e)}const h=!(c||!v),y=null!==(r=null===(a=null===(o=null==_?void 0:_[l])||void 0===o?void 0:o[v])||void 0===a?void 0:a.prediction_threshold)&&void 0!==r?r:"";return e(u)[l]||t(u,(e=>Object.assign(Object.assign({},e),{[l]:{baseExpId:l,inferenceExpId:p,vid:h?v:c,wid:g,type:h?n.Inference:n.Basic,inferenceCount:0,predictionThreshold:parseFloat(y)||0}}))),null===(d=e(u)[l])||void 0===d?void 0:d.vid},disqualifyForInference:(e,t,i,n)=>{o.w.handleInferenceDisqualify({enter_method:t,model_name:e,reason:n,page_name:i})},maybeTriggerInference:(i,a,r)=>(0,s.sH)(void 0,void 0,void 0,(function*(){const s=e(u)[i];if(!s)return void console.log("Error. Unuable to find the experiment: ",i);const{wid:v,type:g,vid:m,inferenceCount:_,inferenceExpId:h,predictionThreshold:y}=s,f=(0,d.ZC)(v,l.uV,p.gb);if(g===n.Basic||"v0"===m)o.w.handleInferenceTrigger({enter_method:a,page_name:r,model_name:"v0"===m?`${i}_rct_control`:`${i}_rct_treatment`,payload:null==f?void 0:f.toString(),threshold_exceed:"v0"===m?0:1,inference_result:-1});else if(g===n.Inference&&"v0"!==m&&0===_){const e=yield(0,c.HC)(v,m,i,"segment_default",y,a,r,!1,0);t(u,(t=>Object.assign(Object.assign({},t),{[i]:{baseExpId:i,inferenceExpId:h,vid:e?m:"v0",wid:v,type:n.Inference,inferenceCount:_+1,predictionThreshold:y}})))}}))})))},70965:(e,t,i)=>{i.d(t,{P7:()=>L,sT:()=>j});var n,s=i(11379),o=i(65622),a=i(63161),r=i(22616),d=i(85107),l=i(93122),p=i(98281),c=i(12688),u=i(46834),v=i(14874),g=i(52602),m=i(38527),_=i(14218),h=i(5577),y=i(64667),f=i(25724),S=i(29756);!function(e){e[e.None=0]="None",e[e.PromotePopupTip=1]="PromotePopupTip",e[e.LoginPopup=2]="LoginPopup",e[e.InterestSelector=3]="InterestSelector"}(n||(n={}));const b=new class{constructor(){this.priorityKeys=[],this.endPriorityKeys=[]}start(e){this.endPriorityKeys.filter((t=>t!==e))}end(e){if(!this.endPriorityKeys.includes(e)){this.endPriorityKeys.push(e);const t=this.priorityKeys.find((e=>!this.endPriorityKeys.includes(e)));if(t)return t}return null}remove(e){this.priorityKeys.filter((t=>t!==e))}add(e){this.priorityKeys.includes(e)||(this.priorityKeys=[...this.priorityKeys,e].sort(((e,t)=>e-t)))}clean(){this.priorityKeys=[],this.endPriorityKeys=[]}},w={0:!0,1:!1,2:!1,3:!1},T=(0,f.atom)({priority:0,isReadyList:w}),C=(0,f.atom)((e=>Object.values(e(T).isReadyList).reduce(((e,t)=>e&&t)))),{useAtomService:k,useServiceDispatchers:M,useServiceState:O}=(0,S.i)(T,((e,t)=>({setIsPopupPriorityReady(i){const n=e(T);if(t(T,Object.assign(Object.assign({},n),{isReadyList:Object.assign(Object.assign({},n.isReadyList),{[i]:!0})})),e(C)){const i=b.end(0);i?t(T,Object.assign(Object.assign({},e(T)),{priority:i})):b.clean()}},clearReadyListOnRouteChange(){const i=e(T);t(T,Object.assign(Object.assign({},i),{isReadyList:w})),b.clean()},getPriorityPopup:i=>({handlePopoverInitial:()=>{b.start(i)},handlePopoverEnd:()=>{const n=e(T).priority;if(i!==n)b.remove(i);else{const n=b.end(i);n?t(T,Object.assign(Object.assign({},e(T)),{priority:n})):(b.clean(),t(T,Object.assign(Object.assign({},e(T)),{priority:0})))}},handlePopoverAdd:()=>{if(b.add(i),e(C)){const i=b.end(0);i&&t(T,Object.assign(Object.assign({},e(T)),{priority:i}))}}})})));var P=i(19892),I=i(61942);function L(e={}){const t=(0,p.L$)((0,r.W)((()=>["user","wid","abTestVersion","webIdCreatedTime"]),[])),{user:i,abTestVersion:n,webIdCreatedTime:l}=t,f=(0,c.qt)(n,"webapp_login_prediction_full"),S=(0,c.qt)(n,"webapp_login_prediction_reverse"),b=(0,c.qt)(n,"webapp_login_causal_inference_validation"),{pathname:w}=(0,a.zy)(),T=(0,v.mv)(l),C=f||S,k=!!b&&"v1"!==b,{getPriorityPopup:P}=M(),{popupPriority:I}=O((e=>({popupPriority:e.priority,isReady:e.isReadyList[2]}))),{handlePopoverInitial:L,handlePopoverEnd:j}=P(2),x=()=>{var t;null===(t=e.closeCallback)||void 0===t||t.call(e),j()},E=(0,u.G)({modalConfig:Object.assign(Object.assign({closeable:!1,isGuestMode:!1,query:{enter_method:"model_based"}},e),{closeCallback:x})}),A=(0,u.G)({modalConfig:Object.assign(Object.assign({query:{enter_method:"guest_mode"},isGuestMode:!1,isGuestModeUI:!0},e),{closeCallback:x})}),D=(0,d.b1)(),F=(0,o.useCallback)(((e,t,n)=>(0,s.sH)(this,void 0,void 0,(function*(){if(i)return;void 0!==t&&-1>=t&&(0,v.CE)(n)&&2===I&&((0,g.AP)(_.sj,Date.now().toString()),A(),L()),D.setCheckPredictionLogin({showLoginOnLoad:Boolean(!1)})}))),[i,C,k,b,I,D,E,L,A]);return{loginPredictionHandler:(0,o.useCallback)((()=>{const e=(0,g.Hd)(_.iJ),t=(0,v.Vw)(T,e),n=[{expId:"webapp_login_prediction_full",segmentId:t,versionId:f,propertyList:["prediction_threshold"]},{expId:"webapp_login_prediction_reverse",segmentId:t,versionId:S,propertyList:["prediction_threshold"]}],{prediction_threshold:s,guest_mode_threshold:o,popup_interval:a}=(0,h.J)(y.a,n);i||void 0===s&&void 0===o&&!b?D.setCheckPredictionLogin({showLoginOnLoad:!1}):!(0,v.oX)("app_load","","")||(0,m.mQ)(w)||(0,m.FJ)(w)||F(s,o,a)}),[T,f,S,i,b,w,F,D])}}function j(e,t,i){const n=null!=i?i:`${t}_spa`,{wid:s}=(0,p.L$)((0,r.W)((()=>["wid"]),[])),{upliftModelInfo:o}=(0,p.L$)((0,l.U)((()=>["upliftModelInfo"]),[])),a=(0,c.qt)(e,t),d=(0,c.qt)(e,n);(0,P.Qb)().getAbTestVidWithQuerySPA({baseExpId:t,inferenceExpId:n,baseVid:a,inferenceVid:d,wid:s,upliftModelInfo:o});const{vid:u}=(0,p.L$)((0,P.Ti)((e=>e[t]),I.bN));return u}},14874:(e,t,i)=>{i.d(t,{HC:()=>y,Vw:()=>w,CE:()=>T,mv:()=>b,oX:()=>h,_0:()=>f,O6:()=>S});var n,s=i(11379),o=i(69872),a=i(52602);!function(e){e[e.S=1]="S",e[e.T=2]="T",e[e.X=3]="X",e[e.R=4]="R"}(n||(n={}));const r="/node-webapp/api/inference";var d=i(14218),l=i(14424),p=i(38397),c=i(27737),u=i(5577);const v={webapp_auto_dark_mode_data_collection:{segment_default:{v1:[{name:"model_name",value:"webapp_auto_dark_mode_data_collection_vv_r",priority:1},{name:"model_type",value:n.R,priority:1},{name:"feature_number",value:349,priority:1}]}},webapp_causal_inference_auto_scroll_validation:{segment_default:{v2:[{name:"model_name",value:"webapp_causal_inference_auto_scroll_rr1_s_model",priority:1},{name:"model_type",value:n.S,priority:1},{name:"feature_number",value:81,priority:1},{name:"prediction_threshold",value:0,priority:1}],v3:[{name:"model_name",value:"webapp_causal_inference_auto_scroll_play_duration_s_model",priority:1},{name:"model_type",value:n.S,priority:1},{name:"feature_number",value:81,priority:1},{name:"prediction_threshold",value:0,priority:1}]}},video_detail_end_card:{segment_default:{v1:[{name:"model_name",value:"video_detail_end_card_v1",priority:1},{name:"model_type",value:n.R,priority:1},{name:"feature_number",value:349,priority:1}],v2:[{name:"model_name",value:"video_detail_end_card_v2",priority:1},{name:"model_type",value:n.R,priority:1},{name:"feature_number",value:349,priority:1}]}}};var g=i(41735);const m=["homepage_hot","others_homepage"];const _=({expId:e,segmentId:t,vid:i,enterMethod:n,pageName:s})=>{const{model_name:o,model_type:a,feature_number:r}=(0,u.J)(v,[{expId:e,segmentId:t,versionId:i,propertyList:["model_name","model_type","feature_number"]}]);if(void 0!==o&&void 0!==a&&void 0!==r)return{modelName:o,modelType:a,featureNumber:r};g.w.handleInferenceDisqualify({enter_method:n,model_name:o,reason:"failed_to_get_model_meta_data",page_name:s})},h=(e,t="",i="")=>{const n=(0,a._S)(d.F3);return!n||Date.now()-parseInt(n,10)>=1e3?((0,a.AP)(d.F3,Date.now().toString()),!0):(g.w.handleInferenceDisqualify({enter_method:e,model_name:t,reason:"api_rate_control",page_name:i}),!1)};function y(e,t,n,a="segment_default",d,u,v,m,y){var f,S;return(0,s.sH)(this,void 0,void 0,(function*(){if(!h(u,"",v))return!1;const b=_({expId:n,segmentId:a,vid:t,enterMethod:u,pageName:v});if(!b)return!1;const{modelName:w,modelType:T,featureNumber:C}=b,k=(0,l.ZC)(e||"",p.uV,c.gb);if(0===k.length)return g.w.handleInferenceDisqualify({enter_method:u,model_name:w,reason:"failed_to_generate_payload",page_name:v}),!1;let M=[];if(m&&y)M=[y];else try{M=yield function(e,t,n){return(0,s.sH)(this,void 0,void 0,(function*(){const s=yield i.g.fetch((0,o.stringifyUrl)({url:r,query:{fvaluesString:e.toString(),modelName:t,modelType:n}})).then((e=>e.json()));return 0!==s.statusCode&&console.error(`Unable to get causal inference: ${s.statusCode}`),s.result}))}(k.slice(0,C),w,T)}catch(e){return console.error("Unable to call inference API!",e),g.w.handleInferenceTrigger({enter_method:u,page_name:v,model_name:w,payload:null===(f=null==k?void 0:k.slice(0,C))||void 0===f?void 0:f.toString(),threshold_exceed:0,inference_result:-1}),!1}const[O]=M,P=!(void 0===O||-1===O)&&O>d;return g.w.handleInferenceTrigger({enter_method:u,page_name:v,model_name:w,payload:null===(S=null==k?void 0:k.slice(0,C))||void 0===S?void 0:S.toString(),threshold_exceed:P?1:0,inference_result:O}),P}))}const f=e=>(0,s.sH)(void 0,void 0,void 0,(function*(){const{isMuted:t,enterMethod:i,modelName:n,pageName:s,wid:o,vid:a,expId:r,segmentId:d="segment_default",isSimulated:l,simulatedResult:p,setMute:c}=e;t?g.w.handleInferenceDisqualify({enter_method:i,model_name:n,reason:"already_treated",page_name:s}):(yield y(o,a,r,d,0,i,s,l,p))&&c(!0)})),S=e=>(0,s.sH)(void 0,void 0,void 0,(function*(){const{isAutoScroll:t=!1,enterMethod:i,modelName:n,pageName:s,vid:o,setIsAutoScroll:r}=e;(0,a._S)("auto_scroll")?g.w.handleInferenceDisqualify({enter_method:i,model_name:n,reason:"manually_set",page_name:s}):t?g.w.handleInferenceDisqualify({enter_method:i,model_name:n,reason:"already_treated",page_name:s}):r("v3"===o)})),b=(e=0)=>{const t=(0,a._S)("old_user_ppe_test");return"1"!==t&&("0"===t||Date.now()/1e3-e<86400)},w=(e=!0,t="")=>e?"segment_1":(m.includes(t),"segment_default"),T=(e=6e4)=>{const t=(0,a._S)(d.sj);return!t||Date.now()-parseInt(t,10)>=e}},64667:(e,t,i)=>{i.d(t,{a:()=>n});const n={online:{segment_default:{v1:[{name:"popup_interval",value:432e5,priority:0}]}},webapp_mobile_web2app_cta_guide:{segment_default:{v1:[{name:"prediction_threshold",value:.001,priority:1}],v2:[{name:"prediction_threshold",value:.009,priority:1}],v3:[{name:"prediction_threshold",value:.03,priority:1}],v4:[{name:"prediction_threshold",value:.07,priority:1}]}},webapp_login_prediction:{segment_default:{v2:[{name:"prediction_threshold",value:.602572,priority:1},{name:"popup_interval",value:-1,priority:1}],v3:[{name:"prediction_threshold",value:.261145,priority:1},{name:"popup_interval",value:-1,priority:1}],v4:[{name:"prediction_threshold",value:.114536,priority:1},{name:"popup_interval",value:-1,priority:1}],v5:[{name:"prediction_threshold",value:.067758,priority:1},{name:"popup_interval",value:-1,priority:1}],v6:[{name:"prediction_threshold",value:.031474,priority:1},{name:"popup_interval",value:-1,priority:1}],v7:[{name:"prediction_threshold",value:.018922,priority:1},{name:"popup_interval",value:-1,priority:1}],v8:[{name:"prediction_threshold",value:.012345,priority:1},{name:"popup_interval",value:-1,priority:1}],v9:[{name:"prediction_threshold",value:.008136,priority:1},{name:"popup_interval",value:-1,priority:1}]}},webapp_causal_inference_periodic_popup_validation:{segment_default:{v1:[{name:"popup_interval",value:432e5,priority:1}],v2:[{name:"popup_interval",value:36e5,priority:1}],v3:[{name:"popup_interval",value:36e5,priority:1}],v4:[{name:"popup_interval",value:36e5,priority:1}],v5:[{name:"popup_interval",value:432e5,priority:1}],v6:[{name:"popup_interval",value:432e5,priority:1}],v7:[{name:"popup_interval",value:432e5,priority:1}]}},webapp_login_prediction_full:{segment_1:{v1:[{name:"prediction_threshold",value:.012345,priority:1},{name:"popup_interval",value:-1,priority:1}],v2:[{name:"prediction_threshold",value:.012345,priority:1},{name:"popup_interval",value:-1,priority:1}]},segment_2:{v1:[{name:"prediction_threshold",value:.114536,priority:1},{name:"popup_interval",value:-1,priority:1}],v2:[{name:"prediction_threshold",value:.114536,priority:1},{name:"popup_interval",value:-1,priority:1}]}},webapp_login_prediction_reverse:{segment_1:{v1:[{name:"prediction_threshold",value:.012345,priority:1},{name:"popup_interval",value:-1,priority:1}]},segment_2:{v1:[{name:"prediction_threshold",value:.114536,priority:1},{name:"popup_interval",value:-1,priority:1}]}},webapp_guest_mode:{segment_default:{v2:[{name:"cta_style",value:"default",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!1,priority:0}],v3:[{name:"cta_style",value:"default",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!0,priority:0}],v4:[{name:"cta_style",value:"default",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!1}],v5:[{name:"cta_style",value:"default",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!0}],v6:[{name:"cta_style",value:"line",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!1,priority:0}],v7:[{name:"cta_style",value:"line",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!0,priority:0}],v8:[{name:"cta_style",value:"line",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!1}],v9:[{name:"cta_style",value:"line",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!0}],v10:[{name:"cta_style",value:"primary",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!1,priority:0}],v11:[{name:"cta_style",value:"primary",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!0,priority:0}],v12:[{name:"cta_style",value:"primary",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!1}],v13:[{name:"cta_style",value:"primary",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!0}],v14:[{name:"cta_style",value:"text",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!1,priority:0}],v15:[{name:"cta_style",value:"text",priority:0},{name:"login_text",value:"pcWeb_guestLogin_without",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_withoutSignup",priority:0},{name:"close_icon",value:!0,priority:0}],v16:[{name:"cta_style",value:"text",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!1}],v17:[{name:"cta_style",value:"text",priority:0},{name:"login_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"signup_text",value:"pcWeb_guestLogin_guest",priority:0},{name:"close_icon",value:!0}]}},mobile_predictive_data:{segment_default:{v0:[{name:"vv_count",value:-1,priority:0}],v1:[{name:"vv_count",value:3,priority:0}],v2:[{name:"vv_count",value:4,priority:0}],v3:[{name:"vv_count",value:5,priority:0}],v4:[{name:"vv_count",value:6,priority:0}],v5:[{name:"vv_count",value:7,priority:0}],v6:[{name:"vv_count",value:8,priority:0}],v7:[{name:"vv_count",value:9,priority:0}],v8:[{name:"vv_count",value:10,priority:0}],v9:[{name:"vv_count",value:11,priority:0}],v10:[{name:"vv_count",value:12,priority:0}],v11:[{name:"vv_count",value:13,priority:0}],v12:[{name:"vv_count",value:14,priority:0}],v13:[{name:"vv_count",value:15,priority:0}],v14:[{name:"vv_count",value:16,priority:0}],v15:[{name:"vv_count",value:17,priority:0}],v16:[{name:"vv_count",value:18,priority:0}],v17:[{name:"vv_count",value:19,priority:0}],v18:[{name:"vv_count",value:20,priority:0}],v19:[{name:"vv_count",value:21,priority:0}],v20:[{name:"vv_count",value:22,priority:0}],v21:[{name:"vv_count",value:23,priority:0}],v22:[{name:"vv_count",value:24,priority:0}],v23:[{name:"vv_count",value:25,priority:0}],v24:[{name:"vv_count",value:26,priority:0}],v25:[{name:"vv_count",value:27,priority:0}],v26:[{name:"vv_count",value:28,priority:0}],v27:[{name:"vv_count",value:29,priority:0}],v28:[{name:"vv_count",value:30,priority:0}],v29:[{name:"vv_count",value:31,priority:0}]}}}},5577:(e,t,i)=>{function n(e,t){const i={},n=function(e){const t=e.reduce(((e,t)=>{const{expId:i,segmentId:n,versionId:s,propertyList:o}=t;return i&&n&&s?(o.forEach((t=>{const o={expId:i,segmentId:n,versionId:s,propertyName:t};e[t]=e[t]||[],e[t].push(o)})),e):e}),{});return t}(t);for(const[t,o]of Object.entries(n)){const n=s(e,o);i[t]=n}return i}function s(e,t){const i=t.map((t=>function(e,{expId:t,segmentId:i,versionId:n,propertyName:s}){const o=e[t];if(!o)return void console.error(`Error. Experiment: ${t} not found!`);const a=o[i];if(!a)return;if(!n)return;const r=a[n];return r?r.find((e=>e.name===s)):void 0}(e,t))).filter((e=>void 0!==e));if(0!==i.length)return i.reduce(((e,t)=>t.priority>e.priority?t:e)).value}i.d(t,{J:()=>n})},19258:(e,t,i)=>{i.d(t,{HZ:()=>d,dg:()=>a,ug:()=>o}),i(27334);var n=i(65622),s=(i(92112),i(81591));(0,n.createContext)(!1);const o=(0,n.createContext)({enable:!0}),a={plugins:{ajax:{ignoreUrls:[".byteoversea.com",/mcs.*\.tiktok[vw]?\.(com|us|eu)/,".tiktokcdn.com",".tiktokcdn-us.com","mon.tiktokv.(com|us|eu)","ttwid/check","passport/token/beat/web",/.*-webapp-prime\.(.*\.)?tiktok\.com/]},fetch:{ignoreUrls:[".tiktokcdn.com",".tiktokcdn-us.com","mon.tiktokv.(com|us|eu)","policy/notice","feedback/v1/newest_reply","ba/business/suite/permission/list",/.*-webapp-prime\.(.*\.)?tiktok\.com/]},jsError:{ignoreErrors:["Blocked a frame with origin","__msg_type","vid_mate_check is not defined","ResizeObserver loop limit exceeded",'Video playback error: {"errorCode":',"Object Not Found Matching Id","The play method is not allowed by the user agent","The play() request was interrupted","Failed to load because no supported source was found","The request is not allowed by the user agent or the platform in the current context"]},resource:{slowSessionThreshold:1e5},fmp:!1,tti:!1,pageview:{sendInit:!0,routeMode:"manual"}},sample:{sample_rate:1,sample_granularity:"session",include_users:[],rules:{resource:{enable:!0,sample_rate:.01,conditional_sample_rules:[]},resource_error:{enable:!0,sample_rate:.05,conditional_sample_rules:[]},performance_longtask:{enable:!0,sample_rate:.001,conditional_sample_rules:[]}}},env:"production",release:"1.0.0.5005",slardarClient:"SlardarClient",manual:1,sdkUrl:s.Qn.row,pluginPathPrefix:s.tz.row};var r;!function(e){e.P0="fatal",e.P1="error",e.P2="warning",e.P3="info",e.P4="debug",e.P5="critical"}(r||(r={}));const d=["lcp","fp","fid","ttfb","mpfid","fcp","actual_fmp"];var l;!function(e){e.TTAPPluginInfo="ttapplugin_info",e.TTAPPluginFirstScreenRequest="ttapplugin_first_screen_request",e.TTAPPluginEffectiveOpenPage="ttapplugin_effective_open_page",e.TTAPPluginCustomRequest="ttapplugin_custom_request",e.actualFMP="actual_fmp",e.LoginClickToNotifyDuration="login_click_to_notify_duration"}(l||(l={}))},14962:(e,t,i)=>{i.d(t,{s:()=>n});const n=["live_context_optimize","live_react_query_cache","live_enter_room_chore","foryou_prefetch","islands_arch_video_detail","image_fetch_priority","video_reflow_skeleton_ui","video_reflow_mpa_optimization","video_reflow_csr_skeleton_enhance","live_chat_message_cache_opt","live_quick_chat_expand","user_bundle_opt","live_chat_refresh_rate_opt","sharing_video_first","live_recharge_login_sdk","islands_arch_rest_page","islands_arch_user_profile","react_upgrade_experiment","kep_streaming"]},8941:(e,t,i)=>{i.d(t,{rF:()=>d,sZ:()=>l,yf:()=>r});var n=i(11991),s=i(65622),o=i(99325),a=i(19258);function r(){const{enable:e=!0,enableHeadComponent:t,enableInlineScript:i,enableUseSlardarPageViewHook:n}=(0,s.useContext)(a.ug);return{enable:e,enableHeadComponent:null!=t?t:e,enableInlineScript:null!=i?i:e,enableUseSlardarPageViewHook:null!=n?n:e}}function d({pid:e}){const t=(0,n.Nj)(o.V),{enableUseSlardarPageViewHook:i}=r();(0,s.useEffect)((()=>{i&&(t.config({pid:e}),t.start(e))}),[e,t,i])}function l(){const{enable:e}=r();return e}},99325:(e,t,i)=>{i.d(t,{V:()=>b,Y:()=>w});var n=i(11379),s=i(49610),o=i(62631),a=i(18649),r=(i(10251),i(50374)),d=i(80312),l=i(19258),p=i(73564),c=i(88457),u=i(87079),v=i(81591),g=i(35706),m=i.n(g),_=i(87924),h=i.n(_),y=i(14962);const f=({message:e,defaultResult:t}={})=>(i,n,s)=>{const o=s.value;return s.value=function(...s){try{const r=o.apply(this,s);return(a=r)&&a instanceof Promise||("object"==typeof a||"function"==typeof a)&&"function"==typeof a.then&&"function"==typeof a.catch?r.catch((s=>(console.error(`${i.constructor.name}.${n.toString()}${e?` ${e}`:""}: ${s}`),t))):r}catch(s){return console.error(`${i.constructor.name}.${n.toString()}${e?` ${e}`:""}: ${s}`),t}var a},s};var S=i(11991);(0,c.fU)()||p.O.setGlobalSlardarName("SlardarClient");let b=class{constructor(){this.cachePreBid="",this._isPvFirstlyReported=!1,this._config=null,this._extraInfo=null,this._hasStart=!1,this._slardar=p.O}hasStarted(){return this._hasStart}mountBeforeSendEvent(){this._slardar.on("beforeSend",(e=>{var t,i,n,s;try{if("performance"===e.ev_type&&("metrics"in e.payload?e.payload.metrics.forEach(this.collectSlardarMetricsToTea):this.collectSlardarMetricsToTea(e.payload,null===(t=e.common)||void 0===t?void 0:t.pid)),"performance_timing"===e.ev_type){const{responseEnd:t,responseStart:o,domContentLoadedEventEnd:a,fetchStart:d,navigationStart:l}=null!==(i=e.payload.timing)&&void 0!==i?i:{},p=null!==(s=null===(n=e.payload.common)||void 0===n?void 0:n.pid)&&void 0!==s?s:"unknown",c=a-d,u=t-o,v=o-l;r.f.event("slardar_perf_domready",{metric_duration:c&&c>0?c.toString():-1,pid:p}),r.f.event("slardar_perf_response",{metric_duration:u&&u>0?u.toString():-1,pid:p}),r.f.event("slardar_perf_ttfb",{metric_duration:v&&v>0?v.toString():-1,pid:p})}}catch(e){}return e}))}init(e,t=!1,i={},n){this._option=n,t?this.preserveConfig(e):this._slardar.init(Object.assign({ttap:Object.assign({},i)},e))}start(e=""){this._config&&e&&!this._hasStart&&(this.init(Object.assign(Object.assign({},this._config),{pid:e})),this._hasStart=!0,this._extraInfo&&this.config(this._extraInfo)),this._slardar.start()}config(e){"pid"in e&&!this._isPvFirstlyReported&&(this._isPvFirstlyReported=!0,this.context({isLandingPage:0})),this._slardar.config(e)}registerImageXPlugin(e,t=.01){return e?(console.warn("[Slardar]imagex plugin not provided"),[]):[]}toggleLoginSlardar(e){var t,i;(null===(t=this._option)||void 0===t?void 0:t.disableToggleLoginSlardar)||(e?((null===(i=this._slardar.config())||void 0===i?void 0:i.bid)&&(this.cachePreBid=this._slardar.config().bid),this.config({bid:d.yH})):this.config({bid:this.cachePreBid}))}context(e){Object.entries(e).forEach((([e,t])=>{this._slardar.context({[e]:t})}))}captureMessage(e="",t,i={}){this._slardar.captureException("string"==typeof e?new Error(e):e,t?Object.assign(Object.assign({},i),{level:t}):i)}emitEvent(e,t,i){this._slardar.sendEvent({name:e,categories:i,metrics:t})}reportI18nLoadedFailed(e,t){this.emitEvent("I18nLoadFailed",{count:1},{staringName:e,lang:t})}sendLog(e,t,i){this._slardar.sendLog({content:e,level:t,extra:i})}sendPV(e){this._slardar.rawInstance()("sendPageview",e)}previousPid(){var e;return null===(e=this._slardar.config())||void 0===e?void 0:e.pid}sendCustomPerfMetric(e,t){const i=null!=t?t:performance.now();this._slardar.sendCustomPerfMetric({name:e,value:i,isCustom:!0})}preserveConfig(e){this._config=e}preserveExtraInfo(e){this._extraInfo=e}collectSlardarMetricsToTea(e,t){if(e.isSupport||e.isPolyfill){const i=e.name.toLowerCase();l.HZ.includes(i)&&r.f.event(`slardar_perf_${i}`,{metric_duration:e.value.toString(),pid:null!=t?t:"unknown",is_support:e.isSupport?"1":"0"})}}reportActualFMP(){return this._slardar.reportActualFMP()}reportRenderStart(){return this._slardar.reportRenderStart()}reportRenderEnd(){return this._slardar.reportRenderEnd()}reportFirstScreenRequest(e,t){this._slardar.reportFirstScreenRequest(e,t)}reportCustomRequest({name:e,startTime:t,endTime:i}){var n;const s=(null===(n=null===performance||void 0===performance?void 0:performance.timing)||void 0===n?void 0:n.navigationStart)||(null===performance||void 0===performance?void 0:performance.timeOrigin);this._slardar.reportCustomRequest(e,null!=t?t:s,i)}};b.start=(e,{bid:t,initLocation:i,appContext:n,bizContext:s,reportImage:o,slardarConfig:a={},ttapOption:r={},disableToggleLoginSlardar:d=!1,extractPid:p=e=>e,customContext:g,beforeStart:_})=>{var f,S,b;const{abTestVersion:w,env:T,botType:C,user:k,wid:M,region:O}=null!=n?n:{},{isMobile:P,isTTP:I,domains:L,idc:j}=null!=s?s:{},x=!!o||"v2"===(null===(f=null==w?void 0:w.parameters.enable_slardar_image)||void 0===f?void 0:f.vid),E=e=>{const t=p(e);return"delay_start_until_manually_called"===t?"unknown":t};return e.context(Object.assign(Object.assign(Object.assign({region:null!=O?O:"",botType:null!=C?C:"",isMobile:Boolean(P).toString(),isDowngrade:(0,c.qk)().toString(),isLogin:Boolean(k).toString(),isPPE:"ppe"===(null==T?void 0:T.type),isLandingPage:1,launchMode:(0,c.fU)()?"":(0,u.o7)()},h()(m()(null!==(S=null==w?void 0:w.parameters)&&void 0!==S?S:{},(e=>null==e?void 0:e.vid)),((e,t)=>y.s.includes(t)))),{uid:null!==(b=null==k?void 0:k.uid)&&void 0!==b?b:"",idc:null!=j?j:"unknown"}),g)),e.mountBeforeSendEvent(),e.init(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l.dg),{bid:t,env:"boe"===(null==T?void 0:T.type)||"ppe"===(null==T?void 0:T.type)?"test":"production",domain:null==L?void 0:L.slardar,useLocalConfig:"ppe"===(null==T?void 0:T.type)||"boe"===(null==T?void 0:T.type),integrations:[...e.registerImageXPlugin(x,o&&"boolean"!=typeof o?o.sample:void 0)]}),I?{sdkUrl:v.Qn.us,pluginPathPrefix:v.tz.us}:{}),{pid:E("string"==typeof i?i:i.pathname),userId:M}),a),!1,Object.assign({isSpa:!0},r),{disableToggleLoginSlardar:d}),"function"==typeof _?_().finally((()=>{e.start()})).catch((e=>{console.error("beforeStart failed",e)})):e.start(),{handleLocationChange:t=>{const i=E("string"==typeof t?t:t.pathname);e.context({isLandingPage:0}),e.sendPV(i)},slardar:e}},(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"mountBeforeSendEvent",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object,Object,Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"init",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[String]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"start",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"config",null),(0,n.Cg)([f({defaultResult:[]}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Boolean,Object]),(0,n.Sn)("design:returntype",Object)],b.prototype,"registerImageXPlugin",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Boolean]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"toggleLoginSlardar",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"context",null),(0,n.Cg)([f({message:"capture exception error"}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String,Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"captureMessage",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[String,Object,Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"emitEvent",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[String,String]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"reportI18nLoadedFailed",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[String,String,Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"sendLog",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[String]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"sendPV",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"previousPid",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[String,Number]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"sendCustomPerfMetric",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"preserveConfig",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"preserveExtraInfo",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"collectSlardarMetricsToTea",null),(0,n.Cg)([f({defaultResult:0}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",Number)],b.prototype,"reportActualFMP",null),(0,n.Cg)([f({defaultResult:0}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",Number)],b.prototype,"reportRenderStart",null),(0,n.Cg)([f({defaultResult:0}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",Number)],b.prototype,"reportRenderEnd",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Number,Number]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"reportFirstScreenRequest",null),(0,n.Cg)([f(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],b.prototype,"reportCustomRequest",null),b=(0,n.Cg)([(0,s._)()],b);const w=e=>{const t=new o.n(e);a.l.addProvider({provide:t,useClass:b});const i={provide:t,useExisting:t};let r,d=class extends b{constructor(){super(),this._slardar=p.O.create(e)}reportActualFMP(){return 0}reportFirstScreenRequest(){}reportRenderEnd(){return 0}reportRenderStart(){return 0}reportCustomRequest(){}};return d=(0,n.Cg)([(0,s._)(),(0,n.Sn)("design:paramtypes",[])],d),{inject:(e=d)=>{a.l.addProvider({provide:t,useClass:e})},getInstance:()=>a.l.getInstance(i),useInstance:()=>(0,S.Nj)(i),isIsolated:()=>a.l.getInstance(i)instanceof d,start:e=>{var t;const n=a.l.getInstance(i);if(n instanceof d)return r?r.handleLocationChange(e.initLocation):void(r=b.start(n,Object.assign(Object.assign({},e),{slardarConfig:Object.assign(Object.assign({},e.slardarConfig),{plugins:Object.assign(Object.assign(Object.assign({},l.dg.plugins),{performance:!1}),null===(t=e.slardarConfig)||void 0===t?void 0:t.plugins)})})))},handleLocationChange:e=>{null==r||r.handleLocationChange(e)},INJECTION_TOKEN:t}}},76769:(e,t,i)=>{i.d(t,{ct:()=>h,tF:()=>_});var n=i(11379),s=i(69872),o=i(65622),a=i(63161),r=i(36125),d=i(6023),l=i(88457),p=i(38527),c=i(22616),u=i(93122),v=i(99971),g=i(98281),m=i(70965);function _(e,t,i){var n;const s=(0,g.L$)((0,c.W)((()=>["region","user","wid","abTestVersion","language","odinId"]),[])),a=(0,g.L$)((0,u.U)((()=>["domains","vgeo"]),[])),{abTestVersion:d,user:p}=s,_=(0,v.mx)(d,null!==(n=null==p?void 0:p.uid)&&void 0!==n?n:"");(0,r.W0)(Object.assign(Object.assign({},a),s),(()=>Object.assign(Object.assign({},e()),{is_downgrade:(0,l.qk)(),is_non_personalized:_?"1":"0"})),t);const{loginPredictionHandler:h}=(0,m.P7)(i);(0,o.useEffect)((()=>{h()}),[h])}function h({eParams:e}){var t,i;const{botType:r,webIdCreatedTime:l}=null!==(t=(0,c.W)((()=>["botType","webIdCreatedTime"]),[]))&&void 0!==t?t:{},{isMobile:v}=null!==(i=(0,u.U)((()=>["isMobile"]),[]))&&void 0!==i?i:{},{search:g,pathname:m}=(0,a.zy)(),_=(0,s.parse)(g);return(0,o.useCallback)((()=>{const t=e||{},{is_from_webapp:i}=t,s=(0,n.Tt)(t,["is_from_webapp"]),o=_.sender_web_id?{sender_device:_.sender_device,sender_web_id:_.sender_web_id}:{},a=v||(0,p.tO)(m)||(c=`#${location.pathname}`,/^#\/@.*\/video\/\d+$/.test(c))||location.search.indexOf("item_id")>-1?Object.assign({is_from_webapp:i||["v1","v2","v3"].indexOf(_.is_from_webapp)>-1?_.is_from_webapp:"0"},o):{};var c;const u={browser_height:"undefined"!=typeof window?window.innerHeight:0,browser_width:"undefined"!=typeof window?window.innerWidth:0},g=Object.assign(Object.assign(Object.assign({bot_type:null!=r?r:"others",keyword:_.keyword,sub_keyword:_.sub_keyword,duration:performance.now(),webIdCreatedTime:l},s),a),u);d.O.handlePageView(g)}),[e,_.sender_web_id,_.sender_device,_.is_from_webapp,v,_.keyword,_.sub_keyword,m,r])}},60690:(e,t,i)=>{i.d(t,{BO:()=>a,i0:()=>r,lH:()=>o,sg:()=>d});const n=99,s="99+";function o(e,t=n,i=s){return e>t?i:String(e)}function a(e){var t;return void 0===e?"":e.url_list&&(null===(t=e.url_list)||void 0===t?void 0:t.length)>0?e.url_list[0]:""}const r={[-1]:-1,0:0,1:1,2:2,4:3};function d(e,t=!1){const{follower_count:i,following_count:n,aweme_count:s}=e;return{diggCount:0,followerCount:null!=i?i:0,followingCount:null!=n?n:0,heart:0,heartCount:0,videoCount:null!=s?s:0,needFix:t}}},28986:(e,t,i)=>{i.d(t,{Bv:()=>r,LU:()=>p,PC:()=>d,_w:()=>o,bc:()=>s,lL:()=>l});var n=i(50721);const s=new n.w1("frequency-control-config","local"),o=new n.w1("flip-control-config","local");var a;!function(e){e.Manual="manual",e.BrowserMode="browser_mode"}(a||(a={})),new n.w1("webapp-video-mute","local");const r=new n.w1("keyboard-shortcut-config","local"),d=(new n.w1("webapp-comment-url","session"),new n.w1("search-entry-block-map-storage","local")),l=new n.w1("fyp-feed-cache","local"),p=new n.w1("search_history_map","local");new n.w1("multi-account-info","local")},81050:(e,t,i)=>{i.d(t,{AF:()=>g,N2:()=>u,Q2:()=>v,oN:()=>l});var n=i(63161),s=i(23298),o=i(84770),a=i(64183),r=i(38527);const d=1e3;function l(e){return e.length>d?"":(0,r.tO)(e)?"homepage_hot":/^\/@(.*?)\/video\/(.*?)/.test(e)?"video_detail":/^\/@(.*?)/.test(e)?"others_homepage":/^\/music\//.test(e)?"single_song":/^\/effect\//.test(e)?"effect_detail":/^\/tag\//.test(e)?"challenge":/^\/following/.test(e)?"homepage_follow":/^\/explore/.test(e)?"explore_page":/^\/discover\/.+/.test(e)?"discover_kw":/^\/channel\/.+/.test(e)?"channel":/^\/discover/.test(e)?"discovery":/^\/profile/.test(e)?"personal_homepage":/^\/topics/.test(e)?`topic_${e.slice(1).split("/")[1]}`:/^\/inbox/.test(e)?"homepage_message":/^\/report/.test(e)?"report":/^\/ad-report/.test(e)?"report_ad":/^\/feedback\/report/.test(e)?"feedback_report":/^\/feedback\/history/.test(e)?"feedback_history":/^\/feedback/.test(e)?"feedback":(0,n.B6)(e,{path:s.OZ.searchHome,exact:!0})?"general_search":(0,n.B6)(e,{path:s.OZ.searchUser,exact:!0})?"search_user":(0,n.B6)(e,{path:s.OZ.searchVideo,exact:!0})?"search_video":/^\/playlist-music/.test(e)?"music_playlist":/^\/messages/.test(e)?"messages":/^\/setting/.test(e)?"setting":/^\/place/.test(e)?"place":/^\/@(.*?)\/collection\/(.*?)/.test(e)?"collection":/^\/@(.*?)\/playlist\/(.*?)/.test(e)?"reflow_video_playlist":/^\/download/.test(e)?"download":""}function p(e){return e.length>d?"":/^\/@(.*?)\/live\/(.*?)/.test(e)?"live_detail":(0,n.B6)(e,{path:o.vI.liveGoLive,exact:!0})?"live_take":(0,r.U0)(e)?"live_discover":(0,r.j)(e)?"live_event":(0,r.RR)(e)?"live_event_aggregation":(0,n.B6)(e,{path:o.vI.liveRoomEmbed,exact:!0})?"live_embed_detail":(0,n.B6)(e,{path:o.vI.liveRoom,exact:!0})?"live_detail":""}function c(e){return(0,n.B6)(e,{path:a.tH.loginHome,exact:!1})||(0,n.B6)(e,{path:a.tH.oauth,exact:!1})||(0,n.B6)(e,{path:a.tH.oauthLine,exact:!1})?"login":(0,n.B6)(e,{path:a.tH.signupHome,exact:!1})?"signup":""}function u(e){for(const t of[l,p,c]){const i=t(e);if(i)return i}return"unknown"}function v(){return location.pathname.startsWith(s.OZ.musicPlaylist.split(":")[0])&&location.pathname.length<=d?`${location.origin}${location.pathname.replace(/%23|%3F|%2F/g,"")}${location.search}`:location.href}function g(){return location.pathname.startsWith(s.OZ.musicPlaylist.split(":")[0])&&location.pathname.length<=d?`${location.origin}${location.pathname.replace(/%23|%3F|%2F/g,"")}`:`${location.origin}${location.pathname}`}},93295:(e,t,i)=>{i.d(t,{W:()=>m});var n=i(27334),s=i(11991),o=i(65622),a=i(45400),r=i(99325),d=i(2032),l=i(23810);const p=(0,d.default)("div",{target:"emuynwa0"})((({isFullScreen:e})=>e?{flex:"1 1 auto"}:null),{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",margin:"0 auto"},"label:DivErrorContainer;"),c=(0,d.default)("p",{target:"emuynwa1"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:n}})=>[e.H4,{fontFamily:i.TikTokDisplayFont,fontWeight:t.bold,color:n.TextPrimary,marginTop:"24px"}]),"label:PTitle;"),u=(0,d.default)("p",{target:"emuynwa2"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:n}})=>[e.P2,{fontFamily:i.TikTokFont,fontWeight:t.normal,color:n.TextSecondary,marginTop:"8px"}]),"label:PDesc;"),v=d.default.div`
  margin-top: 24px;
`,g=(0,d.default)(l.y,{target:"emuynwa3"})({marginTop:"24px"},"label:StyledButton;"),m=function(e){const{iconElem:t,title:i,desc:d,buttonText:l,button:m,isFullScreen:_,style:h,brightness:y=1,e2eTitle:f,e2eDesc:S,e2eButton:b,onButtonShow:w,ignoreErrorReport:T=!1}=e,C=(0,s.Nj)(r.V);return(0,o.useEffect)((()=>{(l||m)&&(null==w||w()),T||(C.emitEvent("handled_error_report",{},{}),a.T.handleRenderErrorEvent())}),[l,m,w,T,C]),(0,n.jsxs)(p,{isFullScreen:_,style:h,children:[t,i&&(0,n.jsx)(c,{"data-e2e":f,brightness:y,children:i}),d&&(0,n.jsx)(u,{"data-e2e":S,brightness:y,children:d}),m&&(0,n.jsx)(v,{"data-e2e":b,children:m}),!m&&Boolean(l)&&(0,n.jsx)(g,{type:"button",onClick:e.onButtonClick,buttonTheme:"default",size:"large",e2eTag:b,children:l})]})}},9685:(e,t,i)=>{i.d(t,{p:()=>C});var n=i(27334),s=i(556),o=i(56139),a=i(65622),r=i(69146),d=i(29385),l=i(98281),p=i(8941),c=i(22616);const u=function({iconSrc:e="https://www.tiktok.com/favicon.ico"}){return(0,n.jsxs)(r.mg,{children:[(0,n.jsx)("meta",{name:"google",content:"notranslate"},"google"),",",(0,n.jsx)("meta",{name:"format-detection",content:"telephone=no"},"format-detection"),",",(0,n.jsx)("link",{rel:"shortcut icon",href:e,type:"image/x-icon"},"shortcut")]})},v=["//v16.tiktokcdn.com","//p16-va.tiktokcdn.com","//s20.tiktokcdn.com"],g=function(){return(0,n.jsx)(r.mg,{children:v.map(((e,t)=>(0,n.jsx)("link",{rel:"dns-prefetch",href:e},`prefetch-${t+1}`)))})};var m=i(11991),_=i(87079),h=i(88457),y=i(14962),f=i(99325),S=i(19258),b=i(14218);const w=function({appContext:e,bizContext:t,slardarBid:i,initialPid:s,async:o=!1,reportImage:d}){var l,c;const{abTestVersion:u,env:v,botType:g,user:w,wid:T,region:C}=null!=e?e:{},{isMobile:k,domains:M,isTTP:O,idc:P}=null!=t?t:{},I=(0,m.Nj)(f.V),L=(0,a.useMemo)((()=>{var e;return Object.assign(Object.assign({region:null!=C?C:"",botType:null!=g?g:"",isMobile:Boolean(k).toString(),isDowngrade:(0,h.qk)().toString(),isLogin:Boolean(w).toString(),isPPE:"ppe"===(null==v?void 0:v.type),isLandingPage:1,launchMode:(0,h.fU)()?"":(0,_.o7)()},((e={parameters:{},versionName:""})=>{const t={};try{const i=e.parameters||{};Object.entries(i).forEach((([e,i])=>{y.s.includes(e)&&(t[e]=i.vid)}))}catch(e){console.error("Abtest config parse error",e)}return t})(u)),{uid:null!==(e=null==w?void 0:w.uid)&&void 0!==e?e:"",idc:null!=P?P:"unknown"})}),[C,g,k,w,null==v?void 0:v.type,u]),{enableInlineScript:j}=(0,p.yf)(),x=!!d||"v2"===(null===(c=null===(l=null==u?void 0:u.parameters)||void 0===l?void 0:l.enable_slardar_image)||void 0===c?void 0:c.vid),E=(0,a.useMemo)((()=>Object.assign(Object.assign(Object.assign({},S.dg),{bid:i,env:"boe"===(null==v?void 0:v.type)||"ppe"===(null==v?void 0:v.type)?"test":"production",domain:null==M?void 0:M.slardar,disableInit:!0,useLocalConfig:"ppe"===(null==v?void 0:v.type)||"boe"===(null==v?void 0:v.type),integrations:[...I.registerImageXPlugin(x,d&&"boolean"!=typeof d?d.sample:void 0)]}),O?{sdkUrl:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/slardar/fe/sdk-web/browser.oci.js",pluginPathPrefix:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/slardar/fe/sdk-web/plugins"}:{})),[null==M?void 0:M.slardar,null==v?void 0:v.type,O,i]),A=(0,a.useMemo)((()=>JSON.stringify(E)),[E]);return(0,a.useEffect)((()=>{let e;const t=()=>{window.SlardarClient?I.hasStarted()||(I.mountBeforeSendEvent(),I.init(Object.assign(Object.assign({},E),{pid:s})),I.config({userId:T}),I.start()):e=window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,1)};return I.context(L),"delay_start_until_manually_called"===s?(I.preserveConfig(E),I.preserveExtraInfo({userId:T})):(I.mountBeforeSendEvent(),I.init(Object.assign(Object.assign({},E),{pid:s})),I.config({userId:T}),I.start(),e=window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,1)),()=>{window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e)}}),[]),!j||(0,h._8)(o)?null:(0,n.jsxs)(r.mg,{children:[(0,n.jsx)("script",{id:"slardar-config",type:"application/json",children:A}),o?(0,n.jsx)("script",{src:b.se[O?"TTP":"ROW"].slardarWeb,async:"DO_NOT_DELETE_FOR_REHYDRATE_ERROR"}):(0,n.jsx)("script",{src:b.se[O?"TTP":"ROW"].slardarWeb})]})},T=function({isLogin:e,isFtc:t}){return(0,n.jsx)(r.mg,{children:(0,n.jsx)("meta",{name:"pumbaa-ctx",content:`login=${e?1:0},ftc=${t?1:0}`})})},C=function({appContext:e,bizContext:t,slardarBid:i,iconSrc:v,initialPid:m,asyncSlardar:_=!1,usePumbaaMeta:h=!1,slardarReportImage:y}){var f;const{language:S}=(0,l.L$)(e),{isDark:b}=(0,s.u)(),{user:C}=null!==(f=(0,c.W)((()=>["user"]),[]))&&void 0!==f?f:{},{enableHeadComponent:k}=(0,p.yf)(),M=Boolean(C),O=Boolean(null==C?void 0:C.ftcUser),P=(0,o.w)(d.P);return(0,a.useEffect)((()=>{M&&P.getComplianceSettings()}),[M,P]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.mg,{htmlAttributes:{lang:S,"data-theme":b?"dark":"light"}}),(0,n.jsx)(u,{iconSrc:v}),h&&(0,n.jsx)(T,{isLogin:M,isFtc:O}),k&&(0,n.jsx)(w,{appContext:e,bizContext:t,slardarBid:i,initialPid:m,async:_,reportImage:y}),(0,n.jsx)(g,{})]})}},46834:(e,t,i)=>{i.d(t,{G:()=>a,K:()=>r});var n=i(65622),s=i(22616),o=i(85107);function a({actionWhenUserLoggedIn:e,modalConfig:t={},reportClickEvent:i,openModalWhenUserLoggedIn:a}){const r=(0,s.W)((()=>["user"]),[]),d=(0,o.b1)();return(0,n.useCallback)(((...n)=>{null==i||i(...n);const s="function"==typeof t?t():t;if((null==r?void 0:r.user)&&!a){if(!s.isLinkPhoneOrEmail)return null==e?void 0:e(...n);d.openModal(s)}else d.openModal(s)}),[e,null==r?void 0:r.user,d,t,i,a])}function r(e={},t,i){return a({modalConfig:"function"==typeof e?e():e,reportClickEvent:t,openModalWhenUserLoggedIn:i})}},65804:(e,t,i)=>{i.d(t,{aF:()=>j});var n,s=i(27334),o=i(45372),a=i.n(o),r=i(65622),d=i(47568),l=i(45291),p=i(99628),c=i(52528),u=i(75572),v=i(11379),g=i(2032),m=i(30367),_=i(53240);!function(e){e[e.None=0]="None",e[e.Outer=1]="Outer",e[e.Inner=2]="Inner",e[e.InnerLarge=3]="InnerLarge",e[e.InnerSmall=4]="InnerSmall",e[e.Mobile=5]="Mobile",e[e.Revamp=6]="Revamp",e[e.LargeSelector=7]="LargeSelector"}(n||(n={}));const h=(0,g.default)("div",{target:"e1gjoq3k0"})({position:"fixed",left:0,top:0,bottom:0,right:0,zIndex:3001,overflow:"auto",outline:"0px",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)"},(({status:e,isShow:t})=>({display:t||e===p.ze?"flex":"none",opacity:Number(e!==p.ze&&e!==p.kp)})),"label:DivModalContainer;"),y=(0,g.default)("div",{target:"e1gjoq3k1"})((({left:e,top:t,isBottomRightQRPopup:i})=>[{position:"fixed",top:t?`${t}px`:"62px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",zIndex:401,overflow:"auto",outline:"1px",transition:i?"none":"all 500ms cubic-bezier(.075, .82, .165, 1)",borderRadius:"8px"},({status:t,isShow:n,isQRPopup:s})=>({display:n||t===p.ze?"flex":"none",opacity:Number(t!==p.ze&&t!==p.kp),width:i?"164px":"360px",height:s?"387px":i?"175px":"309px",left:`${e}px`})]),"label:DivPopupModalContainer;"),f=(0,g.default)("div",{target:"e1gjoq3k2"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"fixed",left:0,right:0,top:0,bottom:0})),"label:DivModalMask;"),S=(0,g.default)("div",{target:"e1gjoq3k3"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,n=e.contentStyle,{transform:s}=n,o=(0,v.Tt)(n,["transform"]);return[{transform:t===p.kp||t===p.ze?s||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary},o]}),"label:DivContentContainer;"),b=(0,g.default)("div",{target:"e1gjoq3k4"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,n=e.contentStyle,{transform:s}=n,o=(0,v.Tt)(n,["transform"]),{isBottomRightQRPopup:a}=e;return[{transform:t===p.kp||t===p.ze?s||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary,width:a?"164px":"360px",height:"100% !important"},o]}),"label:DivPopupContentContainer;"),w=(0,g.default)(m.A,{target:"e1gjoq3k5"})("label:StyledIcon;");function T(e){const{closeStyle:t,theme:{colors:i,direction:n}}=e,s=[(0,_.mp)({direction:n,end:6===t?"16px":"24px"})];switch(t){case 2:s.push({width:"24px",height:"24px",background:i.BGView,[`${w}`]:{width:"15px",height:"15px"}});break;case 3:s.push({width:"24px",height:"24px",[`${w}`]:{width:"24px",height:"24px",fill:i.TextPrimary}});break;case 4:s.push({width:"20px",height:"20px",[`${w}`]:{width:"20px",height:"20px",fill:i.TextPrimary}});break;case 5:s.push({width:"19px",height:"19px",[`${w}`]:{width:"19px",height:"19px",fill:i.TextPrimary}});break;case 1:s.push({width:"40px",height:"40px",background:i.BGPrimary,[`${w}`]:{width:"24px",height:"24px"}});break;case 6:s.push({width:"32px",height:"32px",background:i.BGView,[`${w}`]:{width:"24px",height:"24px",fill:i.TextSecondary}});break;case 7:s.push({width:"32px",height:"32px",[`${w}`]:{width:"32px",height:"32px",fill:i.TextSecondary}})}return s}const C=(0,g.default)("div",{target:"e1gjoq3k6"})((({closeStyle:e})=>[{position:"absolute",top:6===e?"16px":"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},T]),"label:DivCloseWrapper;"),k=(0,g.default)("div",{target:"e1gjoq3k7"})({width:"100vw",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},"label:DivCenterWrapper;"),M=(0,g.default)("div",{target:"e1gjoq3k8"})({height:"100%",width:"360px",display:"flex",justifyContent:"center",alignItems:"center"},"label:DivPopupCenterWrapper;");var O=i(64658),P=i(6486),I=i(61942);const L="login-modal",j=function({children:e,onClose:t,visible:i,timeout:n,onWheel:o=a(),closeStyle:v=0,closeStyles:g={},containerStyle:m={},maskCloseable:_=!0,keyboardCloseable:T=!0,zIndex:j=3001,mask:x=!0,fixed:E=!0,contentStyle:A={},maskStyle:D={},e2eData:F="",backgroundColor:U,parentRef:R,cancelMouseLeaveBubble:B=!1,returnFocus:N=!0,focusTrapDisabled:$=!1,autoFocus:V=!1,onCloseFocusHandler:W,popupType:H,maskOnClickAction:q}){const z=(0,r.useRef)(),K=(0,r.useRef)(Boolean(i)),{showModal:G,hideModal:Z}=(0,u.g)(),[J,Q]=(0,r.useState)(!1),Y=(0,c.s)(),{isRTL:X}=(0,O.m)(),ee=(0,r.useRef)(!0),[te,ie]=(0,r.useState)(0),[ne,se]=(0,r.useState)(0),{isCommentPanelActive:oe}=(0,P.Cx)((e=>({isCommentPanelActive:e.isActive})),I.bN),ae=()=>{var e,t,i,n;const s=null===(e=document.getElementById("close-button-at-bottom-right"))||void 0===e?void 0:e.getBoundingClientRect();ie(X?(null!==(t=null==s?void 0:s.right)&&void 0!==t?t:0)-36:(null!==(i=null==s?void 0:s.left)&&void 0!==i?i:0)-130),se((null!==(n=null==s?void 0:s.top)&&void 0!==n?n:300)-190)};(0,r.useEffect)((()=>{if(i&&x){const e="qr_bottom_right"===H;ae(),G(ee.current,e),n&&(clearTimeout(z.current),z.current=window.setTimeout((()=>{null==t||t(2)}),n))}else K.current&&(Z(),clearTimeout(z.current));K.current=Boolean(i),ee.current=!1}),[i,x]),(0,r.useEffect)((()=>(Q(!0),()=>{K.current&&Z()})),[]),(0,r.useEffect)((()=>{const e=e=>{i&&T&&27===e.keyCode&&(null==t||t(1))};return i&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[T,t,i]);const re=(0,r.useCallback)((()=>{_&&(null==t||t(3)),null==q||q()}),[_,q,t]),de=(0,r.useCallback)((()=>{null==t||t(0)}),[t]),le=(0,r.useRef)(null),pe=(0,r.useRef)(null),ce=(0,r.useCallback)((e=>{const t=e.target;(null==t?void 0:t.id)===L&&t.setAttribute("tabindex","-1")}),[]),ue=(0,r.useCallback)((e=>{13===e.keyCode&&(null==t||t(0))}),[t]),ve=(0,r.useCallback)((e=>{B&&e.stopPropagation()}),[B]);return(0,r.useEffect)((()=>{ae(),H&&window.addEventListener("resize",ae)}),[H,X]),J?H?(0,s.jsx)(p.Ay,{timeout:300,in:i,nodeRef:le,children:t=>(0,s.jsx)(y,{status:t,isShow:i&&!("qr_bottom_right"===H&&oe),onWheel:o,onKeyDown:ce,ref:le,style:Object.assign(Object.assign({},m),{position:E?"fixed":"relative"}),isQRPopup:"qr"===H,isBottomRightQRPopup:"qr_bottom_right"===H,left:te,top:ne,children:(0,s.jsx)(p.Ay,{timeout:300,in:i,unmountOnExit:!0,nodeRef:pe,children:t=>(0,s.jsx)(M,{isQRPopup:"qr"===H,children:(0,s.jsxs)(b,{"data-e2e":F,status:t,ref:pe,contentStyle:A,style:{backgroundColor:U},tabIndex:0,id:L,isQRPopup:"qr"===H,isBottomRightQRPopup:"qr_bottom_right"===H,children:[e,0!==v&&1!==v&&"qr_bottom_right"!==H&&(0,s.jsx)(C,{closeStyle:v,onClick:de,onKeyDown:ue,"data-e2e":"modal-close-inner-button",style:g,role:"button",tabIndex:0,children:(0,s.jsx)(w,{})})]})})})})}):(0,d.createPortal)((0,s.jsx)(p.Ay,{timeout:300,in:i,nodeRef:le,children:t=>(0,s.jsxs)(h,{status:t,isShow:i,onWheel:o,onKeyDown:ce,ref:le,style:Object.assign(Object.assign({},m),{zIndex:j,position:E?"fixed":"relative"}),children:[x&&(0,s.jsx)(f,{style:D,onClick:re,onMouseLeave:ve,children:1===v&&(0,s.jsx)(C,{closeStyle:v,onClick:de,style:g,children:(0,s.jsx)(w,{})})}),(0,s.jsx)(p.Ay,{timeout:300,in:i,unmountOnExit:!0,nodeRef:pe,children:t=>(0,s.jsx)(l.Ay,{autoFocus:V,returnFocus:N,disabled:$,onDeactivation:W,children:(0,s.jsx)(k,{children:(0,s.jsxs)(S,{"data-e2e":F,status:t,ref:pe,contentStyle:A,style:{backgroundColor:U},tabIndex:0,id:L,children:[e,0!==v&&1!==v&&(0,s.jsx)(C,{closeStyle:v,onClick:de,onKeyDown:ue,"data-e2e":"modal-close-inner-button",style:g,role:"button",tabIndex:0,"aria-label":Y("link_close_popup"),children:(0,s.jsx)(w,{})})]})})})})]})}),null!=R?R:document.body):null}},57180:(e,t,i)=>{i.d(t,{Qt:()=>o}),i(65622),i(63161);var n=i(98281),s=i(93122);function o(){const{playerInfo:e}=(0,n.L$)((0,s.U)((()=>["playerInfo"]),[])),{name:t="",isSmartPlayer:i=!1,type:o=0,loop:a=!1,replyComment:r=!0,hideNavBar:d=!1}=(0,n.L$)(e);return{brand:t,isEchoShow:"echoshow"===t,isTtincar:"ttincar"===t,launchType:o,isSmartPlayer:i,loop:a,replyComment:r,hideNavBar:d}}},12129:(e,t,i)=>{i.d(t,{K8:()=>m,Sd:()=>y,W3:()=>h,_j:()=>_,gG:()=>f,sy:()=>S});var n=i(11379),s=i(65622),o=i(63161),a=i(1114),r=i(65669),d=i.n(r),l=i(52602),p=i(38527),c=i(14218),u=i(98281),v=i(12688),g=i(22616);const m=()=>{const e=(0,l.Hd)(c.O_);return["pwa","msft","twa"].includes(e)},_=()=>{var e;const{abTestVersion:t}=(0,u.L$)((0,g.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,v.qt)(t,"desktop_app_test"))&&void 0!==e?e:"v1";return{desktopAppTestVid:i,isDesktopTestV1:"v1"===i,isDesktopTestV2:"v2"===i}},h=()=>{const[e,t]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{var e;t(Boolean("MAIN_WINDOW"===(null===(e=null===window||void 0===window?void 0:window.TTE_ENV)||void 0===e?void 0:e.windowName)))}),[]),e},y=()=>{const{pathname:e}=(0,o.zy)();return(0,p.tO)(e)||(0,p.gq)(e)||(0,p.U0)(e)||(0,p.eD)(e)},f=()=>{const{isElectronApp:e}=(0,a.B)();(0,s.useEffect)((()=>{if(e){const e=Element.prototype.requestFullscreen;Element.prototype.requestFullscreen=function(...t){return(0,n.sH)(this,void 0,void 0,(function*(){yield d().app.setFullScreenable(!0),e.call(this,...t)}))}}}),[e])},S=()=>{const[e,t]=(0,s.useState)("undefined"!=typeof window&&null!==(o=null===(n=null===(i=null===window||void 0===window?void 0:window.matchMedia)||void 0===i?void 0:i.call(window,"(prefers-color-scheme: dark)"))||void 0===n?void 0:n.matches)&&void 0!==o&&o);var i,n,o;const a=e=>{var i;t(null!==(i=null==e?void 0:e.matches)&&void 0!==i&&i)};return(0,s.useEffect)((()=>{var e;const t=null===(e=null===window||void 0===window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)");return t.addListener(a),()=>t.removeListener(a)}),[]),e}},64658:(e,t,i)=>{i.d(t,{m:()=>o});var n=i(98281),s=i(22616);const o=()=>{const{language:e}=(0,n.L$)((0,s.W)((()=>["language"]),[]));return{isRTL:"ar"===e||"ur"===e||"he-IL"===e}}},26711:(e,t,i)=>{i.d(t,{$G:()=>l,SV:()=>p});var n=i(11379),s=i(45489),o=i.n(s),a=i(59910),r=i.n(a);o().extend(r());const d={ar:"ar","bn-IN":"bn","ceb-PH":"en","cs-CZ":"cs","de-DE":"de","el-GR":"el",en:"en",es:"es","fi-FI":"fi","fil-PH":"en",fr:"fr","he-IL":"he","hi-IN":"hi","hu-HU":"hu","id-ID":"id","it-IT":"it","ja-JP":"ja","jv-ID":"jv","km-KH":"km","ko-KR":"ko","ms-MY":"ms","my-MM":"my","nl-NL":"nl","pl-PL":"pl","pt-BR":"pt","ro-RO":"ro","ru-RU":"ru","sv-SE":"sv","th-TH":"th","tr-TR":"tr","uk-UA":"uk",ur:"ur","vi-VN":"vi","zh-Hans":"zh","zh-Hant-TW":"zh-tw"};function l(e){return(0,n.sH)(this,void 0,void 0,(function*(){yield i(76776)(`./${d[e]}.js`)}))}function p(e,t,i="MM-DD-YYYY HH:mm"){return o().unix(e).locale(d[t]).format(i)}},29219:(e,t,i)=>{i.d(t,{Us:()=>o});var n=i(18898),s=(i(22681),i(54469));function o(){return(0,n.P)(s.L)}},54469:(e,t,i)=>{i.d(t,{L:()=>_});var n=i(11379),s=i(83238),o=i(68055),a=i(54954),r=i(59158),d=i(73766),l=i(90245),p=i(33152),c=i(91109),u=i(95831),v=i(33293),g=i(74895),m=i(72038);let _=class extends s.E{constructor(){super(...arguments),this.defaultState={appContext:null,initialized:!1,lang:"en",sideNavActive:!1}}setSideNavActive(e,t){return Object.assign(Object.assign({},e),{sideNavActive:t})}toggleSideNav(e){return e.pipe((0,p.E)(this.state$),(0,c.T)((([e,t])=>this.getActions().setSideNavActive(!t.sideNavActive))))}setAppContext(e,t){var{statusCode:i}=t,s=(0,n.Tt)(t,["statusCode"]);return 0!==i?e:Object.assign(Object.assign({},e),{appContext:s})}setInitialized(e,t){return Object.assign(Object.assign({},e),{initialized:t})}setLang(e,t){return Object.assign(Object.assign({},e),{lang:t})}init(e){return e.pipe((0,p.E)(this.state$),(0,u.p)((([{appContext:e},{initialized:t}])=>t?r.w:(0,d.of)(Object.assign(Object.assign({},e),{statusCode:0})).pipe((0,v.Z)((t=>(0,d.of)(this.getActions().setAppContext(t),this.getActions().setLang(e.language)))),(0,g.Z)(this.getActions().setInitialized(!1)),(0,m.q)(this.getActions().setInitialized(!0),this.terminate())))))}};(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",Object)],_.prototype,"setSideNavActive",null),(0,n.Cg)([(0,o.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[l.c]),(0,n.Sn)("design:returntype",void 0)],_.prototype,"toggleSideNav",null),(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",Object)],_.prototype,"setAppContext",null),(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",Object)],_.prototype,"setInitialized",null),(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",Object)],_.prototype,"setLang",null),(0,n.Cg)([(0,o.Mj)({payloadGetter:1}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[l.c]),(0,n.Sn)("design:returntype",void 0)],_.prototype,"init",null),_=(0,n.Cg)([(0,a.n)("AppContext")],_)},82686:(e,t,i)=>{i.d(t,{o:()=>l});var n=i(11379),s=i(49610),o=i(80577),a=i(2070),r=i(14218),d=i(50374);let l=class{constructor(e){this.fetch=e,this.initTargetIdcRequest=()=>this.fetch.get("/passport/web/account/info/",{credentials:"include",baseUrlType:2,query:{aid:1459}})}checkTTwid(){return(0,n.sH)(this,void 0,void 0,(function*(){const e=new o.TtWid({aid:r.xE,service:"www.tiktok.com",union:!1,unionHost:"",needFid:!1});try{yield e.checkWebId()}catch(e){d.f.sendEvent("check_ttwid_error",{error_msg:e}),console.error(e)}}))}};l=(0,n.Cg)([(0,s._)(),(0,n.Sn)("design:paramtypes",[a.pM])],l)},6530:(e,t,i)=>{i.d(t,{$T:()=>ne,bc:()=>de,JD:()=>oe});var n=i(11379),s=i(25724),o=i(29756),a=i(96488),r=i(17096),d=i(84394),l=i(29341),p=i(5238),c=i(84178),u=i(9190),v=i(55148),g=i(75463),m=i(5183);const _=(e,t,i,n,s)=>{var o,a;let r="next"===s?e+1:e-1;if(1===n){const n=null!==(o=t[r])&&void 0!==o?o:"";let d=(0,m.Jl)(i[n]);for(;d;){r="next"===s?r+1:r-1;const n=null!==(a=t[r])&&void 0!==a?a:"";if(d=(0,m.Jl)(i[n]),r>t.length-1||r<0||""===n)return e}}return Math.max(Math.min(r,t.length-1),0)},h=(e,t)=>{var i;const n=(0,g.D)(t);return n?e(n):null!==(i=e(u.D)[null!=t?t:""])&&void 0!==i?i:{}};var y=i(66148),f=i(37920);const S=e=>{const t=(0,f.L)(y.AU);null==t||t.reportVideoInteractStart({startTime:Date.now(),situation:e})};var b=i(2070),w=i(90064),T=i(34111);const C={statusCode:0,statusMessage:"",toastNotShown:!1},k=(0,s.atom)(Object.assign({},C)),{getStaticApi:M,useAtomService:O}=(0,o.i)(k,((e,t)=>({setBrowserModeStatus(e){t(k,Object.assign(Object.assign({},e),{toastNotShown:!0}))},clearBrowserModeStatus(){t(k,Object.assign({},C))}})));var P=i(68387),I=i.n(P),L=i(70577),j=i.n(L);const x=(0,s.atom)({}),E=(0,s.atom)(null,((e,t,i,n)=>{if(n){const o=e(x)[i];o?t(o,n):t(x,(e=>Object.assign(Object.assign({},e),{[i]:(0,s.atom)(n)})))}else t(x,(e=>j()(e,i)))})),A=(0,s.atom)(null),D=(0,s.atom)([]),F=(0,s.atom)((e=>{const{browserList:t=[]}=h(e,"creator_tab");return t})),U=(0,s.atom)((e=>{const t=[],i=e(D);for(const n of i){const{browserList:i=[]}=h(e,n.itemListKey);if(n.skip>=i.length)break;const s=Math.min(n.skip+n.limit,i.length);if(t.push(...i.slice(n.skip,s)),n.limit===1/0)break}return t})),R=(0,s.atom)((e=>{const t=e(D),i=e(U);let n=null,s=0;for(const o of t){const{browserList:t=[],hasMore:a=!0}=h(e,o.itemListKey);if(s+=a?o.limit:t.length-o.skip,i.length<s&&a){n=o.itemListKey;break}}return{activeItemListKey:e(A),browserListSources:t,keyToLoadMore:n,browserList:i,creatorBrowserList:e(F)}}),((e,t,i)=>{i.activeItemListKey&&t(A,i.activeItemListKey),i.browserListSources&&t(D,i.browserListSources)})),{useAtomService:B,useServiceState:N,useServiceDispatchers:$,getStaticApi:V}=(0,o.i)(R,((e,t)=>({registerBrowserListConfig(e){const{itemListKey:i,config:n}=e;t(E,null!=i?i:"",n)},setupBrowserList(i){var n;const{itemListKey:s,enterIndex:o}=i,a=e(x)[null!=s?s:""],r=a?e(a):null,d=[];if("explore"!==s||I()(r))d.push({itemListKey:s,skip:0,limit:1/0});else{const e=null!==(n=null==r?void 0:r.sources)&&void 0!==n?n:[];d.push(...function(e,t,i){const n={},s=[];return i.forEach((({itemListKey:i,limit:o},a)=>{var r;if(i){const d=null!==(r=n[i])&&void 0!==r?r:0,l=0===a&&i===e?t+o:o;s.push({itemListKey:i,skip:d,limit:l}),n[i]=d+l}})),s}(s,o,e))}t(A,s),t(D,d)},clearBrowserList(){t(A,null),t(D,[])},freezeSourceWithKey(i){const n=e(D),s=[];for(const t of n)if(t.itemListKey!==i)s.push(t);else{const{browserList:i=[]}=h(e,t.itemListKey);t.skip<i.length&&(t.limit=Math.min(i.length-t.skip,t.limit),s.push(t))}t(D,s)},getSourceIndex(t){var i,n;const s=e(U),o=e(D);let a=0;for(const i of o){const{browserList:n=[],hasMore:o=!0}=h(e,i.itemListKey),r=o?i.limit:n.length-i.skip;if(t<a+r||s.length<a+r)return{itemListKey:i.itemListKey,index:i.skip+(Math.min(t,s.length)-a)};a+=r}const r=null!==(n=null===(i=o[o.length-1])||void 0===i?void 0:i.itemListKey)&&void 0!==n?n:null,{browserList:d=[]}=h(e,r);return{itemListKey:r,index:Math.max(d.length-1,0)}}})));(0,s.atom)(null);var W=i(31118),H=i(52602),q=i(14218),z=i(50374),K=i(39232);const G={isDocumentPipSupporting:"undefined"!=typeof window&&"documentPictureInPicture"in window,pipWindow:null,isMiniPlayerShowing:!1,itemListKey:null,currentIndex:0,prevPlayMode:null,miniPlayerRef:null,svgChangeObserver:null,enterTimestamp:0,windowHeight:598,windowWidth:306,enableNewLocalStorageKey:!1,isIndicatorAcked:!1,isLandingIndicatorDismissed:!1,isAfterSwitchTabOrWindowSizeChange:!1,isAfterSwitchTabOrWindowSizeChangeIndicatorShown:Boolean((0,H._S)(q.je)),isAfterSwitchTabOrWindowSizeChangeIndicatorDismissed:!1},Z=(0,s.atom)(G);Z.debugLabel="miniPlayerAtom";const J=(0,s.atom)((e=>{const{itemListKey:t}=e(Z);return h(e,t)})),{useServiceState:Q,useServiceDispatchers:Y,useAtomService:X,getStaticApi:ee}=(0,o.i)(Z,((e,t)=>({setItemListKey(e){t(Z,(t=>Object.assign(Object.assign({},t),{itemListKey:e})))},setCurrentIndex(e){t(Z,(t=>Object.assign(Object.assign({},t),{currentIndex:e})))},setPrevPlayMode(e){t(Z,(t=>Object.assign(Object.assign({},t),{prevPlayMode:e})))},setIsMiniPlayerShowing(e){t(Z,(t=>Object.assign(Object.assign({},t),{isMiniPlayerShowing:e})))},setMiniPlayerRef(e){t(Z,(t=>Object.assign(Object.assign({},t),{miniPlayerRef:e})))},setIsLandingIndicatorDismissed(e){t(Z,(t=>Object.assign(Object.assign({},t),{isLandingIndicatorDismissed:e})))},initEnableNewLocalStorageKey(){var e;const{abTestVersion:i}=(0,K.x)(),n=!!(null===(e=null==i?void 0:i.parameters.enable_mini_player_switch_tab_popup)||void 0===e?void 0:e.vid);t(Z,(e=>Object.assign(Object.assign({},e),{enableNewLocalStorageKey:n})))},setIsAfterSwitchTabOrWindowSizeChange(e){t(Z,(t=>Object.assign(Object.assign({},t),{isAfterSwitchTabOrWindowSizeChange:e})))},setIsAfterSwitchTabOrWindowSizeChangeIndicatorDismissed(e){t(Z,(t=>Object.assign(Object.assign({},t),{isAfterSwitchTabOrWindowSizeChangeIndicatorDismissed:e})))},updateMiniPlayerSize(){const{pipWindow:i}=e(Z);if(!i)return;const n=i.innerHeight,s=i.innerWidth;t(Z,(e=>Object.assign(Object.assign({},e),{windowHeight:n,windowWidth:s})))},updateVideoIndex(i){const{newIndex:n,newId:s,playProgress:o,isMiniPlayerNotSupported:a}=i,{prevPlayMode:d}=e(Z);t(Z,(e=>Object.assign(Object.assign({},e),{currentIndex:n})));const l={currentVideo:{index:n,id:s,mode:a?d:8},playProgress:null!=o?o:0};(0,r.LM)().updateVideo(l);const{showingBrowserMode:p}=e(ne);p&&de().updateVideoIndex({newId:s,newIndex:n,isIndexInvalid:!1})},closeMiniPlayer(i){var n,s,o;const{playMode:a,enter_method:d}=i,{currentIndex:l,prevPlayMode:p,pipWindow:c,miniPlayerRef:u,svgChangeObserver:v,enterTimestamp:g}=e(Z),{list:m=[]}=e(J),_=null!==(n=m[l])&&void 0!==n?n:"",h=m.findIndex((e=>_===e)),y=null!==(o=null===(s=null==u?void 0:u.current)||void 0===s?void 0:s.currentTime)&&void 0!==o?o:0;if(c){null==c||c.close(),z.f.sendEvent("turn_off_mini_player",{play_mode:W.Jr[null!=p?p:"-1"],group_id:_,enter_method:d,stay_duration:(Date.now()-g)/1e3,has_more:l<m.length-1});const e={currentVideo:{index:h,id:_,mode:null!=a?a:p},playProgress:y};(0,r.LM)().updateVideo(e),null==v||v.disconnect(),t(Z,(e=>Object.assign(Object.assign({},e),{pipWindow:null,isMiniPlayerShowing:!1,itemListKey:null,currentIndex:0,prevPlayMode:null,miniPlayerRef:null,svgChangeObserver:null,enterTimestamp:0})))}},openMiniPlayer(i){return(0,n.sH)(this,void 0,void 0,(function*(){const{index:n=0,playMode:s,playProgress:o,itemListKey:a}=i,{pipWindow:d,isDocumentPipSupporting:l,windowHeight:p,windowWidth:c}=e(Z);if(!l||"undefined"==typeof window||null!==d)return;const{list:u}=h(e,a),{showingBrowserMode:v,isCreatorBrowserMode:g}=e(ne),{browserList:m}=e(R),_=v&&!g?m[n]:u[n];try{const e=Date.now();documentPictureInPicture.addEventListener("enter",(()=>{z.f.sendEvent("enter_mini_player",{latency:Date.now()-e,play_mode:W.Jr[s],group_id:_})}),{once:!0});const i=yield window.documentPictureInPicture.requestWindow({width:c,height:p});i.addEventListener("pagehide",(()=>{this.closeMiniPlayer({playMode:s})}),{once:!0}),[...document.styleSheets].forEach((e=>{try{const t=[...e.cssRules].map((e=>e.cssText)).join(""),n=document.createElement("style");n.textContent=t,i.document.head.appendChild(n)}catch(t){const n=document.createElement("link");if(null===e.href)return;n.rel="stylesheet",n.type=e.type,n.media=e.media.toString(),n.href=e.href,i.document.head.appendChild(n)}})),this.createOrUpdateSVGSprite(i);const d=document.querySelector("#svg-sprite-container"),l=new MutationObserver((()=>this.createOrUpdateSVGSprite(i)));d&&l.observe(d,{subtree:!0,childList:!0});const u={currentVideo:{index:n,id:_,mode:8},playProgress:o};(0,r.LM)().updateVideo(u),t(Z,(e=>Object.assign(Object.assign({},e),{enterTimestamp:Date.now(),itemListKey:a,prevPlayMode:s,isMiniPlayerShowing:!0,currentIndex:n,pipWindow:i,svgChangeObserver:l})))}catch(e){console.error("DocumentPIP error",e)}}))},createOrUpdateSVGSprite(e){const t=document.querySelector("#svg-sprite-container");try{let i=e.document.body.querySelector("svg");i||(i=document.createElement("svg"),e.document.body.appendChild(i)),i.innerHTML=(null==t?void 0:t.outerHTML)||""}catch(e){console.log("error to copy svg sprite",e)}},handleNextVideo(){var t;try{const{currentIndex:i}=e(Z),{list:n}=e(J),s=i+1,o=null!==(t=n[s])&&void 0!==t?t:"";if(!n.length||s<0||s>=n.length)return void console.warn("cannot switch to next video for some reasons");this.updateVideoIndex({newIndex:s,newId:o})}catch(e){}},handlePrevVideo(){var t;try{const{currentIndex:i}=e(Z),{list:n}=e(J),s=i-1,o=!n.length||s<0||s>=n.length,a=null!==(t=n[s])&&void 0!==t?t:"";if(o)return void console.warn("cannot switch to prev video for some reasons");this.updateVideoIndex({newIndex:s,newId:a})}catch(e){}},updateLandingIndicatorShowTimes(){const{enableNewLocalStorageKey:t}=e(Z),i=t?q.tD:q.un;(0,H.AP)(i,(Number((0,H._S)(i,"0"))+1).toString())},updateIndicatorAckedStatus(){const{enableNewLocalStorageKey:i}=e(Z),n=i?q.RM:q._O;(0,H.AP)(n,"1"),t(Z,(e=>Object.assign(Object.assign({},e),{isIndicatorAcked:!0})))}}))),te={foryou:0,topic:0,following:0,video:0,find:1,music:1,music_new:1,challenge:1,challenge_new:1,sticker:1,effect:1,user:1,"user-post":1,"user-repost":1,"user-liked":1,search_top:1,search_video:1,question:1,playlist:1,live_event:1,video_playlist:0,create_video_playlist:0,messages:0,discover:1,poi:1,collection:1,"user-post-public":0,explore:0,channel:1,poi_category:1,search_live:1,favorites:1,"keyword-expansion":1,creator_tab:2,friends:0,trending_topics:1},ie={3:"friends",2:"private",1:"public"},ne=(0,s.atom)({currentIndex:0,enterIndex:0,prevFeedItemIndex:null,itemListKey:null,prevFeedItemListKey:null,jumpSamePageTime:0,belowPlayMode:0,enterWindowTimeSec:Number(new Date),showingBrowserMode:!1,isCreatorBrowserMode:!1});ne.debugLabel="browserModeAtom";const se=(0,s.atom)((e=>{const{itemListKey:t}=e(ne);return h(e,t)})),{useServiceState:oe,useServiceDispatchers:ae,useAtomService:re,getStaticApi:de}=(0,o.i)(ne,((e,t)=>({setItemListKey(e){t(ne,(t=>Object.assign(Object.assign({},t),{itemListKey:e})))},setCurrentIndex(e){t(ne,(t=>Object.assign(Object.assign({},t),{currentIndex:e})))},setClickSamePage(){t(ne,(e=>Object.assign(Object.assign({},e),{jumpSamePageTime:Date.now()})))},setShowingBrowserMode(e){t(ne,(t=>Object.assign(Object.assign({},t),{showingBrowserMode:e})))},updateVideoIndexAndSavePrev({newFeedIndex:i,isIndexInvalid:n,newId:s,playProgress:o,itemListKey:a,currentIndex:d,newItemListKey:l,playMode:p}){if(n)return;const{isMiniPlayerShowing:c}=e(Z);if(t(ne,(e=>Object.assign(Object.assign({},e),{itemListKey:l,currentIndex:i,prevFeedItemIndex:d,prevFeedItemListKey:a}))),c)return ee().setItemListKey("creator_tab"),void ee().updateVideoIndex({newIndex:i,newId:s});const u={currentVideo:{index:i,id:s,mode:p},playProgress:null!=o?o:0};(0,r.LM)().updateVideo(u)},handleEnterCreatorMode(i){var n;try{S("enter_creator_mode");const{creatorFeedIndex:s}=i,{itemListKey:o,currentIndex:a}=e(ne),r=e(F),d=!r.length,l=null!==(n=r[s])&&void 0!==n?n:"";this.updateVideoIndexAndSavePrev({newFeedIndex:s,isIndexInvalid:d,newId:l,itemListKey:o,currentIndex:a,newItemListKey:"creator_tab",playMode:2}),t(ne,(e=>Object.assign(Object.assign({},e),{isCreatorBrowserMode:!0})))}catch(e){}},handleExitCreatorMode(){var i;try{S("exit_creator_mode");const{prevFeedItemIndex:n,prevFeedItemListKey:s}=e(ne),o=e(U),a=null!=n?n:0,d=!o.length,l=null!==(i=o[a])&&void 0!==i?i:"";this.handleClearCreatorModeData({newIndex:a,isIndexInvalid:d,prevFeedItemListKey:s});const p={currentVideo:{index:a,id:l,mode:2},playProgress:0};(0,r.LM)().updateVideo(p),t(ne,(e=>Object.assign(Object.assign({},e),{isCreatorBrowserMode:!1})))}catch(e){}},handleCreatorModeVideoClick(t){var i;try{S("click_creator_video");const{creatorFeedIndex:n}=t,{isMiniPlayerShowing:s}=e(Z),o=e(F),a=!o.length,r=null!==(i=o[n])&&void 0!==i?i:"";s?ee().updateVideoIndex({newIndex:n,newId:r}):this.updateVideoIndex({newIndex:n,newId:r,isIndexInvalid:a})}catch(e){}},updateVideoIndex(i){const{newIndex:n,isIndexInvalid:s,newId:o,playProgress:a}=i,{isMiniPlayerShowing:l}=e(Z),{itemListKey:p}=e(ne);if(s)return;if(t(ne,(e=>Object.assign(Object.assign({},e),{currentIndex:n}))),l)return;const c={currentVideo:{index:n,id:o,mode:2},playProgress:null!=a?a:0,pageType:p?d.FB[p]:999};(0,r.LM)().updateVideo(c)},updateDeleteVideo(i){const{currentIndex:n}=e(ne),s=e(U),o=s.length,a=o-1<=0,r=o-1===n,d=a?"":s[r?n-1:n+1],c=r?n-1:n;if(i){this.updateVideoIndex({newIndex:c,newId:d,isIndexInvalid:a});const e=(0,l.Ds)(),n=(0,p.HG)();e.setDeleteVideo(i),n.setDeleteVideo(i),t(u.D,"setDeleteVideo",i),t(v.t,"setDeleteVideo",i)}},handleClearCreatorModeData(e){const{prevFeedItemListKey:i,newIndex:n,isIndexInvalid:s}=e;s||t(ne,(e=>Object.assign(Object.assign({},e),{currentIndex:n,itemListKey:i,prevFeedItemIndex:null,prevFeedItemListKey:null})))},postVideoDelete(e){return(0,n.sH)(this,void 0,void 0,(function*(){const t=M();try{const{status_code:i,status_msg:s}=yield function(e){return(0,n.sH)(this,void 0,void 0,(function*(){return b.hd.post("/api/aweme/delete/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:b.hd.csrfToken}),headers:{[w.nk]:b.hd.csrfToken},baseUrlType:2})}))}(e);t.setBrowserModeStatus({statusCode:i,statusMessage:s,action:"delete"}),0===i&&(a.y.handleVideoDelete("delete"),this.updateDeleteVideo(e.aweme_id))}catch(e){t.setBrowserModeStatus({statusCode:-1,statusMessage:""})}}))},postScheduleDelete(e){return(0,n.sH)(this,void 0,void 0,(function*(){const t=M();try{yield function(e){return(0,n.sH)(this,void 0,void 0,(function*(){return b.hd.post("/api/schedule/aweme/delete/",{query:e,headers:{[w.nk]:b.hd.csrfToken},baseUrlType:2})}))}({aweme_id:e}),t.setBrowserModeStatus({statusCode:0,statusMessage:"",action:"delete"}),this.updateDeleteVideo(e),a.y.handleScheduleDelete("delete")}catch(e){t.setBrowserModeStatus({statusCode:-1,statusMessage:""})}}))},postDuetOrStitchChange({type:e,enable:i,aweme_id:s}){return(0,n.sH)(this,void 0,void 0,(function*(){const o=M();try{const{status_code:r}=yield function(e){return(0,n.sH)(this,void 0,void 0,(function*(){return b.hd.post("/api/aweme/set/react_duet_stitch/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:b.hd.csrfToken}),headers:{[w.nk]:b.hd.csrfToken},baseUrlType:2})}))}({aweme_id:s,[e]:i});if(0!==r)o.setBrowserModeStatus({statusCode:r,statusMessage:""}),2054===r&&this.updateDeleteVideo(s);else{a.y.handlePrivateSetting({target:e,to_status:i?"on":"off"});const n="item_duet"===e?"duetEnabled":"stitchEnabled";t(v.t,"updateItem",{id:s,[n]:0===i})}}catch(e){o.setBrowserModeStatus({statusCode:-1,statusMessage:""})}}))},postModifyVisibility(e){return(0,n.sH)(this,void 0,void 0,(function*(){const i=M();try{const{status_code:s,status_msg:o}=yield function(e){return(0,n.sH)(this,void 0,void 0,(function*(){return b.hd.post("/api/aweme/modify/visibility/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:b.hd.csrfToken}),headers:{[w.nk]:b.hd.csrfToken},baseUrlType:2})}))}(e);0!==s?(i.setBrowserModeStatus({statusCode:s,statusMessage:o}),2054===s&&this.updateDeleteVideo(e.aweme_id)):(a.y.handleSelectPrivacySettingVideo({to_status:ie[e.type]}),(0,T.G)(s,[0]),t(v.t,"setItemPrivateState",{id:e.aweme_id,visibility:e.type}))}catch(e){i.setBrowserModeStatus({statusCode:-1,statusMessage:""})}}))},postUserSetting(e){var i,s;return(0,n.sH)(this,void 0,void 0,(function*(){const o=M();try{const{status_code:r}=yield function(e){return(0,n.sH)(this,void 0,void 0,(function*(){return b.hd.post("/api/user/set/settings/",{baseUrlType:2,query:Object.assign(Object.assign({},e),{tt_csrf_token:b.hd.csrfToken}),headers:{[w.nk]:b.hd.csrfToken}})}))}(e);0!==r?(o.setBrowserModeStatus({statusCode:r,statusMessage:""}),2054===r&&this.updateDeleteVideo(null!==(i=e.aweme_id)&&void 0!==i?i:"")):(a.y.handlePrivateSetting({target:"comment",to_status:0===e.private_setting?"on":"off"}),t(v.t,"updateItem",{id:null!==(s=e.aweme_id)&&void 0!==s?s:"",itemCommentStatus:e.private_setting}))}catch(e){o.setBrowserModeStatus({statusCode:-1,statusMessage:""})}}))},closeBrowserMode(i){var n;const{playProgress:s=0,shouldPause:o=!1}=null!=i?i:{},{itemListKey:a,currentIndex:l,belowPlayMode:p,isCreatorBrowserMode:c,prevFeedItemIndex:u,prevFeedItemListKey:v}=e(ne),g=c?null!=v?v:"":null!=a?a:"",m=c?null!=u?u:0:l,_=e(U),{list:h}=e(se),y=!_.length,f=null!==(n=_[m])&&void 0!==n?n:"",S=h.findIndex((e=>f===e));c&&(t(ne,(e=>Object.assign(Object.assign({},e),{isCreatorBrowserMode:!1}))),this.handleClearCreatorModeData({prevFeedItemListKey:g,newIndex:m,isIndexInvalid:y}));const b={currentVideo:{index:o?-1:S,id:o?"":f,mode:null!=p?p:te[g],pageType:g?d.FB[g]:999},playProgress:s};(0,r.LM)().updateVideo(b),t(ne,(e=>Object.assign(Object.assign({},e),{showingBrowserMode:!1,belowPlayMode:null}))),V().clearBrowserList()},showBrowserMode(i){var n;const{index:s=0,playProgress:o=0,belowPlayMode:a,forceUseIndexLocation:r,shouldUsePreviousProgress:d=!1}=i,{browserList:l,list:p}=e(se),u=p[s],{currentTime:v}=null!==(n=e(c.lD)[u])&&void 0!==n?n:{currentTime:0},g=r?s:Math.max(0,Math.min(l.length-1,l.findIndex((e=>u===e)))),{itemListKey:m}=e(ne),{isMiniPlayerShowing:_}=e(Z);V().setupBrowserList({itemListKey:m,enterIndex:g}),_&&ee().setPrevPlayMode(2),this.updateVideoIndex({newIndex:g,newId:u,isIndexInvalid:!1,playProgress:d?v:o}),t(ne,(e=>Object.assign(Object.assign(Object.assign({},e),a?{belowPlayMode:a}:{}),{showingBrowserMode:!0,enterIndex:g})))},handleNextVideo(){var t;try{S("browser_mode_next");const{currentIndex:i,isCreatorBrowserMode:n}=e(ne),s=e(n?F:U),{liveCardDisplay:o}=e(se),a=e(v.t),{isMiniPlayerShowing:r}=e(Z),d=_(i,s,a,o,"next"),l=!s.length||d<0,p=null!==(t=s[d])&&void 0!==t?t:"";if(l)return void console.warn("cannot switch to next video for some reasons");r?ee().handleNextVideo():this.updateVideoIndex({newIndex:d,newId:p,isIndexInvalid:!1})}catch(e){}},handlePrevVideo(){var t;try{S("browser_mode_prev");const{currentIndex:i,isCreatorBrowserMode:n}=e(ne),s=e(se),o=e(n?F:U),{liveCardDisplay:a}=s,r=e(v.t),{isMiniPlayerShowing:d}=e(Z),l=_(i,o,r,a,"prev"),p=!o.length||l>o.length-1,c=null!==(t=o[l])&&void 0!==t?t:"";if(p)return void console.warn("cannot switch to prev video for some reasons");d?ee().handlePrevVideo():this.updateVideoIndex({newIndex:l,newId:c,isIndexInvalid:!1})}catch(e){}},getAdjacentVideoInfo(){const{currentIndex:t,isCreatorBrowserMode:i}=e(ne),n=e(i?F:U);return[n[t-1],n[t+1]].map((e=>null!=e?e:0))}})))},3369:(e,t,i)=>{i.d(t,{vK:()=>u});var n,s=i(27334),o=i(12883),a=i.n(o),r=i(45372),d=i.n(r),l=i(65622),p=i(14218);!function(e){e.OneColumnMode="one_column_mode",e.SwiperMode="swiper_mode"}(n||(n={}));const c=(0,l.createContext)({feedMode:"swiper_mode",switchFeedMode:d()}),u=(0,l.memo)((({feedMode:e,children:t})=>{const i=null!=e?e:a().get(p.i_)||"swiper_mode",[n,o]=(0,l.useState)(i),r=(0,l.useCallback)((e=>{o(e)}),[]),d=(0,l.useMemo)((()=>({feedMode:n,switchFeedMode:r})),[n,r]);return(0,s.jsx)(c.Provider,{value:d,children:t})}))},70500:(e,t,i)=>{i.d(t,{b:()=>d});var n=i(11379),s=i(83238),o=i(68055),a=i(54954),r=i(90245);let d=class extends s.E{constructor(){super(),this.defaultState={isCookieBannerShowing:!1}}setCookieBannerShowing(e,t){e.isCookieBannerShowing=t}};(0,n.Cg)([(0,o.uk)(),(0,n.Sn)("design:type",r.c)],d.prototype,"dispose$",void 0),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],d.prototype,"setCookieBannerShowing",null),d=(0,n.Cg)([(0,a.n)("FixBottomModule"),(0,n.Sn)("design:paramtypes",[])],d)},85107:(e,t,i)=>{i.d(t,{MR:()=>r,b1:()=>l,mZ:()=>d});var n=i(54386),s=i(73461),o=i(67093),a=i(88149);const{useSigiOrJotaiService:r,useSigiOrJotaiState:d,useSigiOrJotaiDispatchers:l}=(0,o.K)((()=>(0,a.IX)().foryou.isLoginJotai),n.k,{useServiceState:s.mZ,useServiceDispatchers:s.b1})},54386:(e,t,i)=>{i.d(t,{k:()=>g});var n=i(11379),s=i(83238),o=i(68055),a=i(54954),r=i(45372),d=i.n(r),l=i(73766),p=i(90245),c=i(33293),u=i(88489),v=i(73461);let g=class extends s.E{constructor(){super(),this.defaultState={isOpen:!1,url:"",isRedirectToProfilePage:!1,closeable:!1,isBannerActive:!1,bannerEnabled:!1,content:{title:"",desc:"",btnOpenText:""},iframeStyle:{},handleDownload:d(),handleLogin:d(),closeCallback:d(),loginModalShow:!1,maskCloseable:!1,userId:"",groupId:"",enterMethod:void 0,pageType:5,modalType:"",hasCheckedPeriodicLogin:!1,hasCheckedPredictionLogin:!1,hasCheckedGuestMode:!1,showLoginOnLoad:!1,isLoginOnLoadClosed:!1,redirectToHomePage:!1,isGuestMode:!1,isGuestModeUI:!1}}setCloseable(e,t){(0,v.CP)().setCloseable(t)}setUrl(e,t){(0,v.CP)().setUrl(t)}setLoginPath(e,t){(0,v.CP)().setLoginPath(t)}setCloseCallback(e,t){t&&(0,v.CP)().setCloseCallback(t)}setIsOpen(e,t){(0,v.CP)().setIsOpen(t)}setContent(e,t){t&&(0,v.CP)().setContent(t)}setHandleDownload(e,t){t&&(0,v.CP)().setHandleDownload(t)}setHandleLogin(e,t){t&&(0,v.CP)().setHandleLogin(t)}setIframeStyle(e,t){(0,v.CP)().setIframeStyle(t)}setModalType(e,t){(0,v.CP)().setModalType(t)}setLoginModalShow(e,t){(0,v.CP)().setLoginModalShow(t)}setMaskCloseable(e,t){(0,v.CP)().setMaskCloseable(t)}setPageType(e,t){(0,v.CP)().setPageType(t)}setUserId(e,t){(0,v.CP)().setUserId(t)}setGroupId(e,t){(0,v.CP)().setGroupId(t)}setLastGroupId(e,t){(0,v.CP)().setLastGroupId(t)}setEnterMethod(e,t){(0,v.CP)().setEnterMethod(t)}setModalImage(e,t){(0,v.CP)().setModalImage(t)}setPopupType(e,t){(0,v.CP)().setPopupType(t)}setIsRedirectToProfilePage(e,t){(0,v.CP)().setIsRedirectToProfilePage(t)}setIsGuestMode(e,t){(0,v.CP)().setIsGuestMode(t)}setIsGuestModeUI(e,t){(0,v.CP)().setIsGuestModeUI(t)}setPredictionPayload(e,t){(0,v.CP)().setPredictionPayload(t)}setIsLinkPhoneOrEmail(e,t){(0,v.CP)().setIsLinkPhoneOrEmail(t)}openModal(e){return e.pipe((0,c.Z)((e=>(0,l.of)((0,v.CP)().openModal(e)).pipe((0,c.Z)((()=>(0,l.of)(this.noop())))))))}setCheckPeriodicLogin(e,t){(0,v.CP)().setCheckPeriodicLogin(t)}setCheckPredictionLogin(e,t){(0,v.CP)().setCheckPredictionLogin(t)}setCheckGuestModeLogin(e,t){(0,v.CP)().setCheckGuestModeLogin(t)}setIsLoginOnLoadClosed(e,t){(0,v.CP)().setIsLoginOnLoadClosed(t)}setClearShowLoginOnLoad(e){(0,v.CP)().setClearShowLoginOnLoad()}closeModal(e){return e.pipe((0,c.Z)((e=>(0,l.of)((0,v.CP)().closeModal(e)).pipe((0,c.Z)((()=>(0,l.of)(this.noop())))))))}setIsBannerActive(e,t){(0,v.CP)().setIsBannerActive(t)}};g.jotaiAtom=v.JF,(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setCloseable",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setUrl",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setLoginPath",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setCloseCallback",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIsOpen",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setContent",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setHandleDownload",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setHandleLogin",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIframeStyle",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setModalType",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setLoginModalShow",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setMaskCloseable",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Number]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setPageType",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setUserId",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setGroupId",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setLastGroupId",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setEnterMethod",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setModalImage",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setPopupType",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIsRedirectToProfilePage",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIsGuestMode",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIsGuestModeUI",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setPredictionPayload",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIsLinkPhoneOrEmail",null),(0,n.Cg)([(0,o.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[p.c]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"openModal",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setCheckPeriodicLogin",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setCheckPredictionLogin",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setCheckGuestModeLogin",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIsLoginOnLoadClosed",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setClearShowLoginOnLoad",null),(0,n.Cg)([(0,o.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[p.c]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"closeModal",null),(0,n.Cg)([(0,o.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],g.prototype,"setIsBannerActive",null),g=(0,n.Cg)([(0,a.n)("LoginModal"),(0,n.Sn)("design:paramtypes",[])],g),v.JF.__SIGI_MODULE__=g,(0,u.y)(g)},26075:(e,t,i)=>{i.d(t,{nH:()=>s});var n=i(22616);i(65622),i(63117);const s=()=>{var e;const{user:t}=null!==(e=(0,n.W)((()=>["user"]),[]))&&void 0!==e?e:{};return Boolean(t)}},2576:(e,t,i)=>{i.d(t,{OB:()=>W,D0:()=>z,o0:()=>V,Vq:()=>q});var n=i(27334),s=i(65622),o=i(15474),a=i(63161),r=i(23298),d=i(54086),l=i(73200),p=i(23810),c=i(50374),u=i(12883),v=i.n(u),g=i(30367),m=i(97523),_=i(88149),h=i(28986),y=i(52528),f=i(43793),S=i(21870),b=(i(68079),i(2032)),w=i(53240);const T=(0,b.default)("div",{target:"esswpn50"})({position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivModalWrapper;"),C=(0,b.default)("div",{target:"esswpn51"})((({theme:{colors:e}})=>({fontSize:"24px",lineHeight:"36px",fontWeight:700,color:e.TextPrimary,padding:"24px",width:"100%",borderBottom:`0.5px solid ${e.LinePrimary2}`,display:"flex",justifyContent:"space-between",maxWidth:"700px"})),"label:DivModalHeader;"),k=(0,b.default)("div",{target:"esswpn52"})({maxWidth:"700px",padding:"24px 24px 16px 24px"},"label:DivModalBody;"),M=(0,b.default)("div",{target:"esswpn53"})((({theme:{colors:e}})=>({fontSize:"14px",fontWeight:400,lineHeight:"22px",color:e.TextSecondary,whiteSpace:"pre-wrap"})),"label:DivTextPara;"),O=(0,b.default)("div",{target:"esswpn54"})((({theme:{colors:e,isDark:t},checked:i})=>({display:"flex",width:"calc(100% - 48px)",paddingTop:"16px",paddingBottom:"24px",alignItems:"center",borderTop:`0.5px solid ${e.LinePrimary2}`,justifyContent:"space-between",fontSize:"14px",lineHeight:"24px",fontWeight:400,color:e.TextPrimary,"button div:hover":!i&&t?{background:"rgba(255, 255, 255, 0.2)"}:{}})),"label:DivSwitchSection;"),P=(0,b.default)("a",{target:"esswpn55"})((({theme:{colors:e,direction:t}})=>[{fontSize:"14px",fontWeight:400,lineHeight:"22px",color:e.Primary,textDecoration:"none",outline:"none",":visited":{color:e.Primary}},(0,w.mp)({direction:t,marginStart:"8px"})]),"label:ALink;"),I=(0,b.default)("div",{target:"esswpn56"})((({theme:{colors:e}})=>({padding:"24px",width:"100%",borderTop:`0.5px solid ${e.LinePrimary2}`,display:"flex",justifyContent:"flex-end"})),"label:DivModalFooter;"),L=(0,b.default)("div",{target:"esswpn57"})({display:"flex",justifyContent:"flex-end",alignItems:"center",cursor:"pointer"},"label:DivCloseMarkWrapper;");var j=i(6530),x=i(22616),E=i(52602),A=i(96095),D=i(99971),F=i(69379),U=i(61942),R=i(39232);const B=r.OZ.searchReminder,N=(e,t)=>{const[i,n]=(0,A.HY)((e=>e.isShowingToast),U.bN);return(0,s.useCallback)((()=>{i||(n.setIsShowingToast(!0),setTimeout((()=>{n.setIsShowingToast(!1)}),3e3),d.F.open({content:e,duration:3,style:t?{width:"400px"}:{}}))}),[i,t,n,e])},$=e=>(0,y.s)()(e?"nonpersonalizedFeeds_LIVEfeed_label_mainString_personalizationOn":"nonpersonalizedFeeds_LIVEfeed_label_mainString"),V=e=>{const t=$(e);return N(t,!0)},W=e=>{var t;const{hasNonPersonalizedMenu:i}=(0,_.cE)(),{user:{uid:n=""}={}}=null!==(t=(0,x.W)((()=>["user"]),[]))&&void 0!==t?t:{},s=(0,A.JW)((t=>e?t.isFeedPersonalized:t.isSearchPersonalized),U.bN);return!((0,D.Sw)(n)||i||!e)||s},H={expires:365},q=(e,t)=>{var i;const{user:n}=(0,R.x)(),o=null!==(i=null==n?void 0:n.uid)&&void 0!==i?i:"",a=t?m.Lq:e?m.MW:m.eh;return(0,s.useCallback)((t=>{if(!o)return void(e&&v().set(m.Fc,t?"0":"1",H));const i=o,n=v().get(a);let s=[];if(n){s=JSON.parse(n);const e=s.indexOf(i),o=e>=0;t?o&&s.splice(e,1):o||s.push(i)}else s=[i];v().set(a,JSON.stringify(s),H)}),[e,a,o])},z=(e={})=>{const{beforeModalCloseCallback:t,beforeStatusChangeCallback:i,afterModalCloseCallback:d,afterStatusChangeCallback:u,beforeModalOpenCallback:v,afterModalOpenCallback:_,onSwitchClickCallback:b,onLearnMoreClickCallback:w,isFeed:x,preSearchId:D,isLiveFeed:U,showToastRightAfterChange:R}=e,V=(0,y.s)(),{pathname:H}=(0,a.zy)(),z=!Boolean((0,a.B6)(H,{path:B}))&&Boolean((0,a.B6)(H,{path:r.OZ.searchHome})),K=W(x),G=(0,A.Qi)(),{showingBrowserMode:Z,itemListKey:J}=(0,j.JD)((e=>({showingBrowserMode:e.showingBrowserMode,itemListKey:e.itemListKey}))),Q=(0,F.Z9)((e=>{var t;if("single"===(null===(t=e.itemListSourceConfig)||void 0===t?void 0:t.mode))return e.itemListSourceConfig.itemListKey})),[Y,X]=(0,s.useState)(K),ee=(0,s.useCallback)((()=>{null==t||t()}),[t]),te=x&&!U,ie="explore"===J||"explore"===Q,ne=(0,s.useCallback)((e=>{var i,n,s;null==t||t(),"backdrop"!==e&&"closeButton"!==e||(X(K),te?f.$.handleCloseManageFeedsPopUp():U||(n=null!==(i=c.f.commonParams.page_name)&&void 0!==i?i:"",s="backdrop"===e?"click_blank_space":"click_close",S.$G.handleManageSearchPopupClick({enter_from:n,button_type:s})),G.setIsManageModalOpen(!1)),null==d||d()}),[t,d,K,te,U,G]),se=(0,o.eb)({closeOnBackdropClick:!0,closeOnEsc:!1,onCloseComplete:ne,onClose:ee});(0,s.useEffect)((()=>{X(K)}),[K]);const oe=q(x),ae=(0,s.useCallback)((()=>{var e;null==v||v(),G.setIsManageModalOpen(!0),X(K),se.open(),null==_||_(),U||((e,t,i,n)=>{if(n)return f.$.handleClickManageFeeds(),void f.$.handleManageFeedsPopUp();S.$G.handleManageSearchPopupShow({enter_from:e,switch_status:t?"on":"off",search_id:i})})(null!==(e=c.f.commonParams.page_name)&&void 0!==e?e:"",K,z?D:void 0,x)}),[v,G,se,_,U,K,z,D,x]),re=(0,s.useCallback)((()=>{f.$.handleCloseManageFeedsPopUp(),se.close()}),[se]),de=(0,s.useCallback)((e=>{te&&f.$.handleSwitchPersonalizationToggle({value:e?"on":"off"}),null==b||b(e),X(e)}),[te,b]),le=((e,t)=>{const i=$(e),s=(0,n.jsxs)("div",{onClick:t,children:[i,t]});return N(s)})(Y),pe=(0,s.useCallback)((()=>{var e;const t=K!==Y;t&&(null==i||i(Y),G[x?"setIsFeedPersonalized":"setIsSearchPersonalized"](Y),oe(Y),R?le():(0,E.J2)(m.oG,"1"),null==u||u(Y),x&&(h.lL.removeAll(),setTimeout((()=>{Z&&!U?window.location.replace(ie?"/explore":"/"):window.location.reload()}),100))),U||(x?f.$.handleConfirmPersonalizationStatusChange({flag:t?1:0,status:Y?"on":"off"}):((e,t,i)=>{let n;n=t===i?i?4:3:i?2:1,S.$G.handleManageSearchPopupClick({enter_from:e,button_type:"click_done",switch_status:n})})(null!==(e=c.f.commonParams.page_name)&&void 0!==e?e:"",K,Y)),re()}),[K,Y,U,ie,re,i,G,x,oe,u,Z]),ce=(0,s.useCallback)((()=>{null==w||w()}),[w]),ue=(0,s.useMemo)((()=>{if(x&&K){const e=V("filterKeywordsWeb_fypEntry_modal_desc1",{s_keywordLink:"$$kw-link$$"}).split("$$kw-link$$");return[(0,n.jsx)("p",{children:[e[0],(0,n.jsx)(P,{href:"https://www.tiktok.com/setting/keyword-filtering",target:"_blank",children:V("filterKeywordsWeb_fypEntry_manageFeeds_popup")},"kw-link"),e[1]]},"desc1"),(0,n.jsx)("p",{children:V("filterKeywordsWeb_fypEntry_modal_desc2",{s_learnLink:""})},"desc2")]}return V(x?"nonpersonalizedFeeds_turnOn_modal_toggle_bodyFull":K?"personalisedSearch_searchResults_actionSheet_bodyPara1":"personalisedSearch_searchResults_actionSheet_bodyPara1V2")}),[x,K,V]);return{PersonalizedModal:(0,s.useMemo)((()=>{const e=V(x?"nonpersonalizedFeeds_turnOn_modal_toggle_headline":"personalisedSearch_searchResults_actionSheet_header");return(0,n.jsx)(o.nO,Object.assign({width:"Compact",height:"Compact"},se,{children:(0,n.jsxs)(T,{children:[(0,n.jsxs)(C,{children:[e,(0,n.jsx)(L,{onClick:re,children:(0,n.jsx)(g.A,{width:32,height:32})})]}),(0,n.jsx)(k,{children:(0,n.jsxs)(M,{children:[ue,(0,n.jsx)(P,{href:"https://support.tiktok.com/en/using-tiktok/exploring-videos/managing-personalization-on-tiktok",target:"_blank",onClick:ce,children:V(x?"nonpersonalizedFeeds_modal_allScenarios_body_learnMore_articleLink":"personalisedSearch_searchResults_actionSheet_bodyPara2Bold1")})]})}),(0,n.jsxs)(O,{checked:Y,children:[V(x?"nonpersonalizedFeeds_settings_contentPreferences_entrypoint":"personalisedSearch_searchResults_actionSheet_toggle"),(0,n.jsx)(l.d,{checked:Y,onChange:de})]}),(0,n.jsx)(I,{children:(0,n.jsx)(p.y,{buttonTheme:"primary",size:"medium",onClick:pe,children:V(x?"nonpersonalizedFeeds_turnOn_modal_toggle_CTA":"personalisedSearch_searchResults_actionSheet_btn")})})]})}))}),[ue,pe,re,ce,de,x,se,Y,V]),handleOpenModal:ae,handleCloseModal:re}}},48282:(e,t,i)=>{i.d(t,{y:()=>S});var n=i(27334),s=i(91528),o=i.n(s),a=i(65622),r=i(69146),d=i(63161),l=i(10326),p=i(74413),c=i(61942),u=i(60893),v=i(5726),g=i(66839),m=i(38527),_=i(22285);function h(e){return null==e||"number"==typeof e||"boolean"==typeof e?e:"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):Array.isArray(e)?e.map((e=>h(e))):"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(((t,i)=>(t[i]=h(e[i]),t)),{}):h(String(e))}class y extends a.PureComponent{dynamicAddCompKey(e=[]){return e&&e.length?e.map(h).reduce(((e,t,i)=>{var s;const[o="",a={},r]=t;return""!==o&&0!==Object.keys(a).length&&e.push((0,n.jsx)(_.hp,{dangerouslyExposeHtml:!0,id:null!==(s=null==r?void 0:r.name)&&void 0!==s?s:o,children:(0,n.jsx)(_.ck,{genericType:o,genericKey:o,schema:a})},`${o}-${i}`)),e}),[]):null}render(){const{wrappedHead:e,metaParams:t={},jsonldList:i=[],children:s}=this.props,{title:o="",keywords:a="",description:r="",robotsContent:d="",canonicalHref:l="",alternateHref:p="",amphtmlHref:c="",applicableDevice:u="",hreflangList:v=[]}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e,{children:[o&&(0,n.jsx)("title",{children:o}),a&&(0,n.jsx)("meta",{name:"keywords",content:a},"keywords"),r&&(0,n.jsx)("meta",{name:"description",content:r},"description"),d&&(0,n.jsx)("meta",{name:"robots",content:d},"robots"),u&&(0,n.jsx)("meta",{name:"applicable-device",content:u},"applicable-device"),l&&(0,n.jsx)("link",{rel:"canonical",href:l},"canonical"),c&&(0,n.jsx)("link",{rel:"amphtml",href:c},"amphtml"),p&&(0,n.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:p},"alternate-media"),v.length?v.map((({hreflang:e,href:t})=>(0,n.jsx)("link",{rel:"alternate",hrefLang:e,href:t},e))):null,s]}),this.dynamicAddCompKey(i)]})}}const f=y,S=function({appContext:e}){const{pathname:t}=(0,d.zy)(),{metaParams:i,jsonldList:s,disableAlternateLink:_,generateAlternateWithCanonical:h,enableAlternateHreflang:y,alternateHreflangList:S}=(0,p.X)(g.b,{selector:({metaParams:e,jsonldList:t,disableAlternateLink:i,generateAlternateWithCanonical:n,enableAlternateHreflang:s,alternateHreflangList:o})=>({metaParams:e,jsonldList:t,disableAlternateLink:i,generateAlternateWithCanonical:n,enableAlternateHreflang:s,alternateHreflangList:o}),equalityFn:c.bN});let b=t;try{b=encodeURI(decodeURI(t))}catch(e){}const w=(0,a.useMemo)((()=>{let e=[];const{robotsContent:t,canonicalHref:n}=null!=i?i:{},s=t&&!t.includes("noindex"),a=h&&null!=n?n:`${u.C}${b}`;if(s&&y)return Object.assign(Object.assign({},i),{hreflangList:o()(S,"hreflang")});if(s&&!_){const t=(0,m.Iz)(b);e=[{hreflang:"x-default",href:t?u.C:a}],v.wX.forEach((({value:i})=>{const n=i.replace(/(^zh([_-]\w+)*)/g,"zh-Hant"),s=t?`${u.C}/${n}/`:`${a}?lang=${n}`;e.push({hreflang:n,href:s})}))}return Object.assign(Object.assign({},i),{hreflangList:o()(e,"hreflang")})}),[e,_,h,i,b,y,S]);return(0,l.o)((()=>Promise.resolve()),[]),(0,n.jsx)(f,{wrappedHead:r.mg,metaParams:w,jsonldList:s})};S.deferSSREffects=!0},51824:(e,t,i)=>{i.d(t,{E:()=>F});var n,s=i(11379),o=i(68055),a=i(54954),r=i(60842),d=(i(15283),i(72038)),l=i(45277),p=i(73766),c=i(33583),u=i(90245),v=i(33293),g=i(95831),m=i(94488),_=i(91109),h=i(33152),y=i(93401),f=i(60057),S=i(58475),b=i(22522),w=i(60893),T=i(35999),C=i(60690),k=i(83238),M=i(31310),O=i.n(M);function P(e){const t="m"===e;return{isM:t,protocal:t?"snssdk1233://":"snssdk1180://"}}function I(e){var t,i,s,o;const{schema:a="",pageType:r,shareMeta:d,metaParams:l,appType:p}=e,c=P(p),{isM:u}=c,{APP_INFO:v}=n,g=u?v.M_NAME:v.T_NAME,m=u?v.M_STORE:v.T_STORE,_=u?v.M_PACKAGE:v.T_PACKAGE,h=0===r?null!==(t=null==d?void 0:d.title)&&void 0!==t?t:"":null!==(i=null==l?void 0:l.title)&&void 0!==i?i:"",y=0===r?null!==(s=null==d?void 0:d.desc)&&void 0!==s?s:"":null!==(o=null==l?void 0:l.description)&&void 0!==o?o:"",f={"al:ios:url":a,"al:android:url":a,"al:ios:app_store_id":m,"al:ios:app_name":g,"al:android:app_name":g,"al:android:package":_},S={"og:site_name":"TikTok","og:type":"website","og:title":h,"og:description":y,"fb:app_id":u?v.M_FACEBOOK_ID:v.T_FACEBOOK_ID},b={"twitter:app:id:iphone":m,"twitter:app:id:googleplay":_,"twitter:card":"summary","twitter:site":"TikTok","twitter:title":h,"twitter:description":y};return Object.assign(Object.assign(Object.assign({},f),S),b)}!function(e){e.APP_INFO={M_PACKAGE:"com.zhiliaoapp.musically",T_PACKAGE:"com.ss.android.ugc.trill",M_STORE:"835599320",T_STORE:"1235601864",M_NAME:"musical.ly",T_NAME:"TIKTOK",M_FACEBOOK_ID:"597615686992125",T_FACEBOOK_ID:"1862952583919182"},e.TTNOW_INFO={NAME:"TIKTOK.NOW",STORE_ID:"1641062073",PACKAGE:"com.ss.android.ugc.now",FACEBOOK_ID:"1243781563051427"},e.COIN_LITE_INFO={PACKAGE:"com.ss.android.ugc.tiktok.lite",STORE:"6447160980",NAME:"TikTok Lite",FACEBOOK_ID:"171444425350301"}}(n||(n={}));const L="https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png";let j=class extends k.E{constructor(){super(...arguments),this.defaultState={value:{}}}setSharingMetaState(e,t){var i;e.value=O()(t,{"og:image":L,"twitter:image":null!==(i=t["og:image"])&&void 0!==i?i:L})}};(0,s.Cg)([(0,o.h5)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object,Object]),(0,s.Sn)("design:returntype",void 0)],j.prototype,"setSharingMetaState",null),j=(0,s.Cg)([(0,a.n)("SharingMetaState")],j);let x=class extends S.E{constructor(e,t){super(),this.t=e,this.stateModule=t,this.defaultState={}}setSharingMetaStateEffect(e){return e.pipe((0,v.Z)((e=>(0,p.of)(this.setSharingMetaState(e)).pipe((0,d.q)(this.terminate("setSharingMetaStateEffect"))))))}setSharingMetaState(e){return this.stateModule.getActions().setSharingMetaState(e)}setVideoSharingMetaEffect(e){return e.pipe((0,v.Z)((({seoProps:e,response:t,appType:i,query:n})=>this.setVideoSharingMeta(e,t,i,n).pipe((0,d.q)(this.terminate("setVideoSharingMetaEffect"))))))}setVideoSharingMeta(e,t,i,n){var s,o,a,r,d,l,c,u,v,g,m,_,h,y,f,S,b,w,T,C;const k=null===(s=t.itemInfo)||void 0===s?void 0:s.itemStruct,M=null==k?void 0:k.video,O=null==k?void 0:k.imagePost,{protocal:L}=P(i),j=I({schema:`${L}${Boolean(null==k?void 0:k.story)?"story/detail":"aweme/detail"}/${null===(o=t.itemInfo)||void 0===o?void 0:o.itemStruct.id}?${n}`,metaParams:e.metaParams,pageType:0,shareMeta:null==t?void 0:t.shareMeta,response:t,appType:i}),x=(null===(a=null==M?void 0:M.shareCover)||void 0===a?void 0:a[0])||(null!==(u=O?null===(l=null===(d=null===(r=O.shareCover)||void 0===r?void 0:r.imageURL)||void 0===d?void 0:d.urlList)||void 0===l?void 0:l[0]:null===(c=null==M?void 0:M.shareCover)||void 0===c?void 0:c[1])&&void 0!==u?u:""),E=null!==(m=null!==(g=String(null===(v=null==O?void 0:O.shareCover)||void 0===v?void 0:v.imageWidth))&&void 0!==g?g:null==M?void 0:M.width)&&void 0!==m?m:"",A=null!==(y=null!==(h=String(null===(_=null==O?void 0:O.shareCover)||void 0===_?void 0:_.imageHeight))&&void 0!==h?h:null==M?void 0:M.height)&&void 0!==y?y:"",D=Object.assign(Object.assign({},j),{"og:image":x,"twitter:image":x,"og:image:width":E,"og:image:height":A}),F=null===(w=null===(b=null===(S=null===(f=e.jsonldList)||void 0===f?void 0:f.find((e=>"VideoObject"===e[0])))||void 0===S?void 0:S[1])||void 0===b?void 0:b.thumbnailUrl)||void 0===w?void 0:w[0];return Boolean(F)&&Object.assign(D,{"og:image":F,"og:image:width":String(null!==(T=null==M?void 0:M.width)&&void 0!==T?T:""),"og:image:height":String(null!==(C=null==M?void 0:M.height)&&void 0!==C?C:"")}),(0,p.of)(this.stateModule.getActions().setSharingMetaState(D))}setUserSharingMetaEffect(e){return e.pipe((0,v.Z)((({seoProps:e,response:t,appType:i})=>this.setUserSharingMeta(e,t,i).pipe((0,d.q)(this.terminate("setUserSharingMetaEffect"))))))}setUserSharingMeta(e,t,i){var n,s,o,a;const{protocal:r}=P(i),d=I({response:t,pageType:1,schema:`${r}user/profile/`,metaParams:e.metaParams,appType:i}),l=null===(n=t.userInfo)||void 0===n?void 0:n.user,c=null!==(o=null!==(s=null==l?void 0:l.avatarMedium)&&void 0!==s?s:null==l?void 0:l.avatarThumb)&&void 0!==o?o:L,u=Object.assign(Object.assign({},d),{"og:image":c,"twitter:image":c,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(u))}setMusicSharingMetaEffect(e){return e.pipe((0,v.Z)((({seoProps:e,response:t,appType:i})=>this.setMusicSharingMeta(e,t,i).pipe((0,d.q)(this.terminate("setMusicSharingMetaEffect"))))))}setMusicSharingMeta(e,t,i){var n,s,o,a,r,d;const l=null===(n=t.musicInfo)||void 0===n?void 0:n.music,{protocal:c}=P(i),u=I({response:t,pageType:4,schema:`${c}user/profile/${null==l?void 0:l.id}`,metaParams:e.metaParams,appType:i}),v=null!==(o=null!==(s=null==l?void 0:l.coverMedium)&&void 0!==s?s:null==l?void 0:l.coverThumb)&&void 0!==o?o:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/music-default.png",g=null!==(a=null==l?void 0:l.title)&&void 0!==a?a:"",m=null!==(r=null==l?void 0:l.authorName)&&void 0!==r?r:"",_=Object.assign(Object.assign({},u),{"og:image":v,"twitter:image":v,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(d=e.metaParams)||void 0===d?void 0:d.title,"music:duration":"0","music:album:track":g,"music:musician":m});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(_))}setMusicPlaylistSharingMeta(e,t,i){var n,s,o,a;const r=t.mc_info,{protocal:d}=P(i),l=I({schema:`${d}assmusic/category/${null==r?void 0:r.id_str}?name=${encodeURIComponent(null!==(n=null==r?void 0:r.name)&&void 0!==n?n:"")}&previous_page=reflow_playlist&enter_method=reflow_return`,metaParams:Object.assign(Object.assign({},e.metaParams),{title:null===(s=null==r?void 0:r.share_info)||void 0===s?void 0:s.share_title,description:null===(o=null==r?void 0:r.share_info)||void 0===o?void 0:o.share_desc}),appType:i}),c=(null==r?void 0:r.share_cover)?(0,C.BO)(null==r?void 0:r.share_cover):"https://p19-aop-sg.tiktokcdn.com/tos-alisg-i-yzb763657w-sg/d2f2b037e19646ad5f2bbd779a550302.png~tplv-yzb763657w-resize:800:800.jpeg",u=Object.assign(Object.assign({},l),{"og:image":c,"twitter:image":c,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(u))}setStickerSharingMeta(e,t,i){var n,s,o,a;const{protocal:r}=P(i),d=null===(n=t.stickerInfo)||void 0===n?void 0:n.sticker,l=I({pageType:3,response:t,schema:`${r}sticker/detail/${null==d?void 0:d.id}`,metaParams:e.metaParams,appType:i}),c=null===(o=null===(s=null==d?void 0:d.coverUrls)||void 0===s?void 0:s.urlList)||void 0===o?void 0:o[0],u=Object.assign(Object.assign({},l),{"og:image":c,"twitter:image":c,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(u))}setChallengeSharingMetaEffect(e){return e.pipe((0,v.Z)((({seoProps:e,response:t,appType:i})=>this.setChallengeSharingMeta(e,t,i).pipe((0,d.q)(this.terminate("setChallengeSharingMetaEffect"))))))}setChallengeSharingMeta(e,t,i){var n,s,o,a;const{protocal:r}=P(i),d=null===(n=t.challengeInfo)||void 0===n?void 0:n.challenge,l=I({pageType:3,response:t,schema:`${r}challenge/detail/${null==d?void 0:d.id}`,metaParams:e.metaParams,appType:i}),c=null!==(o=null!==(s=null==d?void 0:d.profileMedium)&&void 0!==s?s:null==d?void 0:d.profileThumb)&&void 0!==o?o:"https://lf16-tiktok-web.ttwstatic.com/obj/ttfe-malisg/tiktok_web/amp/m-hashtag-default.png",u=Object.assign(Object.assign({},l),{"og:image":c,"twitter:image":c,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(u))}setCollectionSharingMeta(e,t,i){var n,s,o,a,r,d,l;const{protocal:c}=P(t),u=e.shareMeta,v=I({pageType:121,response:e,schema:`${c}collection/detail?collection_id=${i}&page_name=reflow_collection`,metaParams:{title:null!==(n=null==u?void 0:u.title)&&void 0!==n?n:this.t("TikTok | Make Your Day",{},"TikTok | Make Your Day"),description:null!==(s=null==u?void 0:u.desc)&&void 0!==s?s:this.t("SEO_homepage_desc",{},"TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos. Download the app to get started.")},appType:t}),g=null!==(d=null===(r=null===(a=null===(o=null==e?void 0:e.collectionInfo)||void 0===o?void 0:o.cover)||void 0===a?void 0:a.urlList)||void 0===r?void 0:r[0])&&void 0!==d?d:"https://sf-static.tiktokcdn.com/obj/tiktok-web-common-sg/mtact/static/images/tiktok-logo/poster-square.png",m=Object.assign(Object.assign({},v),{"og:image":g,"twitter:image":g,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(l=e.shareMeta)||void 0===l?void 0:l.title});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(m))}setSearchSharingMeta(e,t,i,n){var s,o,a,r;const{protocal:d}=P(n),l=I({schema:`${d}search?keyword=${null!==(o=null===(s=null==t?void 0:t.contentInfo)||void 0===s?void 0:s.query)&&void 0!==o?o:i}`,metaParams:e.metaParams,appType:n}),c=null!==(r=null===(a=null==t?void 0:t.contentInfo)||void 0===a?void 0:a.thirdPartyPreviewImg)&&void 0!==r?r:"https://sf-static.tiktokcdn.com/obj/search-static-maliva/maliva/ugvonpsj1631257573250",u=Object.assign(Object.assign({},l),{"og:image":c,"twitter:image":c,"og:image:width":"1200","og:image:height":"678"});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(u))}setLiveRoomSharingMeta(e,t,i){var n,s,o,a,r,d,l;const{protocal:c}=P(i),u=I({schema:`${c}live?room_id=${null===(s=null===(n=t.userInfo)||void 0===n?void 0:n.user)||void 0===s?void 0:s.roomId}`,metaParams:e.metaParams,pageType:12,appType:i}),v=null===(o=t.userInfo)||void 0===o?void 0:o.user,g=null!==(r=null!==(a=null==v?void 0:v.avatarMedium)&&void 0!==a?a:null==v?void 0:v.avatarThumb)&&void 0!==r?r:L,m=null!==(d=null==v?void 0:v.nickname)&&void 0!==d?d:null==v?void 0:v.uniqueId,_=null==v?void 0:v.uniqueId,h=Object.assign(Object.assign({},u),{"og:image":g,"og:image:secure_url":g,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(l=e.metaParams)||void 0===l?void 0:l.title,"twitter:creator":m,"twitter:creator:id":_});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(h))}setQuestionSharingMeta(e,t,i,n){var s,o,a,r,d,l,p,c,u;const{protocal:v}=P(i),g=I({schema:`${v}qna/detail/${null===(s=e.questionInfo)||void 0===s?void 0:s.id}`,metaParams:{title:null===(o=e.shareMeta)||void 0===o?void 0:o.title,description:null===(a=e.shareMeta)||void 0===a?void 0:a.desc},pageType:16,response:e,appType:i}),m="qna"===(null==n?void 0:n.scene)?{"og:title":this.t("qaoop_title",{},"Hi friends, I’m inviting you to answer a question on #TikTok!"),"og:description":this.t("qaoop_desc",{},"Share your wisdom!")}:void 0,_=null!==(p=null!==(d=null===(r=null==t?void 0:t.video.shareCover)||void 0===r?void 0:r[1])&&void 0!==d?d:null===(l=null==t?void 0:t.video.shareCover)||void 0===l?void 0:l[0])&&void 0!==p?p:L,h=Object.assign(Object.assign(Object.assign({},g),{"og:image":_,"twitter:image":_,"og:image:alt":null!==(u=null===(c=e.shareMeta)||void 0===c?void 0:c.title)&&void 0!==u?u:"the cover of first video"}),m);return this.stateModule.getActions().setSharingMetaState(h)}setVideoPlaylistSharingMeta(e,t,i){var n,s,o,a,r,d,l,p,c;const{protocal:u}=P(i),v=`@${null===(s=null===(n=e.mixInfo)||void 0===n?void 0:n.creator)||void 0===s?void 0:s.nickname}`,g=null!==(a=null===(o=e.mixInfo)||void 0===o?void 0:o.name)&&void 0!==a?a:"Untitled playlist",m=I({schema:`${u}mix/detail?id=${null!==(d=null===(r=e.mixInfo)||void 0===r?void 0:r.id)&&void 0!==d?d:"nan"}`,metaParams:{title:this.t("playlist_share_title",{Playlist_name:g,username:v},`Playlist ${g} created by ${v}`),description:this.t("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!")},pageType:119,response:e,appType:i}),[_]=null!=t?t:[],h=null!==(p=null===(l=null==_?void 0:_.video.shareCover)||void 0===l?void 0:l[1])&&void 0!==p?p:null===(c=null==_?void 0:_.video.shareCover)||void 0===c?void 0:c[0],y=Object.assign(Object.assign({},m),{"og:image":h,"twitter:image":h,"og:image:alt":`first video of ${g}`});return this.stateModule.getActions().setSharingMetaState(y)}setFollowingSharingMeta(e,t){const i=I({metaParams:e.metaParams,appType:t}),n=Object.assign(Object.assign({},i),{"og:title":this.t("serp_following_title"),"og:description":this.t("serp_following_desc"),"og:image":L,"twitter:image":L,"twitter:title":this.t("SEO_following_title"),"twitter:description":this.t("SEO_following_desc")});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(n))}setPoiSharingMeta(e,t,i){var n;const{protocal:s}=P(i),o=null===(n=t.poiInfo)||void 0===n?void 0:n.poi,a=I({pageType:18,response:t,schema:`${s}poi/detail?poi_id=${null==o?void 0:o.id}`,metaParams:e.metaParams,appType:i});return(0,p.of)(this.stateModule.getActions().setSharingMetaState(a))}};(0,s.Cg)([(0,o.Mj)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",void 0)],x.prototype,"setSharingMetaStateEffect",null),(0,s.Cg)([(0,o.Mj)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",void 0)],x.prototype,"setVideoSharingMetaEffect",null),(0,s.Cg)([(0,o.Mj)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",void 0)],x.prototype,"setUserSharingMetaEffect",null),(0,s.Cg)([(0,o.Mj)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",void 0)],x.prototype,"setMusicSharingMetaEffect",null),(0,s.Cg)([(0,o.Mj)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",void 0)],x.prototype,"setChallengeSharingMetaEffect",null),x=(0,s.Cg)([(0,a.n)("SharingMeta"),(0,s.Qj)(0,(0,r.y)(T.hp)),(0,s.Sn)("design:paramtypes",[Function,j])],x);var E=i(30206),A=i(57538);const D=[...b.TN,...b.Wq];let F=class extends S.E{constructor(e,t,i,n){super(),this.stateModule=e,this.service=t,this.sharingMeta=i,this.t=n,this.defaultState={}}updateSEOState(e){const{metaParams:t={},jsonldList:i=[],disableAlternateLink:n=!1,generateAlternateWithCanonical:s}=e;this.stateModule.updateAtom({metaParams:t,jsonldList:i,disableAlternateLink:n,generateAlternateWithCanonical:s})}setPCMusicSEOProps(e){return e.pipe((0,v.Z)((({response:e,language:t,appType:i})=>this.setMusicSEOProps(e,{language:t},i).pipe((0,d.q)(this.terminate("setPCMusicSEOProps"))))))}setFeedSEOProps(e){return e.pipe((0,g.p)((e=>{const{pageType:t,topic:i,topicType:n,language:s}=e,o={seoProps:{pageId:"",pageType:t},topic:i,topicType:n,language:s};return this.service.fetchSEOProps(o,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((()=>(0,p.of)(this.terminate()))),(0,m.W)((e=>(0,p.of)(this.noop(),this.terminate()))))})))}setGoLiveSEOProps(e){return e.pipe((0,g.p)((({language:e,user:t})=>{const i={seoProps:{pageId:"",pageType:14},user:t,language:e,t:this.t};return this.service.fetchSEOProps(i,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((()=>(0,p.of)(this.terminate()))),(0,m.W)((()=>(0,p.of)(this.noop()))))})))}setHomeSEOProps(e){return this.service.fetchSEOProps({seoProps:{pageId:"",pageType:101},language:e},D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((()=>(0,c.h)((0,p.of)(this.sharingMeta.setSharingMetaState({"og:image":w.U}))))))}setForyouSEOProps(e,t){if(-1===e.statusCode)return(0,p.of)(this.noop());const i=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:5},t:this.t});return this.service.fetchSEOProps(i,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,_.T)((()=>this.noop())))}setVideoSEOProps(e,t,i,n,s){var o,a,r,d,u,g,m,_;if(-1===e.statusCode)return(0,p.of)(this.noop());const S=null!==(r=null===(a=null===(o=null==e?void 0:e.itemInfo)||void 0===o?void 0:o.itemStruct)||void 0===a?void 0:a.id)&&void 0!==r?r:"",b=null!==(_=null===(m=null===(g=null===(u=null===(d=null==e?void 0:e.itemInfo)||void 0===d?void 0:d.itemStruct)||void 0===u?void 0:u.author)||void 0===g?void 0:g.bioLink)||void 0===m?void 0:m.link)&&void 0!==_?_:"";return(0,p.of)(e).pipe((0,h.E)(this.stateModule.state$.pipe((0,y.p)((e=>void 0!==e.abtest)))),(0,v.Z)((([o,a])=>{const r=Object.assign(Object.assign(Object.assign({},e),t),{transcriptContent:s,bioLink:b,seoProps:{pageId:S,pageType:0,abtest:a.abtest},t:this.t});return this.service.fetchSEOProps(r,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,f.n)((t=>(0,c.h)(this.sharingMeta.setVideoSharingMeta(t,e,i,n)))))})))}setCollectionSEOProps(e,t,i,n,s){var o,a,r;const d=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(r=null===(a=null===(o=e.collectionInfo)||void 0===o?void 0:o.collectionId)||void 0===a?void 0:a.toString())&&void 0!==r?r:"",pageType:121},t:this.t,items:s});return this.service.fetchSEOProps(d,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,f.n)((()=>{var t,s,o;return(0,c.h)(n?(0,p.of)(this.noop()):this.sharingMeta.setCollectionSharingMeta(e,i,null!==(o=null===(s=null===(t=null==e?void 0:e.collectionInfo)||void 0===t?void 0:t.collectionId)||void 0===s?void 0:s.toString())&&void 0!==o?o:""))})))}setSearchSharingSEOProps(e,t,i,n){if(-1===e.statusCode)return(0,p.of)(this.noop());const s=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:111},eventName:i,t:this.t});return this.service.fetchSEOProps(s,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((t=>(0,c.h)(this.sharingMeta.setSearchSharingMeta(t,e,i,n)))))}setQuestionSEOProps(e,t,i,n,s,o){var a;if(-1===e.statusCode)return(0,p.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(a=e.questionInfo)||void 0===a?void 0:a.id,pageType:16},answers:i,t:this.t,items:o});return this.service.fetchSEOProps(r,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((()=>(0,p.of)(this.sharingMeta.setQuestionSharingMeta(e,i[0],n,s)))))}setVideoPlaylistSEOProps(e,t,i,n){var s;if(-1===e.statusCode)return(0,p.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),i),{itemList:t,seoProps:{pageId:null===(s=e.mixInfo)||void 0===s?void 0:s.id,pageType:119},t:this.t});return this.service.fetchSEOProps(o,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((()=>(0,p.of)(this.sharingMeta.setVideoPlaylistSharingMeta(e,t,n)))))}setUserSEOProps(e,t,i,n){const{userInfo:s,statusCode:o}=e;return-1===o?(0,p.of)(this.noop()):(0,p.of)(e).pipe((0,h.E)(this.stateModule.state$),(0,v.Z)((([o,a])=>{var r,d;const p=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(d=null===(r=null==s?void 0:s.user)||void 0===r?void 0:r.id)&&void 0!==d?d:"",pageType:1,abtest:a.abtest},t:this.t,items:n});return this.service.fetchSEOProps(p,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,f.n)((t=>(0,c.h)(this.sharingMeta.setUserSharingMeta(t,e,i)))))})))}setChallengeSEOProps(e,t,i,n,s){var o;const{statusCode:a}=e;if(-1===a)return(0,p.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:a,seoProps:{pageId:null===(o=e.challengeInfo)||void 0===o?void 0:o.challenge.id,pageType:3},t:this.t,items:n,relatedChallengeList:s});return this.service.fetchSEOProps(r,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,f.n)((t=>(0,c.h)(this.sharingMeta.setChallengeSharingMeta(t,e,i)))))}setMusicSEOProps(e,t,i,n){var s;const{statusCode:o}=e;if(-1===o)return(0,p.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:o,seoProps:{pageId:null===(s=e.musicInfo)||void 0===s?void 0:s.music.id,pageType:4},items:n,t:this.t});return this.service.fetchSEOProps(a,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,f.n)((t=>(0,c.h)(this.sharingMeta.setMusicSharingMeta(t,e,i)))))}setMusicPlaylistSEOProps(e,t,i){var n;const{status_code:s}=e;if(-1===s)return(0,p.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),t),{status_code:s,seoProps:{pageId:null===(n=e.mc_info)||void 0===n?void 0:n.id_str,pageType:17},t:this.t});return this.service.fetchSEOProps(o,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((t=>(0,c.h)(this.sharingMeta.setMusicPlaylistSharingMeta(t,e,i)))))}setSearchSEOProps(e,t,i){const{status_code:n}=e;if(-1===n)return(0,p.of)(this.noop());const s=Object.assign(Object.assign(Object.assign(Object.assign({},e),t),i),{seoProps:{pageId:"",pageType:105},t:this.t});return this.service.fetchSEOProps(s,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,_.T)((()=>this.noop())))}setLiveRoomSEOProps(e,t,i){var n;const{userInfo:s,statusCode:o}=e,a=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(n=null==s?void 0:s.user.id)&&void 0!==n?n:"",pageType:12},t:this.t});return-1===o?(0,p.of)(this.noop()):this.service.fetchSEOProps(a,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((t=>(0,c.h)(this.sharingMeta.setLiveRoomSharingMeta(t,e,i)))))}setFollowingSEOProps(e,t,i){if(-1===e.statusCode)return(0,p.of)(this.noop());const n=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:11},t:this.t});return this.service.fetchSEOProps(n,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((e=>(0,c.h)(this.sharingMeta.setFollowingSharingMeta(e,i)))))}setPoiSEOProps(e,t,i,n){var s,o;const{statusCode:a}=e;if(-1===a)return(0,p.of)(this.noop());const r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),{statusCode:a,seoProps:{pageId:null===(o=null===(s=e.poiInfo)||void 0===s?void 0:s.poi)||void 0===o?void 0:o.id,pageType:18}}),n),{t:this.t});return this.service.fetchSEOProps(r,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((t=>(0,c.h)(this.sharingMeta.setPoiSharingMeta(t,e,i)))))}setPoiCategorySEOProps(e,t,i,n){var s,o;const{statusCode:a}=e;if(-1===a)return(0,p.of)(this.noop());const r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),{statusCode:a,seoProps:{pageId:null===(o=null===(s=e.poiInfo)||void 0===s?void 0:s.poi)||void 0===o?void 0:o.id,pageType:125}}),n),{t:this.t});return this.service.fetchSEOProps(r,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((t=>(0,c.h)(this.sharingMeta.setPoiSharingMeta(t,e,i)))))}setEventDetailSEOProps(e){return e.pipe((0,g.p)((e=>{const{eventTitle:t,eventId:i,subscriberCount:n,language:s="en"}=e,o={seoProps:{pageId:"",pageType:114},t:this.t,eventTitle:t,language:s,eventId:i,subscriberCount:n};return this.service.fetchSEOProps(o,D).pipe((0,l.M)((e=>this.updateSEOState(e))),(0,v.Z)((()=>(0,p.of)(this.terminate()))),(0,m.W)((()=>(0,p.of)(this.noop()))))})))}reportImpressionByEventbus(e){return this.service.reportImpressionByEventbus(e)}reportImpressionByRpc(e){return this.service.reportImpressionByRpc(e)}};(0,s.Cg)([(0,o.Mj)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",void 0)],F.prototype,"setPCMusicSEOProps",null),(0,s.Cg)([(0,o.Mj)({payloadGetter:1}),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",void 0)],F.prototype,"setFeedSEOProps",null),(0,s.Cg)([(0,o.Mj)({payloadGetter:1}),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",u.c)],F.prototype,"setGoLiveSEOProps",null),(0,s.Cg)([(0,o.Mj)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[u.c]),(0,s.Sn)("design:returntype",u.c)],F.prototype,"setEventDetailSEOProps",null),F=(0,s.Cg)([(0,a.n)("SEO"),(0,s.Qj)(3,(0,r.y)(T.hp)),(0,s.Sn)("design:paramtypes",[A.p,E.F,x,Function])],F)},30206:(e,t,i)=>{i.d(t,{F:()=>_});var n=i(11379),s=i(49610),o=i(60842),a=i(45372),r=i.n(a),d=i(73766),l=i(46339),p=i(84864),c=i(87079),u=i(13191),v=i(43573),g=i(2070),m=i(35999);let _=class{constructor(e,t){this.t=e,this.fetch=t}fetchSEOProps(e,t){var i,n,s,o;e.t=this.t;const a=null!==(n=null===(i=(0,l.y)(e,t).seoProps)||void 0===i?void 0:i.metaParams)&&void 0!==n?n:{},r=null!==(o=null===(s=(0,l.d)(e,t).seoProps)||void 0===s?void 0:s.jsonldList)&&void 0!==o?o:[],p=Object.assign(Object.assign({},e.seoProps),{metaParams:a,jsonldList:r});return(0,d.of)(p)}getUA(){return window.navigator.userAgent}getTrafficType(){return(0,p.q)()}getLaunchMode(){return(0,c.o7)()}fetchABTest(e){const t=(0,u.YI)(v.X);return t?(0,d.of)(t):(0,d.of)({pageId:"-1",vidList:[],parameters:{}})}reportImpressionByEventbus(e){}reportImpressionByRpc(e){this.fetch.post("/api/discover/client_impression/",{body:JSON.stringify({timestamp:e.Timestamp,visitPageUrl:e.VisitPageUrl,urls:e.Urls,module:e.Module,trafficType:e.TrafficType}),headers:{"content-type":"application/json"},baseUrlType:2}).subscribe(r())}};_=(0,n.Cg)([(0,s._)(),(0,n.Qj)(0,(0,o.y)(m.hp)),(0,n.Sn)("design:paramtypes",[Function,g.pM])],_)},57538:(e,t,i)=>{i.d(t,{p:()=>y});var n=i(11379),s=i(83238),o=i(68055),a=i(54954),r=i(60842),d=i(59158),l=i(73766),p=i(90245),c=i(60057),u=i(74895),v=i(72038),g=i(66839),m=i(21676),_=i(30206);const h=(e="")=>{try{return decodeURI(e)}catch(t){return e}};let y=class extends s.E{constructor(e,t){super(),this.service=e,this.jotaiStore=t,this.defaultState={abtest:void 0,loading:!1,canonical:void 0,pageType:999}}updateAtom(e){this.jotaiStore.set(g.b,e)}setSEOState(e,t){return Object.assign(Object.assign({},e),{metaParams:t.metaParams,jsonldList:t.jsonldList})}setAbTest(e,t){return Object.assign(Object.assign({},e),{abtest:t})}setLoading(e,t){return Object.assign(Object.assign({},e),{loading:t})}setCanonical(e,t){return Object.assign(Object.assign({},e),{canonical:t})}setRouterLoading(e,t){return Object.assign(Object.assign({},e),{routerLoading:t})}fetchAbTest(e){return e.pipe((0,c.n)((e=>h(e)===h(this.state.canonical)?d.w:this.service.fetchABTest(e).pipe((0,c.n)((t=>(0,l.of)(this.getActions().setAbTest(t),this.getActions().setCanonical(e),this.terminate()))),(0,u.Z)(this.getActions().setLoading(!0)),(0,v.q)(this.getActions().setLoading(!1))))))}};(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",Object)],y.prototype,"setSEOState",null),(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",Object)],y.prototype,"setAbTest",null),(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",Object)],y.prototype,"setLoading",null),(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",Object)],y.prototype,"setCanonical",null),(0,n.Cg)([(0,o.HI)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",Object)],y.prototype,"setRouterLoading",null),(0,n.Cg)([(0,o.Mj)({payloadGetter:1}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[p.c]),(0,n.Sn)("design:returntype",void 0)],y.prototype,"fetchAbTest",null),y=(0,n.Cg)([(0,a.n)("SEOState"),(0,n.Qj)(1,(0,r.y)(m.J7)),(0,n.Sn)("design:paramtypes",[_.F,Object])],y)},35219:(e,t,i)=>{i.d(t,{U:()=>E});var n=i(11379),s=i(68055),o=i(54954),a=i(60842),r=i(73766),d=i(59158),l=i(13919),p=i(21438),c=i(90245),u=i(60057),v=i(45277),g=i(33293),m=i(50717),_=i(33152),h=i(91109),y=i(94488),f=i(74895),S=i(95831),b=i(88489),w=i(98073),T=i(87749),C=i(54086),k=i(58475),M=i(46863),O=i(60204),P=i(95763),I=i(34111),L=i(35999),j=i(60690),x=i(95524);let E=class extends k.E{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={users:{},stats:{}}}multiSetUser(e,t){(0,M.Gp)().multiSetUser(t)}setUser(e,t){(0,M.Gp)().setUser(t)}setUserRelation(e,t){(0,M.Gp)().setUserRelation(t)}setUserStats(e,t){(0,M.Gp)().setUserStats(t)}multiSetUserStats(e,t){(0,M.Gp)().multiSetUserStats(t)}getUserDetail(e){return e.pipe((0,u.n)((e=>this.service.getUserDetail(e).pipe((0,v.M)((e=>{(0!==e.statusCode&&10222!==e.statusCode||!e.userInfo)&&console.warn("Get user detail failed for getting wrong response")})),(0,g.Z)((e=>0!==e.statusCode&&10222!==e.statusCode||!e.userInfo?d.w:(0,r.of)(this.getActions().setUser(Object.assign(Object.assign({},e.userInfo.user),{extraInfo:{statusCode:e.statusCode}})),this.getActions().setUserStats({stats:Object.assign(Object.assign({},e.userInfo.stats),{needFix:!1}),uniqueId:e.userInfo.user.uniqueId})))),(0,P.n)({})))))}postCommitFollowUser(e){return e.pipe((0,m.$)((({uniqueId:e})=>e)),(0,g.Z)((e=>e.pipe((0,_.E)(this.state$),(0,h.T)((([e,t])=>{const i=t.users[e.uniqueId],{id:s,secUid:o="",relation:a=-1}=i,r=(0,O.gN)(a),d={type:1===r?1:0,action_type:1===r?1:0,user_id:s,sec_user_id:o,from:18,channel_id:0,from_pre:0},{uniqueId:l,useFollowV2:p,group_id:c,enter_method:u="click_direct_btn",action_position:v}=e;return{query:d,type:r,group_id:c,enter_method:u,action_position:v,restReportParams:(0,n.Tt)(e,["uniqueId","useFollowV2","group_id","enter_method","action_position"]),id:s,uniqueId:l,useFollowV2:p,relation:a,targetUser:i}})),(0,u.n)((({query:e,group_id:t,enter_method:i,action_position:n,restReportParams:s,id:o,uniqueId:a,useFollowV2:r,relation:d,targetUser:p})=>(r?this.service.postCommitFollowUserV2(e):this.service.postCommitFollowUser(e)).pipe((0,y.W)((e=>(0,l.H)(e.json()))),(0,h.T)((e=>Object.assign({status_code:null==e?void 0:e.status_code,follow_status:null==e?void 0:e.follow_status},e))),(0,v.M)((({status_code:a,follow_status:r})=>{if(24===a?C.F.open({content:this.t("inbox_follow_failed_banned"),duration:3,widthType:"half"}):-1===a?C.F.open({content:this.t("inbox_follow_failed_noconnection"),duration:3,widthType:"half"}):0!==a?C.F.open({content:this.t("inbox_follow_failed_other"),duration:3,widthType:"half"}):(0,I.G)(a,[24,-1,0]),w.t.handleFollowUser(Object.assign(Object.assign({},s),{status_code:a,follow_status:r,group_id:t,enter_method:i,action_position:n,to_user_id:o,author_id:o,follow_type:2===r?"mutual":"single",is_private:4===r?1:0}),e.type),s.is_ad_event&&s.tag&&s.value&&s.log_extra&&0===e.type){const{tag:e,value:t,log_extra:i}=s;T.pg.handleFollowCancel({log_extra:i,tag:e,value:t,is_ad_event:"1"})}})),(0,h.T)((({follow_status:e,status_code:t})=>0===t?this.getActions().setUserRelation({uniqueId:a,relation:j.i0[e],shouldUpdateFollowed:!0}):this.getActions().setUserRelation({uniqueId:a,relation:d}))),(0,f.Z)(this.getActions().setUserRelation({uniqueId:a,relation:(0,O.A7)({current:d,targetUser:p})})),(0,P.n)({}))))))))}blockOrUnblockUser(e){return e.pipe((0,S.p)((({secUid:e,isBlock:t,uniqueId:i})=>this.service.blockUser({sec_user_id:null!=e?e:"",block_type:t?0:1}).pipe((0,v.M)((({status_code:e})=>{0===e&&C.F.open({content:this.t(t?"webapp_mig_unblocked":"webapp_mig_blocked"),duration:3,e2eTag:"block-toast"})})),(0,h.T)((({status_code:e})=>0===e?this.getActions().setUserRelation({uniqueId:i,relation:t?0:4}):this.noop())),(0,P.n)({})))))}getLiveStatus(e){return e.pipe((0,u.n)((()=>(0,p.Y)(6e5).pipe((0,_.E)(this.state$),(0,h.T)((([e,{users:t}])=>Object.values(t).filter((e=>Boolean(null==e?void 0:e.roomId))))),(0,g.Z)((e=>(0,r.of)(...e.map((e=>this.getActions().getUserDetail({secUid:null==e?void 0:e.secUid}))))))))))}};E.jotaiAtom=M.p9,(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Array]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"multiSetUser",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"setUser",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"setUserRelation",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"setUserStats",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Array]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"multiSetUserStats",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[c.c]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"getUserDetail",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[c.c]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"postCommitFollowUser",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[c.c]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"blockOrUnblockUser",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[c.c]),(0,n.Sn)("design:returntype",void 0)],E.prototype,"getLiveStatus",null),E=(0,n.Cg)([(0,o.n)("UserModule"),(0,n.Qj)(1,(0,a.y)(L.hp)),(0,n.Sn)("design:paramtypes",[x.D,Function])],E),M.p9.__SIGI_MODULE__=E,(0,b.y)(E)},95524:(e,t,i)=>{i.d(t,{D:()=>l});var n=i(11379),s=i(49610),o=i(73766),a=i(90064),r=i(2070),d=i(2756);let l=class{constructor(e){this.fetch=e}getUserDetail(e){const t=(0,d.Ni)("userDetail");return t?(0,o.of)(t):this.fetch.get("/api/user/detail/",{query:e,baseUrlType:2})}postCommitFollowUser(e){return this.fetch.post("/api/commit/follow/user/",{query:Object.assign(Object.assign({},e),{fromWeb:1}),baseUrlType:2,headers:{[a.nk]:this.fetch.csrfToken}})}postCommitFollowUserV2(e){return this.fetch.post("/api/follow/",{signal:(new AbortController).signal,query:Object.assign(Object.assign({},e),{fromWeb:1}),baseUrlType:2,headers:{[a.nk]:this.fetch.csrfToken}})}blockUser(e){return this.fetch.post("/api/user/block/",{query:Object.assign(Object.assign({},e),{source:3}),baseUrlType:2,headers:{[a.nk]:this.fetch.csrfToken}})}};l=(0,n.Cg)([(0,s._)(),(0,n.Sn)("design:paramtypes",[r.pM])],l)},9190:(e,t,i)=>{i.d(t,{O:()=>ne,D:()=>se});var n=i(11379),s=i(68055),o=i(54954),a=i(60842),r=(i(82446),i(45845)),d=i.n(r),l=i(91528),p=i.n(l),c=i(73766),u=i(33583),v=i(90245),g=i(94488),m=i(95831),_=i(72038),h=i(33152),y=i(33293),f=i(91109),S=i(45277),b=i(60057),w=i(66028),T=i(74895),C=i(88314),k=i(88489),M=i(21676),O=i(58677),P=i(23298),I=i(74760),L=i(87749),j=i(80682),x=i(10212),E=i(54086),A=i(58475),D=i(5183),F=i(96095),U=i(6862),R=i(35296),B=i(88457),N=i(52602),$=i(35999),V=i(14218),W=i(51824),H=i(95199),q=i(55148),z=i(62631),K=i(45372),G=i.n(K);const Z={provide:new z.n("FirstVideoCover"),useValue:G()};var J=i(49610),Q=i(13919),Y=i(55504),X=i(99325),ee=i(2070);let te=class{constructor(e,t){this.fetch=e,this.slardar=t}getCollectionList(e){return this.fetch.get("/api/collection/item_list/",{query:e,baseUrlType:2})}getRecommendList(e){const t=(0,Y.t$)("recommendItemList");if(t)return(0,Q.H)(t);const i=(0,Y.DV)("recommendItemList");return i?(this.slardar.emitEvent("consume_prefetch_data",{now:performance.now()},{status:"unknown",from:"recommendItemList"}),(0,Q.H)(i).pipe((0,g.W)((t=>(this.slardar.emitEvent("consume_prefetch_data",{now:performance.now()},{status:"fail",from:"recommendItemList"}),this.slardar.captureMessage(`consume prefetch data error: ${null==t?void 0:t.message}`,"info",{from:"recommendItemList"}),this.fetch.get("/api/recommend/item_list/",{query:e,baseUrlType:2})))))):this.fetch.get("/api/recommend/item_list/",{query:e,baseUrlType:2})}getTopicList(e){return this.fetch.get("/api/topic/item_list/",{query:e,baseUrlType:2})}getFollowingList(e){return this.fetch.get("/api/following/item_list/",{query:e,baseUrlType:2})}getFriendsList(e){return this.fetch.get("/api/friends/item_list/",{query:e,baseUrlType:2})}getQuestionList(e){return this.fetch.get("/api/question/item_list/",{query:e,baseUrlType:2})}getPlaylistVideoList(e){return this.fetch.get("/api/mix/item_list/",{query:e,baseUrlType:2})}getChallengeList(e){return this.fetch.get("/api/challenge/item_list/",{query:e,baseUrlType:2})}getUserPostList(e){const t=(0,Y.t$)("userPostList");if(t)return(0,Q.H)(t);const i=(0,Y.DV)("userPostList");return i?(this.slardar.emitEvent("consume_prefetch_data",{now:performance.now()},{status:"unknown",from:"userPostList"}),(0,Q.H)(i).pipe((0,g.W)((t=>(console.log("-===error",t),this.slardar.emitEvent("consume_prefetch_data",{now:performance.now()},{status:"fail",from:"userPostList"}),this.slardar.captureMessage(`consume prefetch data error: ${null==t?void 0:t.message}`,"info",{from:"userPostList"}),this.fetch.get("/api/post/item_list/",{query:e,baseUrlType:2})))))):this.fetch.get("/api/post/item_list/",{query:e,baseUrlType:2})}getUserPostListByType(e){return this.fetch.get("/api/post/item_list/v1/",{query:e,baseUrlType:2})}getUserPostListBiDirection(e){return this.fetch.get("/api/creator/item_list/",{query:e,baseUrlType:2})}getUserLikedList(e){return this.fetch.get("/api/favorite/item_list/",{query:e,baseUrlType:2})}getUserFavoriteList(e){return this.fetch.get("/api/user/collect/item_list/",{query:e,baseUrlType:2})}getPoiList(e){return this.fetch.get("/api/poi/item_list/",{query:e,baseUrlType:2})}getExploreList(e){const t=(0,Y.DV)("exploreItemList");return t?(this.slardar.emitEvent("consume_prefetch_data",{now:performance.now()},{status:"unknown",from:"exploreItemList"}),(0,Q.H)(t).pipe((0,g.W)((t=>(this.slardar.emitEvent("consume_prefetch_data",{now:performance.now()},{status:"fail",from:"exploreItemList"}),this.slardar.captureMessage(`consume prefetch data error: ${null==t?void 0:t.message}`,"info",{from:"exploreItemList"}),this.fetch.get("/api/explore/item_list/",{query:e,baseUrlType:2})))))):this.fetch.get("/api/explore/item_list/",{query:e,baseUrlType:2})}getFeedCacheList(e){return this.fetch.get("/api/preload/item_list/",{query:e,baseUrlType:2})}checkItemValidation(e){return this.fetch.get("/api/item/availability/",{query:e,baseUrlType:2})}};te=(0,n.Cg)([(0,J._)({providers:[Z]}),(0,n.Sn)("design:paramtypes",[ee.pM,X.V])],te);var ie=i(71293);let ne=class extends A.E{constructor(e,t,i,n,s,o,a,r){super(),this.service=e,this.item=t,this.videoMask=i,this.seoModule=n,this.bizContext=s,this.jotaiStore=o,this.t=a,this.getFirstVideoCover=r,this.defaultState={},this.createItemListErrorCatcher=e=>t=>t.pipe((0,g.W)((t=>(E.F.destroy(),E.F.open({content:this.t("server_error_title"),duration:3,widthType:"padding"}),null==e||e(t),(0,c.of)({statusCode:-1})))))}resetItemList(e,t){const{key:i,hasMore:n=!0,loading:s=!0,cursor:o="0"}=t;e[i]={list:[],browserList:[],loading:s,statusCode:0,hasMore:n,cursor:o,preloadList:[]}}addItemList(e,t){var i;const{key:n,list:s,statusCode:o=0,hasMore:a,hasMorePrevious:r,hasMoreLatest:l,cursor:c,level:u,preloadList:v,addToHead:g,liveCardDisplay:m,unviewedCursor:_,viewedCursor:h,unique:y=!0}=t,f="topic"===n||"messages"===n;e[n]||(e[n]={list:[],browserList:[],loading:!1,statusCode:o,hasMore:Boolean(a),cursor:c,preloadList:[]});const S=e[n].list,b=y?p()(s,"id").filter((e=>!S.includes(e.id))):s;if(g)e[n].list.unshift(...b.map((({id:e})=>e))),e[n].browserList=[...(0,D.bp)({list:b}),...e[n].browserList];else{const t=d()(e[n].list,b.map((({id:e})=>e)));y?(e[n].list=f?S.concat(s.map((({id:e})=>e))):t,e[n].browserList=f?e[n].browserList.concat((0,D.bp)({list:s})):d()(e[n].browserList,(0,D.bp)({list:b}))):(e[n].list=s.map((({id:e})=>e)),e[n].browserList=(0,D.bp)({list:b}))}e[n].statusCode=o,e[n].hasMore=a,e[n].cursor=c,e[n].level=u,e[n].liveCardDisplay=m,e[n].preloadList=(null!==(i=e[n].preloadList)&&void 0!==i?i:[]).concat(null!=v?v:[]),"creator_tab"===n&&(e[n].hasMorePrevious=null!=r?r:e[n].hasMorePrevious,e[n].hasMoreLatest=null!=l?l:e[n].hasMoreLatest),"friends"===n&&(e[n].unviewedCursor=null!=_?_:e[n].unviewedCursor,e[n].viewedCursor=null!=h?h:e[n].viewedCursor)}setItemListById(e,t){const{key:i,list:n,statusCode:s=0,hasMore:o=!0,cursor:a,level:r}=t;e[i]||(e[i]={list:[],browserList:[],loading:!1,statusCode:s,hasMore:Boolean(o),cursor:a,preloadList:[]}),e[i].list=n,e[i].browserList=n,e[i].statusCode=s,e[i].hasMore=o,e[i].cursor=a,e[i].level=r}removeItemListById(e,t){var i;const{key:n,groupId:s}=t;(null===(i=e[n])||void 0===i?void 0:i.list)&&(e[n].list=e[n].list.filter((e=>e!==s)))}setLoading(e,t){const{loading:i,key:n}=t;e[n]||(e[n]={list:[],browserList:[],loading:i,statusCode:0,hasMore:!0,cursor:"0"}),e[n].loading=i}setListKeyword(e,t){const{keyword:i,key:n}=t;e[n]||(e[n]={keyword:i,list:[],browserList:[],loading:!1,statusCode:0,hasMore:!0,cursor:"0"}),e[n].keyword=i}getRecommendList(e){return e.pipe((0,m.p)((e=>this.getRecommendList$(e).pipe((0,_.q)(this.terminate())))))}getRecommendList$(e){return(0,c.of)(e).pipe((0,h.E)(this.bizContext.state$),(0,m.p)((([e,t])=>{const{itemId:i,key:n,routeName:s,watchLiveLastTime:o,device_type:a,abTestVersion:r,language:d,user:l,fromPage:p,pullType:u=2,ttamParams:v={},isNonPersonalized:g=!1,showingBrowserMode:m=!1,fypFeederItemId:_,sideEffect:b}=e,w=this.jotaiStore.get(F.WH),T=(0,B.fU)()?g:(0,F.PJ)(w);return(0,c.of)(null).pipe((0,y.Z)((()=>{var n,s,l,c,g;const m=(0,O.uk)(d);let h=V.Nu;const y=null===(n=null==r?void 0:r.parameters.change_list_length_new)||void 0===n?void 0:n.vid;y&&(h=Number(y));const f=Object.assign(Object.assign({isNonPersonalized:T,aid:V.xE,count:1===u?V.K2:h,insertedItemID:i,language:m,clientABVersions:null==r?void 0:r.versionName,pullType:u,watchLiveLastTime:o,device_type:a},v),{coverFormat:null===(l=null===(s=t.bizContext)||void 0===s?void 0:s.videoCoverSettings)||void 0===l?void 0:l.format,itemID:_,vv_count_fyp:parseInt((0,N._S)(U.Bu,"0"),10)||0}),S=(0,R.n5)(e,t.bizContext,T);console.debug("[getRecommendList$]","originParams",f,"expParams",S,JSON.stringify(S)===JSON.stringify(f));const b="v2"!==(null===(g=null===(c=null==r?void 0:r.parameters)||void 0===c?void 0:c.foryou_prefetch)||void 0===g?void 0:g.vid)?f:S;return p&&Object.assign(b,{from_page:p}),this.service.getRecommendList(b)})),(0,h.E)(this.state$),(0,f.T)((([e,t])=>{var i,n,s;const o=function(e,t){const{adsOffset:i=0,itemList:n}=t,s=Number(i),o=null==n?void 0:n[s];if(!(null==o?void 0:o.isTT4BAds))return t;const a=s>=e?s-e:0;return null==n||n.splice(s,1),null==n||n.splice(a,0,o),t.itemList=n,t}(null!==(s=null===(n=null===(i=t.foryou)||void 0===i?void 0:i.list)||void 0===n?void 0:n.length)&&void 0!==s?s:0,e);return o})),(0,S.M)((e=>{var t;null==b||b(),(null!==(t=e.itemList)&&void 0!==t?t:[]).forEach((e=>{var t;if(e.ad_info){const t=(0,I.n5)({ad_info:e.ad_info,play_mode:m?"browser_mode":"one_column"});L.pg.handleReceive(t)}j.j.handleVideoReceive({item_id:e.id,group_id:null===(t=null==e?void 0:e.video)||void 0===t?void 0:t.id})}))})),this.createItemListErrorCatcher((e=>console.error(e.message))),this.handleListData({key:n,abTestVersion:r,language:d,user:l,onResponse:e=>this.searchbotSSROptimize(s,e,d)}))})))}getTopicList(e){return e.pipe((0,b.n)((({topic:e,abTestVersion:t,user:i,language:n})=>this.service.getTopicList({topic:e,language:n,count:V.Uw,aid:V.xE}).pipe((0,f.T)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),this.createItemListErrorCatcher(),this.handleListData({key:"topic",abTestVersion:t,user:i,language:n}),(0,_.q)(this.terminate())))))}getFollowingList(e){return e.pipe((0,h.E)(this.state$,this.bizContext.state$),(0,m.p)((([{pullType:e=1,abTestVersion:t,user:i,language:n},s,o])=>{var a,r,d;const{cursor:l="",level:p=1}=null!==(a=s.following)&&void 0!==a?a:{};return this.service.getFollowingList({aid:V.xE,count:V.rd,language:n,cursor:l,pullType:e,level:p,isResetCounterUsed:!0,isNonPersonalized:!(0,B.fU)()&&(0,F.PJ)(this.jotaiStore.get(F.WH)),coverFormat:null===(d=null===(r=o.bizContext)||void 0===r?void 0:r.videoCoverSettings)||void 0===d?void 0:d.format,clientABVersions:null==t?void 0:t.versionName}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"following",language:n,user:i,abTestVersion:t}))})))}getFriendsList(e){return e.pipe((0,h.E)(this.state$,this.bizContext.state$),(0,m.p)((([{pullType:e=1,abTestVersion:t,user:i,language:n},s,o])=>{var a,r,d;const{unviewedCursor:l="0",viewedCursor:p="0",level:c=1}=null!==(a=s.friends)&&void 0!==a?a:{};return this.service.getFriendsList({aid:V.xE,count:V.Ly,language:n,unviewedCursor:l,viewedCursor:p,pullType:e,level:c,isResetCounterUsed:!0,isNonPersonalized:!(0,B.fU)()&&(0,F.PJ)(this.jotaiStore.get(F.WH)),coverFormat:null===(d=null===(r=o.bizContext)||void 0===r?void 0:r.videoCoverSettings)||void 0===d?void 0:d.format,clientABVersions:null==t?void 0:t.versionName}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"friends",language:n,user:i,abTestVersion:t}))})))}getQuestionList(e){return e.pipe((0,y.Z)((e=>this.getQuestionList$(e))))}getQuestionList$(e){return(0,c.of)(e).pipe((0,h.E)(this.state$),(0,m.p)((([{questionID:e,abTestVersion:t,language:i,user:n},s])=>{var o,a;return this.service.getQuestionList({questionID:e,language:i,cursor:null!==(a=null===(o=s.question)||void 0===o?void 0:o.cursor)&&void 0!==a?a:"0",aid:V.xE,count:V.vu}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"question",abTestVersion:t,language:i,user:n}))})))}getPlaylistVideoList(e){return e.pipe((0,y.Z)((e=>this.getPlaylistVideoList$(e))))}getPlaylistVideoList$(e,t){return(0,c.of)(e).pipe((0,h.E)(this.state$),(0,m.p)((([{mixId:e,key:i,abTestVersion:n,language:s,user:o},a])=>{var r,d;return this.service.getPlaylistVideoList({mixId:e,language:s,cursor:null!==(d=null===(r=a[null!=i?i:e])||void 0===r?void 0:r.cursor)&&void 0!==d?d:"0",aid:V.xE,count:V.vu}).pipe(this.createItemListErrorCatcher(),(0,S.M)((e=>{var i;return null===(i=null==t?void 0:t.onVideoList)||void 0===i?void 0:i.call(t,e.itemList)})),this.handleListData({key:null!=i?i:e,abTestVersion:n,language:s,user:o}))})))}getCollectionList(e){return e.pipe((0,y.Z)((e=>this.getCollectionList$(e))))}getCollectionList$(e){return(0,c.of)(e).pipe((0,h.E)(this.state$),(0,m.p)((([{collectionId:e,abTestVersion:t,language:i,user:n},s])=>{var o,a;return this.service.getCollectionList({collectionId:e,language:i,cursor:null!==(a=null===(o=s.collection)||void 0===o?void 0:o.cursor)&&void 0!==a?a:"0",aid:V.xE,count:V.vu,sourceType:113}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"collection",abTestVersion:t,language:i,user:n}))})))}getUserVideoListByType(e){return e.pipe((0,y.Z)((e=>this.getUserVideoListByType$(e))))}getUserVideoListByType$(e){return(0,c.of)(e).pipe((0,h.E)(this.state$),(0,b.n)((([{count:e=V.VD,postItemType:t=2,key:i,abTestVersion:n,language:s,user:o},a])=>{var r,d;const l={appId:V.xE,count:e,cursor:null!==(d=null===(r=a[i])||void 0===r?void 0:r.cursor)&&void 0!==d?d:"0",language:s,postItemType:t};return this.service.getUserPostListByType(l).pipe(this.createItemListErrorCatcher(),this.handleListData({key:i,abTestVersion:n,language:s,user:o,otherInfo:{secUid:null==o?void 0:o.secUid}}))})))}getPoiList(e){return e.pipe((0,y.Z)((e=>this.getPoiList$(e))))}getPoiList$(e){return(0,c.of)(e).pipe((0,h.E)(this.state$),(0,m.p)((([{poiId:e,abTestVersion:t,language:i,user:n},s])=>{var o,a;return this.service.getPoiList({poiId:e,language:i,cursor:null!==(a=null===(o=s.poi)||void 0===o?void 0:o.cursor)&&void 0!==a?a:"0",aid:V.xE,count:V.vu}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"poi",abTestVersion:t,user:n,language:i}))})))}setDeleteVideo(e,t){for(const i of Object.keys(e)){const n=e[i];if(n){const s=n.list.filter((e=>e!==t));e[i].list=s,e[i].browserList=n.browserList.filter((e=>e!==t))}}}deleteLiveItem(e,t){for(const i of Object.keys(e)){const n=e[i];if(n){const e=n.list.filter((e=>e!==t));n.list=e,n.browserList=n.browserList.filter((e=>e!==t))}e[i]=n}}setList(e){return e.pipe((0,h.E)(this.state$,this.videoMask.state$),(0,S.M)((([{key:e,response:t,disableReportMore:i=!1},n])=>{var s,o,a;(null!==(o=null===(s=n[e])||void 0===s?void 0:s.list)&&void 0!==o?o:[]).length&&!i&&x.L.handleListMore({is_success:(null===(a=t.itemList)||void 0===a?void 0:a.length)?1:0,error_code:t.statusCode})})),(0,f.T)((([{key:e,response:t,otherInfo:i,user:n},s,o])=>{var a,r;const d=null!==(r=null!==(a=t.itemList)&&void 0!==a?a:t.items)&&void 0!==r?r:[];return t.itemList||(t.itemList=d),1!==(null==n?void 0:n.photoSensitiveVideosSetting)&&(n||1!==o.photoSensitiveVideosSetting)||"user-post"===e&&(null==n?void 0:n.secUid)===(null==i?void 0:i.secUid)||!("video"!==e||d.length>1)||(t.itemList=d.filter((e=>2===e.containerType||4!==(null==e?void 0:e.maskType)))),t.itemList=t.itemList.map((e=>{var t;return(0,D.Jl)(e)&&(e.id=(0,D.Qw)(null===(t=e.liveRoomInfo)||void 0===t?void 0:t.roomID)),e})),{key:e,response:t,otherInfo:i}})),(0,S.M)((({key:e,response:t})=>{})),(0,y.Z)((({key:e,response:t,otherInfo:i})=>{const{log_pb:n,itemList:s=[],statusCode:o=0,hasMore:a=!1,hasMorePrevious:r,liveCardDisplay:d,hasMoreLatest:l,cursor:p="0",level:u,viewedCursor:v="0",unviewedCursor:g="0"}=t,m=s.filter((e=>2!==e.containerType)).map((e=>{var t,i,n,s;return{url:null!==(i=null===(t=e.video)||void 0===t?void 0:t.playAddr)&&void 0!==i?i:"",id:null!==(s=null===(n=e.video)||void 0===n?void 0:n.id)&&void 0!==s?s:""}}));return 0===o&&"creator_tab"===e?(0,c.of)(...this.item.addItems(s,null==n?void 0:n.impr_id),this.getActions().addItemList({key:e,list:s,statusCode:o,hasMore:a,hasMorePrevious:r,hasMoreLatest:l,preloadList:m,addToHead:null==i?void 0:i.addToHead})):0!==o&&10404!==o||"friends"!==e?0===o||10404===o?(0,c.of)(...this.item.addItems(s,null==n?void 0:n.impr_id),this.getActions().addItemList({key:e,list:s,statusCode:o,hasMore:a,cursor:p,level:u,preloadList:m,liveCardDisplay:d})):(0,c.of)(this.getActions().addItemList({key:e,list:[],statusCode:o,hasMore:!0,preloadList:m})):(0,c.of)(...this.item.addItems(s,null==n?void 0:n.impr_id),this.getActions().addItemList({key:e,list:s,statusCode:o,hasMore:a,level:u,preloadList:m,addToHead:null==i?void 0:i.addToHead,viewedCursor:v,unviewedCursor:g}))})))}handleListData({key:e,language:t,user:i,otherInfo:n,onResponse:s}){return o=>o.pipe((0,w.w)(V.LA),(0,y.Z)((o=>{var a;return(0,u.h)((0,c.of)(this.getActions().setList({key:e,response:o,otherInfo:n,language:t,user:i})),null!==(a=null==s?void 0:s(o))&&void 0!==a?a:(0,c.of)(this.noop()))})),(0,T.Z)(this.getActions().setLoading({key:e,loading:!0})),(0,_.q)(this.getActions().setLoading({key:e,loading:!1})),(0,C.Q)(this.dispose$))}searchbotSSROptimize(e,t,i){return e===P.eU.foryou?this.seoModule.setForyouSEOProps(t,{language:null!=i?i:"en"}):[P.eU.home,P.eU.foryouWithLang].includes(e)?this.seoModule.setHomeSEOProps(null!=i?i:"en"):(0,c.of)(this.noop())}};(0,n.Cg)([(0,s.uk)(),(0,n.Sn)("design:type",v.c)],ne.prototype,"dispose$",void 0),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"resetItemList",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"addItemList",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"setItemListById",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"removeItemListById",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"setLoading",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"setListKeyword",null),(0,n.Cg)([(0,s.Mj)({payloadGetter:1}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getRecommendList",null),(0,n.Cg)([(0,s.Mj)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getTopicList",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getFollowingList",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getFriendsList",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getQuestionList",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getPlaylistVideoList",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",v.c)],ne.prototype,"getCollectionList",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getUserVideoListByType",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"getPoiList",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"setDeleteVideo",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"deleteLiveItem",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[v.c]),(0,n.Sn)("design:returntype",void 0)],ne.prototype,"setList",null),ne=(0,n.Cg)([(0,o.n)("ItemList"),(0,n.Qj)(5,(0,a.y)(M.J7)),(0,n.Qj)(6,(0,a.y)($.hp)),(0,n.Qj)(7,(0,a.y)(Z.provide)),(0,n.Sn)("design:paramtypes",[te,q.k,H.w,W.E,ie.$,Object,Function,Function])],ne);const se=(0,k.y)(ne)},55148:(e,t,i)=>{i.d(t,{k:()=>q,t:()=>z});var n=i(11379),s=i(68055),o=i(54954),a=i(60842),r=i(31862),d=i(73766),l=i(32363),p=i(59158),c=i(13919),u=i(90245),v=i(60057),g=i(33152),m=i(91109),_=i(33293),h=i(45277),y=i(74895),f=i(50717),S=i(55416),b=i(29665),w=i(94488),T=i(88489),C=i(21676),k=i(75540),M=i(61924),O=i(507),P=i(74760),I=i(80937),L=i(73471),j=i(49555),x=i(54086),E=i(58475),A=i(39232),D=i(95763),F=i(35999),U=i(5183),R=i(14218),B=i(35219),N=i(49610),$=i(90064),V=i(2070);let W=class{constructor(e){this.fetch=e}postLikeVideo(e){return this.fetch.post("/api/commit/item/digg/",{query:e,baseUrlType:2,headers:{[$.nk]:this.fetch.csrfToken}})}postDislikeVideo(e){return this.fetch.post("/api/dislike/item/",{query:e,baseUrlType:2,headers:{[$.nk]:this.fetch.csrfToken}})}collectVideo(e){return this.fetch.post("/api/item/collect/",{query:e,baseUrlType:2,headers:{[$.nk]:this.fetch.csrfToken}})}};W=(0,n.Cg)([(0,N._)(),(0,n.Sn)("design:paramtypes",[V.pM])],W);var H=i(3237);let q=class extends E.E{constructor(e,t,i,n){super(),this.service=e,this.userModule=t,this.jotaiStore=i,this.t=n,this.defaultState={}}setItem(e,t){(0,k.ud)().setItem(t)}updateItem(e,t){(0,k.ud)().updateItem(t)}multiSetItem(e,t){(0,k.ud)().multiSetItem(t)}setLike(e,t){(0,k.ud)().setLike(t)}setCollect(e,t){(0,k.ud)().setCollect(t)}setCommentCount(e,t){(0,k.ud)().setCommentCount(t)}reduceOrIncreaseCommentCount(e,t){(0,k.ud)().reduceOrIncreaseCommentCount(t)}addItems(e,t){const i=e.filter((e=>Boolean(e.author))).map((({author:e})=>e)),n=e.filter((e=>{var t;return Boolean((null===(t=null==e?void 0:e.liveRoomInfo)||void 0===t?void 0:t.ownerInfo)&&(0,U.Jl)(e))})).map((e=>Object.assign(Object.assign({},e.liveRoomInfo.ownerInfo),{roomId:e.liveRoomInfo.roomID}))),s=e.map((e=>Object.assign(Object.assign({},e),{logId:t})));return[this.userModule.getActions().multiSetUser(i.concat(n)),this.getActions().multiSetItem(s)]}addItems$(e){return e.pipe((0,v.n)((e=>this.addItems(e))))}postCollectVideo(e){return e.pipe((0,g.E)(this.state$,this.userModule.state$),(0,m.T)((([e,t,i])=>{var n,s,o,a;const{itemId:r}=e,d=t[r],l=i.users[null!==(n=null==d?void 0:d.author)&&void 0!==n?n:""],{collected:p=!1,stats:c}=d,u=p?2:1;return{collectCount:Number(null!==(s=null==c?void 0:c.collectCount)&&void 0!==s?s:0),collected:p,action:u,query:{aid:R.xE,itemId:r,action:u,secUid:null!==(o=null==l?void 0:l.secUid)&&void 0!==o?o:""},group_id:r,author_id:null!==(a=null==l?void 0:l.id)&&void 0!==a?a:""}})),(0,_.Z)((({collectCount:e,collected:t,query:i,group_id:n,author_id:s,action:o})=>this.service.collectVideo(i).pipe((0,h.M)((()=>{O.W.handleFavoriteResult({group_id:n,author_id:s},o)})),(0,_.Z)((i=>{const{statusCode:s}=i;return 0!==s?(0,r.O)(3e3).pipe((0,m.T)((()=>this.getActions().setCollect({id:n,collected:t,count:e})))):(0,d.of)(1===o?this.getActions().addMlModelTrainData({id:n,action:"favorite"}):this.noop())})),(0,y.Z)(this.getActions().setCollect({id:n,collected:!t,count:t?Math.max(0,e-1):e+1})),(0,D.n)({})))))}postLikeVideo(e){return e.pipe((0,f.$)((({id:e})=>e)),(0,_.Z)((e=>{const t=new l.t(0);return e.pipe((0,g.E)(this.state$,this.userModule.state$,t),(0,_.Z)((([e,t,i,s])=>{var o,a,r;const{language:l,play_mode:c}=e,u=t[e.id],v=i.users[null!==(o=null==u?void 0:u.author)&&void 0!==o?o:""],{user:g}=(0,A.x)(),{digged:m,stats:_,poi:h,imagePost:y,subVideoMeta:f,ad_info:S,repostList:b}=u,{id:w,forceLike:T,enter_method:C="click",channel_id:k}=e,M=(0,n.Tt)(e,["id","forceLike","enter_method","channel_id"]),O=null!==(a=null==_?void 0:_.diggCount)&&void 0!==a?a:0,P={aweme_id:w,channel_id:k,friends_upvote:null==b?void 0:b.some((e=>e.secUid!==(null==g?void 0:g.secUid))),type:T?1:m?0:1};return T&&m?p.w:(0,d.of)({query:P,enter_method:C,diggCount:O,digged:m,author_id:null!==(r=null==v?void 0:v.id)&&void 0!==r?r:"",group_id:u.id,poi_id:null==h?void 0:h.id,restReportParams:M,changeKey:`${P.type}_${s}`,language:l,imagePost:y,play_mode:c,is_sub_only_video:f?1:0,ad_info:S})})),(0,S.w)("changeKey"),(0,v.n)((({query:e,enter_method:i,diggCount:n,author_id:s,group_id:o,digged:a,poi_id:l,imagePost:p,is_sub_only_video:c,restReportParams:u,ad_info:v})=>{let g=!1;const f=(0,r.O)(3e3).pipe((0,m.T)((()=>this.getActions().setLike({id:o,liked:a,count:n}))),(0,b.j)((()=>{const e=t.getValue();t.next(e+1)}))),S=this.getActions().setLike({id:o,liked:!a,count:a?Math.max(0,n-1):n+1});return this.service.postLikeVideo(e).pipe((0,w.W)((()=>(0,d.of)({status_code:-1}))),(0,h.M)((({status_code:t,status_msg:n,log_pb:a={}})=>{var r,d;2150!==t&&2210!==t||n&&x.F.open({content:this.t(n),duration:3,widthType:"half"}),g=!0;let m={};v&&(m=(0,P.n5)({ad_info:v,play_mode:null!==(r=u.play_mode)&&void 0!==r?r:"one_column"})),I.z.handleLikeVideoResult(Object.assign(Object.assign(Object.assign({},u),m),{group_id:o,author_id:s,log_pb:a,enter_method:i,poi_id:l,aweme_type:p?150:0,pic_cnt:null===(d=null==p?void 0:p.images)||void 0===d?void 0:d.length,is_sub_only_video:c}),e.type)})),(0,b.j)((()=>{var t,n;let a={};v&&(a=(0,P.n5)({ad_info:v,play_mode:null!==(t=u.play_mode)&&void 0!==t?t:"one_column"})),g||I.z.handleLikeVideoResult(Object.assign(Object.assign(Object.assign({},u),a),{group_id:o,author_id:s,log_pb:{},enter_method:i,poi_id:l,aweme_type:p?150:0,pic_cnt:null===(n=null==p?void 0:p.images)||void 0===n?void 0:n.length,is_sub_only_video:c}),e.type)})),(0,_.Z)((t=>{const{status_code:i,is_digg:n}=t;return 0!==i||n===e.type?f:(0,d.of)(1===e.type?this.getActions().addMlModelTrainData({id:o,action:"like"}):this.noop())})),(0,y.Z)(S),(0,D.n)({}))})))})))}addMlModelTrainData(e){return e.pipe((0,g.E)(this.state$),(0,_.Z)((([e,t])=>{var i;const{id:n,action:s,isPreview:o}=e;return n&&t[n]&&!(null===(i=t[n])||void 0===i?void 0:i.liveRoomInfo)?(0,c.H)((0,M.xt)().addTrainData({item:t[n],action:s,isPreview:o})).pipe((0,_.Z)((()=>(0,d.of)(this.noop())))):(0,d.of)(this.noop())})))}postDislikeVideo(e){return e.pipe((0,g.E)(this.state$),(0,h.M)((([e,t])=>{const{id:i,author_id:n,play_mode:s}=e,o=t[i],a=null==o?void 0:o.ad_info;let r={};a&&(r=(0,P.n5)({ad_info:a,play_mode:s}),r.refer=L.Hq.Button),j.V.handleClickDislike(Object.assign({group_id:i,author_id:n,play_mode:s},r)),x.F.open({content:this.t("webapp_forYoufeed_videoRemoved_toast"),duration:3,widthType:"half",getContainer:H.M,getContainerPosition:"fixed"})})),(0,_.Z)((([e])=>{const{id:t,author_id:i}=e,n={item_id:t,item_author_id:i};return this.service.postDislikeVideo(n).pipe((0,w.W)((()=>(0,d.of)({status_code:-1}))),(0,m.T)((()=>this.getActions().addMlModelTrainData({id:e.id,action:"dislike"}))),(0,D.n)({}))})))}setItemPrivateState(e,t){(0,k.ud)().setItemPrivateState(t)}setDeleteVideo(e,t){(0,k.ud)().setDeleteVideo(t)}};q.jotaiAtom=k.Pu,(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"setItem",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"updateItem",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Array]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"multiSetItem",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"setLike",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"setCollect",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"setCommentCount",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"reduceOrIncreaseCommentCount",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[u.c]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"addItems$",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[u.c]),(0,n.Sn)("design:returntype",u.c)],q.prototype,"postCollectVideo",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[u.c]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"postLikeVideo",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[u.c]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"addMlModelTrainData",null),(0,n.Cg)([(0,s.Mj)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[u.c]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"postDislikeVideo",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Object]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"setItemPrivateState",null),(0,n.Cg)([(0,s.h5)(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,String]),(0,n.Sn)("design:returntype",void 0)],q.prototype,"setDeleteVideo",null),q=(0,n.Cg)([(0,o.n)("ItemModule"),(0,n.Qj)(2,(0,a.y)(C.J7)),(0,n.Qj)(3,(0,a.y)(F.hp)),(0,n.Sn)("design:paramtypes",[W,B.U,Object,Function])],q);const z=(0,T.y)(q)},88555:(e,t,i)=>{i.d(t,{F:()=>S});var n=i(11379),s=i(69872),o=i(90163),a=i(90064),r=i(25493),d=i(99297),l=i(29854),p=i(91277),c=i(2074),u=i(82950),v=i(29734);const g="content-type",m=["application/pdf"],_=["/api/update/profile/","/api/commit/follow/user","/api/comment/publish"],h="webapp-session-referer",y="device_id",f={"Singapore-Central":"sg","US-East":"va","US-EastRed":"in","US-TTP":"ttp","US-TTP2":"ttp2","EU-TTP":"ie","EU-TTP2":"no1a"};class S{constructor(e){this.verify=l.MX,this.isPageVisible=!0,this.isFocus=!0,this.handleAppContext=e=>(0,n.sH)(this,void 0,void 0,(function*(){return this.appContext||(this.appContext=yield this.options.getAppContextAsync()),e})),this.handleBizContext=e=>(0,n.sH)(this,void 0,void 0,(function*(){this.bizContext||e.ignoreBizContext||(this.bizContext=yield this.options.getBizContextAsync());const{ignoreBizContext:t}=e;return(0,n.Tt)(e,["ignoreBizContext"])})),this.handleQuery=e=>(0,n.sH)(this,void 0,void 0,(function*(){var t,i,n,s,o,r,d,l;const p=this.getRiskParams(null!==(t=e.riskParamsType)&&void 0!==t?t:0),c={},u=null===(i=this.bizContext)||void 0===i?void 0:i.canUseQuery,{type:v}=null!==(s=null===(n=this.appContext)||void 0===n?void 0:n.env)&&void 0!==s?s:{type:""},g=null===(o=this.appContext)||void 0===o?void 0:o.odinId,m="ppe"===v||"boe"===v,_=null!==(d=new URLSearchParams(null===(r=window.location)||void 0===r?void 0:r.search).get(y))&&void 0!==d?d:void 0;(u||m)&&_&&(c[y]=_);const h={WebIdLastTime:null===(l=this.appContext)||void 0===l?void 0:l.webIdCreatedTime};g&&(h.odinId=g);const f=(0,a.F0)(),S=f.to?f.dispatchParams:{},b=yield this.options.getExtraParams(e);return e.query=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},p),e.query),b),S),c),h),e})),this.handleURL=e=>{var t;let{url:i}=e;const n=null!==(t=e.query)&&void 0!==t?t:{};return i.startsWith("http:")||i.startsWith("https:")||(i=`${(0,a.$_)(e.baseUrlType)}${i}`),i=(0,s.stringifyUrl)({url:i,query:n}),e.url=i,e},this.options=e,"undefined"!=typeof window&&((0,c.Gz)(this.handleVisibilityChange.bind(this,!1),this.handleVisibilityChange.bind(this,!0)),this.bindFocusChange())}init(e){return(0,n.sH)(this,void 0,void 0,(function*(){const t=yield this.options.getAppContextAsync(e);this.appContext=t}))}get csrfToken(){var e,t;return this.appContext,null!==(t=null===(e=this.appContext)||void 0===e?void 0:e.csrfToken)&&void 0!==t?t:""}get(e,t){return this.runFetch(e,Object.assign(Object.assign({},t),{method:"GET"}))}post(e,t={}){var{omitContentType:i=!1}=t,s=(0,n.Tt)(t,["omitContentType"]);const o=new Headers(s.headers);return o.get(g)||i||o.set(g,"application/x-www-form-urlencoded"),s.body||(s.body=""),s.headers=o,this.runFetch(e,Object.assign(Object.assign({},s),{method:"POST"}))}delete(e,t={}){var{omitContentType:i=!1}=t,s=(0,n.Tt)(t,["omitContentType"]);return this.runFetch(e,Object.assign(Object.assign({},s),{method:"DELETE"}))}getRiskParams(e){if(!this.appContext)return{};if(2===e)return{};if((0,c.Hd)(h)||(0,c.J2)(h,document.referrer),1===e)return Object.assign({},(0,r.Y)());const t={};(0,d.Yp)()&&(t.security_verification_aid="1459");const i=navigator.userAgent;return Object.assign(Object.assign({},(0,r.w)(Object.assign(Object.assign({},this.appContext),{isMobile:(0,o.Ny)(i),os:(0,o.R0)(i)}),this.isPageVisible,this.isFocus)),t)}runFetch(e,t){var i,s,o,{credentials:a="include"}=t,r=(0,n.Tt)(t,["credentials"]);return(0,n.sH)(this,void 0,void 0,(function*(){let t=Object.assign({url:e,credentials:a},r);t=yield Promise.all([this.options.beforeHandleQuery(t),this.handleAppContext(t),this.handleBizContext(t)]).then((([,,e])=>this.handleQuery(e))).then((e=>this.handleURL(e)));const{url:d}=t,l=(0,n.Tt)(t,["url"]),p=new Set(["query","riskParamsType","baseUrlType","requireSecSdk"]),c=Object.keys(l).reduce(((e,t)=>(p.has(t)||(e[t]=l[t]),e)),{});return c.credentials=a,null===(s=(i=this.options).beforeFetch)||void 0===s||s.call(i,d,null!==(o=r.method)&&void 0!==o?o:"GET"),this.fetchData(d,c)}))}fetchData(e,t){var i,s,o,r,l,c,_,h,y,f,S,b,w,T,C,k,M,O,P,I,L,j;return(0,n.sH)(this,void 0,void 0,(function*(){let n;try{n=yield window.fetch.call(null,e,t)}catch(e){return Promise.reject(e)}if(n){if(n.status>=400)return(0,u.Gy)(n,e),Promise.reject(n);{const u=n.headers.get(g);if(null==u?void 0:u.includes("application/json"))try{let u=n.headers.has(d.Si)?JSON.parse(null!==(i=n.headers.get(d.Si))&&void 0!==i?i:"{}"):yield n.json();const g=this._getVerifyJson(u,e),m="TTP"===(null===(s=this.appContext)||void 0===s?void 0:s.clusterRegion),O=(null===(o=this.bizContext)||void 0===o?void 0:o.idc)?(0,p.v)(this.bizContext.idc):null===(r=this.bizContext)||void 0===r?void 0:r.vregion;n.headers.has(d.Si)&&(null===(l=this.options)||void 0===l?void 0:l.reportFn)&&(null===(y=null===(h=null===(_=(c=this.options).reportFn)||void 0===_?void 0:_.call(c))||void 0===h?void 0:h.context)||void 0===y||y.call(h,{firstScreenRequest:"abort",verify:"1"}));const P=yield this.verify.checkVerify(g,null!==(S=null===(f=this.appContext)||void 0===f?void 0:f.wid)&&void 0!==S?S:"0",m,a.si.captcha,{lang:null===(b=this.appContext)||void 0===b?void 0:b.language,userMode:(0,v.n)({isVA:"US-TTP"===O||"US-TTP2"===O,isLogin:Boolean(null===(w=this.appContext)||void 0===w?void 0:w.user),isFTC:null!==(k=null===(C=null===(T=this.appContext)||void 0===T?void 0:T.user)||void 0===C?void 0:C.ftcUser)&&void 0!==k&&k,isHighRisk:!1,isEU:(null==O?void 0:O.startsWith("EU-TTP"))||"US-EAST-RED"===O})});return 0===P?((null===(M=this.options)||void 0===M?void 0:M.onJsonResponse)&&(u=this.options.onJsonResponse({response:n,config:t,json:u})),u):2===P?this.fetchData(e,t):{statusCode:-1}}catch(e){return null===(L=null===(I=null===(P=null===(O=this.options)||void 0===O?void 0:O.reportFn)||void 0===P?void 0:P.call(O))||void 0===I?void 0:I.context)||void 0===L||L.call(I,{firstScreenRequest:"abort"}),Promise.reject(n)}else{if(null===(j=n.headers.get(g))||void 0===j?void 0:j.includes("text/"))return n.text();if(-1!==m.indexOf(String(u)))return n.blob();if(null==u?void 0:u.includes("application/x-protobuf"))return n.arrayBuffer()}return n.text()}}}))}_getVerifyJson(e,t){var i,n,s,o;const r=e.status_code||e.code,l=r===d.CQ,c=r===d.Zu;if(_.some((e=>t.includes(e)))&&(l||c)){const{idc:e}=null!==(i=this.bizContext)&&void 0!==i?i:{},t=(0,p.v)(e);return{code:"10000",from:"shark_admin",type:"verify",version:1,region:null!==(o=null!==(n=f[t])&&void 0!==n?n:d.sG[null!==(s=a.si.kind)&&void 0!==s?s:""])&&void 0!==o?o:"va",subtype:l?"slide":"text",verify_event:"",detail:{},fp:-1}}return e}handleVisibilityChange(e){this.isPageVisible=e}bindFocusChange(){const e=()=>{this.isFocus=!0},t=()=>{this.isFocus=!1};return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}}},90064:(e,t,i)=>{i.d(t,{$_:()=>l,F0:()=>p,Ty:()=>r,Z4:()=>o,nk:()=>a,si:()=>n});const n=(0,i(48420).V)();var s,o;!function(e){e[e.Default=0]="Default",e[e.Simple=1]="Simple",e[e.None=2]="None"}(s||(s={})),function(e){e[e.None=0]="None",e[e.AWEME=1]="AWEME",e[e.FixedWww=2]="FixedWww",e[e.AutoMOrT=3]="AutoMOrT",e[e.Webcast=4]="Webcast",e[e.AutoWebcastMOrT=5]="AutoWebcastMOrT",e[e.AWEMEV1=6]="AWEMEV1",e[e.CommentTest=8]="CommentTest",e[e.WebcastT=9]="WebcastT",e[e.Now=10]="Now"}(o||(o={}));const a="tt-csrf-token",r={FORM_ENCODE:"application/x-www-form-urlencoded; charset=UTF-8"},d=()=>{var e,t,i;try{const n=document.getElementById("__REGION__DATA__INJECTED__");return null===(i=null===(t=JSON.parse(null!==(e=null==n?void 0:n.textContent)&&void 0!==e?e:"{}").__DATA__)||void 0===t?void 0:t.region_data_domains)||void 0===i?void 0:i.WEBAPP_WEBCAST_API}catch(e){return}};function l(e=0){var t,i,s,o,a,r,l,p;switch(e){case 9:{let e="https://webcast.tiktok.com";return"us"===n.kind&&(e="https://webcast.us.tiktok.com"),e}case 2:return null!==(t=n.rootApi)&&void 0!==t?t:"https://www.tiktok.com";case 3:return null!==(i=n.mTApi)&&void 0!==i?i:"";case 6:return null!==(s=n.rootApi)&&void 0!==s?s:"";case 4:return null!==(a=null!==(o=d())&&void 0!==o?o:n.webcastRootApi)&&void 0!==a?a:"https://webcast.tiktok.com";case 5:return null!==(r=n.webcastApi)&&void 0!==r?r:"";case 0:return null!==(l=n.rootApi)&&void 0!==l?l:"";case 8:return null!==(p=n.rootApi)&&void 0!==p?p:"";case 10:return"https://now.tiktok.com";default:return""}}function p(){var e,t;try{const i=JSON.parse(null!==(t=null===(e=window.document.getElementById("__SCHEDULE_INFO__"))||void 0===e?void 0:e.textContent)&&void 0!==t?t:"{}");if(i.to)return i}catch(e){console.warn(e)}return{from:"",to:"",dispatchParams:{}}}},82950:(e,t,i)=>{i.d(t,{Rh:()=>d,gk:()=>l,LZ:()=>c,Gy:()=>u});class n{constructor(){this.events={}}on(e,t,i={}){var n;let s=t;return i.once&&(s=function(e){let t,i=!1;return n=>(i||(t=e.apply(this,n),i=!0),t)}(t)),this.events[e]?null===(n=this.events[e])||void 0===n||n.push(s):this.events[e]=[s],()=>{var i;this.events[e]=null===(i=this.events[e])||void 0===i?void 0:i.filter((e=>t!==e))}}emit(e,...t){const i=this.events[e]||[];for(const e of i)e(...t)}clear(e){this.events[e]=[]}}const s=503,o="X-TT-System-Error",a="23",r="/api/v3/register/verification/age",d="sig_api_geoblocked",l="sig_signup_api_geoblocked";class p{constructor(){this.emitter=new n}static getInstance(){return p.instance||(p.instance=new p),p.instance}on(...e){return this.emitter.on(...e)}emit(e,t){this.emitter.emit(e,t)}clear(e){this.emitter.clear(e)}}const c=p.getInstance();function u(e,t){const i=function(e){if(!e||e.status!==s||!e.headers)return!1;const t=e.headers.get?e.headers.get(o):e.headers[o.toLowerCase()];return!(!t||t!==a)}(e);if(i)if(function(e){return e.includes(r)}(t)){const e=function(e){const t=e.split("?")[0],i=t.indexOf(r);return{domain:t.substring(0,i),path:t.substring(i)}}(t);c.emit(l,e)}else c.emit(d)}},93768:(e,t,i)=>{i.d(t,{P:()=>g});var n=i(11379),s=i(82950),o=i(99297),a=i(29854),r=i(90064),d=i(29734),l=i(91277);const p="content-type",c=["/api/update/profile/","/api/commit/follow/user","/api/comment/publish"],u=["application/pdf"],v={"Singapore-Central":"sg","US-East":"va","US-EastRed":"in","US-TTP":"ttp","US-TTP2":"ttp2","EU-TTP":"ie","EU-TTP2":"no1a"};function g({url:e,response:t,appContext:i,bizContext:m,options:_,config:h,retryFn:y=()=>(0,n.sH)(this,void 0,void 0,(function*(){}))},f){var S,b,w,T,C,k,M,O,P,I,L,j;return(0,n.sH)(this,void 0,void 0,(function*(){if(null===(S=null==f?void 0:f.emitEvent)||void 0===S||S.call(f,"request_status",{now:performance.now()},{statusCode:"unknown"}),t.status>=400)return(0,s.Gy)(t,e),null===(b=null==f?void 0:f.emitEvent)||void 0===b||b.call(f,"request_status",{now:performance.now()},{statusCode:`${t.status}`}),Promise.reject(t);{const n=t.headers.get(p);if(null==n?void 0:n.includes("application/json"))try{let n=t.headers.has(o.Si)?JSON.parse(null!==(w=t.headers.get(o.Si))&&void 0!==w?w:"{}"):yield t.json();const s=t.headers.has(o.Si);null===(T=null==f?void 0:f.emitEvent)||void 0===T||T.call(f,"request_status",{now:performance.now()},{statusCode:`${t.status}`,needVerify:`${s}`}),s&&(null===(C=null==f?void 0:f.context)||void 0===C||C.call(f,{firstScreenRequest:"abort",verify:"1"}));const p=function(e,t,i){var n,s,a;const d=e.status_code||e.code,p=d===o.CQ,u=d===o.Zu;if(c.some((e=>t.includes(e)))&&(p||u)){const e=(0,l.v)(i);return{code:"10000",from:"shark_admin",type:"verify",version:1,region:null!==(a=null!==(n=v[e])&&void 0!==n?n:o.sG[null!==(s=r.si.kind)&&void 0!==s?s:""])&&void 0!==a?a:"va",subtype:p?"slide":"text",verify_event:"",detail:{},fp:-1}}return e}(n,e,null==m?void 0:m.idc),u="TTP"===(null==i?void 0:i.clusterRegion),S=(null==m?void 0:m.idc)?(0,l.v)(m.idc):null==m?void 0:m.vregion,b=yield a.MX.checkVerify(p,null!==(k=null==i?void 0:i.wid)&&void 0!==k?k:"0",u,r.si.captcha,{lang:null==i?void 0:i.language,userMode:(0,d.n)({isVA:"US-TTP"===S||"US-TTP2"===S,isLogin:Boolean(null==i?void 0:i.user),isFTC:null!==(O=null===(M=null==i?void 0:i.user)||void 0===M?void 0:M.ftcUser)&&void 0!==O&&O,isHighRisk:!1,isEU:(null==S?void 0:S.startsWith("EU-TTP"))||"US-EAST-RED"===S})});return 0===b?((null==_?void 0:_.onJsonResponse)&&(n=_.onJsonResponse({response:t,config:h,json:n})),null===(P=null==f?void 0:f.emitEvent)||void 0===P||P.call(f,"request_status",{now:performance.now()},{statusCode:`${t.status}`,status:"success"}),n):2===b?y().then((t=>g({url:e,response:t,appContext:i,bizContext:m,options:_,config:h,retryFn:y},f))):{statusCode:-1}}catch(e){return null===(I=null==f?void 0:f.emitEvent)||void 0===I||I.call(f,"request_status",{now:performance.now()},{statusCode:`${t.status}`,status:"fail",needVerify:`${t.headers.has(o.Si)}`,isRiskControlBlock:`${"0, 0"===t.headers.get("content-length")&&"Janus-Mini(fast)"===t.headers.get("x-janus-mini-api-forward")}`,errorMessage:null==e?void 0:e.message}),null===(L=null==f?void 0:f.context)||void 0===L||L.call(f,{firstScreenRequest:"abort"}),Promise.reject(t)}else{if(null===(j=t.headers.get(p))||void 0===j?void 0:j.includes("text/"))return t.text();if(-1!==u.indexOf(String(n)))return t.blob();if(null==n?void 0:n.includes("application/x-protobuf"))return t.arrayBuffer()}return t.text()}}))}},25493:(e,t,i)=>{i.d(t,{Y:()=>a,w:()=>o});const n=(e,t)=>{try{return sessionStorage.getItem(e)||t}catch(e){return console.warn("sessionStorage get failed"),t}};function s(e,t=""){var i;try{return null!==(i=localStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}const o=(e,t,i)=>{var o,a,r;const d=document.cookie.match(/s_v_web_id=(\w+)/);try{const l="v1"===(null===(r=null===(a=null===(o=e.abTestVersion)||void 0===o?void 0:o.parameters)||void 0===a?void 0:a.webapp_odin_id_fe_reverse)||void 0===r?void 0:r.vid),p=!!(e||{}).user,c=Object.assign(Object.assign({aid:"1988",app_name:"tiktok_web",channel:"tiktok_web",device_platform:(e||{}).isMobile?"web_mobile":"web_pc",device_id:(e||{}).wid,region:(e||{}).region,priority_region:((e||{}).user||{}).region||"",os:(e||{}).os,referer:document.referrer,root_referer:n("webapp-session-referer"),cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,verifyFp:(d||"")[1],app_language:(e||{}).language,webcast_language:(e||{}).language,tz_name:Intl.DateTimeFormat().resolvedOptions().timeZone,is_page_visible:t,focus_state:i,is_fullscreen:window.matchMedia("(display-mode: fullscreen)").matches,history_len:window.history.length},l?{}:{user_is_login:p}),{data_collection_enabled:p||"1"===s("guest-mode-flag","0")});return"ageVerify"===n("enter_method")&&(c.security_verification_aid="1459"),c}catch(e){}return{}},a=()=>({cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,timezone_name:Intl.DateTimeFormat().resolvedOptions().timeZone})},99297:(e,t,i)=>{i.d(t,{CQ:()=>a,Si:()=>l,Yp:()=>o,Zu:()=>r,sG:()=>d});var n,s=i(2074);!function(e){e[e.Unknown=0]="Unknown",e[e.WebLoggedIn=513]="WebLoggedIn",e[e.WebUSNotLoggedIn=514]="WebUSNotLoggedIn",e[e.WebUSNotLoggedInHighRisk=515]="WebUSNotLoggedInHighRisk",e[e.WebNonUSNotLoggedIn=516]="WebNonUSNotLoggedIn",e[e.WebUnder13=517]="WebUnder13",e[e.WebEUNotLoggedIn=518]="WebEUNotLoggedIn",e[e.WebEUNotLoggedInHighRisk=519]="WebEUNotLoggedInHighRisk"}(n||(n={}));const o=()=>"ageVerify"===(0,s.Hd)("enter_method"),a=3058,r=3059,d={m:"va",t:"sg",us:"ttp",boe:"boe","":void 0},l="bdturing-verify"},29734:(e,t,i)=>{i.d(t,{n:()=>n});const n=({isVA:e,isLogin:t,isFTC:i,isHighRisk:n,isEU:s=!1})=>i?517:t?513:s&&n?519:s&&!n?518:e&&n?515:e&&!n?514:516},2074:(e,t,i)=>{i.d(t,{Gz:()=>s,Hd:()=>o,J2:()=>a});const n=()=>{};function s(e=n,t=n){let i,s;function o(){i&&document[i]?e():t()}return"hidden"in document?(i="hidden",s="visibilitychange"):"msHidden"in document?(i="msHidden",s="msvisibilitychange"):"webkitHidden"in document&&(i="webkitHidden",s="webkitvisibilitychange"),"addEventListener"in document&&i&&s?(document.addEventListener(s,o,!1),document.removeEventListener.bind(document,s,o,!1)):n}function o(e,t=""){var i;try{return null!==(i=sessionStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function a(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}},91277:(e,t,i)=>{i.d(t,{v:()=>s});const n={useast1a:"US-East",useast2a:"US-EastRed",useast5:"US-TTP",useast8:"US-TTP2",sg1:"Singapore-Central",my:"Singapore-Central",my2:"Singapore-Central",ie:"EU-TTP",no1a:"EU-TTP2"};function s(e){var t;return void 0!==e&&null!==(t=n[e])&&void 0!==t?t:"UNKNOWN"}},29854:(e,t,i)=>{i.d(t,{MX:()=>a});var n=i(11379);const s=1e4;var o;!function(e){e[e.Pass=0]="Pass",e[e.Reject=1]="Reject",e[e.Retry=2]="Retry"}(o||(o={}));const a=new class{constructor(){this.domId="tiktok-verify-ele",this.captcha=null,this.verifyElement=null,this.open=!1,this.rejectPass=!1,this.checkVerify=(e,t,i,o,a)=>(0,n.sH)(this,void 0,void 0,(function*(){var n;if("object"!=typeof e)return e;const{statusCode:r,code:d}=null!=e?e:{};if(r===s||d===String(s)){const r=d===String(s)?e:e.verifyConfig,l=o&&i&&!r.region.startsWith("ttp")?"ttp":r.region,p=yield this.loadCaptcha(l,t);if(-1===r.fp){const e=yield null===(n=this.captcha)||void 0===n?void 0:n.getFp();r.fp=e}return p?this.open?(yield this.updateState(),this.rejectPass?1:2):yield this.goVerify(r,o,null==a?void 0:a.lang,null==a?void 0:a.userMode):1}return 0})),this.destroy=()=>{var e;null===(e=this.captcha)||void 0===e||e.close(),this.verifyElement&&(document.body.removeChild(this.verifyElement),this.verifyElement=null)}}init(){this.verifyElement||(this.verifyElement=document.createElement("div"),this.verifyElement.setAttribute("id",this.domId),document.body.appendChild(this.verifyElement))}goVerify(e,t,i,n){return this.init(),new Promise((s=>{this.openVerify((()=>{this.closeVerify(),s(2)}),(()=>{this.closeVerify(!0),s(1)}),e,t,i,n)}))}closeVerify(e=!1){var t;this.open=!1,this.rejectPass=e,null===(t=this.captcha)||void 0===t||t.close()}openVerify(e,t,i,n,s,o){var a;const r={ele:this.domId,lang:null!=s?s:"en",successCb:e,showMode:"mask",closeCb:t,errorCb:()=>{},fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}};n&&(r.host=n),this.open=!0,this.rejectPass=!0,null===(a=this.captcha)||void 0===a||a.render({userMode:o,verify_data:i,captchaOptions:r})}updateState(){return new Promise((e=>{if(!this.open)return void e();const t=setInterval((()=>{this.open||(clearInterval(t),e())}),800)}))}loadCaptcha(e,t){return(0,n.sH)(this,void 0,void 0,(function*(){if(!this.captcha){let n;switch(e){case"boe":case"sg":n=i.e(34336).then(i.bind(i,21920));break;case"va":n=i.e(80241).then(i.bind(i,23547));break;case"ie":n=i.e(63392).then(i.bind(i,61484));break;case"no1a":n=i.e(7181).then(i.bind(i,61103));break;case"gcp":case"in":n=i.e(91427).then(i.bind(i,14637));break;case"ttp":n=i.e(22318).then(i.bind(i,39543));break;case"ttp2":n=i.e(35112).then(i.bind(i,52124));break;default:return!1}const s=yield n;this.captcha=s,s.init({commonOptions:{aid:1988,did:t||"0",iid:"0"},captchaOptions:{fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}}})}return!0}))}}},41773:(e,t,i)=>{var n,s,o,a,r,d,l;i.d(t,{JO:()=>p}),function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.CREATE=1]="CREATE",e[e.LIVING=2]="LIVING",e[e.STOP=3]="STOP"}(n||(n={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.PREPARE=1]="PREPARE",e[e.ONLINE=2]="ONLINE",e[e.PAUSE=3]="PAUSE",e[e.OFFLINE=4]="OFFLINE",e[e.SUSPENDED=-1]="SUSPENDED",e[e.LIVE_AND_LEAVE=-2]="LIVE_AND_LEAVE",e[e.PAID_EVENT=-3]="PAID_EVENT",e[e.SUBSCRIBER_ONLY=-4]="SUBSCRIBER_ONLY",e[e.UNAVAILABLE=-5]="UNAVAILABLE",e[e.REGIONAL_UNAVAILABLE=-6]="REGIONAL_UNAVAILABLE",e[e.Blocked=-7]="Blocked",e[e.USER_RM_BLOCK=-8]="USER_RM_BLOCK",e[e.PARENT_RM_BLOCK=-9]="PARENT_RM_BLOCK",e[e.KickOut=-10]="KickOut",e[e.E_COMMERCE_BLOCK=-11]="E_COMMERCE_BLOCK",e[e.E_COMMERCE_USER_RM=-12]="E_COMMERCE_USER_RM",e[e.E_COMMERCE_PARENT_RM=-13]="E_COMMERCE_PARENT_RM"}(s||(s={})),function(e){e.Live="tiktok_live_view_window"}(o||(o={})),function(e){e[e.TRILL=1180]="TRILL",e[e.MUSICALLY=1233]="MUSICALLY"}(a||(a={})),function(e){e.TRILL="t",e.MUSICALLY="m",e.LITE="lite"}(r||(r={})),function(e){e[e.Normal=0]="Normal",e[e.SmartPlayer=1]="SmartPlayer"}(d||(d={})),function(e){e[e.UNSET=0]="UNSET",e[e.CLOSE=1]="CLOSE",e[e.OPEN=2]="OPEN"}(l||(l={}));const p=[{name:"use_container_exp",vid:["v0","v1","v2","v3"]},{name:"sharing_user_app_link",vid:["v1","v2"]},{name:"share_button_part1_test",vid:["v1","v2","v3","v4"]},{name:"expose_recharge_entry_pc",vid:["v1","v2","v3"]},{name:"live_studio_download_type",vid:["v1","v2"]},{name:"live_studio_entry",vid:["v1","v2","v3"]},{name:"live_context_optimize",vid:["v0","v1","v2","v3"]},{name:"live_react_query_cache",vid:["v0","v1"]},{name:"live_discover_draw_hover",vid:["v0","v1"]},{name:"live_discover_enter_shortcut",vid:["v0","v1"]},{name:"live_shortcuts_all",vid:["v0","v1"]},{name:"live_shortcuts_video",vid:["v0","v1"]},{name:"live_seamless_enter_room",vid:["v1","v2"]},{name:"live_room_seamless_switch",vid:["v0","v1"]},{name:"live_player_h265",vid:["v0","v1","v2","v3"]},{name:"live_player_switch_button",vid:["v1","v2"]},{name:"live_loading_icon",vid:["v1","v2"]},{name:"live_player_mute_text",vid:["v1","v2"]},{name:"live_player_handler",vid:["v1","v2","v3"]},{name:"live_player_icon",vid:["v1","v2"]},{name:"live_detail_non_logged_in_entry",vid:["v1","v2","v3"]},{name:"live_dynamic_bg",vid:["v1","v2"]},{name:"live_player_enable_1080p",vid:["v1","v2"]},{name:"live_auto_definition_tips",vid:["v1","v2","v3"]},{name:"live_room_age_restriction",vid:["v1","v2","v3"]},{name:"live_feed_preload",vid:["v0","v1"]},{name:"live_feed_style",vid:["v1","v2","v3"]},{name:"live_feed_auto_play_3",vid:["v1","v2","v3"]},{name:"live_player_e2e_low_delay_preload_time_test",vid:["v1","v2","v3"]},{name:"show_player_stats_entry",vid:["v1","v2"]},{name:"live_player_codetype",vid:["v1","v2"]},{name:"live_lcp_perf_optimize",vid:["v1","v2","v3","v4"]},{name:"live_report_reason_api",vid:["v1","v2"]},{name:"live_report_comment_reason_api",vid:["v1","v2"]},{name:"live_recharge_by_amount",vid:["v0","v1","v2"]},{name:"live_recharge_login",vid:["v1","v2"]},{name:"exchange_retention_popup",vid:["v1","v2"]},{name:"live_recharge_homescreen",vid:["v0","v1","v2"]},{name:"live_wallet_performance_packup",vid:["v0","v1"]},{name:"live_subscription_cashier",vid:["v1","v2"]},{name:"show_recharge_advantage",vid:["v1","v2"]},{name:"live_preview_web",vid:["v1","v2","v3"]},{name:"live_preview_web_son",vid:["v1","v2","v3"]},{name:"live_stack_insert_context",vid:["v1","v2"]},{name:"live_csr_insert_context",vid:["v1","v2"]},{name:"live_like",vid:["v1","v2"]},{name:"live_room_csr",vid:["v1","v2"]},{name:"webapp_fyp_live_opt",vid:["v0","v1"]},{name:"live_survey_open",vid:["v0","v1"]},{name:"live_volume_balance",vid:["v0","v1","v2"]},{name:"live_low_latency_v2",vid:["v0","v1"]},{name:"live_gift_add_animation",vid:["v0","v1"]},{name:"live_gift_add_animation_send_loading",vid:["v0","v1"]},{name:"live_abr_memo",vid:["v0","v1"]},{name:"live_stage_definition",vid:["v0","v1"]},{name:"live_recharge_path_shortening_home_screen",vid:["v0","v1","v2"]},{name:"live_enter_room_chore",vid:["v0","v1"]},{name:"live_fyp_redesign_a",vid:["v0","v1"]},{name:"live_recharge_get_coins_entrance_for_you_page",vid:["v0","v1","v2"]},{name:"enable_ec_lcc",vid:["v0","v1"]},{name:"live_chat_message_cache_opt",vid:["v0","v1"]},{name:"live_screen_radio_opt_display_bottom",vid:["v0","v1"]},{name:"live_screen_radio_opt_side_nav",vid:["v0","v1"]},{name:"live_quick_chat_expand",vid:["v0","v1"]},{name:"live_chat_refresh_rate_opt",vid:["v0","v1","v2"]},{name:"live_feed_save",vid:["v0","v1"]},{name:"live_edenx_runtime",vid:["v1","v2"]},{name:"webapp_live_nav_avatar",vid:["v0","v1"]},{name:"webapp_live_recommand_switch",vid:["v0","v1"]},{name:"webapp_live_recommand_sort",vid:["v0","v1"]},{name:"live_detail_endlive_auto_feed",vid:["v0","v1","v2"]},{name:"video_feed_mode_url_test",vid:["v1","v2"]},{name:"browser_device_id",vid:["v1"]},{name:"volume_normalize",vid:["v1","v2","v3","v4"]},{name:"xgplayer_preload_config",vid:["v1","v2","v3","v4"]},{name:"hevc_desktop_server",vid:["v1","v2","v3"]},{name:"hevc_mobile_server",vid:["v1","v2","v3"]},{name:"video_serverpush",vid:["v1","v2"]},{name:"mobile_vodkit",vid:["v1","v2","v3","v4"]},{name:"web_player_refactor",vid:["v1","v2"]},{name:"xg_volume_test",vid:["v1","v2","v3","v4","v5"]},{name:"feed_scroll_opt",vid:["v0","v1","v2","v3"]},{name:"video_bitrate_adapt",vid:["v1","v2","v3"]},{name:"explore_trending_topics",vid:["v0","v1"]},{name:"islands_arch_phase1",vid:["v0","v1"]},{name:"islands_arch_phase2",vid:["v0","v1","v2"]},{name:"islands_arch_video_detail",vid:["v0","v1"]},{name:"islands_arch_explore",vid:["v0","v1","v2"]},{name:"bundle_size_reverse",vid:["v0","v1"]},{name:"remove_tooltip",vid:["v0","v1","v2","v3","v4","v5"]},{name:"optimize_bot_ssr_count",vid:["v1","v2","v3","v4"]},{name:"sharing_reverse_recommend",vid:["v1","v2","v3","v4","v5","v6"]},{name:"sharing_android_jump_optimization",vid:["v0","v2","v4","v5"]},{name:"reflow_video_s2s",vid:["v1","v2","v3"]},{name:"mobile_s2s",vid:["v1","v2"]},{name:"s2s_afdp",vid:["v0","v1"]},{name:"sharing_icon_popup_test",vid:["v0","v1"]},{name:"yml_ui_optimize",vid:["v0","v1","v2","v3"]},{name:"reflow_comment_optimization",vid:["v1","v2","v3","v4"]},{name:"islands_arch_user_profile",vid:["v0","v1","v2"]},{name:"islands_arch_rest_page",vid:["v0","v1"]},{name:"feed_scroll_opt_data_collection",vid:["v0","v2"]},{name:"explore_ui_change",vid:["v0","v1","v2","v3","v4"]},{name:"mobile_search_test",vid:["v1","v2"]},{name:"pumbaa_enable_test",vid:["v1","v2"]},{name:"sharing_now_product_intro",vid:["v1","v2","v3"]},{name:"tt4b_ads",vid:["v1","v2"]},{name:"foryou_prefetch",vid:["v1","v2"]},{name:"studio_web_eh_entrance_v3",vid:["v1","v2","v3","v4"]},{name:"tteh_effect_anchor_v1",vid:["v1","v2"]},{name:"periodic_login_popup_interval",vid:["v1","v2","v3","v4","v5"]},{name:"enable_slardar_image",vid:["v1","v2"]},{name:"explore_shunt_test",vid:["v1","v2","v3"]},{name:"new_redirect",vid:["v0","v1"]},{name:"search_video",vid:["v1","v2","v3","v4"]},{name:"video_reflow_optimization",vid:["v1","v6"]},{name:"video_reflow_andriod_call_phase2_api",vid:["v1","v2"]},{name:"video_reflow_andriod_call_phase2_time",vid:["v1","v4"]},{name:"video_reflow_onelink_preconnect",vid:["v1","v2"]},{name:"video_reflow_android_auto_awaken",vid:["v1","v2","v3"]},{name:"video_reflow_awaken_fb",vid:["v1","v2"]},{name:"video_reflow_awaken_delay",vid:["v0","v1","v2","v3","v4"]},{name:"sharing_video_remove_rem",vid:["v1","v2"]},{name:"sharing_hashtag_pns",vid:["v1","v2"]},{name:"video_reflow_csr_render",vid:["v0","v1"]},{name:"video_reflow_csr_skeleton_enhance",vid:["v0","v1","v2","v3"]},{name:"video_reflow_mpa_optimization",vid:["v0","v1"]},{name:"video_reflow_skeleton_ui",vid:["v0","v1"]},{name:"video_reflow_downgrade",vid:["v1","v2"]},{name:"video_reflow_refactor_server_recommend_list",vid:["v0","v1"]},{name:"video_reflow_coin_install_reverse",vid:["v0","v1"]},{name:"video_reflow_shrink_carousel",vid:["v0","v1"]},{name:"video_reflow_recommend_carousel_btn_style",vid:["v0","v1","v2"]},{name:"sharing_photo_optimization",vid:["v0","v1","v2","v3"]},{name:"video_reflow_recommend_vertical_list",vid:["v0","v1","v2"]},{name:"video_reflow_recommend_sort_type",vid:["0","1","2"]},{name:"video_reflow_preload_install",vid:["v0","v1"]},{name:"video_reflow_tea_init_perf",vid:["v0","v1"]},{name:"video_reflow_onelink_retargeting",vid:["v0","v1","v2"]},{name:"video_reflow_gp_referer",vid:["v0","v1"]},{name:"video_reflow_facebook_af_dp",vid:["v0","v1","v2"]},{name:"webapp_vdc_scedule",vid:["v1","v2"]},{name:"sharing_vdc_schedule",vid:["v1","v2"]},{name:"search_add_live",vid:["v1","v2"]},{name:"search_transfer_history",vid:["v1","v2"]},{name:"search_transfer_guesssearch",vid:["v1","v2"]},{name:"search_top_author_card",vid:["v0","v1","v2"]},{name:"search_yml_guess_count",vid:["v0","v1","v2","v3"]},{name:"sharing_video_swiper_recommendations",vid:["v0","v1","v2","v3","v4"]},{name:"sharing_video_use_smart",vid:["v0","v1","v2"]},{name:"sharing_video_reduce_consumption",vid:["v0","v1","v2","v3","v4","v5","v6","v7","v8"]},{name:"sharing_video_api_refactor_investigation",vid:["v0","v1","v2","v3"]},{name:"sharing_video_pause_guide",vid:["v0","v1","v2"]},{name:"sharing_video_ui",vid:["v0","v1"]},{name:"sharing_video_coin_ui_perf",vid:["v0","v1"]},{name:"sharing_short_dl",vid:["v0","v1"]},{name:"sharing_redirect_page_strategy",vid:["v0","v1"]},{name:"sharing_video_first",vid:["v0","v1","v2","v3","v4","v5"]},{name:"sharing_video_first_use_campaign",vid:["v0","v1"]},{name:"sharing_skeleton_lite",vid:["v0","v1"]},{name:"search_bar_style_opt",vid:["v1","v2","v3"]},{name:"search_remove_related_search",vid:["v0","v1","v2"]},{name:"search_add_non_personalized_switch",vid:["v1","v2"]},{name:"search_mobile_add_search_recommendations",vid:["v1","v2"]},{name:"feed_data_cache",vid:["v1","v2","v3","v4"]},{name:"webapp_browser_mode_new_tab",vid:["v1","v2"]},{name:"qr_sso_popup",vid:["v1","v2","v3","v4","v5"]},{name:"desktop_ui_opt",vid:["v1","v2","v3","v4"]},{name:"non_personalized_feeds_web",vid:["v1","v2"]},{name:"desktop_ui_reply",vid:["v1","v2","v3","v4","v5","v6"]},{name:"desktop_avatar_nick_name",vid:["v1","v2"]},{name:"search_entry_search_bar",vid:["v1","v2"]},{name:"search_entry_comment_top",vid:["v1","v2"]},{name:"use_inbox_notice_count_api",vid:["v1","v2"]},{name:"autoscroll_reposition",vid:["v0","v1"]},{name:"banner_ad_enable",vid:["v0"]},{name:"sidenav_test",vid:["v1","v2"]},{name:"creator_center_connect",vid:["v1","v2","v3"]},{name:"creator_center_connect_global",vid:["v1","v2","v3"]},{name:"webapp_auto_refresh",vid:["v1","v2","v3"]},{name:"change_list_length_new",vid:["30","20","15"]},{name:"preload_with_left",vid:["0","2","3","4","5"]},{name:"browser_mode_video_controller",vid:["v1","v2"]},{name:"one_column_player_size",vid:["v1","v2","v3","v4","v5"]},{name:"sign_up_webapp_region_change",vid:["v1","v2"]},{name:"video_detail_search_bar",vid:["v1","v2"]},{name:"search_entry_comment_word",vid:["v1","v2"]},{name:"confirm_logout",vid:["v1","v2"]},{name:"creator_center_reverse",vid:["v1","v2"]},{name:"desktop_app_test",vid:["v1","v2"]},{name:"browser_login_redirect",vid:["v1","v2"]},{name:"webapp_switch_account",vid:["v1","v2","v3","v4"]},{name:"search_report",vid:["v1","v2"]},{name:"search_keep_sug_show",vid:["v1","v2"]},{name:"webapp_login_email_phone",vid:["v1","v2"]},{name:"use_follow_v2",vid:["v1","v2"]},{name:"search_server",vid:{}},{name:"add_kap_entry",vid:["v1","v2"]},{name:"enable_ml_model",vid:["v1","v2","v3","v4","v5","v6"]},{name:"enable_ml_model_suggest_content",vid:["v0","v1"]},{name:"mobile_csr_test",vid:["v1","v2"]},{name:"webapp_login_prediction",vid:["v1","v2","v3","v4","v5","v6","v7","v8","v9","v10"]},{name:"login_modal_ui_revamp",vid:["v1","v2","v3","v4"]},{name:"browser_mode_encourage_login",vid:["v1","v2","v3"]},{name:"project_ace_control",vid:["v0","v1"]},{name:"soft_bank_test",vid:["v1","v2"]},{name:"enable_ads",vid:["v1","v2"]},{name:"enable_about_this_ad",vid:["v1","v2"]},{name:"digital_wellbeing_web",vid:["v0","v1"]},{name:"scheduled_breaks_teens",vid:["v0","v1"]},{name:"fix_tea_session",vid:["v1","v2","v3"]},{name:"enable_profile_pinned_video",vid:["v1","v2","v3"]},{name:"enable_fb_sdk",vid:["v1","v2"]},{name:"live_preview_web",vid:["v1","v2","v3"]},{name:"live_preview_web_son",vid:["v1","v2","v3"]},{name:"live_login_reflow_btn",vid:["v1","v2"]},{name:"comment_self_send_optimize",vid:["v0","v1"]},{name:"mobile_consumption_limit_logged_in",vid:["v1","v2","v3","v4","v5"]},{name:"mobile_consumption_limit_non_logged_in",vid:["v1","v2","v3","v4","v5","v6","v7","v8"]},{name:"add_profile_left_bar",vid:["v0","v1","v2","v3"]},{name:"explore_all_tab",vid:["v0","v1","v2","v3","v4","v5"]},{name:"report_item_tag",vid:["v1","v2"]},{name:"login_option_order_by_metrics",vid:["v1","v2","v3"]},{name:"friends_tab",vid:["v0","v1"]},{name:"remove_bottom_banner",vid:["v1","v2","v3","v4","v5"]},{name:"webapp_login_prediction_full",vid:["v1","v2"]},{name:"webapp_login_prediction_reverse",vid:["v1","v2"]},{name:"video_detail_reflow_card",vid:["v0","v1"]},{name:"show_aigc_label_web",vid:["v0","v1"]},{name:"webapp_feature_expansion",vid:["v0","v1"]},{name:"webapp_login_causal_inference",vid:["v1","v2","v3","v4","v5","v6","v7","v8","v9","v10","v11","v12","v13","v14","v15","v16","v17","v18","v19","v20","v21","v22","v23","v24","v25","v26","v27","v28","v29","v30"]},{name:"non_logged_in_comments",vid:["v1","v2","v3","v4"]},{name:"s2s",vid:["v0","v1"]},{name:"kap_prefetch",vid:["v1","v2"]},{name:"kap_jumper_opt",vid:["v1","v2"]},{name:"auto_scroll",vid:["v1","v3"]},{name:"tiktok",vid:[]},{name:"mobile_consumption_limit_login",vid:["v1","v2","v3"]},{name:"preview_cover",vid:["v0","v1"]},{name:"search_preview_ui_change",vid:["v0","v1","v2","v3"]},{name:"seo_preview_ui_change",vid:["v0","v1"]},{name:"use_profile_avatar",vid:["v1","v2"]},{name:"webapp_login_causal_inference_validation",vid:["v1","v2","v3","v4","v5"]},{name:"webapp_login_causal_inference_data_collection",vid:["v1","v2","v3","v4","v5"]},{name:"webapp_causal_inference_dark_mode_data_collection",vid:["v1","v2","v3"]},{name:"webapp_causal_inference_auto_mute_data_collection",vid:["v1","v2","v3"]},{name:"webapp_causal_inference_auto_scroll_data_collection",vid:["v1","v2","v3"]},{name:"webapp_causal_inference_auto_scroll_validation",vid:["v1","v2","v3"]},{name:"webapp_causal_inference_landing_page",vid:["v0","v1"]},{name:"webapp_causal_inference_dark_mode_validation",vid:["v1","v2","v3","v4","v5"]},{name:"webapp_causal_inference_periodic_popup_validation",vid:["v1","v2","v3","v4","v5","v6","v7"]},{name:"webapp_causal_inference_auto_mute_validation",vid:["v1","v2","v3","v4","v5"]},{name:"last_login_method",vid:["v1","v2","v3"]},{name:"webapp_moderation",vid:["v0","v1"]},{name:"mobile_swiping_gesture",vid:["v0","v1"]},{name:"should_recom_reduce_icon_risk",vid:["v0","v1"]},{name:"browser_content_logic",vid:["v1","v2","v3","v4"]},{name:"mobile_predictive_data",vid:["v0","v1","v2","v3","v4","v5","v6","v7","v8","v9","v10","v11","v12","v13","v14","v15","v16","v17","v18","v19","v20","v21","v22","v23","v24","v25","v26","v27","v28","v29"]},{name:"mobile_fps_logger",vid:["v0","v1"]},{name:"delay_guest",vid:["0","1","2","3","5","8","10"]},{name:"delay_guest_fyp",vid:["0","1","2","3","5","8","10"]},{name:"delay_guest_others_homepage",vid:["0","1","2","3","5","8","10"]},{name:"delay_guest_videos",vid:["0","1","2","3","5","8","10"]},{name:"delay_guest_discover",vid:["0","1","2","3","5","8","10"]},{name:"delay_guest_explore",vid:["0","1","2","3","5","8","10"]},{name:"delay_guest_other",vid:["0","1","2","3","5","8","10"]},{name:"webapp_auto_dark_mode_data_collection",vid:["v0","v1"]},{name:"webapp_dynamic_bottom_right",vid:["v0","v1","v2"]},{name:"webapp_odin_id_fe_reverse",vid:["v0","v1"]},{name:"pc_non_personalized_suggested_account",vid:["v0","v1"]},{name:"pc_non_personalized_explore",vid:["v0","v1"]},{name:"mobile_non_personalized_suggest_account",vid:["v0","v1"]},{name:"video_detail_page_video_play",vid:["v1","v2"]},{name:"mobile_replace_signup_with_login",vid:["v0","v1"]},{name:"use_aligned_copies",vid:["v0","v1","v2"]},{name:"desktop_web_survey_new",vid:["v0","v1"]},{name:"desktop_web_survey_old",vid:["v0","v1"]},{name:"promote_qr_code",vid:["v0","v1"]},{name:"mobile_remove_music_info",vid:["v0","v1"]},{name:"mobile_enable_xg",vid:["v0","v1"]},{name:"enable_mini_player",vid:["v0","v1","v2","v3","v4","v5","v6"]},{name:"enable_mini_player_new_design",vid:["v0","v1"]},{name:"enable_mini_player_switch_tab_popup",vid:["v0","v1","v2","v3","v4"]},{name:"enable_upload_refactor",vid:["v0","v1"]},{name:"enable_message_refactor",vid:["v0","v1"]},{name:"guest_mode_redesign",vid:["v0","v1","v2","v3"]},{name:"sharing_aso",vid:["v1","v2","v3"]},{name:"webapp_repost_label",vid:["v0","v1"]},{name:"webapp_repost_tab",vid:["v0","v1"]},{name:"webapp_repost_action",vid:["v0","v1","v2","v3","v4"]},{name:"webapp_repost_notice",vid:["v0","v1"]},{name:"webapp_creator_post_sort",vid:["v0","v1","v2","v3","v4","v5"]},{name:"webapp_creator_just_watched",vid:["v0","v1","v2","v3","v4"]},{name:"webapp_jotai_foryou",vid:["v0","v1","v2","v3","v4","v5","v6"]},{name:"guide_user_to_next_video",vid:["v0","v1","v2"]},{name:"creator_to_fyp",vid:["v0","v1","v2"]},{name:"video_detail_end_card",vid:["v0","v1","v2"]},{name:"detail_to_explore",vid:["v0","v1","v2","v3","v4"]},{name:"three_column_gif",vid:["v0","v1"]},{name:"creator_header_height",vid:["v0","v1","v2","v3"]},{name:"encourage_share_repost",vid:["v0","v1","v2","v3","v4"]},{name:"webapp_jotai_detail",vid:["v0","v1"]},{name:"fyp_interest_selector",vid:["v0","v1","v2","v3"]},{name:"video_detail_yml_ui",vid:["v1","v2","v3","v4"]},{name:"webapp_mobile_web2app_cta_guide",vid:["v0","v1","v2","v3","v4"]},{name:"video_detail_auto_pip_opt",vid:["v0","v1","v2","v3","v4","v5","v6"]},{name:"fyp_redesign",vid:["v0","v1"]},{name:"seo_ios_campaign",vid:["v0","v1"]},{name:"seo_campaign",vid:["v0","v1"]},{name:"seo_campaign_unified",vid:["v0","v1"]},{name:"video_detail_yml_creator",vid:["v0","v1","v2"]},{name:"video_detail_author_card",vid:["v0","v1","v2","v3"]},{name:"video_detail_nav_opt",vid:["v0","v1","v2","v3"]},{name:"video_detail_nav_shortcut",vid:["v0","v1","v2","v3","v4"]},{name:"playback_refactor_desktop",vid:["v0","v1"]},{name:"playback_refactor_mobile",vid:["v0","v1"]},{name:"player_degrade",vid:["v0","v1","v2"]},{name:"player_retry",vid:["v0","v1","v2"]},{name:"tt_player_logger",vid:["v0","v1"]},{name:"tt_player_reuse",vid:["v0","v1"]},{name:"video_details_player_redesign_engagement",vid:["v0","v1","v2","v3"]},{name:"video_details_player_redesign_player",vid:["v0","v1","v2","v3"]},{name:"web_on_device_ml",vid:["v1","v2","v3","v4"]},{name:"use_navigation_refactor",vid:["v0","v1","v2","v3","v4","v5"]},{name:"use_left_navigation_refactor",vid:["v0","v1","v2","v3"]},{name:"video_detail_responsive_ui",vid:["v0","v1","v2"]},{name:"webapp_explore_nav_order",vid:["v0","v1","v2"]},{name:"webapp_explore_video_info",vid:["v0","v1","v2","v3","v4","v5","v6"]},{name:"webapp_explore_aspect_ratio",vid:["v0","v1","v2","v3","v4","v5"]},{name:"webapp_explore_remove_category",vid:["v0","v1","v2","v3"]},{name:"explore_category_ranking",vid:["v0","v1","v2"]},{name:"webapp_collection_profile",vid:["v0","v1"]},{name:"webapp_collection_adder",vid:["v0","v1","v2","v3"]},{name:"webapp_inapp_notice",vid:["v0","v1","v2","v3","v4"]},{name:"immersive_player",vid:["v0","v1","v2","v3","v4"]},{name:"new_guest_mode_hot",vid:["v0","v1"]},{name:"new_guest_mode_other",vid:["v0","v1"]},{name:"kep_skeleton_cta",vid:["v1","v2","v3"]},{name:"kep_streaming",vid:["v0","v1","v2"]},{name:"kep_cta_style",vid:["v0","v1","v2","v3"]},{name:"fyp_comments_panel",vid:["v0","v1","v2","v3"]},{name:"web_dm_test_force_http",vid:["v1","v2"]},{name:"reduce_user_item_list",vid:["v0","v1","v2","v3","v4","v5"]},{name:"web_dm_enable_debug",vid:["v1","v2"]},{name:"web_dm_multimedia_msg",vid:["v1","v2"]},{name:"web_dm_sticker_msg_display",vid:["v1","v2"]},{name:"web_dm_group_chat",vid:["v1","v2"]},{name:"web_dm_decrease_lcp",vid:["v1","v2"]},{name:"web_dm_icon_click_check",vid:["v1","v2"]},{name:"webapp_query_comments_popover",vid:["v0","v1"]},{name:"user_cta_optimization_user_phase2",vid:["v0","v1","v2"]},{name:"kep_coin_app",vid:["v0","v1","v2","v3"]},{name:"fyp_hide_music_info",vid:["v0","v1","v2"]},{name:"detail_page_comments_redesign",vid:["v0","v1","v2"]},{name:"enable_autoscroll_moremenu",vid:["v0","v1"]},{name:"enable_video_detail_moremenu_refactor",vid:["v0","v1","v2","v3"]},{name:"kep_reverse_cta_fix",vid:["v0","v1"]},{name:"detail_page_comments_right_side",vid:["v0","v1","v2","v3","v4"]},{name:"aggregation_page_cta_enhancement",vid:["v0","v1","v2"]},{name:"kep_pop_up_auto_dismiss",vid:["v0","v1","v2","v3"]},{name:"revamp_share_menu",vid:["v0","v1","v2","v3","v4","v5"]},{name:"remove_disclaimer",vid:["v0","v1"]},{name:"kep_video_unmute",vid:["v0","v1","v2"]},{name:"player_error_optimize",vid:["v0","v1","v2","v3"]},{name:"video_closed_caption",vid:["v0","v1","v2","v3","v4"]},{name:"for_you_page_cta_enhancement",vid:["v0","v1","v2","v3","v4","v5"]},{name:"nav_phase_3",vid:["v0","v1","v2","v3"]},{name:"image_fetch_priority",vid:["v0","v1"]},{name:"km_webapp_stm",vid:["v0","v1"]},{name:"km_default_limit",vid:["v0","v1"]},{name:"kep_video_skeleton_cta",vid:["v0","v1","v2"]},{name:"kep_video_play",vid:["v0","v1","v2"]},{name:"feed_change_optimize_image",vid:["v0","v1","v2"]},{name:"feed_change_optimize_ff",vid:["v0","v1","v2"]},{name:"solaria_portrait_service",vid:["v0","v1"]},{name:"refetch_for_video_error",vid:["v0","v1"]},{name:"enable_post_translation",vid:["v0","v1"]},{name:"global_web_footer",vid:["v0","v1"]},{name:"user_bundle_opt",vid:["v0","v1","v2"]},{name:"kep_click_opt_phase1",vid:["v0","v1","v2","v3"]},{name:"kep_click_opt_phase2",vid:["v0","v1","v2","v3"]},{name:"mobile_android_jump_optimization",vid:["v0","v1","v2"]},{name:"guest_mode_interest",vid:["v0","v1","v2"]},{name:"redesign_login_popup",vid:["v0","v1","v2","v3","v4"]},{name:"kep_add_search_entry",vid:["v0","v1","v2"]},{name:"react_upgrade_experiment",vid:["v0","v1"]},{name:"desktop_faas_render",vid:["v1","v2"]},{name:"ui_layout_alignment",vid:["v1","v2","v3"]},{name:"live_public_screen_skeleton",vid:["v0","v1"]},{name:"long_video_popup_display_optimization",vid:["false","true"]},{name:"video_reflow_poi_anchor",vid:["v0","v1"]},{name:"search_add_related_search",vid:["v1","v2"]},{name:"should_highlight_hashtag",vid:["v1","v2"]},{name:"hashtag_to_top_search",vid:["v1","v2"]},{name:"it_or_us",vid:["v1","v2"]},{name:"fyp_up_down",vid:["v0","v1"]}]},87221:(e,t,i)=>{var n;i.d(t,{Y:()=>n}),function(e){let t;!function(e){e.WebSite="WebSite",e.ItemList="ItemList",e.VideoObject="VideoObject",e.SocialMediaPosting="SocialMediaPosting",e.WebPage="WebPage",e.Page="Page",e.CollectionPage="CollectionPage",e.BreadcrumbList="BreadcrumbList",e.Person="Person",e.ProfilePage="ProfilePage",e.MusicRecording="MusicRecording",e.QAPage="QAPage",e.Event="Event",e.ListItem="ListItem",e.Thing="Thing",e.Product="Product"}(t=e.JsonldType||(e.JsonldType={}))}(n||(n={}))},21850:(e,t,i)=>{var n;i.d(t,{k:()=>n}),function(e){let t;!function(e){e[e.META_PATH=1]="META_PATH",e[e.META_EXP=2]="META_EXP",e[e.META_PAGE=3]="META_PAGE",e[e.JSONLD_PATH=4]="JSONLD_PATH",e[e.JSONLD_EXP=5]="JSONLD_EXP",e[e.JSONLD_PAGE=6]="JSONLD_PAGE"}(t=e.SERPProcessType||(e.SERPProcessType={}))}(n||(n={}))},53065:(e,t,i)=>{var n,s,o,a,r,d,l,p,c,u,v,g,m;i.d(t,{Jt:()=>w,LH:()=>h,o4:()=>_,qL:()=>b,w7:()=>y}),function(e){e[e.OpenApp=1]="OpenApp",e[e.ExitApp=2]="ExitApp",e[e.Interval=3]="Interval",e[e.LogOutAccount=4]="LogOutAccount",e[e.ForceUpload=5]="ForceUpload"}(n||(n={})),function(e){e[e.Mon=1]="Mon",e[e.Tue=2]="Tue",e[e.Wed=3]="Wed",e[e.Thu=4]="Thu",e[e.Fri=5]="Fri",e[e.Sat=6]="Sat",e[e.Sun=7]="Sun"}(s||(s={})),function(e){e[e.ScreenTimeManagementEligibleEnum_NonDefaultEnabled=0]="ScreenTimeManagementEligibleEnum_NonDefaultEnabled",e[e.ScreenTimeManagementEligibleEnum_DefaultEnabledEligible=1]="ScreenTimeManagementEligibleEnum_DefaultEnabledEligible",e[e.ScreenTimeManagementEligibleEnum_DefaultEnabledIneligible=2]="ScreenTimeManagementEligibleEnum_DefaultEnabledIneligible"}(o||(o={})),function(e){e[e.ScreenTimeManagementRepeatTypeEnum_Everyday=1]="ScreenTimeManagementRepeatTypeEnum_Everyday",e[e.ScreenTimeManagementRepeatTypeEnum_Week=2]="ScreenTimeManagementRepeatTypeEnum_Week"}(a||(a={})),function(e){e[e.Regular=1]="Regular",e[e.MinorDefaultEnable=2]="MinorDefaultEnable",e[e.FamilyPairing=3]="FamilyPairing"}(r||(r={})),function(e){e[e.Preset=0]="Preset",e[e.Custom=1]="Custom"}(d||(d={})),function(e){e[e.EveryDay=1]="EveryDay",e[e.PerDay=2]="PerDay"}(l||(l={})),function(e){e[e.UserNightScreenTimePopupActionEnum_Delay=1]="UserNightScreenTimePopupActionEnum_Delay",e[e.UserNightScreenTimePopupActionEnum_Dismiss=2]="UserNightScreenTimePopupActionEnum_Dismiss",e[e.UserNightScreenTimePopupActionEnum_View=3]="UserNightScreenTimePopupActionEnum_View"}(p||(p={})),function(e){e[e.Unlink=1]="Unlink",e[e.child=2]="child",e[e.parent=3]="parent",e[e.child_punished=4]="child_punished"}(c||(c={})),function(e){e[e.Unknow=0]="Unknow",e[e.RestrictedModeSwitch=1]="RestrictedModeSwitch",e[e.ScreenTimeLockSwitch=2]="ScreenTimeLockSwitch",e[e.ChangePasscode=3]="ChangePasscode",e[e.ScreenTimeUpdate=4]="ScreenTimeUpdate",e[e.SessionDurationDefault=5]="SessionDurationDefault",e[e.SessionDurationCustom=6]="SessionDurationCustom",e[e.ForgotPasscode=7]="ForgotPasscode",e[e.ScreenTimeEnable=8]="ScreenTimeEnable",e[e.ScreenTimeType=9]="ScreenTimeType",e[e.ScreenTimeManagementAcknowledge=10]="ScreenTimeManagementAcknowledge"}(u||(u={})),function(e){e[e.Preset=0]="Preset",e[e.Custom=1]="Custom"}(v||(v={})),function(e){e[e.enum=0]="enum",e[e.custom=1]="custom"}(g||(g={})),function(e){e.upload="upload",e.updateDailySTM="updateDailySTM",e.updateSleepTime="updateSleepTime",e.updateTimeBreak="updateTimeBreak",e.updateActiveTimeUsage="updateActiveTimeUsage"}(m||(m={}));const _="stmStorage",h="stmActiveTime",y="stmUploadMetric";var f,S,b,w;!function(e){e[e.None=0]="None",e[e.SchedulePage=1]="SchedulePage",e[e.CustomPage=2]="CustomPage",e[e.LearnMorePage=3]="LearnMorePage"}(f||(f={})),function(e){e[e.default=0]="default",e[e.custom=1]="custom"}(S||(S={})),function(e){e[e.off=0]="off",e[e.on=1]="on"}(b||(b={})),function(e){e[e.off=0]="off",e[e.on=1]="on"}(w||(w={}))},41906:(e,t,i)=>{i.d(t,{D1:()=>d,ET:()=>s,FR:()=>n,_G:()=>a,gd:()=>o,wS:()=>r});const n="webapp.a-b",s="b_c",o="-1",a="0",r="1",d={Browser_Impersonator:"2",HTTP_Libraries:"3",Session_Validation_Failed:"4",Scraper_Reputation:"5",Web_Search_Engine_Bots:"6",Declared_Bots:"7",Impersonators_of_Known_Bots:"8","Headless_Browsers/Automation_Tools":"9",Site_Monitoring_and_Web_Development_Bots:"10","Open_Source_Crawlers/Scraping_Platforms":"11",SEO__Analytics_or_Marketing_Bots:"12",Social_Media_or_Blog_Bots:"13",RSS_Feed_Reader_Bots:"14",Web_Archiver_Bots:"15",Media_or_Entertainment_Search_Bots:"16",News_Aggregator_Bots:"17",Development_Frameworks:"18",Cookie_Integrity_Failed:"19",Online_Advertising_Bots:"20",Academic_or_Research_Bots:"21",Business_Intelligence_Bots:"22",Enterprise_Data_Aggregator_Bots:"23",Aggressive_Web_Crawlers:"24",Web_Services_Libraries:"25","E-Commerce_Search_Engine_Bots":"26",Financial_Account_Aggregator_Bots:"27",Job_Search_Engine_Bots:"28"}},48215:(e,t,i)=>{i.d(t,{k:()=>n});const n="473824"},29343:(e,t,i)=>{i.d(t,{$C:()=>o,$m:()=>n,_v:()=>s,s0:()=>a});const n=["AT","BE","BG","HR","CY","CZ","DE","DK","EE","EL","FI","FR","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","IS","LI"],s=n.concat(["GB","CH"]);var o,a;!function(e){e.DEFAULT="DEFAULT",e.SG="ALL_SG",e.VA="MALI_VA",e.TTP="TTP",e.BOE="BOE"}(o||(o={})),function(e){e.DEFAULT="DEFAULT",e.BOE="BOE",e.US_BOE="US_BOE",e.SG="ALL_SG",e.VA="MALI_VA",e.TTP="TTP",e.EU_TTP="EU_TTP",e.US_TTP="US_TTP",e.US_TTP2="US_TTP2"}(a||(a={}))},1853:(e,t,i)=>{i.d(t,{n:()=>n});const n=/(facebookexternalhit|whatsapp|twitterbot|developers\.snap\.com\/robots|Linespider|LinkedInBot|Discordbot|TelegramBot|LarkBot|vk\.com\/dev\/Share)|redditbot/i},65662:(e,t,i)=>{i.d(t,{CM:()=>p,ED:()=>r,Kf:()=>o,O_:()=>s,UH:()=>d,Uw:()=>n,W_:()=>l,q7:()=>a});const n={MO:8,HK:8,TW:8,JP:9,KR:9,ID:7,MY:8,KH:7,MM:6.5,LA:7,PH:8,TH:7,VN:7,SG:8},s=["MO","TW","JP","KR","ID","MY","KH","MM","LA","PH","TH","VN","SG","PK","LK","NP"],o=["PK","LK","NP"],a=["AT","BE","BG","HR","CY","CZ","DE","DK","EE","EL","FI","FR","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","IS","LI"],r=["US","RU","DE","GB","ES","IT","CA","BR","PL","IN","JP","KR","AU","FR","SA","AE","ZA","NG","ID","MX"],d=["AO","BF","BI","BJ","BW","CD","CF","CG","CI","CM","CV","ER","ET","GA","GH","GM","GN","GQ","GW","KE","KM","LR","LS","MG","ML","MU","MW","MZ","NA","NE","NG","RW","SC","SD","SL","SN","SO","SS","ST","SZ","TD","TG","TZ","UG","ZM","ZW"],l=["JP","KR"],p=["JP","KR"]},5726:(e,t,i)=>{i.d(t,{Lq:()=>n,Nl:()=>r,Nm:()=>c,TZ:()=>l,Uy:()=>o,WU:()=>u,YZ:()=>d,ff:()=>a,wX:()=>p,yl:()=>s});const n="5dc26cf008d511e9b571e1bc0c9e23b5",s="FE_i18n",o="3f4a780066b911eba8eda5a15496ac5a",a="TikTok_LIVE_FE",r={"id-ID":{displayName:"Bahasa Indonesia",alias:["id","id-id","in-id","in"]},"ms-MY":{displayName:"Bahasa Melayu",alias:["ms","ms-bn","ms-my"]},"jv-ID":{displayName:"Basa Jawa",alias:["jv","jv-jv"]},"ceb-PH":{displayName:"Cebuano",alias:["ceb","ceb-ph"]},"cs-CZ":{displayName:"Čeština",alias:["cs","cs-cz"]},"de-DE":{displayName:"Deutsch",alias:["de","de-at","de-ch","de-de","de-li","de-lu"]},en:{displayName:"English",alias:[]},es:{displayName:"Español",alias:["es-es","es-xl","es-ES"]},"fil-PH":{displayName:"Filipino",alias:["fil","tl-ph","tl","fil-ph"]},fr:{displayName:"Français",alias:["fr-be","fr-ca","fr-ch","fr-fr","fr-lu","fr-mc"]},"it-IT":{displayName:"Italiano",alias:["it","it-ch","it-it"]},"hu-HU":{displayName:"Magyar",alias:["hu","hu-hu"]},"nl-NL":{displayName:"Nederlands",alias:["nl","nl-be","nl-nl"]},"pl-PL":{displayName:"Polski",alias:["pl","pl-pl"]},"pt-BR":{displayName:"Português",alias:["pt_BR","pt-br","pu","pt","pt-pt"]},"ro-RO":{displayName:"Română",alias:["ro","ro-ro"]},"fi-FI":{displayName:"Suomi",alias:["fi","fi-fi"]},"sv-SE":{displayName:"Svenska",alias:["sv","sv-se"]},"vi-VN":{displayName:"Tiếng Việt",alias:["vi","vi-vn"]},"tr-TR":{displayName:"Türkçe",alias:["tr","tr-tr"]},"el-GR":{displayName:"Ελληνικά",alias:["el","el-gr"]},"ru-RU":{displayName:"Русский",alias:["ru","ru-ru"]},"uk-UA":{displayName:"Українська",alias:["uk","uk-ua"]},"he-IL":{displayName:"עברית",alias:["he","he-il"]},ur:{displayName:"اردو",alias:[]},ar:{displayName:"العربية",alias:["ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ye"]},"hi-IN":{displayName:"हिंदी",alias:["hi","hi-in"]},"bn-IN":{displayName:"বাংলা",alias:["bn","bn-in"]},"th-TH":{displayName:"ภาษาไทย",alias:["th","th-th"]},"my-MM":{displayName:"မြန်မာ",alias:["my","my","my-mm"]},"km-KH":{displayName:"ខ្មែរ",alias:["km","km-kh"]},"ja-JP":{displayName:"日本語",alias:["ja","ja-jpan","ja-jp"]},"zh-Hant-TW":{displayName:"中文 (繁體)",alias:["zh","zh_Hant","zh_TW","zh-tw","zh-hk","zh-Hant","zh-hant-tw"]},"zh-Hans":{displayName:"中文 (简体)",alias:["zh-hans","zh_hans","zh_Hans","zh-cn"]},"ko-KR":{displayName:"한국어",alias:["ko","ko-kr","ko-kore"]}},d=Object.entries(r).map((([e,{alias:t}])=>[e,...t])),l=new Map(d.reduce(((e,t)=>{const i=t[0];return t.forEach((t=>{e.push([t.toLocaleLowerCase(),i])})),e}),[])),p=Object.entries(r).map((([e,{displayName:t}])=>({label:t,value:e}))),c="en",u="tiktok_webapp_lang"},61628:(e,t,i)=>{i.d(t,{$C:()=>d,Kf:()=>s,LX:()=>n,Pw:()=>r,ek:()=>a,tG:()=>o});const n="kap.init.config",s=["wrapper_general_search","wrapper_video_insert","wrapper_user_profile","wrapper_poi_cta","wrapper_feed"],o={discover:{pageName:"discover_kw",routeName:"expansion",pagePath:"/discover",pageType:104,seoPageType:7,afPageName:"keyword",afEnterFrom:"keyword_expansion_page"},find:{pageName:"find",routeName:"find",pagePath:"/find",pageType:124,seoPageType:12,afPageName:"find",afEnterFrom:"find_web"},channel:{pageName:"channel",routeName:"channel",pagePath:"/channel",pageType:122,seoPageType:11,afPageName:"channel",afEnterFrom:"channel_web"},product:{pageName:"ecommerce_kep",routeName:"product",pagePath:"/product",pageType:132,seoPageType:14,afPageName:"ecommerce_kep",afEnterFrom:"ecommerce_kep"}},a=e=>{const t=Object.values(o).find((t=>(null==t?void 0:t.seoPageType)===e));return null==t?void 0:t.pagePath},r=(e,t)=>Object.values(o).some((i=>i&&Object.entries(e).every((([e,t])=>i[e]===t))&&Object.entries(t).every((([e,t])=>i[e]===t)))),d={fetchCount:4,videoListKey:"videoListData"}},57314:(e,t,i)=>{i.d(t,{i:()=>n});const n="tea_sid"},60893:(e,t,i)=>{i.d(t,{C:()=>n,U:()=>s});const n="https://www.tiktok.com",s="https://sf-static.tiktokcdn.com/obj/eden-sg/uhtyvueh7nulogpoguhm/tiktok-icon2.png"},43573:(e,t,i)=>{i.d(t,{X:()=>n});const n="seo.abtest"},57725:(e,t,i)=>{i.d(t,{o:()=>n});const n="webapp.browserRedirect-context"},31054:(e,t,i)=>{i.d(t,{BR:()=>a,Ow:()=>o,QG:()=>r});var n=i(27334),s=i(65622);const o="webapp.app-context",a=(0,s.createContext)(null),r=({value:e,children:t})=>(0,n.jsx)(a.Provider,Object.assign({value:e},{children:t}))},60564:(e,t,i)=>{i.d(t,{K:()=>n});const n="webapp.biz-context"},35999:(e,t,i)=>{i.d(t,{CY:()=>p,Ss:()=>r,hp:()=>d,rv:()=>l});var n=i(27334),s=i(62631),o=i(82446),a=i.n(o);const r=(0,i(65622).createContext)({t:(e,t,i)=>i&&"string"==typeof i?i:e,hasLoaded:a(),loadStarling:a(),initialNamespaces:[],lang:""}),d=new s.n("i18n"),l="webapp.i18n-translation",p=function({children:e,value:t}){return(0,n.jsx)(r.Provider,Object.assign({value:t},{children:e}))}},58677:(e,t,i)=>{i.d(t,{Qs:()=>p,Z0:()=>v,i_:()=>n,kC:()=>g,qm:()=>m,uk:()=>l,x_:()=>u});var n,s=i(69872),o=i(76434),a=i(5726),r=i(1853);!function(e){e.WebApp="Webapp",e.Analytics="MT_Analytics",e.Reflow="MT_Reflow",e.Login="WebApp_Login",e.POI="poi_web",e.RechargeReferral="Webapp_recharge_referral"}(n||(n={}));const d=["^/@.*/now","^/@.*/playlist/.*","^/sticker/","^/@.*/post/.*","^/@.*/invite","^/now","^/messages/chat"],l=(e="")=>"zh-Hans"===e?e:e.split("-")[0].replace("zh","zh-Hant")||e||"en";function p({isMobile:e,pathname:t,search:i,isSearchbot:n,isNow:o}){const a=(0,s.parse)(i);return e&&/^\/@.*\/video\/.+/.test(t)?["MT_Reflow","Webapp"]:d.some((e=>new RegExp(e).test(t)))||o||e&&/^\/@.*\/collection\/.+/.test(t)?["MT_Reflow"]:e&&"1"===a._r?["MT_Reflow","Webapp"]:t.startsWith("/login")||t.startsWith("/signup")||t.startsWith("/logout")?["WebApp_Login"]:t.startsWith("/search/campaign/")||t.startsWith("/question/")||t.startsWith("/messages/group")||e&&n?["MT_Reflow","Webapp"]:["Webapp"]}function c(e){let t;return t=Array.isArray(e)?e[e.length-1]:null!=e?e:"",t}function u(e){const t=c(e).toLocaleLowerCase();return!!t&&a.TZ.has(t)}function v(e){var t;const i=c(e).toLocaleLowerCase();return u(i)&&null!==(t=a.TZ.get(i))&&void 0!==t?t:a.Nm}function g(e){if(u(e))return v(e)}function m(e){var t,i;const{pathname:n,query:s}=(0,o.xw)(),{userAgent:d,acceptLanguage:l}=(0,o.T6)();let p=(null!=e?e:n).split("/")[1];if(function(e){return Boolean(e.startsWith("/download"))}(null!=e?e:n)&&(p=(null!=e?e:n).split("/")[2]),p&&u(p))return v(p);const{lang:c,langCountry:g,language:m,sharer_language:_}=s,h=[g,c,m];r.n.test(d)&&h.push(_);for(const e of h)if(e&&u(e))return v(e);const y=(0,o.MJ)(a.WU);if(y&&u(y))return v(y);const f=null===(t=d.match(/ByteFullLocale\/([\w\-_]+)/))||void 0===t?void 0:t[1];if(f&&u(f))return v(f);const S=null===(i=d.match(/ByteLocale\/([\w\-_]+)/))||void 0===i?void 0:i[1];if(S&&u(S))return v(S);for(const e of l)if(e&&u(e))return v(e);return _&&u(_)?v(_):/yandex\.com\/bots/i.test(d)?v("ru-RU"):a.Nm}},90163:(e,t,i)=>{i.d(t,{KJ:()=>u,Ny:()=>v,R0:()=>p,TB:()=>g,qu:()=>c});const n=/\(i[^;]+;( U;)? CPU.+Mac OS X/,s=/Android|android|Adr/,o=/X11/,a=/\(Macintosh; Intel /,r=/(Mac|iPhone|iPod|iPad)/i,d=/Win\d{2}|Windows/,l=1e3;function p(e){return e.length>l?"unknown":s.test(e)?"android":o.test(e)?"linux":n.test(e)?"ios":a.test(e)?"mac":d.test(e)?"windows":"unknown"}function c(e){return!(e.length>l)&&n.test(e)}function u(e){return s.test(e)}function v(e){return c(e)||u(e)}function g(e){return r.test(e)}},57460:(e,t,i)=>{i.d(t,{K6:()=>_,Kk:()=>c,Mh:()=>l,Of:()=>r,QV:()=>m,Sq:()=>a,Vk:()=>u,XH:()=>h,Xs:()=>y,ZF:()=>g,Zo:()=>s,gW:()=>p,i:()=>d,pS:()=>v,zh:()=>o});var n=i(61628);function s(e){let t=0;return e&&e.forEach((e=>{var i,n;t+=null!==(n=null===(i=null==e?void 0:e.stats)||void 0===i?void 0:i.playCount)&&void 0!==n?n:0})),t}function o(e,t){return a(e)}function a(e){const t=["in","on","with","by","for","at","about","under","of","to","into","from","within","throughout","inside","outside","without","beside","behind","around","over","among","and","or"];return r(e).replace(/-/g," ").toLocaleLowerCase().split(" ").map((e=>"tiktok"===e?"TikTok":t.indexOf(e)>=0?e:e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}function r(e){return e?e.replace(/\x20/g,"-").toLocaleLowerCase():""}function d(e){return e?e.replace(/-/g," ").toLocaleLowerCase():""}function l(e){switch(!0){case e<727:return 4;case e>=727&&e<927:return 6;case e>=927&&e<1295:return 8;case e>=1295&&e<1495:return 10;case e>=1495&&e<1695:return 12;case e>=1695&&e<1895:return 14;default:return 16}}function p(e){var t;return e&&e.length<=0?"":null!==(t=null==e?void 0:e.slice(0,6).map((e=>a(e))).join(", "))&&void 0!==t?t:""}function c(e){return e.length<=0?[]:e.map((e=>{const{pageType:t,keyword:i}=e;switch(t){case 1:return{keyword:i,linkPath:`/channel/${i}`};case 2:return{keyword:i,linkPath:`/find/${i}`};case 0:return{keyword:i,linkPath:`/discover/${i}`};default:return{keyword:i,linkPath:""}}}))}function u(e,t){if(!e)return"";switch(t){case 2:return`/tag/${e}`;case 1:return`/channel/${e}`;case 3:return`/topic/${e}`;default:return""}}const v=e=>""===e?e:e.replace(new RegExp("[\\ufff0-\\uffff]","g"),"").replace(/-/g," "),g=e=>`${(0,n.ek)(e.pageType)}/${e.uniqueWord}`,m=e=>{var t,i;const n=e.content;return`/${null!==(i=null===(t=e.extra)||void 0===t?void 0:t.page_type)&&void 0!==i?i:"discover"}/${n}`},_=e=>e+Date.now().toString(),h=()=>{const e=new Date,t=e.getDay(),i=new Date(e),n=0===t?6:t-1;i.setDate(e.getDate()-n);const s=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;return{today:s(e),monday:s(i),ISOMonday:i.toISOString()}},y=(e,t)=>e.length?e.reduce(((e,{datePublished:t})=>new Date(t)>new Date(e)?t:e),e[0].datePublished):t},76324:(e,t,i)=>{function n(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function s(e,t){return parseInt(e,10)<=parseInt(t,10)}i.d(t,{a:()=>n,i:()=>s})},39232:(e,t,i)=>{i.d(t,{D:()=>a,x:()=>o});const n=new Map,s="WEBAPP_APP_CONTEXT",o=()=>{const e=n.get(s);return e||console.error("Consume appContext before init"),e},a=e=>{n.get(s)&&console.warn("AppContext will be overwritten"),n.set(s,e)}},48420:(e,t,i)=>{i.d(t,{V:()=>o});const n={kind:"m",captcha:"",imApi:"https://im-api-va.tiktok.com",imFrontier:"wss://im-ws-va.tiktok.com/ws/v2",mTApi:"https://m.tiktok.com",rootApi:"https://www.tiktok.com",secSDK:"",slardar:"mon.tiktokv.com",starling:"https://starling-va.tiktokv.com",tea:"https://mcs-va.tiktokv.com",teaChannel:"va",teaChannelType:"tcpy",libraWebSDK:"https://libraweb-va.tiktok.com",webcastApi:"https://webcast.tiktok.com",webcastRootApi:"https://webcast.tiktok.com",tcc:"https://sf-tcc-config.tiktokcdn.com/obj/tcc-config-web-maliva/",locationApi:"https://location-va.tiktokv.com"};let s=null;const o=()=>{var e,t;if(s)return s;try{const i=JSON.parse(null!==(t=null===(e=document.querySelector("#api-domains"))||void 0===e?void 0:e.innerHTML)&&void 0!==t?t:"");return i?(s=i,i):n}catch(e){return n}}},44636:(e,t,i)=>{i.d(t,{c:()=>o});const n={vregion:"Singapore-Central",vgeo:"VGeo-ROW"};let s=null;const o=()=>{var e,t;if(s)return s;try{const i=JSON.parse(null!==(t=null===(e=document.querySelector("#service-region"))||void 0===e?void 0:e.innerHTML)&&void 0!==t?t:"");return i?(s=i,i):n}catch(e){return n}}}}]);