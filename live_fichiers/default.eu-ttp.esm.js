!function(e,t){var n,i,o,r,a,s,c,u,l,f,h,d,p,g,v,m,_=["entityKeys"],y=["entityKeys","wid"];function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=x(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},A.apply(this,arguments)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */D=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof f?t:f,r=Object.create(o.prototype),a=new w(i||[]);return r._invoke=function(e,t,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return A()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=u(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),r}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function f(){}function h(){}function d(){}var p={};s(p,o,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(S([])));v&&v!==t&&n.call(v,o)&&(p=v);var m=d.prototype=f.prototype=Object.create(p);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function i(o,r,a,s){var c=u(e[o],e,r);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==$(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function r(){return new t((function(t,o){i(e,n,t,o)}))}return o=o?o.then(r,r):r()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,l;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=d,s(m,"constructor",d),s(d,"constructor",h),h.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(y.prototype),s(y.prototype,r,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new y(c(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=S,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var s=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function R(e,t,n,i,o,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(e){R(r,i,o,a,s,"next",e)}function s(e){R(r,i,o,a,s,"throw",e)}a(void 0)}))}}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}function I(e){var t=U();return function(){var n,i=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return M(this,n)}}function M(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){var t="function"==typeof Map?new Map:void 0;return P=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return N(e,arguments,j(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),G(i,e)},P(e)}function N(e,t,n){return N=U()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&G(o,n.prototype),o},N.apply(null,arguments)}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function V(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function q(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function W(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;"undefined"==typeof Reflect||$(Reflect);for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}void 0===Element.prototype.getAttributeNames&&(Element.prototype.getAttributeNames=function(){for(var e=this.attributes,t=e.length,n=new Array(t),i=0;i<t;i++)n[i]=e[i].name;return n});var J,X,Y=window,Z=Y.ShadowRoot&&(void 0===Y.ShadyCSS||Y.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Q=Symbol(),ee=new WeakMap,te=function(){function e(t,n,i){if(F(this,e),this._$cssResult$=!0,i!==Q)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}return q(e,[{key:"styleSheet",get:function(){var e=this.o,t=this.t;if(Z&&void 0===e){var n=void 0!==t&&1===t.length;n&&(e=ee.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&ee.set(t,e))}return e}},{key:"toString",value:function(){return this.cssText}}]),e}(),ne=function(e){return new te("string"==typeof e?e:e+"",void 0,Q)},ie=Z?function(e){return e}:function(e){return e instanceof CSSStyleSheet?function(e){var t,n="",i=L(e.cssRules);try{for(i.s();!(t=i.n()).done;){n+=t.value.cssText}}catch(e){i.e(e)}finally{i.f()}return ne(n)}(e):e},oe=window,re=oe.trustedTypes,ae=re?re.emptyScript:"",se=oe.reactiveElementPolyfillSupport,ce={toAttribute:function(e,t){switch(t){case Boolean:e=e?ae:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},ue=function(e,t){return t!==e&&(t==t||e==e)},le={attribute:!0,type:String,converter:ce,reflect:!1,hasChanged:ue},fe=function(e){z(i,e);var t,n=I(i);function i(){var e;return F(this,i),(e=n.call(this))._$Ei=new Map,e.isUpdatePending=!1,e.hasUpdated=!1,e._$El=null,e.u(),e}return q(i,[{key:"u",value:function(){var e,t=this;this._$E_=new Promise((function(e){return t.enableUpdating=e})),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((function(e){return e(t)}))}},{key:"addController",value:function(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}},{key:"_$Eg",value:function(){var e=this;this.constructor.elementProperties.forEach((function(t,n){e.hasOwnProperty(n)&&(e._$Ei.set(n,e[n]),delete e[n])}))}},{key:"createRenderRoot",value:function(){var e,t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return function(e,t){Z?e.adoptedStyleSheets=t.map((function(e){return e instanceof CSSStyleSheet?e:e.styleSheet})):t.forEach((function(t){var n=document.createElement("style"),i=Y.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=t.cssText,e.appendChild(n)}))}(t,this.constructor.elementStyles),t}},{key:"connectedCallback",value:function(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}},{key:"attributeChangedCallback",value:function(e,t,n){this._$AK(e,n)}},{key:"_$EO",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:le,o=this.constructor._$Ep(e,i);if(void 0!==o&&!0===i.reflect){var r=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:ce).toAttribute(t,i.type);this._$El=e,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$El=null}}},{key:"_$AK",value:function(e,t){var n,i=this.constructor,o=i._$Ev.get(e);if(void 0!==o&&this._$El!==o){var r=i.getPropertyOptions(o),a="function"==typeof r.converter?{fromAttribute:r.converter}:void 0!==(null===(n=r.converter)||void 0===n?void 0:n.fromAttribute)?r.converter:ce;this._$El=o,this[o]=a.fromAttribute(t,r.type),this._$El=null}}},{key:"requestUpdate",value:function(e,t,n){var i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||ue)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}},{key:"_$Ej",value:(t=O(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isUpdatePending=!0,e.prev=1,e.next=4,this._$E_;case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Promise.reject(e.t0);case 9:if(t=this.scheduleUpdate(),e.t1=null!=t,!e.t1){e.next=14;break}return e.next=14,t;case 14:return e.abrupt("return",!this.isUpdatePending);case 15:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return t.apply(this,arguments)})},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){var e,t=this;if(this.isUpdatePending){this.hasUpdated,this._$Ei&&(this._$Ei.forEach((function(e,n){return t[n]=e})),this._$Ei=void 0);var n=!1,i=this._$AL;try{(n=this.shouldUpdate(i))?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw n=!1,this._$Ek(),e}n&&this._$AE(i)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$Ek",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$E_}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;void 0!==this._$EC&&(this._$EC.forEach((function(e,n){return t._$EO(n,t[n],e)})),this._$EC=void 0),this._$Ek()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"addInitializer",value:function(e){var t;null!==(t=this.h)&&void 0!==t||(this.h=[]),this.h.push(e)}},{key:"observedAttributes",get:function(){var e=this;this.finalize();var t=[];return this.elementProperties.forEach((function(n,i){var o=e._$Ep(i,n);void 0!==o&&(e._$Ev.set(o,i),t.push(o))})),t}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var n="symbol"==$(e)?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}},{key:"getPropertyDescriptor",value:function(e,t,n){return{get:function(){return this[t]},set:function(i){var o=this[e];this[t]=i,this.requestUpdate(e,o,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this.elementProperties.get(e)||le}},{key:"finalize",value:function(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;var e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){var t,n=this.properties,i=L([].concat(T(Object.getOwnPropertyNames(n)),T(Object.getOwnPropertySymbols(n))));try{for(i.s();!(t=i.n()).done;){var o=t.value;this.createProperty(o,n[o])}}catch(e){i.e(e)}finally{i.f()}}return this.elementStyles=this.finalizeStyles(this.styles),!0}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var n,i=L(new Set(e.flat(1/0).reverse()));try{for(i.s();!(n=i.n()).done;){var o=n.value;t.unshift(ie(o))}}catch(e){i.e(e)}finally{i.f()}}else void 0!==e&&t.push(ie(e));return t}},{key:"_$Ep",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}}]),i}(P(HTMLElement));fe.finalized=!0,fe.elementProperties=new Map,fe.elementStyles=[],fe.shadowRootOptions={mode:"open"},null==se||se({ReactiveElement:fe}),(null!==(J=oe.reactiveElementVersions)&&void 0!==J?J:oe.reactiveElementVersions=[]).push("1.4.1");var he=window,de=he.trustedTypes,pe=de?de.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,ge="lit$".concat((Math.random()+"").slice(9),"$"),ve="?"+ge,me="<".concat(ve,">"),_e=document,ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _e.createComment(e)},be=function(e){return null===e||"object"!=$(e)&&"function"!=typeof e},Ee=Array.isArray,ke=function(e){return Ee(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator])},we=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Se=/-->/g,Ae=/>/g,xe=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),Ce=/'/g,Te=/"/g,De=/^(?:script|style|textarea|title)$/i,Re=function(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return{_$litType$:e,strings:t,values:i}}}(1),Oe=Symbol.for("lit-noChange"),ze=Symbol.for("lit-nothing"),Ie=new WeakMap,Me=_e.createTreeWalker(_e,129,null,!1),Be=function(){function e(t,n){var i,o=t.strings,r=t._$litType$;F(this,e),this.parts=[];var a=0,s=0,c=o.length-1,u=this.parts,l=function(e,t){for(var n,i=e.length-1,o=[],r=2===t?"<svg>":"",a=we,s=0;s<i;s++){for(var c=e[s],u=void 0,l=void 0,f=-1,h=0;h<c.length&&(a.lastIndex=h,null!==(l=a.exec(c)));)h=a.lastIndex,a===we?"!--"===l[1]?a=Se:void 0!==l[1]?a=Ae:void 0!==l[2]?(De.test(l[2])&&(n=RegExp("</"+l[2],"g")),a=xe):void 0!==l[3]&&(a=xe):a===xe?">"===l[0]?(a=null!=n?n:we,f=-1):void 0===l[1]?f=-2:(f=a.lastIndex-l[2].length,u=l[1],a=void 0===l[3]?xe:'"'===l[3]?Te:Ce):a===Te||a===Ce?a=xe:a===Se||a===Ae?a=we:(a=xe,n=void 0);var d=a===xe&&e[s+1].startsWith("/>")?" ":"";r+=a===we?c+me:f>=0?(o.push(u),c.slice(0,f)+"$lit$"+c.slice(f)+ge+d):c+ge+(-2===f?(o.push(void 0),s):d)}var p=r+(e[i]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==pe?pe.createHTML(p):p,o]}(o,r),f=C(l,2),h=f[0],d=f[1];if(this.el=e.createElement(h,n),Me.currentNode=this.el.content,2===r){var p=this.el.content,g=p.firstChild;g.remove(),p.append.apply(p,T(g.childNodes))}for(;null!==(i=Me.nextNode())&&u.length<c;){if(1===i.nodeType){if(i.hasAttributes()){var v,m=[],_=L(i.getAttributeNames());try{for(_.s();!(v=_.n()).done;){var y=v.value;if(y.endsWith("$lit$")||y.startsWith(ge)){var b=d[s++];if(m.push(y),void 0!==b){var E=i.getAttribute(b.toLowerCase()+"$lit$").split(ge),k=/([.?@])?(.*)/.exec(b);u.push({type:1,index:a,name:k[2],strings:E,ctor:"."===k[1]?Ve:"?"===k[1]?Fe:"@"===k[1]?He:Le})}else u.push({type:6,index:a})}}}catch(e){_.e(e)}finally{_.f()}for(var w=0,S=m;w<S.length;w++){var A=S[w];i.removeAttribute(A)}}if(De.test(i.tagName)){var x=i.textContent.split(ge),D=x.length-1;if(D>0){i.textContent=de?de.emptyScript:"";for(var R=0;R<D;R++)i.append(x[R],ye()),Me.nextNode(),u.push({type:2,index:++a});i.append(x[D],ye())}}}else if(8===i.nodeType)if(i.data===ve)u.push({type:2,index:a});else for(var O=-1;-1!==(O=i.data.indexOf(ge,O+1));)u.push({type:7,index:a}),O+=ge.length-1;a++}}return q(e,null,[{key:"createElement",value:function(e,t){var n=_e.createElement("template");return n.innerHTML=e,n}}]),e}();function Pe(e,t){var n,i,o,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3?arguments[3]:void 0;if(t===Oe)return t;var c=void 0!==s?null===(n=a._$Cl)||void 0===n?void 0:n[s]:a._$Cu,u=be(t)?void 0:t._$litDirective$;return(null==c?void 0:c.constructor)!==u&&(null===(i=null==c?void 0:c._$AO)||void 0===i||i.call(c,!1),void 0===u?c=void 0:(c=new u(e))._$AT(e,a,s),void 0!==s?(null!==(o=(r=a)._$Cl)&&void 0!==o?o:r._$Cl=[])[s]=c:a._$Cu=c),void 0!==c&&(t=Pe(e,c._$AS(e,t.values),c,s)),t}var Ne,Ue,Ge=function(){function e(t,n){F(this,e),this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}return q(e,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"p",value:function(e){var t,n=this._$AD,i=n.el.content,o=n.parts,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:_e).importNode(i,!0);Me.currentNode=r;for(var a=Me.nextNode(),s=0,c=0,u=o[0];void 0!==u;){if(s===u.index){var l=void 0;2===u.type?l=new je(a,a.nextSibling,this,e):1===u.type?l=new u.ctor(a,u.name,u.strings,this,e):6===u.type&&(l=new qe(a,this,e)),this.v.push(l),u=o[++c]}s!==(null==u?void 0:u.index)&&(a=Me.nextNode(),s++)}return r}},{key:"m",value:function(e){var t,n=0,i=L(this.v);try{for(i.s();!(t=i.n()).done;){var o=t.value;void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,n),n+=o.strings.length-2):o._$AI(e[n])),n++}}catch(e){i.e(e)}finally{i.f()}}}]),e}(),je=function(){function e(t,n,i,o){var r;F(this,e),this.type=2,this._$AH=ze,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=o,this._$C_=null===(r=null==o?void 0:o.isConnected)||void 0===r||r}return q(e,[{key:"_$AU",get:function(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$C_}},{key:"parentNode",get:function(){var e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;e=Pe(this,e,t),be(e)?e===ze||null==e||""===e?(this._$AH!==ze&&this._$AR(),this._$AH=ze):e!==this._$AH&&e!==Oe&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.k(e):ke(e)?this.O(e):this.$(e)}},{key:"S",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(e,t)}},{key:"k",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}},{key:"$",value:function(e){this._$AH!==ze&&be(this._$AH)?this._$AA.nextSibling.data=e:this.k(_e.createTextNode(e)),this._$AH=e}},{key:"T",value:function(e){var t,n=e.values,i=e._$litType$,o="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=Be.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===o)this._$AH.m(n);else{var r=new Ge(o,this),a=r.p(this.options);r.m(n),this.k(a),this._$AH=r}}},{key:"_$AC",value:function(e){var t=Ie.get(e.strings);return void 0===t&&Ie.set(e.strings,t=new Be(e)),t}},{key:"O",value:function(t){Ee(this._$AH)||(this._$AH=[],this._$AR());var n,i,o=this._$AH,r=0,a=L(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;r===o.length?o.push(n=new e(this.S(ye()),this.S(ye()),this,this.options)):n=o[r],n._$AI(s),r++}}catch(e){a.e(e)}finally{a.f()}r<o.length&&(this._$AR(n&&n._$AB.nextSibling,r),o.length=r)}},{key:"_$AR",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,n=arguments.length>1?arguments[1]:void 0;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,n);t&&t!==this._$AB;){var i=t.nextSibling;t.remove(),t=i}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$C_=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}]),e}(),Le=function(){function e(t,n,i,o,r){F(this,e),this.type=1,this._$AH=ze,this._$AN=void 0,this.element=t,this.name=n,this._$AM=o,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ze}return q(e,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=this.strings,r=!1;if(void 0===o)e=Pe(this,e,t,0),(r=!be(e)||e!==this._$AH&&e!==Oe)&&(this._$AH=e);else{var a,s,c=e;for(e=o[0],a=0;a<o.length-1;a++)(s=Pe(this,c[n+a],t,a))===Oe&&(s=this._$AH[a]),r||(r=!be(s)||s!==this._$AH[a]),s===ze?e=ze:e!==ze&&(e+=(null!=s?s:"")+o[a+1]),this._$AH[a]=s}r&&!i&&this.P(e)}},{key:"P",value:function(e){e===ze?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}]),e}(),Ve=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments)).type=3,e}return q(n,[{key:"P",value:function(e){this.element[this.name]=e===ze?void 0:e}}]),n}(Le),Ke=de?de.emptyScript:"",Fe=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments)).type=4,e}return q(n,[{key:"P",value:function(e){e&&e!==ze?this.element.setAttribute(this.name,Ke):this.element.removeAttribute(this.name)}}]),n}(Le),He=function(e){z(n,e);var t=I(n);function n(e,i,o,r,a){var s;return F(this,n),(s=t.call(this,e,i,o,r,a)).type=5,s}return q(n,[{key:"_$AI",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if((e=null!==(t=Pe(this,e,n,0))&&void 0!==t?t:ze)!==Oe){var i=this._$AH,o=e===ze&&i!==ze||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==ze&&(i===ze||o);o&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}}},{key:"handleEvent",value:function(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}]),n}(Le),qe=function(){function e(t,n,i){F(this,e),this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}return q(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){Pe(this,e)}}]),e}(),$e=he.litHtmlPolyfillSupport;null==$e||$e(Be,je),(null!==(X=he.litHtmlVersions)&&void 0!==X?X:he.litHtmlVersions=[]).push("2.3.1");var We=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments)).renderOptions={host:B(e)},e._$Do=void 0,e}return q(n,[{key:"createRenderRoot",value:function(){var e,t,i=A(j(n.prototype),"createRenderRoot",this).call(this);return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}},{key:"update",value:function(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),A(j(n.prototype),"update",this).call(this,e),this._$Do=function(e,t,n){var i,o,r=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t,a=r._$litPart$;if(void 0===a){var s=null!==(o=null==n?void 0:n.renderBefore)&&void 0!==o?o:null;r._$litPart$=a=new je(t.insertBefore(ye(),s),s,void 0,null!=n?n:{})}return a._$AI(e),a}(t,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;A(j(n.prototype),"connectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;A(j(n.prototype),"disconnectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return Oe}}]),n}(fe);We.finalized=!0,We._$litElement$=!0,null===(Ne=globalThis.litElementHydrateSupport)||void 0===Ne||Ne.call(globalThis,{LitElement:We});var Je=globalThis.litElementPolyfillSupport;null==Je||Je({LitElement:We}),(null!==(Ue=globalThis.litElementVersions)&&void 0!==Ue?Ue:globalThis.litElementVersions=[]).push("3.2.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Xe,Ye=1,Ze=2,Qe=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return{_$litDirective$:e,values:n}}},et=function(){function e(t){F(this,e)}return q(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AT",value:function(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}},{key:"_$AS",value:function(e,t){return this.update(e,t)}},{key:"update",value:function(e,t){return this.render.apply(this,T(t))}}]),e}(),tt=Qe(function(e){z(n,e);var t=I(n);function n(e){var i,o;if(F(this,n),i=t.call(this,e),e.type!==Ye||"class"!==e.name||(null===(o=e.strings)||void 0===o?void 0:o.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.");return M(i)}return q(n,[{key:"render",value:function(e){return" "+Object.keys(e).filter((function(t){return e[t]})).join(" ")+" "}},{key:"update",value:function(e,t){var n,i,o=this,r=C(t,1)[0];if(void 0===this.nt){for(var a in this.nt=new Set,void 0!==e.strings&&(this.st=new Set(e.strings.join(" ").split(/\s/).filter((function(e){return""!==e})))),r)r[a]&&!(null===(n=this.st)||void 0===n?void 0:n.has(a))&&this.nt.add(a);return this.render(r)}var s=e.element.classList;for(var c in this.nt.forEach((function(e){e in r||(s.remove(e),o.nt.delete(e))})),r){var u=!!r[c];u===this.nt.has(c)||(null===(i=this.st)||void 0===i?void 0:i.has(c))||(u?(s.add(c),this.nt.add(c)):(s.remove(c),this.nt.delete(c)))}return Oe}}]),n}(et)),nt=function(e){return function(t){return"function"==typeof t?function(e,t){return customElements.define(e,t),t}(e,t):function(e,t){return{kind:t.kind,elements:t.elements,finisher:function(t){customElements.define(e,t)}}}(e,t)}};function it(e){return function(t,n){return void 0!==n?function(e,t,n){t.constructor.createProperty(n,e)}(e,t,n):function(e,t){return"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?w(w({},t),{},{finisher:function(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer:function(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher:function(n){n.createProperty(t.key,e)}}}(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ot(e){return it(w(w({},e),{},{state:!0}))}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */null===(Xe=window.HTMLSlotElement)||void 0===Xe||Xe.prototype.assignedElements;var rt=["ar"],at="cookie-consent",st="https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/tiktok_fonts/",ct='<svg width="1" height="24" viewBox="0 0 1 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<line x1="0" y1="24" x2="0" stroke="#161823" stroke-opacity="0.12" stroke-width="1"/>\n</svg>',ut="LOCAL_IS_EFFECTIVE",lt={channel:"sg",channel_type:"tcpy"};/*! js-cookie v3.0.1 | MIT */function ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var ht=function e(t,n){function i(e,i,o){if("undefined"!=typeof document){"number"==typeof(o=ft({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in o)o[a]&&(r+="; "+a,!0!==o[a]&&(r+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+r}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},o=0;o<n.length;o++){var r=n[o].split("="),a=r.slice(1).join("=");try{var s=decodeURIComponent(r[0]);if(i[s]=t.read(a,s),e===s)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",ft({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,ft({},this.attributes,t))},withConverter:function(t){return e(ft({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),dt=function(){return(dt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function pt(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function gt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pt(arguments[t]));return e}var vt,mt,_t,yt=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function i(o){t(o),n.off(e,i)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&gt(this._hooks[e]).forEach((function(e){try{e(t)}catch(e){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),bt=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},Et=function(e){return Array.isArray(e)},kt=(vt=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return vt+=1}),wt=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof n){var i,o=[];n=n<=25?n:n%25;var r=String.fromCharCode(n+97);i=e.split(r);for(var a=0;a<i.length;a++){var s=parseInt(i[a],n);s=1*s^64;var c=String.fromCharCode(s);o.push(c)}return o.join("")}}(e,0,25)},St=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},At=function(){var e=0;return["hidden","msHidden","webkitHidden"].forEach((function(t){void 0!==document[t]&&(e=1)})),e},xt=function(e){var t=document.createElement("a");return t.href=e,t},Ct=function(e){var t={};try{var n=xt(e).search;(n=n.slice(1)).split("&").forEach((function(e){var n,i,o=e.split("=");o.length&&(n=o[0],i=o[1]);try{t[n]=decodeURIComponent(void 0===i?"":i)}catch(e){t[n]=i}}))}catch(e){}return t},Tt=function(e,t){return function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function o(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in r)r[c]&&(s+="; "+c,!0!==r[c]&&(s+="="+r[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var s=r[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(i.read||i)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=r,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){r(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},e.exports=n()}(t={exports:{}}),t.exports}(),Dt=function(e,t){try{return Tt.get(e)}catch(e){return""}},Rt=function(e,t,n,i){try{var o=i||document.domain,r=+new Date+(n||6048e5);Tt.set(e,t,{expires:new Date(r),path:"/",domain:o})}catch(e){}},Ot=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return Dt(e)},e.prototype.setCookie=function(e,t,n,i){Rt(e,t,n,i)},e}(),zt={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return Dt(e)},setCookie:function(e,t,n,i){Rt(e,t,n,i)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},It={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return Dt(e)},setCookie:function(e,t,n,i){Rt(e,t,n,i)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},Mt=function(){function e(e,t){this._storage=t&&"session"===t?It:!e&&zt.isSupportLS?zt:new Ot}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,i){this._storage.setCookie(e,t,n,i)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),Bt=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,i=n?xt(n).hostname:"",o=Ct(window.location.href),r=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=function(e,t,n,i){var o=new Mt(!1,"session"),r=e?"_$utm_from_url_"+e:"_$utm_from_url",a={},s=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],c={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var u=!1;for(var l in c)c[l]&&(-1!==s.indexOf(l)?(a.hasOwnProperty("tracer_data")||(a.tracer_data={}),a.tracer_data[l]=c[l]):a[l]=c[l],u=!0);u&&o.setItem(r,"1"),o.getItem(r)&&(a.hasOwnProperty("tracer_data")||(a.tracer_data={}),a.tracer_data.$utm_from_url=1)}catch(e){return c}return a}(this.appid,o,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:r,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:i,utm:this.utm,latest_data:this.last(n,i)}},e.prototype.last=function(e,t){var n="",i="",o="",r=location.hostname,a=!1;if(e&&t&&r!==t){n=e,i=t,a=!0;var s=Ct(e);s.keyword&&(o=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:i,$latest_search_keyword:o,isLast:a}},e.prototype.browser=function(){var e,t,n="",i=""+parseFloat(this.appVersion),o=this.userAgent;return-1!==o.indexOf("Edge")||-1!==o.indexOf("Edg")?(n="Microsoft Edge",-1!==o.indexOf("Edge")?(e=o.indexOf("Edge"),i=o.substring(e+5)):(e=o.indexOf("Edg"),i=o.substring(e+4))):-1!==(e=o.indexOf("MSIE"))?(n="Microsoft Internet Explorer",i=o.substring(e+5)):-1!==(e=o.indexOf("Lark"))?(n="Lark",i=o.substring(e+5,e+11)):-1!==o.indexOf("Chrome")?-1!==(e=o.indexOf("TTWebView"))?(n="TTWebView",i=o.substring(e+10,e+23)):(-1!==(e=o.indexOf("Chrome"))||-1!==(e=o.indexOf("Chrome")))&&(n="Chrome",i=o.substring(e+7)):-1!==o.indexOf("Safari")?-1!==(e=o.indexOf("Safari"))&&(n="Safari",i=o.substring(e+7),-1!==(e=o.indexOf("Version"))&&(i=o.substring(e+8))):-1!==(e=o.indexOf("Firefox"))&&(n="Firefox",i=o.substring(e+8)),-1!==(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(" "))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(")"))&&(i=i.substring(0,t)),{browser:n,browser_version:i}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"ChromeOS",r:/CrOS/},{s:"Linux",r:/(Linux|X11)/},{s:"Sun OS",r:/SunOS/}],i=0;i<n.length;i++){var o=n[i];if(o.r.test(this.userAgent)){"Mac OS X"===(e=o.s)&&this.isNewIpad()&&(e="iOS");break}}var r,a,s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,r=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,r)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios";break;case"chromeOS":var u=this.userAgent.indexOf("x86_64");t=this.userAgent.substring(u+7,u+16)}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),i=n.indexOf(";");t=n.slice(0,i)}}catch(e){return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),Pt={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},Nt={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},Ut={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"},Gt={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"};!function(e){e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.DestoryInstance="destory-instance",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report",e.VisualCollectReady="visual-collect-ready",e.VisualApiReady="visual-api-ready",e.VisualApiUpdate="visual-api-update"}(mt||(mt={})),function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(_t||(_t={}));var jt,Lt=mt,Vt=void 0,Kt=(new Date).getTimezoneOffset(),Ft=parseInt(""+-Kt/60,10),Ht=60*Kt,qt=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new Bt(t.app_id,t.cookie_domain||"",t.cookie_expire||6048e5).init(),i="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new Mt(!1,"session"),this.localStorage=new Mt(!1,"local"),this.channelUrl="tcpy"===t.channel_type||"ttp"===t.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"},t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var o=this.localStorage.getItem(i);o&&1==o?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:Vt,user_type:Vt,user_id:Vt,user_is_auth:Vt,user_is_login:Vt,device_id:Vt,web_id:Vt,ip_addr_id:Vt,user_unique_id_type:Vt},header:{app_id:Vt,app_name:Vt,app_install_id:Vt,install_id:Vt,app_package:Vt,app_channel:Vt,app_version:Vt,ab_version:Vt,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:Vt,traffic_type:Vt,client_ip:Vt,device_brand:Vt,os_api:Vt,access:Vt,language:n.language,region:Vt,app_language:Vt,app_region:Vt,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:Vt,rnd:Vt,platform:n.platform,sdk_version:"5.3.0_oversea",sdk_lib:"js",province:Vt,city:Vt,timezone:Ft,tz_offset:Ht,tz_name:Vt,sim_region:Vt,carrier:Vt,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{}}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var n=e||this.initConfig.channel,i=this.initConfig&&this.initConfig.channel_type?"tcpy"===this.initConfig.channel_type?Ut[n]:Gt[n]:Pt[n];i||(console.warn("current channel: "+n+" is not exist, use va instead, please check!!!!"),i=Pt.sg),this.domain=wt(i)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.initABData=function(){var e,t="__tea_sdk_ab_version_"+this.initConfig.app_id;e=this.localStorage.getItem(t),this.setAbCache(e)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbUuidCache=function(e,t){var n=t||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+n]||(this.ab_uuid_cache[""+n]=[]),-1===this.ab_uuid_cache[""+n].indexOf(e)&&this.ab_uuid_cache[""+n].push(e)},e.prototype.getAbUuidCache=function(e){return this.ab_uuid_cache[""+e]},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version=5.3.0_oversea&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.setAppid=function(e){this.envInfo.header.app_id=e},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){if(void 0!==e[n]&&null!==e[n]||t.delete(n),"traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=dt(dt({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===n)t.evtParams=dt(dt({},t.evtParams||{}),{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var i="",o="";if(n.indexOf(".")>-1){var r=n.split(".");i=r[0],o=r[1]}i?"user"===i||"header"===i?t.envInfo[i][o]=e[n]:t.envInfo.header.custom[o]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){console.log("get config stringify error "),this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e){console.log("setStore error"),this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),console.log("delete error")}},e}(),$t=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[Tea instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("%c %s","color: #4D1B00; background-color: #FF7D00;","[Tea instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("%c %s","color: #FFF; background-color: #F53F3F;","[Tea instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),Wt=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach((function(e){-1!==t.indexOf(e)&&(n=!0)})),n},e}(),Jt=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e){return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)})):n(!1)}catch(e){console.log("AppLogBridge, error:"+JSON.stringify(e.stack)),n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch(e){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(e){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),Xt=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.cacheStorgae=new Mt(!0),this.localStorage=new Mt(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=t.report_url||this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.collect.on(Lt.Ready,(function(){n.reportAll(!1)})),this.collect.on(Lt.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(Lt.Event,(function(e){n.event(e)})),this.collect.on(Lt.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(Lt.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),St((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;if(!this.collect.destroy&&!this.collect.sdkStop)try{var n=gt(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var i=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),i)}}catch(e){this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e){if(!this.collect.destroy&&!this.collect.sdkStop){var t=gt(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))}},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var i;i=e.slice(n,n+this.eventLimit);var o=this.split(this.merge(i));this.send(o,t)}else o=this.split(this.merge(e)),this.send(o,t)},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this,i=this.configManager.get(),o=i.header,r=i.user;o.custom=JSON.stringify(o.custom),o.referrer=this.handleRefer();var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=[];try{var u=e.filter((function(e){try{Object.keys(a).length&&!t&&(e.params=dt(dt({},a),e.params)),s&&(e.params.$user_unique_id_type=s);var i=n.configManager.getAbCache(),o=r[n.config.ab_user_mode]||r.user_unique_id,c=n.configManager.getAbUuidCache(o);if(i&&i.uuid&&i.uuid===o){var u=n.configManager.getAbVersion();if(n.config.enable_ab_uuid){if(c&&c.length){var l=c.join(",");u&&u.includes(l)&&(e.ab_sdk_version=u)}}else u&&(e.ab_sdk_version=u)}return e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(t){return console.warn("filter merge event: "+(e&&e.event)+" error, pls check",t&&t.message),n.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Merge Event Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),!1}})),l=JSON.parse(JSON.stringify({events:u,user:r,header:o}));l.local_time=Math.floor(Date.now()/1e3),l.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,l.verbose=1,c.push(l)}catch(e){console.warn("event merge error, pls check",e&&e.message)}return c},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var i=JSON.parse(JSON.stringify(e));n.config.filter&&((i=n.config.filter(i))||console.warn("filter must return data !!")),n.collect.eventFilter&&i&&((i=n.collect.eventFilter(i))||console.warn("filterEvent api must return data !!"));var o=i||e,r=JSON.parse(JSON.stringify(o));if(!o.length)return;var a=!0;if(o.forEach((function(e){e.events.length||(a=!1)})),!a)return;n.collect.emit(Lt.SubmitBefore,o),n.collect.emit(Lt.SubmitVerify,o),n.collect.requestManager.useRequest({url:n.reportUrl,data:o,success:function(e,t){e&&0!==e.e?(n.collect.emit(Lt.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_EVENT,info:"Event Report fail",time:Date.now(),data:r,code:e.e,failType:"",status:"fail"})):(n.collect.emit(Lt.SubmitScuess,{eventData:t,res:e}),n.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_EVENT,info:"Event Report Success",time:Date.now(),data:r,code:200,status:"success"}))},fail:function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(Lt.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_EVENT,info:"Event Report Network fail",time:Date.now(),data:r,code:t,failType:"",status:"fail"})},timeout:n.timeout,useBeacon:!n.config.disable_sendbeacon&&t,withCredentials:n.enable_ttwebid}),n.collect.emit(Lt.SubmitAfter,o)}catch(e){console.warn("something error, "+JSON.stringify(e.stack)),n.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Report Event Something Error",level:"error",time:Date.now(),data:e.message})}})))},e}(),Yt=function(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)},Zt=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Mt(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(Lt.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(Lt.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;this.cacheToken=this.storage.getItem(this.tokenKey)||{},this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(Lt.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(Lt.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:Yt(),user_unique_id:this.configManager.get("user_unique_id")||Yt()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=Ct(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch WebID Request",logType:"fetch",level:"info",time:Date.now(),data:n});var i=Yt();this.collect.requestManager.useRequest({url:t,data:n,success:function(t){var n;t&&0===t.e?(n=t.web_id,e.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Success",logType:"fetch",level:"info",time:Date.now(),data:t})):(n=i,e.collect.configManager.set({localWebId:i}),e.collect.emit(Lt.TokenError),e.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Data Error, Use LocalId",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})},fail:function(){e.complete({web_id:e.configManager.get("web_id")||i,user_unique_id:e.configManager.get("user_unique_id")||i}),e.collect.configManager.set({localWebId:i}),e.collect.emit(Lt.TokenError),e.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Network Fail, Use LocalId",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")},timeout:3e5})},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Complete",logType:"info",secType:"USER",level:"info",time:Date.now(),data:{web_id:t,user_unique_id:n},infoType:"sdk"}),this.collect.emit(Lt.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Lt.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),i=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===i)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(Lt.TokenChange,"uuid"),this.collect.emit(Lt.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(Lt.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(Lt.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(Lt.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this;return new Promise((function(t){if("tcpy"!==e.config.channel_type&&"ttp"!==e.config.channel_type){var n={app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")};e.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch GetToken Request",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"}),e.collect.requestManager.useRequest({url:e.configManager.getUrl("tobid"),data:n,success:function(n){n&&0===n.e?(t(n.tobid),e.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Success",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"})):(t(""),e.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Fail",logType:"fetch",level:"error",time:Date.now(),data:n,infoType:"sdk"}))},fail:function(){t(""),e.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Network Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})},time:3e4,withCredentials:e.enable_ttwebid})}else t("")}))},e}(),Qt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},en=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new Mt(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSessionTimeCheck=t.disable_session_check,this.disableSession||(this.setSessionId(),this.collect.on(Lt.SessionReset,(function(e){n.resetSessionId(e)})),this.collect.on(Lt.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:Qt(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:Qt(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.disableSessionTimeCheck||(this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(e){var t={sessionId:e||Qt(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:Qt(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),tn=function(){function e(e,t){this.collector=e,this.config=t,this.requestType=t.request_type,this.supportBeacon=!(!window.navigator||!window.navigator.sendBeacon),this.errorCode={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},this.customHeader=t.custom_request_header||{}}return e.prototype.useFetch=function(e){var t=e.url,n=e.data,i=e.method,o=e.success,r=e.fail,a={"Content-Type":"application/json; charset=utf-8"};if(Object.keys(this.customHeader).length)for(var s in this.customHeader)a[s]=this.customHeader[s];window.fetch?fetch(t,{method:i||"POST",headers:a,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){o&&o(e)})).catch((function(e){r&&r(n,e)})):(this.requestType="xhr",console.log("your brwoser not support fetch, use xhr"),this.useRequest({url:t,data:n,method:i,success:o,fail:r}))},e.prototype.useBeacon=function(e){var t=e.url,n=e.data,i=e.success,o=e.fail;"xhr"!==this.requestType?window.navigator.sendBeacon(t,JSON.stringify(n))?i&&i():o&&o(n,this.errorCode.BEACON_FALSE):this.useXhr(e)},e.prototype.useXhr=function(e){var t=this,n=e.url,i=e.data,o=e.method,r=e.success,a=e.fail,s=e.timeout,c=e.withCredentials,u=e.app_key;try{var l=new XMLHttpRequest,f=o||"POST";if(l.open(f,""+n,!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),u&&l.setRequestHeader("X-MCS-AppKey",""+u),Object.keys(this.customHeader).length)for(var h in this.customHeader)l.setRequestHeader(h,this.customHeader[h]);c&&(l.withCredentials=!0),s&&(l.timeout=s,l.ontimeout=function(){a&&a(i,t.errorCode.TIMEOUT)}),l.onload=function(){if(r){var e=null;if(l.responseText){try{e=JSON.parse(l.responseText)}catch(t){e={}}r(e,i)}}},l.onerror=function(){l.abort(),a&&a(i,t.errorCode.XHR_ON)},l.send(JSON.stringify(i))}catch(e){}},e.prototype.useRequest=function(e){var t=e.useBeacon,n=e.forceXhr;if("xhr"===this.requestType)this.useXhr(e);else{if(t&&this.supportBeacon)return void this.useBeacon(e);if("fetch"===this.requestType&&!n)return void this.useFetch(e);this.useXhr(e)}},e}(),nn=function(){function e(e,t){if(this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,t.enable_debug&&"Microsoft Internet Explorer"!==e.configManager.get("browser")){this.collect=e,this.config=t,this.app_id=t.app_id;var n=e.adapters.storage;this.cacheStorgae=new n(!1),this.loadUrl=t.devtool_url||"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/devtool/debug-web.v2.0.0.js",this.filterEvent=new Set(["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"]),this.load()}}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){console.log("devTool load fail, "+e.message)}},e.prototype.parseUrl=function(){var e={};try{var t=window.location.href.split("?")[1].split("&");t.length&&t.forEach((function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}))}catch(e){}return e},e.prototype.load=function(){try{var e=this.parseUrl();if(e.open_devtool_web&&e.app_id){if(parseInt(e.app_id)!==this.app_id)return}else if(!this.getStorage())return;this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e){console.log("debug fail, "+e.message)}},e.prototype.getStorage=function(){var e=this.cacheStorgae.getItem("__applog_open_devtool_web");return e&&parseInt(e)===this.app_id},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_open_devtool_web",this.app_id)},e.prototype.loadDevTool=function(){this.loadScript(this.loadUrl)},e.prototype.loadBaseInfo=function(){if(this.log=[],this.event=[],this.info=[{title:"BaseInfo",key:"base",type:1,content:[{name:"app_id",desc:"APPID",value:this.config.app_id},{name:"channel",desc:"CHANNEL",value:this.config.channel},{name:"domain",desc:"Domain",value:this.collect.configManager.getDomain()},{name:"sdk_version",desc:"SDK Version",value:"5.3.0_oversea"},{name:"sdk_type",desc:"SDK Import Type",value:"npm"}]},{title:"UserInfo",key:"user",type:2,content:[{name:"uuid",desc:"UserUniqueId",value:this.collect.configManager.get("user").user_unique_id||""},{name:"web_id",desc:"WEB_ID",value:this.collect.configManager.get("user").web_id||""}]},{title:"CommonInfo",type:2,key:"common",content:[{name:"browser",desc:"Browser",value:this.collect.configManager.get("browser")},{name:"browser_version",desc:"Browser Version",value:this.collect.configManager.get("browser_version")},{name:"platform",desc:"Platform",value:this.collect.configManager.get("platform")},{name:"device_model",desc:"Devide Model",value:this.collect.configManager.get("device_model")},{name:"os_name",desc:"Os Name",value:this.collect.configManager.get("os_name")},{name:"os_version",desc:"Os Version",value:this.collect.configManager.get("os_version")},{name:"resolution",desc:"Screen Resolution",value:this.collect.configManager.get("resolution")},{name:"referrer",desc:"Referrer",value:this.collect.configManager.get("referrer")},{name:"custom",desc:"Custom Info",value:JSON.stringify(this.collect.configManager.get("custom"))}]},{title:"Config Info",key:"config",type:3,content:[{name:"autotrack",desc:"AutoTrackEvent",value:!!this.config.autotrack},{name:"stay",desc:"StayDuration",value:!!this.config.enable_stay_duration}]},{title:"A/B Config Info",key:"ab",type:4,content:[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test}]}],this.config.enable_ab_test){var e=this.getInfo("ab"),t=[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test},{name:"vid",desc:"A/B VID",value:this.collect.configManager.getAbVersion()},{name:"ab_domain",desc:"Domain",value:this.config.ab_channel_domain||wt(Nt[this.config.channel])},{name:"all_values",desc:"A/B ALL Values",value:this.collect.configManager.getAbCache()}];e.content=t,this.setInfo("ab",e)}},e.prototype.getInfo=function(e){var t=null;return this.info.forEach((function(n){n.key===e&&(t=n)})),t},e.prototype.setInfo=function(e,t){var n=!1;this.info.forEach((function(i){i.key===e&&(n=!0,i=t)})),n||this.info.push(t)},e.prototype.getSecondInfo=function(e,t){var n=this.getInfo(e),i=null;return n.content.forEach((function(e){e.name===t&&(i=e)})),i},e.prototype.setSecondInfo=function(e,t,n){var i=this.getInfo(e);i.content.forEach((function(e){e.name===t&&(e.value=n)})),this.setInfo(e,i)},e.prototype.loadHook=function(){var e=this;this.collect.on(_t.DEBUGGER_MESSAGE,(function(t){switch(t.type){case _t.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",infoType:t.infoType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.setSecondInfo("ab","vid",e.collect.configManager.getAbVersion()),e.setSecondInfo("ab","all_values",e.collect.configManager.getAbCache())):"USER"===t.secType&&(e.setSecondInfo("user","uuid",e.collect.configManager.get("user").user_unique_id),e.setSecondInfo("user","web_id",e.collect.configManager.get("user").web_id)),void e.updateInfo();case _t.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var i=t.data[0],o=i.events;if(!o.length)return;o.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.focusShow=!0,n.status=t.status,n.type=e.filterEvent.has(n.event)?"sdk":"cus",n.verifyType=t.verifyType?"verify":"no",n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+" msg: "+(t.msg||t.failType)})})),e.updateEvent(i)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,sdk_type:"5.3.0_oversea".includes("tob")?"tob":"inner",appId:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.setSecondInfo("user","sid",t.tobid),e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};window&&window.postMessage(n,this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e="#debugger-applog-web {\n      position: fixed;\n      width: 45px;\n      height: 45px;\n      background-image: url("+wt("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4bz18z1nz1nz1jz1mz1ez4az1nz1lz1e")+");\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 45px;\n    }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.appendChild(document.createTextNode(e)),t.appendChild(n);var i=document.createElement("div");i.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var o=document.createElement("div");o.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(i),document.getElementsByTagName("body")[0].appendChild(o);var r=document.getElementById("debugger-applog-web");r&&r.addEventListener("click",(function(){window&&window.postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),on={autotrack:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},tracer:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},retry:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/retry.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/retry.js"},object:"LogRetry"},visual:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},rn=["ab","autotrack","Stay","store","et","profile","cep","heartbeat","monitor","route","tracer"],an=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new yt,this.remotePlugin=new Map,this.Types=Lt,this.adapters.storage=Mt,this.loadType="full"}return e.usePlugin=function(t,n,i){if(n){for(var o=!1,r=0,a=e.plugins.length;r<a;r++)if(e.plugins[r].name===n){e.plugins[r].plugin=t,e.plugins[r].options=i||{},o=!0;break}o||e.plugins.push({name:n,plugin:t,options:i})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&rn.includes(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n,i,o=this;try{n=JSON.parse(JSON.stringify(t))}catch(e){n=t}if(this.logger=new $t(this.name,n.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(n&&bt(n))if(n.app_id&&"number"==typeof(i=n.app_id)&&!isNaN(i))if(!n.app_key||function(e){return"string"==typeof e}(n.app_key)){var r=["sg","va","in","ie","ie2"];n.channel_domain||-1!==r.indexOf(n.channel)||(this.logger.warn("your channel: "+n.channel+" is not exist. channel must be one of "+r.join(",")+", use sg instead, please check!!!"),n.channel="sg"),this.spider=new Wt,this.spider.checkSpider(n)?this.logger.warn("The current environment may be a spider, can not report!"):(this.appBridge=new Jt(this,n.enable_native),this.requestManager=new tn(this,n),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new qt(this,n),this.debugger=new nn(this,n),this.initConfig=n,this.emit(Lt.Init),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Init",data:n,level:"info",time:Date.now(),infoType:"cus"}),n.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(n.app_id),this.eventManager=new Xt,this.tokenManager=new Zt,this.sessionManager=new en,Promise.all([new Promise((function(e){o.once(Lt.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){o.once(Lt.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var n=t.plugin,i=t.options,r=Object.assign(o.initConfig,i);o.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Load "+t.name+" Plugin",level:"info",time:Date.now(),infoType:"sdk"});var a=new n;return a.apply(o,r),e.push(a),e}),o.pluginInstances)}catch(e){console.warn("load plugin error, "+e.message),o.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Load Plugin Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}o.sdkReady=!0,o.emit(Lt.Ready),o.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Initialization Completed",time:Date.now(),level:"info",secType:"USER",data:o.configManager.get("user"),infoType:"sdk"}),o.logger.info("appid: "+n.app_id+", userInfo:"+JSON.stringify(o.configManager.get("user"))),o.logger.info("appid: "+n.app_id+", sdk is ready, version is 5.3.0_oversea, you can report now !!!"),n.disable_auto_pv&&(o.disableAutoPageView=!0);try{("full"===o.loadType&&n.enable_ab_test||n.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){o.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}o.pageView(),o.on(Lt.TokenChange,(function(e){"webid"===e&&o.pageView(),o.logger.info("appid: "+n.app_id+" token change, new userInfo:"+JSON.stringify(o.configManager.get("user"))),o.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Set UserInfo",time:Date.now(),secType:"USER",level:"info",data:o.configManager.get("user"),infoType:"sdk"})})),o.on(Lt.TokenReset,(function(){o.logger.info("appid: "+n.app_id+" token reset, new userInfo:"+JSON.stringify(o.configManager.get("user"))),o.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Reset UserInfo",time:Date.now(),secType:"USER",level:"info",data:o.configManager.get("user"),infoType:"sdk"})})),o.on(Lt.RouteChange,(function(e){e.init||n.disable_route_report||o.pageView()}))})),this.tokenManager.apply(this,n),this.eventManager.apply(this,n),this.sessionManager.apply(this,n)),this.inited=!0)}else this.logger.warn("app_key param is error, must be string, please check!");else this.logger.warn("app_id param is error, must be number, please check!");else this.logger.warn("init params error,please check")},e.prototype.config=function(e){if(this.inited)if(e&&bt(e)){var t;try{t=JSON.parse(JSON.stringify(t))}catch(n){t=e}if(this.bridgeReport)this.appBridge.setConfig(t);else{t._staging_flag&&1===t._staging_flag&&(this.staging=!0),t.disable_auto_pv&&(this.disableAutoPageView=!0,delete t.disable_auto_pv);var n=dt({},t);if(this.initConfig&&this.initConfig.configPersist){var i=this.configManager.getStore();i&&(n=Object.assign(i,t)),this.configManager.setStore(t)}n.web_id,n.user_unique_id;var o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&(n[i[o]]=e[i[o]])}return n}(n,["web_id","user_unique_id"]);n.hasOwnProperty("web_id")&&this.emit(Lt.ConfigWebId,n.web_id),n.hasOwnProperty("user_unique_id")&&this.emit(Lt.ConfigUuid,n.user_unique_id),this.configManager.set(o),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Config",level:"info",time:Date.now(),data:n,infoType:"cus"})}}else console.warn("config params is error, please check");else console.warn("config must be use after function init")},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(Lt.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(Lt.Start),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Start",level:"info",time:Date.now(),infoType:"cus"}),this.bridgeReport&&(this.pageView(),this.emit(Lt.Ready)))},e.prototype.event=function(e,t){var n=this;try{var i=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&i.push(t)}));else{var o=this.processEvent(e,t);if(!o)return;i.push(o)}this.bridgeReport?i.forEach((function(e){var t=e.event,i=e.params;n.appBridge.onEventV3(t,JSON.stringify(i))})):i.length&&(this.emit(Lt.Event,i),this.emit(Lt.SessionResetTime)),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event",level:"info",time:Date.now(),data:e,infoType:"cus"})}catch(e){this.logger.warn("something error, please check"),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))this.logger.warn("beconEvent not support batch report, please check");else{var n=[],i=this.processEvent(e,t||{});i&&(n.push(i),n.length&&(this.emit(Lt.BeconEvent,n),this.emit(Lt.SessionResetTime)),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Beacon Event",level:"info",time:Date.now(),data:e,infoType:"sdk"}))}},e.prototype.beaconEvent=function(e,t){this.beconEvent(e,t)},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return console.warn("eventName is null please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var i=t;"object"!=$(i)&&(i={}),i.profile?delete i.profile:i.event_index=kt();var o=void 0;return i.local_ms?(o=i.local_ms,delete i.local_ms):o=+new Date,{event:n,params:i,local_time_ms:o,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:n.message,infoType:"sdk"}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=dt(dt({},t),e);this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Report PV",level:"info",time:Date.now(),infoType:"sdk"}),this.event("predefine_pageview",n)}else console.warn("predefinePageView should call after init")},e.prototype.clearEventCache=function(){this.emit(Lt.CleanEvents)},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.getSessionId=function(){return Qt()},e.prototype.setSessionId=function(e){this.emit(Lt.SessionReset,e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(Lt.ResetStay,{url_path:e,title:t,url:n},Lt.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(Lt.SetStay,{url_path:e,title:t,url:n},Lt.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var i=!1,o=function(t){if(!i){i=!0;var o=n.configManager.get().user;return t&&(o.tobid=t,o["diss".split("").reverse().join("")]=t),e(dt({},o))}},r=function(){n.tokenManager.getTobId().then((function(e){o(e)}))};this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute GetToken",level:"info",time:Date.now(),infoType:"cus"}),this.sdkReady?r():(t&&setTimeout((function(){o()}),t),this.on(Lt.Ready,(function(){r()})))}else console.warn("predefinePageView should call after init")},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(Lt.ProfileSet,e,Lt.Profile),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(Lt.ProfileSetOnce,e,Lt.Profile),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(Lt.ProfileIncrement,e,Lt.Profile),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(Lt.ProfileUnset,e,Lt.Profile),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(Lt.ProfileAppend,e,Lt.Profile),this.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(Lt.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,Lt.Ab)},e.prototype.getVar=function(e,t,n,i){this.emit(Lt.AbVar,{name:e,defaultValue:t,callback:n,uuid:i},Lt.Ab)},e.prototype.getABconfig=function(e,t){this.emit(Lt.AbConfig,{params:e,callback:t},Lt.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(Lt.AbVersionChangeOn,e,Lt.Ab),function(){t.emit(Lt.AbVersionChangeOff,e,Lt.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(Lt.AbVersionChangeOff,e,Lt.Ab)},e.prototype.openOverlayer=function(){this.emit(Lt.AbOpenLayer,"",Lt.Ab)},e.prototype.closeOverlayer=function(){this.emit(Lt.AbCloseLayer,"",Lt.Ab)},e.prototype.getAllVars=function(e){this.emit(Lt.AbAllVars,e,Lt.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(Lt.TokenComplete),this.emit(Lt.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(Lt.TokenComplete),this.emit(Lt.DestoryInstance))},e.plugins=[],e}(),sn="__rangers_ab_style__";!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(jt||(jt={}));var cn=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="no",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data={},this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var i=t.enable_multilink,o=t.ab_channel_domain,r=t.enable_ab_visual,a=t.ab_cross,s=t.ab_cookie_domain,c=t.ab_timeout,u=t.disable_auto_ab,l=Nt[t.channel||"sg"]||Nt.sg,f=o||wt(l),h=e.adapters.storage;this.cacheStorgae=new h(!1),this.timeout=c||3e3,this.enable_multilink=i,this.enable_ab_visual=r,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=a,this.ab_cookie_domain=s||"",this.fetchUrl=f+"/service/2/abtest_config/",this.reportUrl=this.collect.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500,this.ab_user_mode=t.ab_user_mode||"user_unique_id";var d=this.collect.Types;this.types=d,this.collect.on(d.TokenChange,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(d.AbVar,(function(e){var t=e.name,i=e.defaultValue,o=e.callback;n.getVar(t,i,o)})),this.collect.on(d.AbAllVars,(function(e){n.getAllVars(e)})),this.collect.on(d.AbConfig,(function(e){var t=e.params,i=e.callback;n.getABconfig(t,i)})),this.collect.on(d.AbExternalVersion,(function(e){n.setExternalAbVersion(e)})),this.collect.on(d.AbOpenLayer,(function(){n.openOverlayer()})),this.collect.on(d.AbCloseLayer,(function(){n.closeOverlayer()})),this.collect.on(d.AbVersionChangeOn,(function(e){n.changeListener.set(e,e)})),this.collect.on(d.AbVersionChangeOff,(function(e){n.changeListener.get(e)&&n.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(!u&&this.fetchAB(),this.readyStatus=!0),this.collect.emit(d.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var i=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var o in n)i(o)}},e.prototype.loadMode=function(){var e=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e){return}}(),t="";if(e){var n=e.scenario,i=e.href;n?(this.editMode=!0,t=n):!i||-1===i.indexOf("datatester")&&-1===i.indexOf("visual-editor")||(this.editMode=!0,t="visual-editor")}this.enable_ab_visual&&"visual-editor"===t&&this.collect.destoryInstace()},e.prototype.checkLocal=function(){var e=this.getABCache(),t=e.ab_version,n=e.ab_ext_version,i=e.ab_version_multilink,o=(e.data,this.checkFromUrl());o?this.mulilinkVersions.push(o):this.mulilinkVersions=i||[],this.extVersions=n||[],this.versions=t||[];var r=this.versions.concat(this.extVersions);this.enable_multilink&&(r=r.concat(this.mulilinkVersions))},e.prototype.checkFromUrl=function(){var e=Ct(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e=this.extVersions.length?this.versions.concat(this.extVersions):this.versions;this.enable_multilink&&(e=e.concat(this.mulilinkVersions)),this.configVersions(e.join(",")),this.updateABCache(),this.changeListener.size>0&&this.changeListener.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,n,i){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var o={name:e,defaultValue:t,callback:n,type:jt.Var};this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetVar",level:"info",time:Date.now(),data:e,infoType:"cus"}),"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(o,e,i):this.callbacks.push(o)},e.prototype.setAbUuid=function(e,t){this.collect.configManager.setAbUuidCache(e,t)},e.prototype.getRealVar=function(e,t,n){var i=e.name,o=e.defaultValue,r=e.callback,a=this.data;if(a){if(bt(a[i])){var s=a[i].vid;return"$ab_url"===t?this.mulilinkVersions.includes(s)||this.mulilinkVersions.push(s):this.versions.includes(s)||this.versions.push(s),this.setAbUuid(s,n),this.updateVersions(),this.fechEvent(s,t,o),r(a[i].val),void this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetVar, Exposure Experiment "+i,level:"info",time:Date.now(),data:a[i],infoType:"sdk"})}this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GerVar Default Callback",level:"info",time:Date.now(),data:this.data,infoType:"sdk"}),r(o)}else r(o)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:jt.All};this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetAllVars",level:"info",time:Date.now(),infoType:"cus"}),"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbacks.push(t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{}),this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetAllVars Callback",level:"info",time:Date.now(),data:this.data,infoType:"sdk"})},e.prototype.fechEvent=function(e,t,n){try{if(this.config.disable_track_event)return;if(!e)return;var i=this.collect.configManager.get(),o=i.header,r=i.user,a=this.getABCache(),s=r[this.ab_user_mode]||r.user_unique_id;if(a&&a.uuid&&a.uuid!==s)return;var c={event:"abtest_exposure",ab_sdk_version:""+e,params:JSON.stringify({app_id:this.config.appId,ab_url:"$ab_url"===t?n:window.location.href,data:this.data}),local_time_ms:Date.now()};o.custom=JSON.stringify(o.custom);var u={events:[c],user:r,header:o};this.reportExposure(u,t)}catch(e){this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.reportExposure=function(e,t){var n=this;this.exposureCache.push(e),this.reportTimeout&&clearTimeout(this.reportTimeout),this.exposureCache.length>=this.exposureLimit?this.report(t):this.reportTimeout=setTimeout((function(){n.report(t),clearTimeout(n.reportTimeout)}),this.ab_batch_time)},e.prototype.report=function(e){var t=this;this.collect.requestManager.useRequest({url:this.reportUrl,data:this.exposureCache,timeout:2e4,useBeacon:"$ab_url"===e}),this.exposureCache.forEach((function(e){t.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_EVENT,info:"SDK Report Exposure Event Success",time:Date.now(),data:[e],code:200,status:"success",infoType:"sdk"})})),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var n=Object.keys(e);n&&n.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){return this.cacheStorgae.getItem(e)},e.prototype.set=function(e,t){this.cacheStorgae.setItem(e,t),this.collect.configManager.setAbCache(t),this.collect.event("abtest_cache",{env_uuid:this.collect.configManager.get("user").user_unique_id||"",cache:JSON.stringify(t)})},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[],this.collect.configManager.clearAbCache()},e.prototype.openOverlayer=function(e){var t=this;if(function(){if(!document.getElementById(sn)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=sn,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}(),e)var n=setTimeout((function(){t.closeOverlayer(),clearTimeout(n)}),e)},e.prototype.closeOverlayer=function(){var e;(e=document.getElementById(sn))&&e.parentElement.removeChild(e)},e.prototype.fetchComplete=function(e,t){var n=this;try{if(e&&"[object Object]"==Object.prototype.toString.call(e)){this.data=e,this.setAbCache(t);var i=[];Object.keys(e).forEach((function(t){var n=e[t].vid;n&&i.push(n)})),this.versions=this.versions.filter((function(e){return i.includes(e)}));var o=e.$ab_url,r=e.$ab_modification;if(r&&r.val&&this.enable_ab_visual){if(this.collect.destroy)return}else if(o&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter((function(e){return i.includes(e)}));var a=o.val,s=o.vid;a&&s&&this.getVar("$ab_url",a,(function(){n.editMode||(a!==window.location.href?setTimeout((function(){if(!n.collect.destroy){var e=""+a;e=-1===e.indexOf("http")?"https://"+e:e,xt(e).host!==location.host?e=e+"&vid="+s:window.history.replaceState("","",e),window.location.href=e}}),100):n.closeOverlayer())}))}this.updateVersions()}else this.closeOverlayer();this.callbacks.forEach((function(e){return n[e.type===jt.Var?"getRealVar":"getRealAllVars"](e,"")})),this.callbacks=[]}catch(e){}},e.prototype.fetchAB=function(e){var t=this,n=this.collect.configManager.get(),i={header:dt(dt(dt({aid:this.config.app_id},n.user||{}),n.header||{}),{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:window.location.href})};this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch AB Request",level:"info",logType:"fetch",time:Date.now(),data:i,infoType:"sdk"});var o=n.user[this.ab_user_mode]||n.user.user_unique_id;this.collect.requestManager.useRequest({url:this.fetchUrl,data:i,success:function(n){t.fetchStatus="complete",t.refreshFetchStatus="complete";var i=n.data;"success"===n.message?(t.fetchComplete(i,o),e&&e(i)):(t.fetchComplete(null,o),e&&e(null)),t.collect.emit(t.types.AbComplete,i),t.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Fetch AB Request Success",level:"info",logType:"fetch",time:Date.now(),data:i,infoType:"sdk"})},fail:function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,o),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Fetch AB Request Network Error",level:"error",logType:"fetch",time:Date.now(),infoType:"sdk"})},timeout:this.timeout})},e.prototype.filterUrl=function(e){try{var t="";-1!==e.indexOf("&multilink=true")?t="&multilink=true[\0-]*":-1!==e.indexOf("?multilink=true")&&(t="\\?multilink=true[\0-]*");var n=new RegExp(t,"g");e=e.replace(n,"")}catch(e){}return e},e}(),un=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var i=e.Types;e.on(i.SubmitBefore,(function(t){e.requestManager.useBeacon({url:n.url,data:t}),e.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_EVENT,info:"SDK Report ByteIo Verify Request",time:Date.now(),data:t,code:200,status:"success",verifyType:!0})}))}}else console.log("please use correct et_test url")},e}(),ln=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.focusState=!0,this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,bt(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageAlive(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var n=t?this.aliveDTime:Date.now()-this.sessionStartTime;n<0||n>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||t&&"hidden"===document.visibilityState||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.aliveName,dt({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:n,is_support_visibility_change:At(),startTime:this.sessionStartTime,hidden:document.visibilityState,leave:e,mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.sessionStartTime=Date.now())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval((function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent(!0)},e.prototype.enablePageAlive=function(){var e=this;this.timerHandler=this.setUpTimer();var t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),St(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.timerHandler&&(clearInterval(e.timerHandler),e.sendEvent(!1)),e.focusState=!1},n=function(){e.focusState=!0,e.sessionStartTime=Date.now(),e.timerHandler=e.setUpTimer()};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),fn=function(){function e(e,t){var n=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.focusState=!0,this.visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=Date.now():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=Date.now())},this.beforeunload=function(){if(n.totalTime+=(n.activeEndTime||Date.now())-n.activeStartTime,n.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:n.totalTime,page_title:document.title||location.pathname}))}catch(e){}n.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||864e5,this.pageStartTime=Date.now(),bt(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus(),this.resetData()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.resetParams=function(e,t,n){this.url_path=e,this.url=n,this.title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageClose(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0,this.resetParams(location.pathname,document.title,location.href)},e.prototype.sendEventPageClose=function(){var e=Date.now()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.closeName,dt({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:At(),mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.pageStartTime=Date.now(),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e=this,t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),St(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.focusState=!1},n=function(){e.focusState=!0};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),hn=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new ln(e,t),this.pageClose=new fn(e,t);var i=this.collect.Types;this.collect.on(i.ResetStay,(function(e){var t=e.url_path,i=e.title,o=e.url;n.resetStayDuration(t,i,o)})),this.collect.on(i.RouteChange,(function(e){e.init||t.disable_route_report||n.resetStayDuration()})),this.collect.on(i.SetStay,(function(e){var t=e.url_path,i=e.title,o=e.url;n.setStayParmas(t,i,o)})),this.enable(this.url_path,this.title,this.url),this.ready(i.Stay),this.collect.emit(i.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var i=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var o in n)i(o)}},e.prototype.enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.pageAlive.setParams(e,t,n),this.pageClose.setParams(e,t,n),this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute resetStayParams",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e.prototype.reset=function(e,t,n){this.disable(),this.enable(e,t,n)},e.prototype.resetStayDuration=function(e,t,n){this.reset(e,t,n),this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"SDK Execute resetStayDuration",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e}(),dn=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,i=Date.now()+t;return n=window.setTimeout((function o(){var r=Date.now()-i;e(),i+=t,n=window.setTimeout(o,Math.max(0,t-r))}),t),function(){window.clearTimeout(n)}}((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var i=this.collect.Types;this.collect.on(i.SessionReset,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),pn=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var i=this.collect.Types;this.collect.on(i.Ready,(function(){n.sdkOnload()})),this.collect.on(i.SubmitError,(function(e){var t=e.type,i=e.eventData,o=e.errorCode;"f_data"===t&&n.sdkError(i,o)}))}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,i=t.user,o=n.app_id,r=n.app_name,a=n.sdk_version,s=i.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:o,app_name:r||"",sdk_version:a,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA"}),local_time_ms:Date.now()}],user:{user_unique_id:s},header:{}};setTimeout((function(){e.collect.requestManager.useRequest({url:e.url,data:[c],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e.prototype.sdkError=function(e,t){var n=this;try{var i=e[0],o=i.user,r=i.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var s={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:r.app_id,app_name:r.app_name||"",error_event:e.event,sdk_version:r.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(r),user:JSON.stringify(o)}),local_time_ms:Date.now()}})),user:{user_unique_id:o.user_unique_id},header:{}};setTimeout((function(){n.collect.requestManager.useRequest({url:n.url,data:[s],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e}();function gn(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}function vn(e){for(var t=e;t&&!gn(t,"container");){if("HTML"===t.nodeName||"BODY"===t.nodeName)return e;t=t.parentElement}return t||e}function mn(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}var _n=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},yn=function(){function e(e,t,n){var i=this;this.statistics=!1,this.pageView=!1,this.clickEvent=function(e){(function(e,t){if(1!==e.nodeType)return!1;if(!t.svg&&function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n}(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var n=e;return!("none"===n.style.display||!gn(n,"container")&&!function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some((function(e){return e.children.length>0}))}return!0}(n)&&!t.svg)})(e.target,i.options)&&i.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){i.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){i.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&i.eventHandel({eventType:"dom",eventName:"beat"},dt({beat_type:0},e)),i.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){i.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=n.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e){if(this.config.click&&window.document.addEventListener("click",this.clickEvent,!0),this.config.change&&window.document.addEventListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),this.config.pv){this.collect.on("route-change",(function(e){var n=e.config,i=e.name;t.getPageViewEvent(n,i),t.pageView=!0}));var n=setTimeout((function(){t.pageView||(t.getPageViewEvent(t.getDefaultConfig()),t.pageView=!0,clearTimeout(n))}),2e3)}if(this.config.beat){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var i=0,o=null;window.addEventListener("scroll",(function(){clearTimeout(o),o=setTimeout(r,500),i=document.documentElement.scrollTop||document.body.scrollTop}));var r=function(){(document.documentElement.scrollTop||document.body.scrollTop)==i&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}try{var a=window.performance&&window.performance.getEntriesByType("paint");a&&a.length?(new PerformanceObserver((function(e){var n=e.getEntries(),i=n[n.length-1],o=i.renderTime||i.loadTime;t.statistics||(t.getPageLoadEvent(o),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]}),setTimeout((function(){t.statistics||(t.getPageLoadEvent(a[0].startTime||0),t.statistics=!0)}),2e3)):this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}}},e.prototype.removeListener=function(){window.document.removeEventListener("click",this.clickEvent,!0),window.document.removeEventListener("change",this.changeEvent,!0),window.document.removeEventListener("submit",this.submitEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var n;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(n=setInterval((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),St((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(n)}))}catch(e){}},e.prototype.getDefaultConfig=function(){return{is_html:1,url:location.href,referrer:document.referrer,page_key:location.href,refer_page_key:document.referrer,page_title:document.title||location.pathname,page_manual_key:"",refer_page_manual_key:"",refer_page_title:"",page_path:location.pathname,page_host:location.host}},e}(),bn={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},En=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();function kn(e,t,n,i){var o={},r=function(e){if(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return{left:t.left,top:t.top,element_width:n,element_height:i}}}(t),a=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,i=e.clientY,o=t.left,r=t.top,a=n-o>=0?n-o:0,s=i-r>=0?i-r:0;return{touch_x:Math.floor(a),touch_y:Math.floor(s)}}(e,r),s=r.element_width,c=r.element_height,u=a.touch_x,l=a.touch_y,f=function(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElement;var n=[],i=[];return t.forEach((function(e){var t=function(e){if(null===e)return{str:"",index:0};var t=0,n=e.parentElement;if(n)for(var i=n.children,o=0;o<i.length&&i[o]!==e;o++)i[o].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),gn(e,"list")?"[]":""].join(""),index:t}}(e),o=t.str,r=t.index;n.unshift(o),i.unshift(r)})),{element_path:"/"+n.join("/"),positions:i}}(t),h=f.element_path,d=f.positions,p=function(e){var t=vn(e),n=[];return function e(t){var i=mn(t);if(i&&-1===n.indexOf(i)&&n.push(i),t.childNodes.length>0)for(var o=t.childNodes,r=0;r<o.length;r++)8!==o[r].nodeType&&e(o[r])}(t),n}(t),g=window.performance.timing.navigationStart,v=Date.now()-g,m=d.map((function(e){return""+e})),_=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(_=window.TEAVisualEditor.getOriginXpath({xpath:h,positions:m})),o.element_path=_&&_.xpath||h,o.positions=_&&_.positions||m,i&&!i.text&&(o.texts=p,o.element_title=function(e){var t=vn(e),n="";return function e(t){var i=mn(t);if(i&&(n+=i),t.childNodes.length>0)for(var o=t.childNodes,r=0;r<o.length;r++)3===o[r].nodeType&&e(o[r])}(t),n}(t)),o.element_id=t.getAttribute("id")||"",o.element_class_name=t.getAttribute("class")||"",o.element_type=t.nodeType,o.element_width=Math.floor(s),o.element_height=Math.floor(c),o.touch_x=u,o.touch_y=l,o.page_manual_key="",o.elememt_manual_key="",o.since_page_start_ms=v,o.page_start_ms=g,o.page_path=location.pathname,o.page_host=location.host,n.track_attr&&function(e,t){return!!function(e,t){if("string"==typeof t)return _n(e,t);if(Et(t)){for(var n=!1,i=0;i<t.length;i++)if(_n(e,t[i])){n=!0;break}return n}}(e,t)}(t,n.track_attr)){var y=function(e,t){var n={};if("string"==typeof t)_n(e,t)&&(n.attrs=e.getAttribute(t));else if(Et(t))for(var i=0;i<t.length;i++)_n(e,t[i])&&(n[t[i]]=e.getAttribute(t[i]));return n}(t,n.track_attr);for(var b in y)o[b]=y[b]}var E=vn(t);return"A"===E.tagName&&(o.href=E.getAttribute("href")),"IMG"===t.tagName&&(o.src=t.getAttribute("src")),o}var wn=function(e,t,n,i,o){return dt(dt({event:e},kn(t,n,i,o)),{is_html:1,page_key:window.location.href,page_title:document.title})},Sn=function(){function e(e,t){this.ignore={text:!0},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!0===t.text&&(this.ignore.text=!1),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return e.prototype.handleEvent=function(e,t){try{if(function(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}(e.target))return null;var n="bav2b_click";switch(t){case"click":return n=this.eventName.click,wn(n,e,e.target,this.options,this.ignore);case"exposure":return n=this.eventName.exposure,wn(n,e,e.target,this.options,this.ignore);case"change":return dt(dt({},wn(n="bav2b_change",e,e.target,this.options)),function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}}(n,e.target));case"submit":return wn(n="bav2b_submit",e,e.target,this.options)}}catch(e){return console.error(e),null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:""}e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("page event error "+JSON.stringify(e))}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,i=window.performance.timing,o=i.loadEventEnd-i.navigationStart;t.page_init_cost_ms=parseInt(n||(o>0?o:0)),t.page_start_ms=i.navigationStart}catch(e){console.log("page_statistics event error "+JSON.stringify(e))}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("beat event error "+JSON.stringify(e))}return e},e}(),An=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,i=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(i,t):this.collect.event(i,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),xn={},Cn=[];function Tn(e,t,n,i){var o=e&&e.source||window.opener||window.parent,r=e&&e.origin||i||"*",a={type:t,payload:n};o.postMessage(JSON.stringify(a),r)}function Dn(e){if(Cn.some((function(e){return"*"===e}))||Cn.some((function(t){return e.origin.indexOf(t)>-1}))){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){t=void 0}if(!t)return;var n=t.type,i=t.payload;xn[n]&&xn[n].forEach((function(t){"function"==typeof t&&t(e,i)}))}}var Rn=!1;function On(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.appId=t.app_id;var n,i,o,r,a=t.channel_domain,s="";if((n=["*"]).length&&n.forEach((function(e){Cn.push(e)})),a){var c,u="";try{var l=window.performance.getEntriesByType("resource");if(l&&l.length&&(l.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(u=e.name)})),u&&(c=u.split("/"))&&c.length)){s="https:/";for(var f=2;f<c.length&&f!==c.length-1;f++)s=s+"/"+c[f];if(s&&s.indexOf("/5.0")){var h=s.split("/5.0");s=h[0]||s}}}catch(e){}}delete(i=dt({},t)).filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",config:i,version:"5.3.0_oversea"},"*"),window.addEventListener("message",Dn,!1);try{r=function(n){var i=n.data.app_id;i&&i!==t.app_id||function(e){var t,n,i,o,r=e.event,a=e.editorUrl,s=e.autoTrackInstance;Rn||(Rn=!0,t=a,n=function(){Tn(r,"editorScriptloadSuccess"),s.destroy()},i=function(){r&&Tn(r,"editorScriptloadError"),Rn=!1},(o=document.createElement("script")).src=t,o.onerror=function(){i()},o.onload=function(){n()},document.getElementsByTagName("head")[0].appendChild(o))}({event:n,editorUrl:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/log-sdk/collect/heatmap-core.js?query="+Date.now(),autoTrackInstance:e})},xn[o="tea:openHeatMapCore"]=xn[o]||[],xn[o].push(r)}catch(e){console.log("openHeatMapCore error")}}var zn,In=function(){function e(e){this._instance=null,this._intersection=e,this.init()}return e.prototype.init=function(){var e=this;this._instance=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&e.attributeChangeObserve(t),"childList"===t.type&&e.modifyNodeObserve(t)}))})),this._instance.observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1})},e.prototype.attributeChangeObserve=function(e){e.target.hasAttribute("data-exposure")?this.exposureAdd(e,"mutation"):this.exposureRemove(e)},e.prototype.modifyNodeObserve=function(e){var t=this;Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureAdd(e,"intersect"),t.mapChild(e,t.exposureAdd)})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureRemove(e),t.mapChild(e,t.exposureRemove)}))},e.prototype.mapChild=function(e,t){var n=this;1===e.nodeType&&e.children.length&&Array.prototype.forEach.call(e.children,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t(e),n.mapChild(e,t)}))},e.prototype.exposureAdd=function(e,t){this._intersection.exposureAdd(e,t)},e.prototype.exposureRemove=function(e){this._intersection.exposureRemove(e)},e._exposure_observer=null,e}(),Mn=function(){function e(t,n){this.count=1,this.instance=this.buildObserver(),this.observeMap=e._observer_map,t.autotrack.exposure.ratio?this.Ratio=t.autotrack.exposure.ratio:0===t.autotrack.exposure.ratio?this.Ratio=0:this.Ratio=.5,this.EventHandle=n}return e.prototype.buildObserver=function(){var t=this;if(!e._observer_instance)return IntersectionObserver&&(e._observer_instance=new IntersectionObserver((function(e){e.forEach((function(e){t.observeMap.get(e.target._observeId)&&t.exposureEvent(e)}))}),{threshold:[.01,.25,.5,.75,1]})),e._observer_instance},e.prototype.exposureAdd=function(e,t){var n=e;"mutation"===t&&(n=e.target);var i=n._observeId;if(i||this.observeMap.has(i)){if(!1===n.visible){var o=n.getBoundingClientRect(),r=o.top,a=o.left,s=o.right,c=o.bottom;r>=0&&c<=window.innerHeight&&a>=0&&s<=window.innerWidth&&(n.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e))}}else n._observeId=this.count,n.visible=!1,this.observeMap.set(this.count,n),this.observe(n),this.count++},e.prototype.exposureRemove=function(e){this.observeMap.has(e._observeId)&&(this.observeMap.delete(e._observeId),this.unobserve(e))},e.prototype.exposureEvent=function(e){if(e.intersectionRatio>=this.Ratio&&e.isIntersecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e)}else e.target.visible=!1},e.prototype.observe=function(e){this.instance.observe(e)},e.prototype.unobserve=function(e){this.instance.unobserve(e)},e._observer_instance=null,e._observer_map=new Map,e}(),Bn=function(){function e(e,t){e.autotrack&&e.autotrack.exposure&&(this._intersection=new Mn(e,t),this._observer=new In(this._intersection),this.initObserver())}return e.prototype.initObserver=function(){var e=this;Array.prototype.forEach.call(document.querySelectorAll("[data-exposure]"),(function(t){e._intersection.exposureAdd(t,"intersect")}))},e}(),Pn={hashTag:!1,impr:!1},Nn=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;t.autotrack&&t.autotrack.collect_url&&!t.autotrack.collect_url()||(this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady))}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==$(t)?t:{},t=Object.assign(Pn,t),this.destroyed=!1,this.options=t,this.Config=new En(bn,this.options),this.Exposure=new Bn(this.config,this.handle.bind(this)),this.Listener=new yn(t,this.collect,this.Config),this.EventHandle=new Sn(this.config,t),this.Request=new An(this.collect),this.autoTrackStart=!0,this.init(),On(this,this.config)},e.prototype.init=function(){this.Listener.init(this.handle.bind(this)),"base"===this.collect.loadType&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"exposure"===n||"change"===n||"submit"===n){var i=this.EventHandle.handleEvent(t,n);null!==i&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},i)}else if("page_view"===n||"page_statistics"===n){var o;o="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},o)}else if("beat"===n){var r=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},r)}}catch(e){console.log("handel dom event error "+JSON.stringify(e))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}();!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(zn||(zn={}));var Un={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Gn=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.ready=t.app_id&&t.enable_tracer&&!t.disable_track_event,this.ready){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var i=this.collect.Types;e.adapters.fetch,this.collect.on(i.Event,(function(e){Et(e)?e.forEach((function(e){n.addCount("log")})):n.addCount("log")})),this.collect.on(i.SubmitError,(function(e){var t=e.type,i=e.eventDate,o=e.errorCode,r=e.response;n.addErrorCount(i,t,o,r)})),this.listener(),this.collect.emit(i.TracerReady)}},e.prototype.addCount=function(e,t,n){void 0===t&&(t="net"),void 0===n&&(n=1);try{this.tracerCache||(this.tracerCache=new Map);var i=void 0;if(this.tracerCache.has(e))(o=this.tracerCache.get(e)).has(t)?(i=o.get(t).params.count,i++,o.set(t,this.processTracer(i,e,t))):(i=n,o.set(t,this.processTracer(n,e,t)));else{var o=new Map;i=n,o.set(t,this.processTracer(n,e,t)),this.tracerCache.set(e,o)}"net"===t&&i>=this.limit[e]&&this.report(!1)}catch(e){console.log(e)}},e.prototype.addErrorCount=function(e,t,n,i){var o=this;try{if(e&&e.length){var r=e[0].events;r&&r.length&&("f_data"===t?(i&&i.hasOwnProperty("sc")?this.addCount("log",t,r.length-i.sc):this.addCount("log",t,r.length),this.errorCode[t]=n):r.forEach((function(e){var i="log";for(var r in Un)if(-1!==Un[r].indexOf(e.event)){i=r;break}o.addCount(i,t,1),o.errorCode[t]=n})))}}catch(e){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCache.forEach((function(e){console.log(e),e.forEach((function(e){t.push(e)}))})),t&&t.length&&this.sendTracer(t,e)}},e.prototype.sendTracer=function(e,t){try{var n=this.collect.eventManager.merge(e);this.collect.requestManager.useRequest({url:this.reportUrl,data:n,useBeacon:t}),this.tracerCache=null}catch(e){}},e.prototype.processTracer=function(e,t,n){try{var i={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:"5.3.0_oversea"};"f_net"!==n&&"f_data"!==n||(i.errorCode=this.errorCode[n]);var o=this.collect.processEvent("applog_trace",i);if(o&&o.event)return delete o.is_bav,o}catch(e){console.warn("something error")}},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),St((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),jn="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,Ln=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t)if(on.hasOwnProperty(n)){var i=on[n].object,o=""+on[n].src[e.channel];e.exist(n,i,o)}else console.warn("your "+n+" is not existplease check plugin name");else"object"==$(t)&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(e){this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"",level:"error",time:Date.now(),data:e.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var i=this;jn[t]?(this.process(e,jn[t]),console.log("already has "+e+" plugin~")):this.loadPlugin(e,n,(function(){i.process(e,jn[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","","load plugin:"+e+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","","load plugin:"+e+" error","-")}))},e.prototype.process=function(e,t,n){try{if(n){var i=new t;i.apply&&i.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(t){this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"",level:"error",time:Date.now(),data:t.message}),console.log("excude "+e+" error, message:"+t.message)}},e.prototype.loadPlugin=function(e,t,n,i){var o=this;try{var r=document.createElement("script");r.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),r.onerror=function(){i(t)},r.onload=function(){o._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(r)}catch(e){this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"",level:"error",time:Date.now(),data:e.message})}},e}(),Vn=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var n=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(n.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:"",refer_title:document.title||location.pathname,refer_manual_key:"",routeChange:!1},this.config.autotrack&&"object"==$(this.config.autotrack)&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];"function"==typeof history.onpushstate&&history.onpushstate({state:n});var r=t.call.apply(t,gt([history,n],i));if(e.collect.sdkStop||e.collect.destroy)return r;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a,"pushState"),r}};var n=history.replaceState;history.replaceState=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var r=n.call.apply(n,gt([history,t],i));if(e.collect.sdkStop||e.collect.destroy)return r;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a),r}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.getLocation=function(){return this.lastLocation},e.prototype.pathEquel=function(){try{return new URL(this.lastLocation).origin+new URL(this.lastLocation).pathname===new URL(location.href).origin+new URL(location.href).pathname}catch(e){return!1}},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this;window.addEventListener("hashchange",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&e.lastLocation!==window.location.href&&(!e.config.disable_spa_query||!e.pathEquel())&&e.allowHash){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}})),window.addEventListener("popstate",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&!(e.lastLocation===window.location.href||e.config.disable_spa_query&&e.pathEquel())){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e,t=this.storage.getItem(this.cache_key)||{},n=this.storage.getItem("__tea_cache_first_"+this.appid);return e=!n||1!=n,{is_html:1,url:location.href,referrer:this.handleRefer(),page_key:location.href,refer_page_key:this.handleRefer(),page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:t&&t.refer_manual_key||"",refer_page_title:t&&t.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+e}}catch(t){return this.collect.emit(_t.DEBUGGER_MESSAGE,{type:_t.DEBUGGER_MESSAGE_SDK,info:"",level:"error",time:Date.now(),data:t.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e.prototype.handleRefer=function(){var e="";try{var t=this.storage.getItem()||{};e=t.routeChange?t.refer_key:this.collect.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.setReferCache=function(e){var t=this.storage.getItem(this.cache_key)||{};t.refer_key=e,t.routeChange=!0,this.storage.setItem(this.cache_key,t)},e}();an.usePlugin(Ln,"extend"),an.usePlugin(Gn,"tracer"),an.usePlugin(cn,"ab"),an.usePlugin(hn,"stay"),an.usePlugin(Nn,"autotrack"),an.usePlugin(un,"et"),an.usePlugin(dn,"heartbeat"),an.usePlugin(pn,"monitor"),an.usePlugin(Vn,"route"),an.usePlugin(Gn,"tracer"),new an("default");var Kn=function(e,t){return e&&function(e){return"object"===$(e)&&null!==e}(e)?t.reduce((function(t,n){return t[n]=e[n],t}),{}):e},Fn=new an("cookie_banner_tea_ui"),Hn=!1;function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Hn&&Fn){var n="".concat(location.protocol,"//").concat(location.host).concat(location.pathname);Fn.event(e,w({page_url:n,host:location.host,user_agent:navigator.userAgent,referrer:n},t))}}var $n=function(){this.__data__=[],this.size=0};var Wn=function(e,t){return e===t||e!=e&&t!=t};var Jn=function(e,t){for(var n=e.length;n--;)if(Wn(e[n][0],t))return n;return-1},Xn=Array.prototype.splice;var Yn=function(e){var t=this.__data__,n=Jn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xn.call(t,n,1),--this.size,!0)};var Zn=function(e){var t=this.__data__,n=Jn(t,e);return n<0?void 0:t[n][1]};var Qn=function(e){return Jn(this.__data__,e)>-1};var ei=function(e,t){var n=this.__data__,i=Jn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function ti(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}ti.prototype.clear=$n,ti.prototype.delete=Yn,ti.prototype.get=Zn,ti.prototype.has=Qn,ti.prototype.set=ei;var ni=ti;var ii=function(){this.__data__=new ni,this.size=0};var oi=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var ri=function(e){return this.__data__.get(e)};var ai=function(e){return this.__data__.has(e)},si="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ci(e,t){return e(t={exports:{}},t.exports),t.exports}var ui="object"==$(si)&&si&&si.Object===Object&&si,li="object"==("undefined"==typeof self?"undefined":$(self))&&self&&self.Object===Object&&self,fi=ui||li||Function("return this")(),hi=fi.Symbol,di=Object.prototype,pi=di.hasOwnProperty,gi=di.toString,vi=hi?hi.toStringTag:void 0;var mi=function(e){var t=pi.call(e,vi),n=e[vi];try{e[vi]=void 0;var i=!0}catch(e){}var o=gi.call(e);return i&&(t?e[vi]=n:delete e[vi]),o},_i=Object.prototype.toString;var yi=function(e){return _i.call(e)},bi=hi?hi.toStringTag:void 0;var Ei=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":bi&&bi in Object(e)?mi(e):yi(e)};var ki=function(e){var t=$(e);return null!=e&&("object"==t||"function"==t)};var wi,Si=function(e){if(!ki(e))return!1;var t=Ei(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ai=fi["__core-js_shared__"],xi=(wi=/[^.]+$/.exec(Ai&&Ai.keys&&Ai.keys.IE_PROTO||""))?"Symbol(src)_1."+wi:"";var Ci=function(e){return!!xi&&xi in e},Ti=Function.prototype.toString;var Di=function(e){if(null!=e){try{return Ti.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ri=/^\[object .+?Constructor\]$/,Oi=Function.prototype,zi=Object.prototype,Ii=Oi.toString,Mi=zi.hasOwnProperty,Bi=RegExp("^"+Ii.call(Mi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Pi=function(e){return!(!ki(e)||Ci(e))&&(Si(e)?Bi:Ri).test(Di(e))};var Ni=function(e,t){return null==e?void 0:e[t]};var Ui=function(e,t){var n=Ni(e,t);return Pi(n)?n:void 0},Gi=Ui(fi,"Map"),ji=Ui(Object,"create");var Li=function(){this.__data__=ji?ji(null):{},this.size=0};var Vi=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ki=Object.prototype.hasOwnProperty;var Fi=function(e){var t=this.__data__;if(ji){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ki.call(t,e)?t[e]:void 0},Hi=Object.prototype.hasOwnProperty;var qi=function(e){var t=this.__data__;return ji?void 0!==t[e]:Hi.call(t,e)};var $i=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ji&&void 0===t?"__lodash_hash_undefined__":t,this};function Wi(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Wi.prototype.clear=Li,Wi.prototype.delete=Vi,Wi.prototype.get=Fi,Wi.prototype.has=qi,Wi.prototype.set=$i;var Ji=Wi;var Xi=function(){this.size=0,this.__data__={hash:new Ji,map:new(Gi||ni),string:new Ji}};var Yi=function(e){var t=$(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Zi=function(e,t){var n=e.__data__;return Yi(t)?n["string"==typeof t?"string":"hash"]:n.map};var Qi=function(e){var t=Zi(this,e).delete(e);return this.size-=t?1:0,t};var eo=function(e){return Zi(this,e).get(e)};var to=function(e){return Zi(this,e).has(e)};var no=function(e,t){var n=Zi(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function io(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}io.prototype.clear=Xi,io.prototype.delete=Qi,io.prototype.get=eo,io.prototype.has=to,io.prototype.set=no;var oo=io;var ro=function(e,t){var n=this.__data__;if(n instanceof ni){var i=n.__data__;if(!Gi||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new oo(i)}return n.set(e,t),this.size=n.size,this};function ao(e){var t=this.__data__=new ni(e);this.size=t.size}ao.prototype.clear=ii,ao.prototype.delete=oi,ao.prototype.get=ri,ao.prototype.has=ai,ao.prototype.set=ro;var so=ao,co=function(){try{var e=Ui(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var uo=function(e,t,n){"__proto__"==t&&co?co(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var lo=function(e,t,n){(void 0!==n&&!Wn(e[t],n)||void 0===n&&!(t in e))&&uo(e,t,n)};var fo=function(e){return function(t,n,i){for(var o=-1,r=Object(t),a=i(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(r[c],c,r))break}return t}}(),ho=ci((function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n?fi.Buffer:void 0,r=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=r?r(n):new e.constructor(n);return e.copy(i),i}})),po=fi.Uint8Array;var go=function(e){var t=new e.constructor(e.byteLength);return new po(t).set(new po(e)),t};var vo=function(e,t){var n=t?go(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var mo=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t},_o=Object.create,yo=function(){function e(){}return function(t){if(!ki(t))return{};if(_o)return _o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var bo=function(e,t){return function(n){return e(t(n))}},Eo=bo(Object.getPrototypeOf,Object),ko=Object.prototype;var wo=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ko)};var So=function(e){return"function"!=typeof e.constructor||wo(e)?{}:yo(Eo(e))};var Ao=function(e){return null!=e&&"object"==$(e)};var xo=function(e){return Ao(e)&&"[object Arguments]"==Ei(e)},Co=Object.prototype,To=Co.hasOwnProperty,Do=Co.propertyIsEnumerable,Ro=xo(function(){return arguments}())?xo:function(e){return Ao(e)&&To.call(e,"callee")&&!Do.call(e,"callee")},Oo=Ro,zo=Array.isArray;var Io=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Mo=function(e){return null!=e&&Io(e.length)&&!Si(e)};var Bo=function(e){return Ao(e)&&Mo(e)};var Po=function(){return!1},No=ci((function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n?fi.Buffer:void 0,r=(o?o.isBuffer:void 0)||Po;e.exports=r})),Uo=Function.prototype,Go=Object.prototype,jo=Uo.toString,Lo=Go.hasOwnProperty,Vo=jo.call(Object);var Ko=function(e){if(!Ao(e)||"[object Object]"!=Ei(e))return!1;var t=Eo(e);if(null===t)return!0;var n=Lo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&jo.call(n)==Vo},Fo={};Fo["[object Float32Array]"]=Fo["[object Float64Array]"]=Fo["[object Int8Array]"]=Fo["[object Int16Array]"]=Fo["[object Int32Array]"]=Fo["[object Uint8Array]"]=Fo["[object Uint8ClampedArray]"]=Fo["[object Uint16Array]"]=Fo["[object Uint32Array]"]=!0,Fo["[object Arguments]"]=Fo["[object Array]"]=Fo["[object ArrayBuffer]"]=Fo["[object Boolean]"]=Fo["[object DataView]"]=Fo["[object Date]"]=Fo["[object Error]"]=Fo["[object Function]"]=Fo["[object Map]"]=Fo["[object Number]"]=Fo["[object Object]"]=Fo["[object RegExp]"]=Fo["[object Set]"]=Fo["[object String]"]=Fo["[object WeakMap]"]=!1;var Ho=function(e){return Ao(e)&&Io(e.length)&&!!Fo[Ei(e)]};var qo=function(e){return function(t){return e(t)}},$o=ci((function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n&&ui.process,r=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=r})),Wo=$o&&$o.isTypedArray,Jo=Wo?qo(Wo):Ho;var Xo=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Yo=Object.prototype.hasOwnProperty;var Zo=function(e,t,n){var i=e[t];Yo.call(e,t)&&Wn(i,n)&&(void 0!==n||t in e)||uo(e,t,n)};var Qo=function(e,t,n,i){var o=!n;n||(n={});for(var r=-1,a=t.length;++r<a;){var s=t[r],c=i?i(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),o?uo(n,s,c):Zo(n,s,c)}return n};var er=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i},tr=/^(?:0|[1-9]\d*)$/;var nr=function(e,t){var n=$(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&tr.test(e))&&e>-1&&e%1==0&&e<t},ir=Object.prototype.hasOwnProperty;var or=function(e,t){var n=zo(e),i=!n&&Oo(e),o=!n&&!i&&No(e),r=!n&&!i&&!o&&Jo(e),a=n||i||o||r,s=a?er(e.length,String):[],c=s.length;for(var u in e)!t&&!ir.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||nr(u,c))||s.push(u);return s};var rr=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},ar=Object.prototype.hasOwnProperty;var sr=function(e){if(!ki(e))return rr(e);var t=wo(e),n=[];for(var i in e)("constructor"!=i||!t&&ar.call(e,i))&&n.push(i);return n};var cr=function(e){return Mo(e)?or(e,!0):sr(e)};var ur=function(e){return Qo(e,cr(e))};var lr=function(e,t,n,i,o,r,a){var s=Xo(e,n),c=Xo(t,n),u=a.get(c);if(u)lo(e,n,u);else{var l=r?r(s,c,n+"",e,t,a):void 0,f=void 0===l;if(f){var h=zo(c),d=!h&&No(c),p=!h&&!d&&Jo(c);l=c,h||d||p?zo(s)?l=s:Bo(s)?l=mo(s):d?(f=!1,l=ho(c,!0)):p?(f=!1,l=vo(c,!0)):l=[]:Ko(c)||Oo(c)?(l=s,Oo(s)?l=ur(s):ki(s)&&!Si(s)||(l=So(c))):f=!1}f&&(a.set(c,l),o(l,c,i,r,a),a.delete(c)),lo(e,n,l)}};var fr=function e(t,n,i,o,r){t!==n&&fo(n,(function(a,s){if(r||(r=new so),ki(a))lr(t,n,s,i,e,o,r);else{var c=o?o(Xo(t,s),a,s+"",t,n,r):void 0;void 0===c&&(c=a),lo(t,s,c)}}),cr)};var hr=function(e){return e};var dr=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},pr=Math.max;var gr=function(e,t,n){return t=pr(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,r=pr(i.length-t,0),a=Array(r);++o<r;)a[o]=i[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=i[o];return s[t]=n(a),dr(e,this,s)}};var vr=function(e){return function(){return e}},mr=co?function(e,t){return co(e,"toString",{configurable:!0,enumerable:!1,value:vr(t),writable:!0})}:hr,_r=Date.now;var yr=function(e){var t=0,n=0;return function(){var i=_r(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},br=yr(mr);var Er=function(e,t){return br(gr(e,t,hr),e+"")};var kr=function(e,t,n){if(!ki(n))return!1;var i=$(t);return!!("number"==i?Mo(n)&&nr(t,n.length):"string"==i&&t in n)&&Wn(n[t],e)};var wr,Sr=function(e){return Er((function(t,n){var i=-1,o=n.length,r=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,a&&kr(n[0],n[1],a)&&(r=o<3?void 0:r,o=1),t=Object(t);++i<o;){var s=n[i];s&&e(t,s,i,r)}return t}))},Ar=Sr((function(e,t,n){fr(e,t,n)})),xr=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}},Cr=Object.prototype.toString,Tr=(wr=Object.create(null),function(e){var t=Cr.call(e);return wr[t]||(wr[t]=t.slice(8,-1).toLowerCase())});function Dr(e){return e=e.toLowerCase(),function(t){return Tr(t)===e}}function Rr(e){return Array.isArray(e)}function Or(e){return void 0===e}var zr=Dr("ArrayBuffer");function Ir(e){return null!==e&&"object"===$(e)}function Mr(e){if("object"!==Tr(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var Br=Dr("Date"),Pr=Dr("File"),Nr=Dr("Blob"),Ur=Dr("FileList");function Gr(e){return"[object Function]"===Cr.call(e)}var jr=Dr("URLSearchParams");function Lr(e,t){if(null!=e)if("object"!==$(e)&&(e=[e]),Rr(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var Vr,Kr=(Vr="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return Vr&&e instanceof Vr}),Fr={isArray:Rr,isArrayBuffer:zr,isBuffer:function(e){return null!==e&&!Or(e)&&null!==e.constructor&&!Or(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Cr.call(e)===t||Gr(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&zr(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ir,isPlainObject:Mr,isUndefined:Or,isDate:Br,isFile:Pr,isBlob:Nr,isFunction:Gr,isStream:function(e){return Ir(e)&&Gr(e.pipe)},isURLSearchParams:jr,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Lr,merge:function e(){var t={};function n(n,i){Mr(t[i])&&Mr(n)?t[i]=e(t[i],n):Mr(n)?t[i]=e({},n):Rr(n)?t[i]=n.slice():t[i]=n}for(var i=0,o=arguments.length;i<o;i++)Lr(arguments[i],n);return t},extend:function(e,t,n){return Lr(t,(function(t,i){e[i]=n&&"function"==typeof t?xr(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var i,o,r,a={};t=t||{};do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a[r=i[o]]||(t[r]=e[r],a[r]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Tr,kindOfTest:Dr,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return-1!==i&&i===n},toArray:function(e){if(!e)return null;var t=e.length;if(Or(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:Kr,isFileList:Ur};function Hr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var qr=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Fr.isURLSearchParams(t))i=t.toString();else{var o=[];Fr.forEach(t,(function(e,t){null!=e&&(Fr.isArray(e)?t+="[]":e=[e],Fr.forEach(e,(function(e){Fr.isDate(e)?e=e.toISOString():Fr.isObject(e)&&(e=JSON.stringify(e)),o.push(Hr(t)+"="+Hr(e))})))})),i=o.join("&")}if(i){var r=e.indexOf("#");-1!==r&&(e=e.slice(0,r)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e};function $r(){this.handlers=[]}$r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},$r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},$r.prototype.forEach=function(e){Fr.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Wr=$r,Jr=function(e,t){Fr.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))};function Xr(e,t,n,i,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}Fr.inherits(Xr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Yr=Xr.prototype,Zr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){Zr[e]={value:e}})),Object.defineProperties(Xr,Zr),Object.defineProperty(Yr,"isAxiosError",{value:!0}),Xr.from=function(e,t,n,i,o,r){var a=Object.create(Yr);return Fr.toFlatObject(e,a,(function(e){return e!==Error.prototype})),Xr.call(a,e.message,t,n,i,o),a.name=e.name,r&&Object.assign(a,r),a};var Qr=Xr,ea={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var ta=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":Fr.isDate(e)?e.toISOString():Fr.isArrayBuffer(e)||Fr.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(o,r){if(Fr.isPlainObject(o)||Fr.isArray(o)){if(-1!==n.indexOf(o))throw Error("Circular reference detected in "+r);n.push(o),Fr.forEach(o,(function(n,o){if(!Fr.isUndefined(n)){var a,s=r?r+"."+o:o;if(n&&!r&&"object"===$(n))if(Fr.endsWith(o,"{}"))n=JSON.stringify(n);else if(Fr.endsWith(o,"[]")&&(a=Fr.toArray(n)))return void a.forEach((function(e){!Fr.isUndefined(e)&&t.append(s,i(e))}));e(n,s)}})),n.pop()}else t.append(r,i(o))}(e),t},na=Fr.isStandardBrowserEnv()?{write:function(e,t,n,i,o,r){var a=[];a.push(e+"="+encodeURIComponent(t)),Fr.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Fr.isString(i)&&a.push("path="+i),Fr.isString(o)&&a.push("domain="+o),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ia=function(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t},oa=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ra=Fr.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=Fr.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function aa(e){Qr.call(this,null==e?"canceled":e,Qr.ERR_CANCELED),this.name="CanceledError"}Fr.inherits(aa,Qr,{__CANCEL__:!0});var sa=aa,ca=function(e){return new Promise((function(t,n){var i,o=e.data,r=e.headers,a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}Fr.isFormData(o)&&Fr.isStandardBrowserEnv()&&delete r["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.Authorization="Basic "+btoa(u+":"+l)}var f=ia(e.baseURL,e.url);function h(){if(c){var i="getAllResponseHeaders"in c?function(e){var t,n,i,o={};return e?(Fr.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=Fr.trim(e.substr(0,i)).toLowerCase(),n=Fr.trim(e.substr(i+1)),t){if(o[t]&&oa.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}(c.getAllResponseHeaders()):null;!function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Qr("Request failed with status code "+n.status,[Qr.ERR_BAD_REQUEST,Qr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:i,config:e,request:c}),c=null}}if(c.open(e.method.toUpperCase(),qr(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new Qr("Request aborted",Qr.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Qr("Network Error",Qr.ERR_NETWORK,e,c,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||ea;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Qr(t,i.clarifyTimeoutError?Qr.ETIMEDOUT:Qr.ECONNABORTED,e,c)),c=null},Fr.isStandardBrowserEnv()){var d=(e.withCredentials||ra(f))&&e.xsrfCookieName?na.read(e.xsrfCookieName):void 0;d&&(r[e.xsrfHeaderName]=d)}"setRequestHeader"in c&&Fr.forEach(r,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete r[t]:c.setRequestHeader(t,e)})),Fr.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(i=function(e){c&&(n(!e||e&&e.type?new sa:e),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i))),o||(o=null);var p,g=(p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f))&&p[1]||"";g&&-1===["http","https","file"].indexOf(g)?n(new Qr("Unsupported protocol "+g+":",Qr.ERR_BAD_REQUEST,e)):c.send(o)}))},ua={"Content-Type":"application/x-www-form-urlencoded"};function la(e,t){!Fr.isUndefined(e)&&Fr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var fa,ha={transitional:ea,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(fa=ca),fa),transformRequest:[function(e,t){if(Jr(t,"Accept"),Jr(t,"Content-Type"),Fr.isFormData(e)||Fr.isArrayBuffer(e)||Fr.isBuffer(e)||Fr.isStream(e)||Fr.isFile(e)||Fr.isBlob(e))return e;if(Fr.isArrayBufferView(e))return e.buffer;if(Fr.isURLSearchParams(e))return la(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=Fr.isObject(e),o=t&&t["Content-Type"];if((n=Fr.isFileList(e))||i&&"multipart/form-data"===o){var r=this.env&&this.env.FormData;return ta(n?{"files[]":e}:e,r&&new r)}return i||"application/json"===o?(la(t,"application/json"),function(e,t,n){if(Fr.isString(e))try{return(t||JSON.parse)(e),Fr.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||ha.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&Fr.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw Qr.from(e,Qr.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Fr.forEach(["delete","get","head"],(function(e){ha.headers[e]={}})),Fr.forEach(["post","put","patch"],(function(e){ha.headers[e]=Fr.merge(ua)}));var da=ha,pa=function(e,t,n){var i=this||da;return Fr.forEach(n,(function(n){e=n.call(i,e,t)})),e},ga=function(e){return!(!e||!e.__CANCEL__)};function va(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sa}var ma=function(e){return va(e),e.headers=e.headers||{},e.data=pa.call(e,e.data,e.headers,e.transformRequest),e.headers=Fr.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Fr.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||da.adapter)(e).then((function(t){return va(e),t.data=pa.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return ga(t)||(va(e),t&&t.response&&(t.response.data=pa.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},_a=function(e,t){t=t||{};var n={};function i(e,t){return Fr.isPlainObject(e)&&Fr.isPlainObject(t)?Fr.merge(e,t):Fr.isPlainObject(t)?Fr.merge({},t):Fr.isArray(t)?t.slice():t}function o(n){return Fr.isUndefined(t[n])?Fr.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function r(e){if(!Fr.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return Fr.isUndefined(t[n])?Fr.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function s(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return Fr.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);Fr.isUndefined(i)&&t!==s||(n[e]=i)})),n},ya="0.27.2",ba=ya,Ea={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Ea[e]=function(n){return $(n)===e||"a"+(t<1?"n ":" ")+e}}));var ka={};Ea.transitional=function(e,t,n){function i(e,t){return"[Axios v"+ba+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,r){if(!1===e)throw new Qr(i(o," has been removed"+(t?" in "+t:"")),Qr.ERR_DEPRECATED);return t&&!ka[o]&&(ka[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,r)}};var wa={assertOptions:function(e,t,n){if("object"!==$(e))throw new Qr("options must be an object",Qr.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),o=i.length;o-- >0;){var r=i[o],a=t[r];if(a){var s=e[r],c=void 0===s||a(s,r,e);if(!0!==c)throw new Qr("option "+r+" must be "+c,Qr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Qr("Unknown option "+r,Qr.ERR_BAD_OPTION)}},validators:Ea},Sa=wa.validators;function Aa(e){this.defaults=e,this.interceptors={request:new Wr,response:new Wr}}Aa.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=_a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&wa.assertOptions(n,{silentJSONParsing:Sa.transitional(Sa.boolean),forcedJSONParsing:Sa.transitional(Sa.boolean),clarifyTimeoutError:Sa.transitional(Sa.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var r,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!o){var s=[ma,void 0];for(Array.prototype.unshift.apply(s,i),s=s.concat(a),r=Promise.resolve(t);s.length;)r=r.then(s.shift(),s.shift());return r}for(var c=t;i.length;){var u=i.shift(),l=i.shift();try{c=u(c)}catch(e){l(e);break}}try{r=ma(c)}catch(e){return Promise.reject(e)}for(;a.length;)r=r.then(a.shift(),a.shift());return r},Aa.prototype.getUri=function(e){e=_a(this.defaults,e);var t=ia(e.baseURL,e.url);return qr(t,e.params,e.paramsSerializer)},Fr.forEach(["delete","get","head","options"],(function(e){Aa.prototype[e]=function(t,n){return this.request(_a(n||{},{method:e,url:t,data:(n||{}).data}))}})),Fr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,o){return this.request(_a(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Aa.prototype[e]=t(),Aa.prototype[e+"Form"]=t(!0)}));var xa=Aa;function Ca(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new sa(e),t(n.reason))}))}Ca.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ca.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},Ca.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},Ca.source=function(){var e,t=new Ca((function(t){e=t}));return{token:t,cancel:e}};var Ta=Ca;var Da=function e(t){var n=new xa(t),i=xr(xa.prototype.request,n);return Fr.extend(i,xa.prototype,n),Fr.extend(i,n),i.create=function(n){return e(_a(t,n))},i}(da);Da.Axios=xa,Da.CanceledError=sa,Da.CancelToken=Ta,Da.isCancel=ga,Da.VERSION=ya,Da.toFormData=ta,Da.AxiosError=Qr,Da.Cancel=Da.CanceledError,Da.all=function(e){return Promise.all(e)},Da.spread=function(e){return function(t){return e.apply(null,t)}},Da.isAxiosError=function(e){return Fr.isObject(e)&&!0===e.isAxiosError};var Ra=Da,Oa=Da;Ra.default=Oa;var za=Ra,Ia=ci((function(e,t){!function(n,i){var o="function",r="undefined",a="object",s="string",c="major",u="model",l="name",f="type",h="vendor",d="version",p="architecture",g="console",v="mobile",m="tablet",_="smarttv",y="wearable",b="embedded",E="Amazon",k="Apple",w="ASUS",S="BlackBerry",A="Firefox",x="Google",C="Huawei",T="LG",D="Microsoft",R="Motorola",O="Opera",z="Samsung",I="Sharp",M="Sony",B="Xiaomi",P="Zebra",N="Facebook",U="Chromium OS",G="Mac OS",j=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},L=function(e,t){return $(e)===s&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},K=function(e,t){if($(e)===s)return e=e.replace(/^\s\s*/,""),$(t)===r?e:e.substring(0,500)},F=function(e,t){for(var n,r,s,c,u,l,f=0;f<t.length&&!u;){var h=t[f],d=t[f+1];for(n=r=0;n<h.length&&!u&&h[n];)if(u=h[n++].exec(e))for(s=0;s<d.length;s++)l=u[++r],$(c=d[s])===a&&c.length>0?2===c.length?$(c[1])==o?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?$(c[1])!==o||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):i:this[c[0]]=l?c[1].call(this,l,c[2]):i:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):i):this[c]=l||i;f+=2}},H=function(e,t){for(var n in t)if($(t[n])===a&&t[n].length>0){for(var o=0;o<t[n].length;o++)if(L(t[n][o],e))return"?"===n?i:n}else if(L(t[n],e))return"?"===n?i:n;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,d],[/opios[\/ ]+([\w\.]+)/i],[d,[l,"Opera Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[d,[l,"Opera GX"]],[/\bopr\/([\w\.]+)/i],[d,[l,O]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[d,[l,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,d],[/\bddg\/([\w\.]+)/i],[d,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[l,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[d,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[d,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[d,[l,"Smart Lenovo Browser"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure Browser"],d],[/\bfocus\/([\w\.]+)/i],[d,[l,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[d,[l,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[l,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[l,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[d,[l,A]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 Browser"]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 Browser"],d],[/samsungbrowser\/([\w\.]+)/i],[d,[l,"Samsung Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],d],[/metasr[\/ ]?([\d\.]+)/i],[d,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[l,d],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,N],d],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[d,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[l,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,"Chrome WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[d,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[l,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,d],[/(cobalt)\/([\w\.]+)/i],[l,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,V]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,z],[f,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,z],[f,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[h,k],[f,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,k],[f,m]],[/(macintosh);/i],[u,[h,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,I],[f,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,C],[f,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,C],[f,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[h,B],[f,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,B],[f,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[f,v]],[/\b(opd2\d{3}a?) bui/i],[u,[h,"OPPO"],[f,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[f,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[f,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,R],[f,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,R],[f,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,T],[f,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,T],[f,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[f,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[f,v]],[/(pixel c)\b/i],[u,[h,x],[f,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,x],[f,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,M],[f,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,M],[f,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[f,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,E],[f,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,E],[f,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[f,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,S],[f,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,w],[f,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,w],[f,v]],[/(nexus 9)/i],[u,[h,"HTC"],[f,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[f,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[f,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[f,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[h,"Ulefone"],[f,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[f,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[f,m]],[/(surface duo)/i],[u,[h,D],[f,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[f,v]],[/(u304aa)/i],[u,[h,"AT&T"],[f,v]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[f,v]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[f,m]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[f,m]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[f,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[f,m]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[f,m]],[/\b(k88) b/i],[u,[h,"ZTE"],[f,m]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[f,v]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[f,v]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[f,m]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[f,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[f,m]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[f,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[f,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[f,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[f,v]],[/\b(ph-1) /i],[u,[h,"Essential"],[f,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[f,m]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[f,m]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[f,m]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[f,m]],[/(sprint) (\w+)/i],[h,u,[f,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,D],[f,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,P],[f,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,P],[f,v]],[/smart-tv.+(samsung)/i],[h,[f,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,z],[f,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,T],[f,_]],[/(apple) ?tv/i],[h,[u,"Apple TV"],[f,_]],[/crkey/i],[[u,"Chromecast"],[h,x],[f,_]],[/droid.+aft(\w+)( bui|\))/i],[u,[h,E],[f,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,I],[f,_]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,M],[f,_]],[/(mitv-\w{5}) bui/i],[u,[h,B],[f,_]],[/Hbbtv.*(technisat) (.*);/i],[h,u,[f,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,K],[u,K],[f,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[f,g]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[f,g]],[/(playstation [345portablevi]+)/i],[u,[h,M],[f,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,D],[f,g]],[/((pebble))app/i],[h,u,[f,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[h,k],[f,y]],[/droid.+; (glass) \d/i],[u,[h,x],[f,y]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,P],[f,y]],[/(quest( \d| pro)?)/i],[u,[h,N],[f,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[f,b]],[/(aeobc)\b/i],[u,[h,E],[f,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[f,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[f,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,d],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[d,H,q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,H,q],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,G],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,d],[/\(bb(10);/i],[d,[l,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[l,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[d,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[d,[l,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,U],d],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,d],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,d]]},J=function e(t,c){if($(t)===a&&(c=t,t=i),!(this instanceof e))return new e(t,c).getResult();var u=$(n)!==r&&n.navigator?n.navigator:i,l=t||(u&&u.userAgent?u.userAgent:""),f=u&&u.userAgentData?u.userAgentData:i,h=c?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(W,c):W,d=u&&u.userAgent==l;return this.getBrowser=function(){var e,t={};return t.name=i,t.version=i,F.call(t,l,h.browser),t.major=$(e=t.version)===s?e.replace(/[^\d\.]/g,"").split(".")[0]:i,d&&u&&u.brave&&$(u.brave.isBrave)==o&&(t.name="Brave"),t},this.getCPU=function(){var e={};return e.architecture=i,F.call(e,l,h.cpu),e},this.getDevice=function(){var e={};return e.vendor=i,e.model=i,e.type=i,F.call(e,l,h.device),d&&!e.type&&f&&f.mobile&&(e.type=v),d&&"Macintosh"==e.model&&u&&$(u.standalone)!==r&&u.maxTouchPoints&&u.maxTouchPoints>2&&(e.model="iPad",e.type=m),e},this.getEngine=function(){var e={};return e.name=i,e.version=i,F.call(e,l,h.engine),e},this.getOS=function(){var e={};return e.name=i,e.version=i,F.call(e,l,h.os),d&&!e.name&&f&&f.platform&&"Unknown"!=f.platform&&(e.name=f.platform.replace(/chrome os/i,U).replace(/macos/i,G)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return l},this.setUA=function(e){return l=$(e)===s&&e.length>500?K(e,500):e,this},this.setUA(l),this};J.VERSION="1.0.38",J.BROWSER=j([l,d,c]),J.CPU=j([p]),J.DEVICE=j([u,h,f,g,v,_,m,y,b]),J.ENGINE=J.OS=j([l,d]),e.exports&&(t=e.exports=J),t.UAParser=J;var X=$(n)!==r&&(n.jQuery||n.Zepto);if(X&&!X.ua){var Y=new J;X.ua=Y.getResult(),X.ua.get=function(){return Y.getUA()},X.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"===("undefined"==typeof window?"undefined":$(window))?window:si)}));Ia.UAParser;var Ma,Ba,Pa,Na,Ua,Ga,ja={},La=function(){var e,t,n,i;if(Object.keys(ja).length)return ja;var o=(new Ia).getResult(),r=o.browser,a=o.os;return ja={platform:"Web",browser:null!=(e=null==r?void 0:r.name)?e:"",browser_version:null!=(t=null==r?void 0:r.version)?t:"",os:null!=(n=null==a?void 0:a.name)?n:"",os_version:null!=(i=null==a?void 0:a.version)?i:""}},Va="1.1.4",Ka="_ccfs_".concat(Va),Fa="".concat(Ka,"_consent"),Ha="".concat(Ka,"_notifications"),qa="pns_consent_system",$a=function(e){return e.US_EAST="US-East",e.US_EASTRED="US-EastRed",e.SINGAPORE_CENTRAL="Singapore-Central",e.EU_TTP="EU-TTP",e.EU_TTP2="EU-TTP2",e.US_TTP="US-TTP",e.US_TTP2="US-TTP2",e}($a||{}),Wa=function(e){return e.PRODUCTION="production",e.DEV="dev",e.BOE="boe",e}(Wa||{}),Ja=function(){function e(){F(this,e),this.region="",this.bid="",this.debug=!1}return q(e,[{key:"init",value:function(e){var t=null!=e?e:{},n=t.region,i=void 0===n?"":n,o=t.bid,r=void 0===o?"":o,a=t.debug,s=void 0!==a&&a;this.region=i,this.bid=r,this.debug=s}},{key:"send",value:function(e){}},{key:"info",value:function(e,t){}},{key:"warn",value:function(e,t){}},{key:"error",value:function(e,t){}},{key:"getMeta",value:function(){return{version:Va,bid:this.bid,region:this.region}}},{key:"reportCUJ",value:function(e,t,n){}},{key:"destruct",value:function(){}}]),e}(),Xa=function(e){return e.beforeFetchUserInfo="beforeFetchUserInfo",e.afterFetchUserInfo="afterFetchUserInfo",e.beforeFetchConsentData="beforeFetchConsentData",e.afterFetchConsentData="afterFetchConsentData",e.beforeFetchNotificationData="beforeFetchNotificationData",e.afterFetchNotificationData="afterFetchNotificationData",e.beforeUpdateRecords="beforeUpdateRecords",e.afterUpdateRecords="afterUpdateRecords",e.beforeNotify="beforeNotify",e.afterNotify="afterNotify",e.beforeRemoveNotification="beforeRemoveNotification",e.afterRemoveNotification="afterRemoveNotification",e.beforeThirdPartyApprove="beforeThirdPartyApprove",e.afterThirdPartyApprove="afterThirdPartyApprove",e.beforeThirdPartyReject="beforeThirdPartyReject",e.afterThirdPartyReject="afterThirdPartyReject",e}(Xa||{}),Ya=function(e){return e.sessionStorage="sessionStorage",e.localStorage="localStorage",e.inMem="inMem",e}(Ya||{}),Za=function(e){return e.INFO="info",e.WARN="warn",e.ERROR="error",e}(Za||{}),Qa=function(e){return e.UNSUPPORTED="Unsupported",e.APPROVE="Approve",e.REJECT="Reject",e.NOT_DETERMINED="NotDetermined",e.PENDING_REVIEW="PENDING_REVIEW",e.REVOKE="REVOKE",e}(Qa||{}),es=(S(n={},"Unsupported",0),S(n,"Approve",1),S(n,"Reject",2),S(n,"NotDetermined",3),S(n,"PENDING_REVIEW",4),S(n,"REVOKE",5),n),ts=function(e){return e.DEVICE_ID="DeviceID",e.USER_ID="UserID",e.ANY="Any",e.BOTH="Both",e}(ts||{}),ns=function(e){return e.DEVICE_CONSENT="device",e.USER_CONSENT="user",e.BOTH_CONSENT="both",e.NOTIFICATION="notification",e}(ns||{}),is=function(e){return e.V1="v1",e.V2="v2",e}(is||{}),os=function(){var e,t,n;return(null===(t=performance)||void 0===t||null===(e=t.timing)||void 0===e?void 0:e.navigationStart)||(null===(n=performance)||void 0===n?void 0:n.timeOrigin)},rs=function(e){var t=0;try{performance.mark("error"),t=performance.measure("navigationStart_to_error","navigationStart","error").duration,performance.clearMarks("error"),performance.clearMeasures("navigationStart_to_error")}catch(e){t=Date.now()-os()}"object"===$(e)&&(e._triggerTime=t)},as=function(e){try{var t=e.error;rs(t)}catch(e){}},ss=function(){window._bound_error_time||(window._bound_error_time=!0,"development"===process.env.NODE_ENV?window.addEventListener("error",as,!0):function(){var e;if(null===(e=console)||void 0===e?void 0:e.error){var t=console.error;console.error=function(e){rs(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];t.apply(void 0,[e].concat(i))}}}())};(Ba=Ma||(Ma={})).CUSTOM="CUSTOM",Ba.ACTUAL_FMP="ACTUAL_FMP",(Na=Pa||(Pa={})).ABORT="ABORT",Na.CRASH="CRASH",(Ga=Ua||(Ua={})).START="START",Ga.IN_PROGRESS="IN_PROGRESS",Ga.FAILURE="FAILURE",Ga.FINISH="FINISH",Ga.ABORT="ABORT";var cs={},us=function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=!1,r=!1,a=!1,s=!1,c=!1,u=-1,l="",f="",h={},d=function(){function i(){var d=this,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return F(this,i),this._pageReadyTiming=Ma.ACTUAL_FMP,this.init=function(i){try{if(s)return;s=!0;var o=null!=i?i:{},r=o.slardarContainer,a=o.slardarWindowGlobalName,c=o.slardarHybridGlobalName,u=o.sparkMonitor,h=o.pageReadyTiming,p=void 0===h?Ma.CUSTOM:h,g=o.reportActualFMP;"string"==typeof a&&(l=a),"string"==typeof c&&(f=c),"function"==typeof g&&(n=g),void 0!==r&&"function"==typeof r.sendEvent&&"function"==typeof r.reportActualFMP&&(e=r),void 0!==u&&(t=u),d._pageReadyTiming=p,ss(),d._registerUserDropEvent()}catch(e){}},this._registerUserDropEvent=function(){window.addEventListener("beforeunload",d.reportUserDrop,!0)},this.reportPageReady=function(){if(!(o||a||r)){d._pageReadyTiming===Ma.ACTUAL_FMP&&d.reportActualFMP(),o=!0;var e=0;try{performance.mark("pageReady"),e=performance.measure("navigationStart_to_pageReady","navigationStart","pageReady").duration}catch(t){e=Date.now()-os()}u=e,d._sendEvent({name:"page_ready",metrics:{time:e}})}},this.reportUserDrop=function(){if(!o&&!a){a=!0;var e=0;try{performance.mark("userDrop"),e=performance.measure("navigationStart_to_userDrop","navigationStart","userDrop").duration}catch(t){e=Date.now()-os()}d._sendEvent({name:"user_drop",metrics:{time:e},categories:{reason:r?Pa.CRASH:Pa.ABORT}})}},this.reportPageCrash=function(e){var t,n,i,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2?arguments[2]:void 0;if(!a&&!r){r=!0;var l=null!=e?e:{},f=l.name,h=void 0===f?"":f,p=l.message,g=l.stack,v=l._triggerTime,m=void 0===v?0:v,_=0;if(!_)try{performance.mark("pageCrashReporting"),_=performance.measure("navigationStart_to_pageCrashReporting","navigationStart","pageCrashReporting").duration}catch(e){_=Date.now()-os()}var y,b,E,k=s?m:_;d._sendEvent({name:"page_crash",metrics:{time:null!=k?k:0},categories:{isTriggeredBeforePageReady:k<u||!o,isReportedBeforePageReady:_<u||!o,name:h,message:null!==(y=null==p||null===(t=p.substring)||void 0===t?void 0:t.call(p,0,256))&&void 0!==y?y:"",stack:null!==(b=null==g||null===(n=g.substring)||void 0===n?void 0:n.call(g,0,256))&&void 0!==b?b:"",componentStack:null!==(E=null==c||null===(i=c.substring)||void 0===i?void 0:i.call(c,0,256))&&void 0!==E?E:""}})}},this.reportActualFMP=function(){try{if(c)return;c=!0,"function"==typeof(null==t?void 0:t.mark)&&t.mark("fmp"),n&&n(),"function"==typeof(null==e?void 0:e.reportActualFMP)&&e.reportActualFMP()}catch(e){}},this.reportCUJ=function(e,t,n){var i,o,r="cuj_".concat(e,"_").concat(Ua.START),a="cuj_".concat(e,"_").concat(t).replace(/\s/g,"_"),s=0,c=0;try{performance.mark(a),s=performance.measure("navigationStart_to_".concat(a),"navigationStart",a).duration,c=performance.measure("".concat(r,"_to_").concat(a),r,a).duration}catch(n){if(s=Date.now()-os(),t===Ua.START)h[e]=S({},Ua.START,Date.now()),c=0;else{if(!h[e])return;var u;h[e][t]=Date.now(),c=h[e][t]-(null!==(u=h[e][Ua.START])&&void 0!==u?u:0)}}var l,f,p,g,v=null!=n?n:{},m=v.error,_=v.detail,y=v.stepName,b="string"==typeof m?m:null!==(l=null==m?void 0:m.toString())&&void 0!==l?l:"",E=_||(null!==(f=null==m?void 0:m.stack)&&void 0!==f?f:"");d._sendEvent({name:"pns_cuj",metrics:{timestamp:s,duration:c},categories:{status:t,name:e,stepName:y,error:null!==(p=null==b||null===(i=b.substring)||void 0===i?void 0:i.call(b,0,256))&&void 0!==p?p:"",detail:null!==(g=null==E||null===(o=E.substring)||void 0===o?void 0:o.call(E,0,256))&&void 0!==g?g:""}})},p?(cs[p]=this,this):(i._instance||(i._instance=this),i._instance)}return q(i,[{key:"_sendEvent",value:function(){try{for(var t,n,i,o,r,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];if(l&&"function"==typeof(null===(t=window)||void 0===t?void 0:t[l]))(i=window)[l].apply(i,["sendEvent"].concat(s));if(f&&"function"==typeof(null===(n=window)||void 0===n?void 0:n[f]))(o=window)[f].apply(o,["sendEvent"].concat(s));if(e)(r=e).sendEvent.apply(r,s)}catch(e){}}},{key:"resetForSPA",value:function(){c=!1,o=!1,r=!1,a=!1,u=-1,h={}}},{key:"reset",value:function(){this.resetForSPA(),s=!1,e=null,l="",f="",t=null,n=null}},{key:"isInitialized",value:function(){return s}}]),i}();return i?(cs[i]||(cs[i]=new d(i)),cs[i]):new d};us();var ls=function(e){return e.SDK_INIT="sdk_init",e.FETCH_DATA="fetch_data",e.UPDATE_RECORD="update_record",e.GET_RECORD="get_record",e.GET_RECORDS="get_records",e.GET_ENTITY="get_entity",e.GET_ENTITIES="get_entities",e.SUBSCRIBE_EVENT="subscribe_event",e.UNSUBSCRIBE_EVENT="unsubscribe_event",e}(ls||{}),fs=(S(i={},"sdk_init","consent_init_sdk"),S(i,"fetch_data","consent_fetch_data"),S(i,"update_record","consent_create_record_api"),S(i,"get_record","consent_get_record"),S(i,"get_records","consent_get_records"),S(i,"get_entity","consent_get_entity"),S(i,"get_entities","consent_get_entities"),S(i,"subscribe_event","consent_subscribe_event"),S(i,"unsubscribe_event","consent_unsubscribe_event"),i),hs=ci((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function o(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}var r=function(e){return JSON.stringify({ev_type:"batch",list:e})};var a=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],s=function(){return{}};function c(e){return e}function u(e){return"object"===$(e)&&null!==e}var l=Object.prototype;function f(e){if(u(e)){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===l||null===t}return"[object Object]"===l.toString.call(e)}return!1}function h(e){return"[object Array]"===l.toString.call(e)}function d(e){return"function"==typeof e}function p(e){return"number"==typeof e}function g(e){return"string"==typeof e}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){var i=n({},e);for(var o in t)v(t,o)&&void 0!==t[o]&&(u(t[o])&&f(t[o])?i[o]=m(u(e[o])?e[o]:{},t[o]):h(t[o])&&h(e[o])?i[o]=_(e[o],t[o]):i[o]=t[o]);return i}function _(e,t){var n=h(e)?e:[],i=h(t)?t:[];return Array.prototype.concat.call(n,i).map((function(e){return e instanceof RegExp?e:u(e)&&f(e)?m({},e):h(e)?_([],e):e}))}function y(e,t){if(!h(e))return!1;if(0===e.length)return!1;for(var n=0;n<e.length;){if(e[n]===t)return!0;n++}return!1}var b=function(e,t){if(!h(e))return e;var n=e.indexOf(t);if(n>=0){var i=e.slice();return i.splice(n,1),i}return e},E=function(e,t,n){for(var o,r=i(t.split(".")),a=r[0],s=r.slice(1);e&&s.length>0;)e=e[a],a=(o=i(s))[0],s=o.slice(1);if(e)return n(e,a)},k=function(e,t,n){return E(e,t,(function(e,t){if(e&&t in e&&d(e[t]))try{return e[t].apply(e,n)}catch(e){return}}))};function w(e){return h(e)&&e.length?function(e){for(var t=[],n=e.length,i=0;i<n;i++){var o=e[i];g(o)?t.push(o.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):o&&o.source&&t.push(o.source)}return new RegExp(t.join("|"),"i")}(e):null}var S=function(e,t){var n=w(e||[]);return!!n&&n.test(t)};function A(e){try{return g(e)?e:JSON.stringify(e)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var x=function(e,t,n,r){return void 0===r&&(r=!0),function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(!e)return s;var u=e[t],l=n.apply(void 0,o([u],i(a),!1)),f=l;return d(f)&&r&&(f=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return l.apply(this,e)}catch(t){return d(u)&&u.apply(this,e)}}),e[t]=f,function(n){n||(f===e[t]?e[t]=u:l=u)}}},C=function(e,t,n){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(!e)return s;var c=e[t],u=n.apply(void 0,o([c],i(r),!1)),l=u;return d(l)&&(l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.apply(this,e)}),e[t]=l,function(){l===e[t]?e[t]=c:u=c}}},T="".padStart?function(e,t){return void 0===t&&(t=8),e.padStart(t," ")}:function(e){return e},D=0,R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,o(["[SDK]",Date.now(),T(""+D++)],i(e),!1))},O=0,z=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,o(["[SDK]",Date.now(),T(""+O++)],i(e),!1))},I=function(e){return Math.random()<Number(e)},M=function(e,t){return e<Number(t)},B=function(e){return function(t){for(var n=t,i=0;i<e.length&&n;i++)try{n=e[i](n)}catch(e){R(e)}return n}};function P(){var e=function(){for(var e=new Array(16),t=0,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),e[n]=t>>>((3&n)<<3)&255;return e}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);var i=0,o=t;return[o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]]].join("")}(e)}var N=function e(t,n){var i=[];try{i=n.reduce((function(e,n){try{var i=n(t);"function"==typeof i&&e.push(i)}catch(e){}return e}),[])}catch(e){}return function(t){return e(t,i)}},U=function(e){void 0===e&&(e=3e5);var t,n=[],i=[],o=!1,r=function(e,t,n){var i=0;return-1===n?s:function(){if(e())return i&&clearTimeout(i),void(i=0);0===i&&(i=setTimeout(t,n))}}((function(){return!!n.length}),(function(){o=!0,t&&t[0](),i.forEach((function(e){return e()})),i.length=0,t=void 0}),e),a=function(e){n=b(n,e),!o&&r()};return{next:function(e){return N(e,n)},complete:function(e){i.push(e)},attach:function(e,n){t=[e,n]},subscribe:function(e){if(o)throw new Error("Observer is closed");return n.push(e),t&&t[1]&&t[1](e),r(),function(){return a(e)}},unsubscribe:a}},G=function(e,t,n){var i=U(n);try{e(i.next,i.attach),t&&i.complete(t)}catch(e){}return[i.subscribe,i.unsubscribe]},j=function(e,t){var n=i(e,1)[0];return function(e,i){var o=n((function(n){var i,o=(i=t,function(e){for(var t=!0,n=0;n<i.length&&t;n++)try{t=i[n](e)}catch(e){R(e)}return t})(n);return o?e(n):s}));i((function(){o()}))}};var L=function(e,t,n,i){return e.destroyAgent.set(t,n,i)};function V(e){var t,n,r=e.builder,s=e.createSender,c=e.createDefaultConfig,l=e.createConfigManager,f=e.userConfigNormalizer,h=e.initConfigNormalizer,d=e.validateInitConfig,p={};a.forEach((function(e){return p[e]=[]}));var g=!1,v=!1,m=!1,_=[],E=[],k=function(){var e=!1,t={},n=function(e){e.length&&e.forEach((function(e){try{e()}catch(e){}})),e.length=0},i=function(e){t[e]&&t[e].forEach((function(e){n(e[1])})),t[e]=void 0};return{set:function(i,o,r){t[i]?t[i].push([o,r]):t[i]=[[o,r]],e&&n(r)},has:function(e){return!!t[e]},remove:i,removeByEvType:function(e){Object.keys(t).forEach((function(i){t[i]&&t[i].forEach((function(t){t[0]===e&&n(t[1])}))}))},clear:function(){e=!0,Object.keys(t).forEach((function(e){i(e)}))}}}(),w={getBuilder:function(){return r},getSender:function(){return t},getPreStartQueue:function(){return _},init:function(e){if(g)z("already inited");else{if(!(e&&u(e)&&d(e)))throw new Error("invalid InitConfig, init failed");var i=c(e);if(!i)throw new Error("defaultConfig missing");var o=h(e);if((n=l(i)).setConfig(o),n.onChange((function(){S("config")})),!(t=s(n.getConfig())))throw new Error("sender missing");g=!0,S("init",!0)}},set:function(e){g&&e&&u(e)&&(S("beforeConfig",!1,e),null==n||n.setConfig(e))},config:function(e){if(g)return e&&u(e)&&(S("beforeConfig",!1,e),null==n||n.setConfig(f(e))),null==n?void 0:n.getConfig()},provide:function(e,t){y(E,e)?z("cannot provide "+e+", reserved"):(w[e]=t,S("provide",!1,e))},start:function(){var e=this;g&&(v||null==n||n.onReady((function(){v=!0,S("start",!0),_.forEach((function(t){return e.build(t)})),_.length=0})))},report:function(e){if(e){var t=B(p.beforeReport)(e);if(t){var n=B(p.report)(t);n&&(v?this.build(n):_.push(n))}}},build:function(e){if(v){var t=B(p.beforeBuild)(e);if(t){var n=r.build(t);if(n){var i=B(p.build)(n);i&&this.send(i)}}}},send:function(e){if(v){var n=B(p.beforeSend)(e);n&&(t.send(n),S("send",!1,n))}},destroy:function(){k.clear(),m=!0,_.length=0,S("beforeDestroy",!0)},on:function(e,t){if("init"===e&&g||"start"===e&&v||"beforeDestroy"===e&&m)try{t()}catch(e){}else p[e]&&p[e].push(t)},off:function(e,t){p[e]&&(p[e]=b(p[e],t))},destroyAgent:k};return E=Object.keys(w),w;function S(e,t){void 0===t&&(t=!1);for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];p[e].forEach((function(e){try{e.apply(void 0,o([],i(n),!1))}catch(e){}})),t&&(p[e].length=0)}}var K=function(e){var t=function(){var e={},t={},i={set:function(n,o){return e[n]=o,t[n]=A(o),i},merge:function(o){return e=n(n({},e),o),Object.keys(o).forEach((function(e){t[e]=A(o[e])})),i},delete:function(n){return delete e[n],delete t[n],i},clear:function(){return e={},t={},i},get:function(e){return t[e]},toString:function(){return n({},t)}};return i}();e.provide("context",t),e.on("report",(function(e){return e.extra||(e.extra={}),e.extra.context=t.toString(),e}))};function F(e,t){return e.initSubject(t)}function H(e,t,n){var o=i(t,2),r=o[0],a=o[1],s=e.privateSubject||{};return s[r]||(s[r]=G(a,(function(){s[r]=void 0}),n)),s[r]}var q=function(){return Date.now()};function W(){if("object"===("undefined"==typeof window?"undefined":$(window))&&u(window))return window}function J(){if("object"===("undefined"==typeof document?"undefined":$(document))&&u(document))return document}function X(){return W()&&window.location}function Y(){return W()&&window.history}function Z(){if("function"==typeof XMLHttpRequest&&d(XMLHttpRequest))return XMLHttpRequest}function Q(){var e=function(){if(W()&&"navigator"in window)return window.navigator}();if(e)return e.connection||e.mozConnection||e.webkitConnection}function ee(){if(!document)return null;if(document.currentScript)return document.currentScript;try{throw new Error}catch(u){var e=0,t=/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i.exec(u.stack),n=t&&t[2]||!1,i=t&&t[3]||0,o=document.location.href.replace(document.location.hash,""),r="",a=document.getElementsByTagName("script");if(n===o){var s=document.documentElement.outerHTML,c=new RegExp("(?:[^\\n]+?\\n){0,"+(i-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i");r=s.replace(c,"$1").trim()}for(;e<a.length;e++){if("interactive"===a[e].readyState)return a[e];if(a[e].src===n)return a[e];if(n===o&&a[e].innerHTML&&a[e].innerHTML.trim()===r)return a[e]}return null}}function te(e){var t=J();if(!t||!e)return"";var n=t.createElement("a");return n.href=e,n.href}function ne(e){var t=J();if(!t||!e)return{url:e,protocol:"",domain:"",query:"",path:"",hash:""};var n=t.createElement("a");n.href=e;var i=n.pathname||"/";return"/"!==i[0]&&(i="/"+i),{url:n.href,protocol:n.protocol.slice(0,-1),domain:n.hostname,query:n.search.substring(1),path:i,hash:n.hash}}function ie(){var e=W()&&X();return e?e.href:""}var oe=function(e){var t,n=e.config(),i={pid:(t=n).pid,view_id:t.viewId,url:ie()};return i.context=e.context?e.context.toString():{},i},re=function(e,t){void 0===t&&(t=!1);var i=oe(e);return t&&(i.timestamp=q()),function(t){e.report(n(n({},t),{overrides:i}))}},ae=function(e){return function(t,n){var i=oe(e);n(s,(function(e){i&&e(i)}))}},se=function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar},ce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=se(W());n&&(n.errors||(n.errors=[]),n.errors.push(e))},ue=function(e){var t={url:ie(),timestamp:q()},n=e.config();return(null==n?void 0:n.pid)&&(t.pid=n.pid),(null==e?void 0:e.context)&&(t.context=e.context.toString()),t},le=function(e,t){return function(n){var i=function(e){return e.overrides=t,e};e.on("report",i),n(),e.off("report",i)}},fe=function(e,t,n,i){return void 0===i&&(i=!1),e.addEventListener(t,n,i),function(){e.removeEventListener(t,n,i)}},he=function(e,t,n,i){return void 0===i&&(i=!1),e.addEventListener(t,n,i),function(){e.removeEventListener(t,n,i)}};var de=function(e){var t=!1;return[function(n){t||(t=!0,e&&e(n))}]},pe=function(e,t){var n,i=J();if(i){var o=i.createElement("script");o.src=e,o.crossOrigin="anonymous",o.onload=t,null===(n=i.head)||void 0===n||n.appendChild(o)}},ge=function(e,t){return u(e)?n(n({},t),e):!!e&&t},ve=function(){return!!btoa&&!!atob};var me=function(e){try{var t=localStorage.getItem(e),n=t;t&&"string"==typeof t&&(n=JSON.parse((a=t,ve()?decodeURI(atob(a)):a)));var i=n,o=i.expires,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(i,["expires"]);return o>=q()?r:void 0}catch(e){return}var a},_e=function(e,t,i){var o;if(!(i<=0))try{localStorage.setItem(e,(o=JSON.stringify(n(n({},t),{expires:q()+i})),ve()?btoa(encodeURI(o)):o))}catch(e){}},ye=function(e){return!1===e?0:!0!==e&&void 0!==e&&p(e)?e:7776e6},be=function(){var e=new RegExp("\\/monitor_web\\/collect|\\/monitor_browser\\/collect\\/batch","i");return function(t){return e.test(t)}},Ee=function(e){return function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t=i(n,2),this._method=t[0],this._url=t[1],e.apply(this,n)}},ke=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._reqHeaders=this._reqHeaders||{};var o=i(t,2),r=o[0],a=o[1];return this._reqHeaders[r]=a,e&&e.apply(this,t)}},we=function(e,t){return C(e,"onreadystatechange",(function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return 4===this.readyState&&t(e),n&&n.apply(this,i)}}))},Se=function(e,t){var n=be();return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(this._start=q(),this._data=null==i?void 0:i[0],!n(this._url)){var r=t([this._method,this._url,this._start,this]);we(this,r)()}return e.apply(this,i)}},Ae=function(e){return function(t,n){if(e){var i=[];i.push(C(e,"open",Ee)()),i.push(C(e,"setRequestHeader",ke)()),i.push(C(e,"send",Se)(t)),n((function(){i.forEach((function(e){return e()}))}))}}},xe=function(e,t){return function(n,i){void 0===i&&(i={});var o=t([n,i]),r=e(n,i);return r.then((function(e){o(e)}),(function(){o(void 0)})),r}},Ce=["fetch_0",function(e,t){var n=W();if(n&&fetch){var i=[];i.push(C(n,"fetch",xe)(e)),t((function(){i.forEach((function(e){return e()}))}))}}],Te=["resource"],De=["resource_0",function(e,t){var n=function(){if(W()&&d(window.PerformanceObserver))return window.PerformanceObserver}();if(n){var o=be();t(function(e,t,n){var o=i(function(e,t,n){var i=e&&new e((function(e,i){e.getEntries?e.getEntries().forEach((function(e,n,o){return t(e,n,o,i)})):n&&n()}));return[function(t){if(!e||!i)return n&&n();try{i.observe({entryTypes:t})}catch(e){return n&&n()}},function(t,o){if(!e||!i)return n&&n();try{var r={type:t,buffered:!0};!function(e){return void 0===e}(o)&&(r.durationThreshold=o),i.observe(r)}catch(e){return n&&n()}i.observe({type:t,buffered:!1})},function(){return i&&i.disconnect()}]}(e,t),3),r=o[0],a=o[2];return r(n),a}(n,(function(t){!o(t.name)&&e(t)}),Te))}}],Re="pageview",Oe="session",ze="js_error",Ie="http",Me="custom",Be="action",Pe={sampleRate:1,origins:[]},Ne=function(){var e=window&&(window.crypto||window.msCrypto);if(void 0!==e&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t);var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}))},Ue=function(e){var t=ge(e,Pe);if(t&&I(t.sampleRate))return function(e,n){var i=t.origins;i.length&&S(i,e)&&n("traceparent","03-"+Ne()+"-"+Ne().substring(16)+"-01")}},Ge=new RegExp("(cookie|auth|jwt|token|key|ticket|secret|credential|session|password)","i"),je=new RegExp("(bearer|session)","i"),Le=function(e,t){return!e||!t||(Ge.test(e)||je.test(t))},Ve=function(e,t){try{if(t){var i=e.request.url;e.request.url=t(i),e.extra=n(n({},e.extra),{original_url:i})}}catch(e){}},Ke=function(e,t,n){var o=i(t,2),r=o[0],a=o[1],c=n.setTraceHeader,u=n.ignoreUrls,l=n.setContextAtReq,f=n.extractUrl;e.push(r[0]((function(e){var t=i(e,4);t[0];var o=t[1];t[2];var r=t[3];if(!o)return s;var h=te(o);if(S(u,h))return s;c&&c(h,(function(e,t){return r.setRequestHeader(e,t)}));var d=l(),p=void 0,g=a()[0]((function(e){h===e.name&&!p&&(p=e)}));return function(e){var t=Fe(e,n);setTimeout((function(){p&&(t.response.timing=p),Ve(t,f),d&&d({ev_type:Ie,payload:t}),g()}),100)}})))};var Fe=function(e,t){var n,o=e._method,r=e._reqHeaders,a=e._url,s=e._start,c=e._data,u={api:"xhr",request:{url:te(a),method:(o||"").toLowerCase(),headers:r&&(n=r,Object.keys(n).reduce((function(e,t){return!Le(t,n[t])&&(e[t.toLowerCase()]=n[t]),e}),{})),timestamp:s},response:{status:e.status||0,is_custom_error:!1,timestamp:q()},duration:q()-s};"function"==typeof e.getAllResponseHeaders&&(u.response.headers=function(e){return g(e)&&e?e.split("\r\n").reduce((function(e,t){if(g(t)){var n=i(t.split(": "),2),o=n[0],r=n[1];!Le(o,r)&&(e[o.toLowerCase()]=r)}return e}),{}):{}}(e.getAllResponseHeaders()));var l=u.response.status,f=t.collectBodyOnError,h=t.extraExtractor;try{var d=null==h?void 0:h(e.response,u,c);d&&(u.extra=d),d&&(u.response.is_custom_error=!0),f&&(d||l>=400)&&(u.request.body=c?""+c:void 0,u.response.body=e.response?""+e.response:void 0)}catch(e){}return u},He="ajax",qe={autoWrap:!0,setContextAtReq:function(){return c},ignoreUrls:[],collectBodyOnError:!1};var $e=function(e,t,n){var o=i(t,2),r=o[0],a=o[1],c=n.setTraceHeader,u=n.ignoreUrls,l=n.setContextAtReq,f=n.extractUrl,h=window.Headers,d=window.Request;d&&h&&e.push(r[0]((function(e){var t=i(e,2),o=t[0],r=t[1],p=te(o instanceof d?o.url:o);if(!We(p)||S(u,p))return s;c&&c(p,(function(e,t){return Xe(e,t,o,r,d,h)}));var g=l(),v=q(),m=void 0,_=a()[0]((function(e){p===e.name&&!m&&(m=e)}));return function(e){var t,i,a=et(o,r,e,d,h,n,v),s=(t=function(e){m&&(e.response.timing=m),Ve(e,f),g&&g({ev_type:Ie,payload:e}),_()},i=!1,function(e){i||(i=!0,t(e))});setTimeout((function(){s(a)}),1e3)}})))},We=function(e){if(!g(e))return!1;var t=i(e.split(":"),2),n=t[0];return!t[1]||"http"===n||"https"===n},Je=function(e,t){return e instanceof t},Xe=function(e,t,i,o,r,a){var s;Je(i,r)?i.headers.set(e,t):o.headers instanceof a?o.headers.set(e,t):o.headers=n(n({},o.headers),((s={})[e]=t,s))},Ye=function(e,t,n){var i=t&&t.method||"get";return Je(e,n)&&(i=e.method||i),i.toLowerCase()},Ze=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{return t.reduce((function(t,n){return new e(n||{}).forEach((function(e,n){return!Le(n,e)&&(t[n]=e)})),t}),{})}catch(e){return{}}},Qe=function(e,t,n){return Je(e,n)?e.body:null==t?void 0:t.body},et=function(e,t,n,i,o,r,a){var c={api:"fetch",request:{method:Ye(e,t,i),timestamp:a,url:te(e instanceof i?e.url:e),headers:Ze(o,e.headers,t.headers)},response:{status:n&&n.status||0,is_custom_error:!1,timestamp:q()},duration:q()-a},u=r.collectBodyOnError,l=r.extraExtractor,f=function(){var n;u&&(c.request.body=null===(n=Qe(e,t,i))||void 0===n?void 0:n.toString())};if(n)try{var h=Ze(o,n.headers);c.response.headers=h;try{-1!==(h["content-type"]||"").indexOf("application/json")&&l&&n.clone().json().then((function(n){var o,r=l(n,c,null===(o=Qe(e,t,i))||void 0===o?void 0:o.toString());r&&(c.extra=r,c.response.is_custom_error=!0,f())})).catch(s)}catch(e){}n.status>=400&&f()}catch(e){}else f();return c},tt="fetch",nt={autoWrap:!0,setContextAtReq:function(){return c},ignoreUrls:[],collectBodyOnError:!1};var it=["name","message","stack","filename","lineno","colno"],ot=function(e){var t,n;return!function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMError]":case"[object DOMException]":return!0;default:return e instanceof Error}}(e)?(f(e)||(n=e,"undefined"!=typeof Event&&function(e,t){try{return e instanceof t}catch(e){return!1}}(n,Event))||g(e))&&(t={message:A(e)}):t=function(e,t){return e&&u(e)?t.reduce((function(t,n){return t[n]=e[n],t}),{}):e}(e,it),t},rt=function(e){return t=e,"[object ErrorEvent]"===Object.prototype.toString.call(t)?ot(e.error):function(e){return"[object PromiseRejectionEvent]"===Object.prototype.toString.call(e)}(e)?function(e){var t;try{var i=void 0;if("reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason),i){var o=ot(i);return n(n({},o),{name:null!==(t=o&&o.name)&&void 0!==t?t:"UnhandledRejection"})}}catch(e){}}(e):ot(e);var t},at=function(e){return"hidden"===e.visibilityState},st=["hidden_3",function(e,t){var n=J(),i=W();if(n&&i){var o=function(t){e("pagehide"===t.type||at(n))},r=he(n,"visibilitychange",o,!0),a=fe(i,"pagehide",o,!0);t((function(){r(),a()}),(function(e){e(at(n))}))}}],ct=["unload_0",function(e,t){var n=W();if(n){var o=i(de(e),1)[0],r=function(){o()},a=[];["unload","beforeunload","pagehide"].forEach((function(e){a.push(fe(n,e,r,!1))})),t((function(){a.forEach((function(e){return e()}))}))}}],ut=["hash_0",function(e,t){var n=W();if(n){var i=fe(n,"hashchange",(function(){return e(location.href)}),!0);t((function(){i()}))}}],lt=["history_0",function(e,t){var n=Y(),i=W();if(n&&i){var o=[],r=function(){return e(location.href)},a=function(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];try{e.apply(n,t)}finally{r()}}};o.push(x(n,"pushState",a)(),x(n,"replaceState",a)()),o.push(fe(i,"popstate",r,!0)),t((function(){o.forEach((function(e){return e()}))}))}}],ft=function(e){return ht(e,q())},ht=function(e,t){return e+"_"+t},dt=function(e){return function(t,n){e(function(e,t){return{ev_type:Re,payload:{pid:t,source:e}}}(t,n))}},pt=function(e){return"manual"===e},gt=function(e,t){var n=e[0]+e[1]+e[2],i=e[0]/n;return e[2]/n>t.frustrating_threshold?2:i>t.satisfying_threshold||0===n?0:1},vt=function(e,t){return function(n,i){var o=n.payload;switch(n.ev_type){case"performance":var r=o.name;o.isSupport&&e(i.perf_apdex,r,o.value);break;case Be:e(i.perf_apdex,"action",o.duration||0);break;case ze:t(i.error_weight,0);break;case Ie:if(o.response.is_custom_error||o.response.status>=400)t(i.error_weight,1);else{var a=o.response.timing;a&&e(i.duration_apdex,0,a.duration)}break;case"resource_error":t(i.error_weight,2);break;case"blank_screen":t(i.error_weight,3);break;case"resource":e(i.duration_apdex,1,o.duration);break;case"performance_longtask":o.longtasks.forEach((function(t){e(i.duration_apdex,2,t.duration)}))}}},mt=function(){var e,t,n=function(){e=[0,0,0],t=function(){var e;return(e={error_count:[0,0,0,0],duration_count:[0,0,0]}).perf_apdex={},e}()};n();return[function(n,i,o){var r=n&&n[i];if(r&&!(o<=0)){var a=o<(r[0].threshold||0)?0:o>(r[1].threshold||0)?2:1;if(e[a]+=r[a].weight,"string"==typeof i){var s=ht(i,a),c=t.perf_apdex[s];t.perf_apdex[s]=(c||0)+1}else 2===a&&(t.duration_count[i]+=1)}},function(n,i){n&&(e[2]+=n[i],t.error_count[i]+=1)},function(){return[e,t]},n]},_t=function(e,t,n,o){var r,a,s=o.sendInit,c=o.initPid,u=o.routeMode,l=o.extractPid,f=o.onPidUpdate,h=pt(u)?function(){return""}:function(e){return function(t){var n;return"hash"===e?(null===(n=ne(t).hash)||void 0===n?void 0:n.replace(/^#/,""))||"/":ne(t).path}}(u),d=l||function(){},p=i(function(e,t,n,i){var o=n,r=t;return i&&i(t),[function(t,n,a){"user_set"!==t&&n!==o?(o=n,r=null!=a?a:o,i&&i(r),e(t,r)):"user_set"===t&&n!==r&&(r=n,i&&i(r),e(t,r))},function(){t&&e("init",t)}]}(dt(e),c||function(e){var t;return null!==(t=d(e))&&void 0!==t?t:h(e)}(location.href),h(location.href),f),2),g=p[0],v=p[1];if(!pt(u)){var m=i((r=function(e,t){return g(e,h(t),d(t))},a="",[function(e,t){t!==a&&r(e,a=t)}]),1)[0];n.length&&n.forEach((function(e){return t.push(e[0]((function(e){return m(u,e)})))}))}return s&&v(),[g.bind(null,"user_set")]},yt=function(e,t,n,o){var r,a,s,c=i(n,2),u=c[0],l=c[1],f=2===o.apdex,h=void 0,d=void 0,p=void 0,g=!1,v=i(mt(),4),m=v[0],_=v[1],y=v[2],b=v[3],E=i(mt(),4),k=E[0],w=E[1],S=E[2],A=E[3],x=i((r={start:q(),end:0,time_spent:0,is_bounced:!1,entry:"",exit:"",p_count:0,a_count:0},[function(e,t){var n=i(e,3),o=n[0],a=n[1],s=n[2];r.end=q(),r.time_spent+=t&&t.time_spent||0,r.last_page=t,r.p_count+=1,r.rank=o,r.apdex=a,r.apdex_detail=s;var c=J();c&&(r.is_bounced=!function(e){return"complete"===e.readyState}(c))},function(e,t){r.time_spent+=e.time_spent,r.p_count+=1,r.exit=t},function(){r.a_count+=1},function(e){r.entry=e,r.exit=e},function(){return r}]),5),C=x[0],T=x[1],D=x[2],R=x[3],O=x[4],z=i((a=0,s=void 0,[function(e){if(e){if(!s)return;a+=q()-s,s=void 0}else s=q()},function(){s&&(a+=q()-s);var e=a;return a=0,s=q(),e}]),2),I=z[0],M=z[1];t.push(u[0](I)),!f&&t.push(l[0]((function(){if(g){var t=i(S(),2),n=t[0],o=t[1],r=gt(n,p);C([r,n,o],N()),e({ev_type:Oe,payload:O()}),A()}})));var B=vt(m,_),P=vt(k,w),N=function(){var e=i(y(),2),t=e[0],n=e[1];return{start:h[0],pid:h[1],view_id:h[2],end:q(),time_spent:M(),apdex:t,rank:gt(t,p),detail:n}};return t.push((function(){g=!1})),[function(e,t){if(!h)return h=[q(),e,t],R(e),void(g=!(!p||!h));g&&(d=N(),T(d,e)),h=[q(),e,t],b()},function(e){g&&(f||(P(e,p),e.ev_type===Be&&D()),e.common.pid===h[1]&&B(e,p))},function(t){g&&(t.payload.last=d),e(t)},function(e){if(!e)return t.forEach((function(e){return e()})),void(t.length=0);g=!(!(p=e)||!h)}]},bt="pageview",Et={sendInit:!0,routeMode:"history",apdex:2};var kt=function(e){e.provide("sendEvent",(function(t){var n=function(e){if(e&&u(e)&&e.name&&g(e.name)){var t={name:e.name,type:"event"};if("metrics"in e&&u(e.metrics)){var n=e.metrics,i={};for(var o in n)p(n[o])&&(i[o]=n[o]);t.metrics=i}if("categories"in e&&u(e.categories)){var r=e.categories,a={};for(var o in r)a[o]=A(r[o]);t.categories=a}return"attached_log"in e&&g(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Me,payload:n,extra:{timestamp:q()}})})),e.provide("sendLog",(function(t){var n=function(e){if(e&&u(e)&&e.content&&g(e.content)){var t={content:A(e.content),type:"log",level:"info"};if("level"in e&&(t.level=e.level),"extra"in e&&u(e.extra)){var n=e.extra,i={},o={};for(var r in n)p(n[r])?i[r]=n[r]:o[r]=A(n[r]);t.metrics=i,t.categories=o}return"attached_log"in e&&g(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Me,payload:n,extra:{timestamp:q()}})}))};function wt(e){return(null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||""}var St=function(e,t){var n=e.common||{};return n.sample_rate=t,e.common=n,e},At=function(e,t,n,i,o){return e?function(e){return function(){return e}}(o(i,t)):function(){return n(t)}},xt=function(e,t,n,i){var o=E(e,t,(function(e,t){return e[t]}));if(void 0===o)return!1;var r=function(e){return"boolean"==typeof e}(o)?"bool":p(o)?"number":"string";return function(e,t,n){switch(n){case"eq":return y(t,e);case"neq":return!y(t,e);case"gt":return e>t[0];case"gte":return e>=t[0];case"lt":return e<t[0];case"lte":return e<=t[0];case"regex":return Boolean(e.match(new RegExp(t.join("|"))));case"not_regex":return!e.match(new RegExp(t.join("|")));default:return!1}}(o,function(e,t){return e.map((function(e){switch(t){case"number":return Number(e);case"boolean":return"1"===e;default:return String(e)}}))}(i,r),n)},Ct=function e(t,n){try{return"rule"===n.type?xt(t,n.field,n.op,n.values):"and"===n.type?n.children.every((function(n){return e(t,n)})):n.children.some((function(n){return e(t,n)}))}catch(e){return ce(e),!1}},Tt=function(e,t,n,i,o){if(!t)return c;var r=t.sample_rate,a=t.include_users,s=t.sample_granularity,u=t.rules,l=t.r,f=void 0===l?Math.random():l;if(y(a,e))return function(e){return St(e,1)};var h="session"===s,d=At(h,r,n,f,i),p=function(e,t,n,i,o,r){var a={};return Object.keys(e).forEach((function(s){var c=e[s],u=c.enable,l=c.sample_rate,f=c.conditional_sample_rules;u?(a[s]={enable:u,sample_rate:l,effectiveSampleRate:l*n,hit:At(t,l,i,o,r)},f&&(a[s].conditional_hit_rules=f.map((function(e){var a=e.sample_rate,s=e.filter;return{sample_rate:a,hit:At(t,a,i,o,r),effectiveSampleRate:a*n,filter:s}})))):a[s]={enable:u,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),a}(u,h,r,n,f,i);return function(e){var t;if(!d())return h&&o[0](),!1;if(!(e.ev_type in p))return St(e,r);if(!p[e.ev_type].enable)return h&&o[1](e.ev_type),!1;if(null===(t=e.common)||void 0===t?void 0:t.sample_rate)return e;var n=p[e.ev_type],i=n.conditional_hit_rules;if(i)for(var a=0;a<i.length;a++)if(Ct(e,i[a].filter))return!!i[a].hit()&&St(e,i[a].effectiveSampleRate);return n.hit()?St(e,n.effectiveSampleRate):((!i||!i.length)&&h&&o[1](e.ev_type),!1)}},Dt=function(e,t,n){var i=t.url,o=t.data,r=t.success,a=void 0===r?s:r,c=t.fail,u=void 0===c?s:c,l=t.getResponseText,f=void 0===l?s:l,h=t.withCredentials,d=void 0!==h&&h,p=new n;p.withCredentials=d,p.open(e,i,!0),p.setRequestHeader("Content-Type","application/json"),p.onload=function(){null==f||f(this.responseText);try{if(this.status>=400)u(new Error(this.responseText||this.statusText));else if(this.responseText){var e=JSON.parse(this.responseText);a(e)}else a({})}catch(e){u(e)}},p.onerror=function(){u(new Error("Network request failed"))},p.onabort=function(){u(new Error("Network request aborted"))},p.send(o)},Rt=function(){var e=Z();return e?{useBeacon:!0,get:function(t){Dt("GET",t,e)},post:function(t){Dt("POST",t,e)}}:{get:s,post:s}};function Ot(e){var t=function(e){var t,n=e.transport,i=e.endpoint,o=e.size,a=void 0===o?10:o,s=e.wait,c=void 0===s?1e3:s,u=[],l=0,f={getSize:function(){return a},getWait:function(){return c},setSize:function(e){a=e},setWait:function(e){c=e},getEndpoint:function(){return i},setEndpoint:function(e){i=e},send:function(e){u.push(e),u.length>=a&&h.call(this),clearTimeout(l),l=setTimeout(h.bind(this),c)},flush:function(){clearTimeout(l),h.call(this)},getBatchData:function(){return u.length?r(u):""},clear:function(){clearTimeout(l),u=[]},fail:function(e){t=e}};function h(){if(u.length){var e=this.getBatchData();n.post({url:i,data:e,fail:function(n){t&&t(n,e)}}),u=[]}}return f}(e),n=t.send;return function(e){var t=W();if(t){var n=i(de(e),1)[0];["unload","beforeunload","pagehide"].forEach((function(e){fe(t,e,n,!1)}))}}((function(){if(e.transport.useBeacon){var i=function(){var e=W();return e&&e.navigator.sendBeacon?{get:function(){},post:function(t,n){e.navigator.sendBeacon(t,n)}}:{get:s,post:s}}(),o=t.getBatchData();o&&(i.post(t.getEndpoint(),o),t.clear()),t.send=function(e){i.post(t.getEndpoint(),r([e]))},function(e){var t=J(),n=W();if(t&&n){var i=s;i=he(t,"visibilitychange",(function(){"visible"===t.visibilityState&&(e(),i())}),!0)}}((function(){t.send=n}))}else t.flush()})),t}var zt="mon-va.byteoversea.com",It="https://sf16-short-sg.bytedapm.com/slardar/fe/sdk-web/plugins",Mt="1.14.0",Bt="SDK_SLARDAR_WEB",Pt="/monitor_web/settings/browser-settings",Nt="/monitor_browser/collect/batch/",Ut="SLARDAR",Gt=["/log/sentry/",Nt,Pt],jt="session",Lt=["blankScreen","action"],Vt={sample_rate:1,include_users:[],sample_granularity:jt,rules:{}};function Kt(e,t,n){void 0===n&&(n=qt),function(e){var t=W(),n=J();t&&n&&("complete"!==n.readyState?fe(t,"load",(function(){setTimeout((function(){e()}),0)}),!1):e())}((function(){e.on("init",(function(){n(e,t)}))}))}var Ft=function(e,t,n,i){void 0===i&&(i=$t);var o=t.config(),r=o.plugins,a=o.pluginBundle,s=e.filter((function(e){return r[e]&&!t.destroyAgent.has(e)})),c=function(){return s.forEach((function(e){return Wt(t,e,n)}))};s.every((function(e){return Xt(e,n)}))?c():i(t,{name:a.name},c)},Ht=function(e,t,n,i){void 0===i&&(i=$t);var o=t.config().plugins;e.filter((function(e){return o[e]&&!t.destroyAgent.has(e)})).forEach((function(e){Xt(e,n)?Wt(t,e,n):i(t,{name:e,config:o[e]},(function(){return Wt(t,e,n)}))}))};function qt(e,t,i){void 0===i&&(i=$t);var o=e.config().pluginBundle,r=o?o.plugins:[];Ft(r,e,t,i),Ht(Lt,e,t,i),e.provide("reloadPlugin",function(e){return function(t,i){var o,r=e.config().pluginBundle;e.destroyAgent.has(t)&&e.destroyAgent.remove(t),void 0!==i&&e.set({plugins:n(n({},e.config().plugins),(o={},o[t]=i,o))}),r&&~r.plugins.indexOf(t)?Ft([t],e):Ht([t],e)}}(e))}function $t(e,t,n,i){var o=t.name,r=t.config;void 0===i&&(i=pe);var a=function(e,t,n){var i;return null!==(i=null==n?void 0:n.path)&&void 0!==i?i:e.config().pluginPathPrefix+"/"+(o=t,o.replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"-"+n.toLowerCase()}))+".")+"1.14.0.js";var o}(e,o,r);i(a,(function(){n()}))}function Wt(e,t,n){if(void 0===n&&(n=se(W())),n){var i=Jt(n,t);if(i)try{if(e.destroyAgent.has(t))return;i.apply(e)}catch(e){ce(e),z("[loader].applyPlugin failed",t,e)}else z("[loader].applyPlugin not found",t)}}function Jt(e,t){return e.plugins.filter((function(e){return e.name===t&&e.version===Mt}))[0]}function Xt(e,t){return void 0===t&&(t=se(W())),!(!t||!t.plugins)&&!!Jt(t,e)}function Yt(e,t,n){void 0===n&&(n=se(W())),n&&n.plugins&&(Jt(n,e)||n.plugins.push({name:e,version:Mt,apply:t}))}function Zt(e){var t,n;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(["userId","deviceId","sessionId","env"]),o=i.next();!o.done;o=i.next()){var r=o.value;e[r]||delete e[r]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e}function Qt(e){var t=e.plugins||{};for(var i in t)t[i]&&!u(t[i])&&(t[i]={});return Zt(n(n({},e),{plugins:t}))}function en(e){return u(e)&&"bid"in e}function tn(e){return Zt(n({},e))}function nn(e){var t;if(!e)return{};var n=e.sample,i=e.plugins,o=e.timestamp,r=e.quota_rate,a=void 0===r?1:r,s=e.apdex;if(!n)return{};var c=n.sample_rate,u=n.sample_granularity,l=void 0===u?jt:u,f=n.include_users,h=n.rules;return{sample:{include_users:f,sample_rate:c*a,sample_granularity:l,rules:(void 0===h?[]:h).reduce((function(e,t){var n=t.name,i=t.enable,o=t.sample_rate,r=t.conditional_sample_rules;return e[n]={enable:i,sample_rate:o,conditional_sample_rules:r},e}),{})},plugins:{heatmap:null!==(t=null==i?void 0:i.heatmap)&&void 0!==t&&t},apdex:s,serverTimestamp:o}}var on=function(e,t){return void 0===t&&(t=Nt),(e&&e.indexOf("//")>=0?"":"https://")+e+t},rn=function(e,t){return void 0===t&&(t=Pt),(e&&e.indexOf("//")>=0?"":"https://")+e+t},an=function(){return P()},sn=function(e){var t=[];return e.observe=function(e){t.push(e)},e.push=function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.forEach((function(e){t.forEach((function(t){return t(e)}))})),(n=[].push).call.apply(n,o([e],i(r),!1))},e},cn=function(){var e,t,n,i=W(),o=J();if(i&&o)return(null===(n=null===(t=null===(e=ee())||void 0===e?void 0:e.getAttribute("src"))||void 0===t?void 0:t.match(/globalName=(.+)$/))||void 0===n?void 0:n[1])||"Slardar"},un=function(e){return Ut+e},ln=function(e,t){try{var n=localStorage.getItem(e);if(!n||!ve()||"{"!==n[0])return;_e(e,JSON.parse(n),t)}catch(e){}},fn=function(e,t){void 0===e&&(e="");var n={userId:P(),deviceId:P()};if(t<=0)return n;var i=un(e);ln(i,t);var o=me(i);return{userId:(null==o?void 0:o.userId)||n.userId,deviceId:(null==o?void 0:o.deviceId)||n.deviceId}},hn=function(e){var t=e.bid,n=e.userId,i=e.deviceId,o=e.storageExpires,r=un(t);_e(r,{userId:n,deviceId:i},ye(o))},dn={get:function(){return this.__SLARDAR__REPALCE__HOLDER__}},pn=function(e){var t,i,o=e,r={},a=dn.get(),c=s,u=s;return{getConfig:function(){return o},setConfig:function(e){return r=n(n({},r),e||{}),l(),t||(t=e,o.useLocalConfig||!o.bid?(i={},c()):a?f():gn(o.transport,o.domain,o.bid,(function(e){a=e,f()}))),o},onChange:function(e){u=e},onReady:function(e){c=function(){hn(o),e()},i&&c()}};function l(){var t=n(n(n({},e),i||{}),r);t.plugins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},i=0;i<e.length;)n=m(n,e[i++]);return n}(e.plugins,(null==i?void 0:i.plugins)||{},r.plugins||{}),t.sample=vn(vn(e.sample,null==i?void 0:i.sample),r.sample),o=t,u()}function f(){i=nn(a),l(),c()}};function gn(e,t,n,i){e.get({withCredentials:!0,url:rn(t)+"?bid="+n+"&store=1",success:function(e){i(e.data||{})},fail:function(){i({sample:{sample_rate:.001}})}})}function vn(e,t){if(!e||!t)return e||t;var r=n(n({},e),t);return r.include_users=o(o([],i(e.include_users||[]),!1),i(t.include_users||[]),!1),r.rules=o(o([],i(Object.keys(e.rules||{})),!1),i(Object.keys(t.rules||{})),!1).reduce((function(r,a){var s,c;return a in r||(a in(e.rules||{})&&a in(t.rules||{})?(r[a]=n(n({},e.rules[a]),t.rules[a]),r[a].conditional_sample_rules=o(o([],i(e.rules[a].conditional_sample_rules||[]),!1),i(t.rules[a].conditional_sample_rules||[]),!1)):r[a]=(null===(s=e.rules)||void 0===s?void 0:s[a])||(null===(c=t.rules)||void 0===c?void 0:c[a])),r}),{}),r}var mn,_n={build:function(e){return{ev_type:e.ev_type,payload:e.payload,common:n(n({},e.extra||{}),e.overrides||{})}}},yn=function(e,t){var i=t||{},o=i.pid,r=void 0===o?"":o,a=i.viewId,s=void 0===a?"":a,c={url:ie(),timestamp:q(),sdk_version:Mt,sdk_name:Bt,pid:r,view_id:s};return n(n({},e),{extra:n(n({},c),e.extra||{})})},bn=function(e){e.on("report",(function(t){return yn(t,e.config())}))},En={sri:"reportSri",st:"reportResourceError",err:"captureException",reject:"captureException"},kn=function(e){return Object.keys(e).reduce((function(e,t){return e[t]=[],e}),{})},wn=function(e){return Object.keys(e).reduce((function(t,n){return t[e[n]]?t[e[n]].push(n):t[e[n]]=[n],t}),{})},Sn=function(e,t,i){return function(o,r,a,s){var c;void 0===a&&(a=q()),void 0===s&&(s=location.href);var u=n(n({},ue(e)),{url:s,timestamp:a});t[o]&&(e[i[o]]?le(e,u)((function(){e[i[o]](r)})):null===(c=t[o])||void 0===c||c.push([r,u]))}},An=function(e,t,n){return function(o){o in n&&n[o].forEach((function(n){var r;null===(r=t[n])||void 0===r||r.forEach((function(t){var n=i(t,2),r=n[0],a=n[1];le(e,a)((function(){e[o](r)}))})),t[n]=null}))}},xn=function(e,t){return"err"===t?!1!==E(e,"plugins.jsError.onerror",(function(e,t){return e[t]})):"reject"!==t||!1!==E(e,"plugins.jsError.onunhandledrejection",(function(e,t){return e[t]}))},Cn=function(e,t){var n;void 0===t&&(t=En);var o=kn(t),r=wn(t),a=Sn(e,o,t);(null===(n=e.p)||void 0===n?void 0:n.a)&&"observe"in e.p.a&&e.p.a.observe((function(t){var n=i(t,5);n[0];var o=n[1],r=n[2],s=n[3],c=n[4],u=e.config();xn(u,o)&&a(o,r,s,c)})),e.on("init",(function(){var t,n=e.config();null===(t=e.p)||void 0===t||t.a.forEach((function(e){var t=i(e,5);t[0];var o=t[1],r=t[2],s=t[3],c=t[4];xn(n,o)&&a(o,r,s,c)})),e.p&&e.p.a&&(e.p.a.length=0),e.provide("precollect",(function(e,t,i,o){void 0===i&&(i=q()),void 0===o&&(o=location.href),xn(n,e)&&a(e,t,i,o)}))})),e.on("provide",An(e,o,r))},Tn=function(e){var t=i(e,2),n=t[0],o=t[1];return{ev_type:ze,payload:{error:rt(n),breadcrumbs:[],extra:o||{}},extra:{bid:"slardar_sdk"}}},Dn=function(e,t){void 0===t&&(t=.001);var n=se(W());n&&(n.errors||(n.errors=[]),"observe"in n.errors||I(t)&&(n.errors=sn(n.errors),n.errors.forEach((function(t){e.report(Tn(t))})),n.errors.observe((function(t){e.report(Tn(t))}))))},Rn=function(e){var t,i=!1;e.on("init",(function(){t=(new Date).getTime(),e.on("config",(function(){var o,r=null===(o=e.config())||void 0===o?void 0:o.serverTimestamp;if(!(isNaN(r)||Number(r)<=0||i)){i=!0;var a=(new Date).getTime();if(a-t<700&&r){var s=r-(a+t)/2;!isNaN(s)&&(s>0||s<-6e5)&&e.on("beforeBuild",(function(e){var t;return n(n({},e),{extra:n(n({},null!==(t=e.extra)&&void 0!==t?t:{}),{sdk_offset:null!=s?s:0})})}))}}}))}))},On=function(e,t){var i={};return i.bid=t.bid,i.user_id=t.userId,i.device_id=t.deviceId,i.session_id=t.sessionId,i.release=t.release,i.env=t.env,n(n({},e),{extra:n(n({},i),e.extra||{})})},zn=function(e){e.on("beforeBuild",(function(t){return On(t,e.config())}))},In=function(e){e.on("start",(function(){var t=e.config().bid,n=e.getSender();n.setEndpoint(n.getEndpoint()+"?biz_id="+t)}))},Mn=function(e){var t=ye(e.storageExpires),n=fn(e.bid,t);return{bid:"",pid:"",viewId:ft("_"),userId:n.userId,deviceId:n.deviceId,storageExpires:t,sessionId:an(),domain:zt,pluginBundle:{name:"commonMonitors",plugins:["breadcrumb","jsError","performance","resourceError","resource"]},pluginPathPrefix:It,plugins:{ajax:{ignoreUrls:Gt},fetch:{ignoreUrls:Gt},breadcrumb:{},pageview:{},jsError:{},resource:{},resourceError:{},performance:{},tti:{},fmp:{},blankScreen:!1,heatmap:!1},release:"",env:"production",sample:Vt,transport:Rt()}},Bn=function(e){var t=void 0===e?{}:e,r=t.createSender,a=void 0===r?function(e){return Ot({size:20,endpoint:on(e.domain),transport:e.transport})}:r,s=t.builder,c=void 0===s?_n:s,u=t.createDefaultConfig,l=V({validateInitConfig:en,initConfigNormalizer:Qt,userConfigNormalizer:tn,createSender:a,builder:c,createDefaultConfig:void 0===u?Mn:u,createConfigManager:pn});Dn(l),K(l);var f=se(W());!function(e,t){var n=t||{},o={};e.provide("setFilter",(function(e,t){o[e]||(o[e]=[]),o[e].push(t)})),e.provide("initSubject",(function(t){var r=i(t,2),a=r[0],s=r[1],c=function(e){return e.split("_")[0]}(a),u=!!c&&o[c];return n[a]||(n[a]=G(s,(function(){n[a]=void 0}))),u?H(e,[a,j(n[a],u)]):n[a]})),e.provide("getSubject",(function(e){return n[e]})),e.provide("privateSubject",{})}(l,f&&f.subject),Rn(l),zn(l),bn(l),function(e){var t=Q(),i=wt(t);t&&(t.onchange=function(){i=wt(t)}),e.on("report",(function(e){return n(n({},e),{extra:n(n({},e.extra||{}),{network_type:i})})}))}(l),In(l);var h=function(e,t,n){var r={},a=function n(){for(var a,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var u=s[0];if(u){var l=u.split(".")[0];if(!(l in n)){var f=r[l]||[],h=null!==(a=null==t?void 0:t(e))&&void 0!==a?a:{};return f.push(o([h],i(s),!1)),void(r[l]=f)}return k(n,u,[].slice.call(s,1))}};for(var s in x(e,"provide",(function(t){return function(n,i){a[n]=i,t.call(e,n,i)}}))(),e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return e.on("provide",(function(t){r[t]&&(r[t].forEach((function(t){var o=i(t),r=o[0],a=o.slice(1);null==n||n(e,r,a)})),r[t]=null)})),a}(l,ue,(function(e,t,n){return le(e,t)((function(){var e=i(n),t=e[0],r=e.slice(1);l[t].apply(l,o([],i(r),!1))}))}));return function(e,t){e.on("init",(function(){var n=[],i=function(i){i.forEach((function(i){var o=i.name;y(n,o)||(n.push(o),i.setup(e),t&&t(o,i.setup),e.destroyAgent.set(o,o,[function(){n=b(n,o),i.tearDown&&i.tearDown()}]))}))};e.provide("applyIntegrations",i);var o=e.config();o&&o.integrations&&i(o.integrations)}))}(h,Yt),h},Pn=((mn={}).pageview=function(e){e.on("init",(function(){var t,o=null===(t=e.config())||void 0===t?void 0:t.plugins.pageview;!function(e,t){var o,r=ge(t,Et);if(r&&X()){var a=r.routeMode,c=r.apdex,u=e.report.bind(e),l=s;if(c){var f=[],h=i(yt(e.report.bind(e),f,[F(e,st),F(e,ct)],r),4),d=h[0],p=h[1],g=h[2],v=h[3];u=g,l=d,e.on("send",p),f.push((function(){return e.off("send",p)})),e.on("start",(function(){v(e.config().apdex)})),L(e,bt,Oe,f)}var m=[],_=i(_t(u,m,pt(a)?[]:[e.initSubject(ut),e.initSubject(lt)],n(n({},r),{initPid:null===(o=e.config())||void 0===o?void 0:o.pid,onPidUpdate:function(t){var n=ft(t);l(t,n),e.set({pid:t,viewId:n,actionId:void 0})}})),1)[0];H(e,["f_view_0",ae(e)],-1);var y=function(){_(e.config().pid)};e.on("config",y),m.push((function(){return e.off("config",y)})),L(e,bt,Re,m),e.provide("sendPageview",_)}}(e,o)}))},mn.ajax=function(e){e.on("init",(function(){var t,i=null===(t=e.config())||void 0===t?void 0:t.plugins.ajax;!function(e,t){var i=ge(t,qe);if(i){var o=[],r=n(n({},i),{setContextAtReq:function(){return re(e,!0)},setTraceHeader:Ue(i.trace)}),a=function(){return F(e,De)};r.autoWrap&&Ke(o,[F(e,["xhr_0",Ae(XMLHttpRequest&&XMLHttpRequest.prototype)]),a],r),L(e,He,Ie,o),e.provide("wrapXhr",(function(e){function t(){var t=new e;return Ke(o,[G(Ae(t)),a],r),t}return t.prototype=new e,["DONE","HEADERS_RECIEVED","LOADING","OPENED","UNSENT"].forEach((function(n){t[n]=e[n]})),t}))}}(e,i)}))},mn.fetch=function(e){e.on("init",(function(){var t,i=null===(t=e.config())||void 0===t?void 0:t.plugins.fetch;!function(e,t){var i=ge(t,nt);if(i){var o=[],r=n(n({},i),{setContextAtReq:function(){return re(e,!0)},setTraceHeader:Ue(i.trace)}),a=function(){return F(e,De)};r.autoWrap&&$e(o,[F(e,Ce),a],r),L(e,tt,Ie,o),e.provide("wrapFetch",(function(e){var t=void 0;return $e(o,[G((function(n){t=xe(e,n)})),a],r),t}))}}(e,i)}))},mn),Nn=function e(t){void 0===t&&(t={});var n=Bn(t);return function(e){e.on("start",(function(){var t=e.config(),n=t.userId,i=t.sample,o=Tt(n,i,I,M,[function(){e.destroy()},function(t){e.destroyAgent.removeByEvType(t)}]);e.on("build",o)}))}(n),Cn(n),kt(n),Object.keys(Pn).forEach((function(e){Yt(e,Pn[e]),Pn[e](n)})),Kt(n),n.provide("create",e),n},Un="precollect",Gn=3e5;var jn=Nn(),Ln=W();Ln&&function(e,t){if("addEventListener"in e){t.pcErr=function(n){var i=(n=n||e.event).target||n.srcElement||{};i instanceof Element||i instanceof HTMLElement?t(Un,"st",{tagName:i.tagName,url:i.getAttribute("href")||i.getAttribute("src")}):t(Un,"err",n.error)},t.pcRej=function(n){n=n||e.event,t(Un,"reject",n.reason||n.detail&&n.detail.reason)};var n=[];n.push(fe(e,"error",t.pcErr,!0)),n.push(fe(e,"unhandledrejection",t.pcRej,!0)),setTimeout((function(){n.forEach((function(e){return e()}))}),Gn)}"PerformanceObserver"in e&&"PerformanceLongTaskTiming"in e&&(t.pp={entries:[]},t.pp.observer=new PerformanceObserver((function(e){t.pp.entries=t.pp.entries.concat(e.getEntries())})),t.pp.observer.observe({entryTypes:["longtask"]}),setTimeout((function(){t.pp.observer.disconnect()}),Gn))}(Ln,jn),t.BATCH_REPORT_PATH=Nt,t.DEFAULT_IGNORE_PATHS=Gt,t.DEFAULT_SAMPLE_CONFIG=Vt,t.DEFAULT_SAMPLE_GRANULARITY=jt,t.DEFAULT_SENDER_SIZE=20,t.DEVICE_ID_COOKIE_NAME="MONITOR_DEVICE_ID",t.EV_METHOD_MAP=En,t.EXTRA_INDEPENDENT_PLUGINS=Lt,t.InjectConfigPlugin=zn,t.InjectEnvPlugin=bn,t.InjectQueryPlugin=In,t.ObserveErrorPlugin=Dn,t.PLUGINS_LOAD_PREFIX=It,t.PluginMap=Pn,t.PrecollectPlugin=Cn,t.REPORT_DOMAIN=zt,t.SDK_NAME=Bt,t.SDK_VERSION=Mt,t.SETTINGS_DOMAIN="mon-va.byteoversea.com",t.SETTINGS_PATH=Pt,t.STORAGE_PREFIX=Ut,t.TimeCalibrationPlugin=Rn,t.USER_ID_COOKIE_NAME="MONITOR_WEB_ID",t.addConfigToReportEvent=On,t.addEnvToSendEvent=yn,t.applyPlugin=Wt,t.browserBuilder=_n,t.buildSelfErrorEvent=Tn,t.configHolder=dn,t.createBrowserClient=Nn,t.createBrowserConfigManager=pn,t.createMinimalBrowserClient=Bn,t.createStore=kn,t.default=jn,t.doesPluginExistInRegistry=Xt,t.filterIfPluginDisabled=xn,t.getConsumeStored=An,t.getDefaultConfig=Mn,t.getDefaultSessionId=an,t.getDefaultUserIdAndDeviceId=fn,t.getGlobalInstance=function(){var e=W(),t=cn();if(e&&t)return e[t]},t.getGlobalName=cn,t.getPluginFromRegistry=Jt,t.getReportUrl=on,t.getServerConfig=gn,t.getSettingsUrl=rn,t.getStorageKey=un,t.getStoreOrConsume=Sn,t.glueCodeForStorageSecurity=ln,t.hasSetStorageItem=function(e){void 0===e&&(e="");var t=un(e);return!!me(t)},t.loadCombinedPlugins=Ft,t.loadIndependentPlugins=Ht,t.loadNow=$t,t.loadPlugins=qt,t.loadPluginsOnPageLoad=Kt,t.mergeSampleConfig=vn,t.normalizeInitConfig=Qt,t.normalizeStrictFields=Zt,t.normalizeUserConfig=tn,t.parseServerConfig=nn,t.register=Yt,t.reverseMap=wn,t.setStorageUserIdAndDeviceId=hn,t.toObservableArray=sn,t.validateInitConfig=en}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(hs),hs.BATCH_REPORT_PATH,hs.DEFAULT_IGNORE_PATHS,hs.DEFAULT_SAMPLE_CONFIG,hs.DEFAULT_SAMPLE_GRANULARITY,hs.DEFAULT_SENDER_SIZE,hs.DEVICE_ID_COOKIE_NAME,hs.EV_METHOD_MAP,hs.EXTRA_INDEPENDENT_PLUGINS,hs.InjectConfigPlugin,hs.InjectEnvPlugin,hs.InjectQueryPlugin,hs.ObserveErrorPlugin,hs.PLUGINS_LOAD_PREFIX,hs.PluginMap,hs.PrecollectPlugin,hs.REPORT_DOMAIN,hs.SDK_NAME,hs.SDK_VERSION,hs.SETTINGS_DOMAIN,hs.SETTINGS_PATH,hs.STORAGE_PREFIX,hs.TimeCalibrationPlugin,hs.USER_ID_COOKIE_NAME,hs.addConfigToReportEvent,hs.addEnvToSendEvent,hs.applyPlugin,hs.browserBuilder,hs.buildSelfErrorEvent,hs.configHolder;var ds=hs.createBrowserClient;hs.createBrowserConfigManager,hs.createMinimalBrowserClient,hs.createStore,hs.doesPluginExistInRegistry,hs.filterIfPluginDisabled,hs.getConsumeStored,hs.getDefaultConfig,hs.getDefaultSessionId,hs.getDefaultUserIdAndDeviceId,hs.getGlobalInstance,hs.getGlobalName,hs.getPluginFromRegistry,hs.getReportUrl,hs.getServerConfig,hs.getSettingsUrl,hs.getStorageKey,hs.getStoreOrConsume,hs.glueCodeForStorageSecurity,hs.hasSetStorageItem,hs.loadCombinedPlugins,hs.loadIndependentPlugins,hs.loadNow,hs.loadPlugins,hs.loadPluginsOnPageLoad,hs.mergeSampleConfig,hs.normalizeInitConfig,hs.normalizeStrictFields,hs.normalizeUserConfig,hs.parseServerConfig,hs.register,hs.reverseMap,hs.setStorageUserIdAndDeviceId,hs.toObservableArray,hs.validateInitConfig;var ps=Object.defineProperty,gs=Object.defineProperties,vs=Object.getOwnPropertyDescriptors,ms=Object.getOwnPropertySymbols,_s=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,bs=function(e,t,n){return t in e?ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Es=function(e,t){for(var n in t||(t={}))_s.call(t,n)&&bs(e,n,t[n]);if(ms){var i,o=L(ms(t));try{for(o.s();!(i=o.n()).done;){n=i.value;ys.call(t,n)&&bs(e,n,t[n])}}catch(e){o.e(e)}finally{o.f()}}return e},ks=q((function e(t){var n=this;F(this,e),this.sendEvent=function(e){n._client&&n._client.sendEvent&&n._client.sendEvent(e)},this.reportActualFMP=function(){};var i=t.region,o=t.bid,r=t.mode,a=t.slardar;this._client=ds();var s={};switch(i){case $a.US_EASTRED:case $a.EU_TTP:case $a.EU_TTP2:s={domain:"https://mon-i18n.tiktokv.com",pluginPathPrefix:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk-web/plugins"};break;case $a.US_TTP:case $a.US_TTP2:s={domain:"https://mon16-normal-useast5.tiktokv.us",pluginPathPrefix:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/slardar/fe/sdk-web/plugins"};break;case $a.US_EAST:case $a.SINGAPORE_CENTRAL:default:s={domain:"https://mon.tiktokv.com",pluginPathPrefix:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk-web/plugins"}}this._client&&(this._client("init",function(e,t){return gs(e,vs(t))}(Es(Es({},s),a),{bid:qa,pid:o||window.location.href,release:Va,env:r,plugins:{pageview:!1,jsError:!1,tti:!1,performance:!1,resource:!1,ajax:!1,fetch:!1,fmp:!1,blankScreen:!1}})),this._client("start"))})),ws=function(){return(ws=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ss(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function As(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ss(arguments[t]));return e}var xs,Cs,Ts,Ds=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function i(o){t(o),n.off(e,i)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&As(this._hooks[e]).forEach((function(e){try{e(t)}catch(e){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),Rs=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},Os=function(e){return Array.isArray(e)},zs=(xs=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return xs+=1}),Is=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof n){var i,o=[];n=n<=25?n:n%25;var r=String.fromCharCode(n+97);i=e.split(r);for(var a=0;a<i.length;a++){var s=parseInt(i[a],n);s=1*s^64;var c=String.fromCharCode(s);o.push(c)}return o.join("")}}(e,0,25)},Ms=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},Bs=function(e){Ms()?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},Ps=function(){var e=0;return["hidden","msHidden","webkitHidden"].forEach((function(t){void 0!==document[t]&&(e=1)})),e},Ns=function(e){var t=document.createElement("a");return t.href=e,t},Us=function(e){var t={};try{var n=Ns(e).search;(n=n.slice(1)).split("&").forEach((function(e){var n,i,o=e.split("=");o.length&&(n=o[0],i=o[1]);try{t[n]=decodeURIComponent(void 0===i?"":i)}catch(e){t[n]=i}}))}catch(e){}return t},Gs=function(e,t){return function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function o(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in r)r[c]&&(s+="; "+c,!0!==r[c]&&(s+="="+r[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var s=r[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(i.read||i)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=r,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){r(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},e.exports=n()}(t={exports:{}}),t.exports}(),js=function(e,t){try{return Gs.get(e)}catch(e){return""}},Ls=function(e,t,n,i){try{var o=i||document.domain,r=+new Date+(n||6048e5);Gs.set(e,t,{expires:new Date(r),path:"/",domain:o})}catch(e){}},Vs=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return js(e)},e.prototype.setCookie=function(e,t,n,i){Ls(e,t,n,i)},e}(),Ks={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return js(e)},setCookie:function(e,t,n,i){Ls(e,t,n,i)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},Fs={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return js(e)},setCookie:function(e,t,n,i){Ls(e,t,n,i)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},Hs=function(){function e(e,t){this._storage=t&&"session"===t?Fs:!e&&Ks.isSupportLS?Ks:new Vs}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,i){this._storage.setCookie(e,t,n,i)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),qs=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,i=n?Ns(n).hostname:"",o=Us(window.location.href),r=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=function(e,t,n,i){var o=new Hs(!1,"session"),r=e?"_$utm_from_url_"+e:"_$utm_from_url",a={},s=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],c={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var u=!1;for(var l in c)c[l]&&(-1!==s.indexOf(l)?(a.hasOwnProperty("tracer_data")||(a.tracer_data={}),a.tracer_data[l]=c[l]):a[l]=c[l],u=!0);u&&o.setItem(r,"1"),o.getItem(r)&&(a.hasOwnProperty("tracer_data")||(a.tracer_data={}),a.tracer_data.$utm_from_url=1)}catch(e){return c}return a}(this.appid,o,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:r,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:i,utm:this.utm,latest_data:this.last(n,i)}},e.prototype.last=function(e,t){var n="",i="",o="",r=location.hostname,a=!1;if(e&&t&&r!==t){n=e,i=t,a=!0;var s=Us(e);s.keyword&&(o=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:i,$latest_search_keyword:o,isLast:a}},e.prototype.browser=function(){var e,t,n="",i=""+parseFloat(this.appVersion),o=this.userAgent;return-1!==o.indexOf("Edge")||-1!==o.indexOf("Edg")?(n="Microsoft Edge",-1!==o.indexOf("Edge")?(e=o.indexOf("Edge"),i=o.substring(e+5)):(e=o.indexOf("Edg"),i=o.substring(e+4))):-1!==(e=o.indexOf("MSIE"))?(n="Microsoft Internet Explorer",i=o.substring(e+5)):-1!==(e=o.indexOf("Lark"))?(n="Lark",i=o.substring(e+5,e+11)):-1!==o.indexOf("Chrome")?-1!==(e=o.indexOf("TTWebView"))?(n="TTWebView",i=o.substring(e+10,e+23)):(-1!==(e=o.indexOf("Chrome"))||-1!==(e=o.indexOf("Chrome")))&&(n="Chrome",i=o.substring(e+7)):-1!==o.indexOf("Safari")?-1!==(e=o.indexOf("Safari"))&&(n="Safari",i=o.substring(e+7),-1!==(e=o.indexOf("Version"))&&(i=o.substring(e+8))):-1!==(e=o.indexOf("Firefox"))&&(n="Firefox",i=o.substring(e+8)),-1!==(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(" "))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(")"))&&(i=i.substring(0,t)),{browser:n,browser_version:i}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"ChromeOS",r:/CrOS/},{s:"Linux",r:/(Linux|X11)/},{s:"Sun OS",r:/SunOS/}],i=0;i<n.length;i++){var o=n[i];if(o.r.test(this.userAgent)){"Mac OS X"===(e=o.s)&&this.isNewIpad()&&(e="iOS");break}}var r,a,s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,r=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,r)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios";break;case"chromeOS":var u=this.userAgent.indexOf("x86_64");t=this.userAgent.substring(u+7,u+16)}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),i=n.indexOf(";");t=n.slice(0,i)}}catch(e){return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),$s={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},Ws={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},Js={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"},Xs={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"};!function(e){e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.DestoryInstance="destory-instance",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report",e.VisualCollectReady="visual-collect-ready",e.VisualApiReady="visual-api-ready",e.VisualApiUpdate="visual-api-update"}(Cs||(Cs={})),function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(Ts||(Ts={}));var Ys,Zs=Cs,Qs=void 0,ec=(new Date).getTimezoneOffset(),tc=parseInt(""+-ec/60,10),nc=60*ec,ic=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new qs(t.app_id,t.cookie_domain||"",t.cookie_expire||6048e5).init(),i="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new Hs(!1,"session"),this.localStorage=new Hs(!1,"local"),this.channelUrl="tcpy"===t.channel_type||"ttp"===t.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"},t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var o=this.localStorage.getItem(i);o&&1==o?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:Qs,user_type:Qs,user_id:Qs,user_is_auth:Qs,user_is_login:Qs,device_id:Qs,web_id:Qs,ip_addr_id:Qs,user_unique_id_type:Qs},header:{app_id:Qs,app_name:Qs,app_install_id:Qs,install_id:Qs,app_package:Qs,app_channel:Qs,app_version:Qs,ab_version:Qs,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:Qs,traffic_type:Qs,client_ip:Qs,device_brand:Qs,os_api:Qs,access:Qs,language:n.language,region:Qs,app_language:Qs,app_region:Qs,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:Qs,rnd:Qs,platform:n.platform,sdk_version:"5.3.3_oversea",sdk_lib:"js",province:Qs,city:Qs,timezone:tc,tz_offset:nc,tz_name:Qs,sim_region:Qs,carrier:Qs,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{}}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var n=e||this.initConfig.channel,i=this.initConfig&&this.initConfig.channel_type?"tcpy"===this.initConfig.channel_type?Js[n]:Xs[n]:$s[n];i||(console.warn("current channel: "+n+" is not exist, use va instead, please check!!!!"),i=$s.sg),this.domain=Is(i)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.initABData=function(){var e,t="__tea_sdk_ab_version_"+this.initConfig.app_id;e=this.localStorage.getItem(t),this.setAbCache(e)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbUuidCache=function(e,t){var n=t||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+n]||(this.ab_uuid_cache[""+n]=[]),-1===this.ab_uuid_cache[""+n].indexOf(e)&&this.ab_uuid_cache[""+n].push(e)},e.prototype.getAbUuidCache=function(e){return this.ab_uuid_cache[""+e]},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version=5.3.3_oversea&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.setAppid=function(e){this.envInfo.header.app_id=e},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){if(void 0!==e[n]&&null!==e[n]||t.delete(n),"traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=ws(ws({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===n)t.evtParams=ws(ws({},t.evtParams||{}),{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var i="",o="";if(n.indexOf(".")>-1){var r=n.split(".");i=r[0],o=r[1]}i?"user"===i||"header"===i?t.envInfo[i][o]=e[n]:t.envInfo.header.custom[o]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){console.log("get config stringify error "),this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e){console.log("setStore error"),this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),console.log("delete error")}},e}(),oc=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[Tea instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("%c %s","color: #4D1B00; background-color: #FF7D00;","[Tea instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("%c %s","color: #FFF; background-color: #F53F3F;","[Tea instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),rc=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach((function(e){-1!==t.indexOf(e)&&(n=!0)})),n},e}(),ac=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e){return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)})):n(!1)}catch(e){console.log("AppLogBridge, error:"+JSON.stringify(e.stack)),n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch(e){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(e){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge report success",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),sc=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.cacheStorgae=new Hs(!0),this.localStorage=new Hs(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=t.report_url||this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.collect.on(Zs.Ready,(function(){n.reportAll(!1)})),this.collect.on(Zs.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(Zs.Event,(function(e){n.event(e)})),this.collect.on(Zs.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(Zs.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),Bs((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;if(!this.collect.destroy&&!this.collect.sdkStop)try{if(this.config.enable_ios_sendbeacon&&Ms())return void this.beconEvent(e);var n=As(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var i=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),i)}}catch(e){this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e){if(!this.collect.destroy&&!this.collect.sdkStop){var t=As(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))}},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var i;i=e.slice(n,n+this.eventLimit);var o=this.split(this.merge(i));this.send(o,t)}else o=this.split(this.merge(e)),this.send(o,t)},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this,i=this.configManager.get(),o=i.header,r=i.user;o.custom=JSON.stringify(o.custom),o.referrer=this.handleRefer();var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=[];try{var u=e.filter((function(e){try{Object.keys(a).length&&!t&&(e.params=ws(ws({},a),e.params)),s&&(e.params.$user_unique_id_type=s);var i=n.configManager.getAbCache(),o=r[n.config.ab_user_mode]||r.user_unique_id,c=n.configManager.getAbUuidCache(o);if(i&&i.uuid&&i.uuid===o){var u=n.configManager.getAbVersion();if(n.config.enable_ab_uuid){if(c&&c.length){var l=c.join(",");u&&u.includes(l)&&(e.ab_sdk_version=u)}}else u&&(e.ab_sdk_version=u)}return e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(t){return console.warn("filter merge event: "+(e&&e.event)+" error, pls check",t&&t.message),n.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Merge Event Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),!1}})),l=JSON.parse(JSON.stringify({events:u,user:r,header:o}));l.local_time=Math.floor(Date.now()/1e3),l.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,l.verbose=1,c.push(l)}catch(e){console.warn("event merge error, pls check",e&&e.message)}return c},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var i=JSON.parse(JSON.stringify(e));n.config.filter&&((i=n.config.filter(i))||console.warn("filter must return data !!")),n.collect.eventFilter&&i&&((i=n.collect.eventFilter(i))||console.warn("filterEvent api must return data !!"));var o=i||e,r=JSON.parse(JSON.stringify(o));if(!o.length)return;var a=!0;if(o.forEach((function(e){e.events.length||(a=!1)})),!a)return;n.collect.emit(Zs.SubmitBefore,o),n.collect.emit(Zs.SubmitVerify,o),n.collect.requestManager.useRequest({url:n.reportUrl,data:o,success:function(e,t){e&&0!==e.e?(n.collect.emit(Zs.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_EVENT,info:"Event Report Fail",time:Date.now(),data:r,code:e.e,failType:"event data error",status:"fail"})):(n.collect.emit(Zs.SubmitScuess,{eventData:t,res:e}),n.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_EVENT,info:"Event Report Success",time:Date.now(),data:r,code:200,status:"success"}))},fail:function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(Zs.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_EVENT,info:"Event Report Network Fail",time:Date.now(),data:r,code:t,failType:"network error",status:"fail"})},timeout:n.timeout,useBeacon:!n.config.disable_sendbeacon&&t,withCredentials:n.enable_ttwebid}),n.collect.emit(Zs.SubmitAfter,o)}catch(e){console.warn("something error, "+JSON.stringify(e.stack)),n.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Report Event Something Error",level:"error",time:Date.now(),data:e.message})}})))},e}(),cc=function(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)},uc=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Hs(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(Zs.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(Zs.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;this.cacheToken=this.storage.getItem(this.tokenKey)||{},this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(Zs.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(Zs.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:cc(),user_unique_id:this.configManager.get("user_unique_id")||cc()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=Us(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch WebID Request",logType:"fetch",level:"info",time:Date.now(),data:n});var i=cc();this.collect.requestManager.useRequest({url:t,data:n,success:function(t){var n;t&&0===t.e?(n=t.web_id,e.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Success",logType:"fetch",level:"info",time:Date.now(),data:t})):(n=i,e.collect.configManager.set({localWebId:i}),e.collect.emit(Zs.TokenError),e.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Data Error, Use LocalId",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})},fail:function(){e.complete({web_id:e.configManager.get("web_id")||i,user_unique_id:e.configManager.get("user_unique_id")||i}),e.collect.configManager.set({localWebId:i}),e.collect.emit(Zs.TokenError),e.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Network Fail, Use LocalId",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")},timeout:3e5})},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Complete",logType:"info",secType:"USER",level:"info",time:Date.now(),data:{web_id:t,user_unique_id:n},infoType:"sdk"}),this.collect.emit(Zs.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Zs.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),i=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===i)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(Zs.TokenChange,"uuid"),this.collect.emit(Zs.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(Zs.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(Zs.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(Zs.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this;return new Promise((function(t){if("tcpy"!==e.config.channel_type&&"ttp"!==e.config.channel_type){var n={app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")};e.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch GetToken Request",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"}),e.collect.requestManager.useRequest({url:e.configManager.getUrl("tobid"),data:n,success:function(n){n&&0===n.e?(t(n.tobid),e.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Success",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"})):(t(""),e.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Fail",logType:"fetch",level:"error",time:Date.now(),data:n,infoType:"sdk"}))},fail:function(){t(""),e.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Network Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})},time:3e4,withCredentials:e.enable_ttwebid})}else t("")}))},e}(),lc=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},fc=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new Hs(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSessionTimeCheck=t.disable_session_check,this.disableSession||(this.setSessionId(),this.collect.on(Zs.SessionReset,(function(e){n.resetSessionId(e)})),this.collect.on(Zs.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:lc(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:lc(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.disableSessionTimeCheck||(this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(e){var t={sessionId:e||lc(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:lc(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),hc=function(){function e(e,t){this.collector=e,this.config=t,this.requestType=t.request_type,this.supportBeacon=!(!window.navigator||!window.navigator.sendBeacon),this.errorCode={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},this.customHeader=t.custom_request_header||{}}return e.prototype.useFetch=function(e){var t=e.url,n=e.data,i=e.method,o=e.success,r=e.fail,a={"Content-Type":"application/json; charset=utf-8"};if(Object.keys(this.customHeader).length)for(var s in this.customHeader)a[s]=this.customHeader[s];window.fetch?fetch(t,{method:i||"POST",headers:a,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){o&&o(e)})).catch((function(e){r&&r(n,e)})):(this.requestType="xhr",console.log("your brwoser not support fetch, use xhr"),this.useRequest({url:t,data:n,method:i,success:o,fail:r}))},e.prototype.useBeacon=function(e){var t=e.url,n=e.data,i=e.success,o=e.fail;"xhr"!==this.requestType?window.navigator.sendBeacon(t,JSON.stringify(n))?i&&i():o&&o(n,this.errorCode.BEACON_FALSE):this.useXhr(e)},e.prototype.useXhr=function(e){var t=this,n=e.url,i=e.data,o=e.method,r=e.success,a=e.fail,s=e.timeout,c=e.withCredentials,u=e.app_key;try{var l=new XMLHttpRequest,f=o||"POST";if(l.open(f,""+n,!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),u&&l.setRequestHeader("X-MCS-AppKey",""+u),Object.keys(this.customHeader).length)for(var h in this.customHeader)l.setRequestHeader(h,this.customHeader[h]);c&&(l.withCredentials=!0),s&&(l.timeout=s,l.ontimeout=function(){a&&a(i,t.errorCode.TIMEOUT)}),l.onload=function(){if(r){var e=null;if(l.responseText){try{e=JSON.parse(l.responseText)}catch(t){e={}}r(e,i)}}},l.onerror=function(){l.abort(),a&&a(i,t.errorCode.XHR_ON)},l.send(JSON.stringify(i))}catch(e){}},e.prototype.useRequest=function(e){var t=e.useBeacon,n=e.forceXhr;if("xhr"===this.requestType)this.useXhr(e);else{if(t&&this.supportBeacon)return void this.useBeacon(e);if("fetch"===this.requestType&&!n)return void this.useFetch(e);this.useXhr(e)}},e}(),dc=function(){function e(e,t){if(this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,t.enable_debug&&"Microsoft Internet Explorer"!==e.configManager.get("browser")){this.collect=e,this.config=t,this.app_id=t.app_id;var n=e.adapters.storage;this.cacheStorgae=new n(!1),this.loadUrl=t.devtool_url||"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/devtool/debug-web.v2.0.0.js",this.filterEvent=new Set(["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"]),this.load()}}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){console.log("devTool load fail, "+e.message)}},e.prototype.parseUrl=function(){var e={};try{var t=window.location.href.split("?")[1].split("&");t.length&&t.forEach((function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}))}catch(e){}return e},e.prototype.load=function(){try{var e=this.parseUrl();if(e.open_devtool_web&&e.app_id){if(parseInt(e.app_id)!==this.app_id)return}else if(!this.getStorage())return;this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e){console.log("debug fail, "+e.message)}},e.prototype.getStorage=function(){var e=this.cacheStorgae.getItem("__applog_open_devtool_web");return e&&parseInt(e)===this.app_id},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_open_devtool_web",this.app_id)},e.prototype.loadDevTool=function(){this.loadScript(this.loadUrl)},e.prototype.loadBaseInfo=function(){if(this.log=[],this.event=[],this.info=[{title:"BaseInfo",key:"base",type:1,content:[{name:"app_id",desc:"APPID",value:this.config.app_id},{name:"channel",desc:"CHANNEL",value:this.config.channel},{name:"domain",desc:"Domain",value:this.collect.configManager.getDomain()},{name:"sdk_version",desc:"SDK Version",value:"5.3.3_oversea"},{name:"sdk_type",desc:"SDK Import Type",value:"npm"}]},{title:"UserInfo",key:"user",type:2,content:[{name:"uuid",desc:"UserUniqueId",value:this.collect.configManager.get("user").user_unique_id||""},{name:"web_id",desc:"WEB_ID",value:this.collect.configManager.get("user").web_id||""}]},{title:"CommonInfo",type:2,key:"common",content:[{name:"browser",desc:"Browser",value:this.collect.configManager.get("browser")},{name:"browser_version",desc:"Browser Version",value:this.collect.configManager.get("browser_version")},{name:"platform",desc:"Platform",value:this.collect.configManager.get("platform")},{name:"device_model",desc:"Devide Model",value:this.collect.configManager.get("device_model")},{name:"os_name",desc:"Os Name",value:this.collect.configManager.get("os_name")},{name:"os_version",desc:"Os Version",value:this.collect.configManager.get("os_version")},{name:"resolution",desc:"Screen Resolution",value:this.collect.configManager.get("resolution")},{name:"referrer",desc:"Referrer",value:this.collect.configManager.get("referrer")},{name:"custom",desc:"Custom Info",value:JSON.stringify(this.collect.configManager.get("custom"))}]},{title:"Config Info",key:"config",type:3,content:[{name:"autotrack",desc:"AutoTrackEvent",value:!!this.config.autotrack},{name:"stay",desc:"StayDuration",value:!!this.config.enable_stay_duration}]},{title:"A/B Config Info",key:"ab",type:4,content:[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test}]}],this.config.enable_ab_test){var e=this.getInfo("ab"),t=[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test},{name:"vid",desc:"A/B VID",value:this.collect.configManager.getAbVersion()},{name:"ab_domain",desc:"Domain",value:this.config.ab_channel_domain||Is(Ws[this.config.channel])},{name:"all_values",desc:"A/B ALL Values",value:this.collect.configManager.getAbCache()}];e.content=t,this.setInfo("ab",e)}},e.prototype.getInfo=function(e){var t=null;return this.info.forEach((function(n){n.key===e&&(t=n)})),t},e.prototype.setInfo=function(e,t){var n=!1;this.info.forEach((function(i){i.key===e&&(n=!0,i=t)})),n||this.info.push(t)},e.prototype.getSecondInfo=function(e,t){var n=this.getInfo(e),i=null;return n.content.forEach((function(e){e.name===t&&(i=e)})),i},e.prototype.setSecondInfo=function(e,t,n){var i=this.getInfo(e);i.content.forEach((function(e){e.name===t&&(e.value=n)})),this.setInfo(e,i)},e.prototype.loadHook=function(){var e=this;this.collect.on(Ts.DEBUGGER_MESSAGE,(function(t){switch(t.type){case Ts.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",infoType:t.infoType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.setSecondInfo("ab","vid",e.collect.configManager.getAbVersion()),e.setSecondInfo("ab","all_values",e.collect.configManager.getAbCache())):"USER"===t.secType&&(e.setSecondInfo("user","uuid",e.collect.configManager.get("user").user_unique_id),e.setSecondInfo("user","web_id",e.collect.configManager.get("user").web_id)),void e.updateInfo();case Ts.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var i=t.data[0],o=i.events;if(!o.length)return;o.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.focusShow=!0,n.status=t.status,n.type=e.filterEvent.has(n.event)?"sdk":"cus",n.verifyType=t.verifyType?"verify":"no",n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+" msg: "+(t.msg||t.failType)})})),e.updateEvent(i)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,sdk_type:"5.3.3_oversea".includes("tob")?"tob":"inner",appId:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.setSecondInfo("user","sid",t.tobid),e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};window&&window.postMessage(n,this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e="#debugger-applog-web {\n      position: fixed;\n      width: 45px;\n      height: 45px;\n      background-image: url("+Is("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4bz18z1nz1nz1jz1mz1ez4az1nz1lz1e")+");\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 45px;\n    }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.appendChild(document.createTextNode(e)),t.appendChild(n);var i=document.createElement("div");i.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var o=document.createElement("div");o.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(i),document.getElementsByTagName("body")[0].appendChild(o);var r=document.getElementById("debugger-applog-web");r&&r.addEventListener("click",(function(){window&&window.postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),pc={autotrack:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/autotrack.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/ab.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/stay.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/route.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/route.js"},object:"LogRoute"},tracer:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/tracer.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/tracer.js"},object:"LogTracer"},retry:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/retry.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/retry.js"},object:"LogRetry"},visual:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/visual.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/visual.js"},object:"LogVisual"}},gc=["ab","autotrack","Stay","store","et","profile","cep","heartbeat","monitor","route","tracer"],vc=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new Ds,this.remotePlugin=new Map,this.Types=Zs,this.adapters.storage=Hs,this.loadType="full"}return e.usePlugin=function(t,n,i){if(n){for(var o=!1,r=0,a=e.plugins.length;r<a;r++)if(e.plugins[r].name===n){e.plugins[r].plugin=t,e.plugins[r].options=i||{},o=!0;break}o||e.plugins.push({name:n,plugin:t,options:i})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&gc.includes(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n,i,o=this;try{n=JSON.parse(JSON.stringify(t))}catch(e){n=t}if(this.logger=new oc(this.name,n.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(n&&Rs(n))if(n.app_id&&"number"==typeof(i=n.app_id)&&!isNaN(i))if(!n.app_key||function(e){return"string"==typeof e}(n.app_key)){var r=["sg","va","in","ie","ie2"];n.channel_domain||-1!==r.indexOf(n.channel)||(this.logger.warn("your channel: "+n.channel+" is not exist. channel must be one of "+r.join(",")+", use sg instead, please check!!!"),n.channel="sg"),this.spider=new rc,this.spider.checkSpider(n)?this.logger.warn("The current environment may be a spider, can not report!"):(this.appBridge=new ac(this,n.enable_native),this.requestManager=new hc(this,n),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ic(this,n),this.debugger=new dc(this,n),this.initConfig=n,this.emit(Zs.Init),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Init",data:n,level:"info",time:Date.now(),infoType:"cus"}),n.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(n.app_id),this.eventManager=new sc,this.tokenManager=new uc,this.sessionManager=new fc,Promise.all([new Promise((function(e){o.once(Zs.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){o.once(Zs.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var n=t.plugin,i=t.options,r=Object.assign(o.initConfig,i);o.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Load "+t.name+" Plugin",level:"info",time:Date.now(),infoType:"sdk"});var a=new n;return a.apply(o,r),e.push(a),e}),o.pluginInstances)}catch(e){console.warn("load plugin error, "+e.message),o.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Load Plugin Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}o.sdkReady=!0,o.emit(Zs.Ready),o.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Initialization Completed",time:Date.now(),level:"info",secType:"USER",data:o.configManager.get("user"),infoType:"sdk"}),o.logger.info("appid: "+n.app_id+", userInfo:"+JSON.stringify(o.configManager.get("user"))),o.logger.info("appid: "+n.app_id+", sdk is ready, version is 5.3.3_oversea, you can report now !!!"),n.disable_auto_pv&&(o.disableAutoPageView=!0);try{("full"===o.loadType&&n.enable_ab_test||n.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){o.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}o.pageView(),o.on(Zs.TokenChange,(function(e){"webid"===e&&o.pageView(),o.logger.info("appid: "+n.app_id+" token change, new userInfo:"+JSON.stringify(o.configManager.get("user"))),o.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Set UserInfo",time:Date.now(),secType:"USER",level:"info",data:o.configManager.get("user"),infoType:"sdk"})})),o.on(Zs.TokenReset,(function(){o.logger.info("appid: "+n.app_id+" token reset, new userInfo:"+JSON.stringify(o.configManager.get("user"))),o.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Reset UserInfo",time:Date.now(),secType:"USER",level:"info",data:o.configManager.get("user"),infoType:"sdk"})})),o.on(Zs.RouteChange,(function(e){e.init||n.disable_route_report||o.pageView()}))})),this.tokenManager.apply(this,n),this.eventManager.apply(this,n),this.sessionManager.apply(this,n)),this.inited=!0)}else this.logger.warn("app_key param is error, must be string, please check!");else this.logger.warn("app_id param is error, must be number, please check!");else this.logger.warn("init params error,please check")},e.prototype.config=function(e){if(this.inited)if(e&&Rs(e)){var t;try{t=JSON.parse(JSON.stringify(t))}catch(n){t=e}if(this.bridgeReport)this.appBridge.setConfig(t);else{t._staging_flag&&1===t._staging_flag&&(this.staging=!0),t.disable_auto_pv&&(this.disableAutoPageView=!0,delete t.disable_auto_pv);var n=ws({},t);if(this.initConfig&&this.initConfig.configPersist){var i=this.configManager.getStore();i&&(n=Object.assign(i,t)),this.configManager.setStore(t)}n.web_id,n.user_unique_id;var o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&(n[i[o]]=e[i[o]])}return n}(n,["web_id","user_unique_id"]);n.hasOwnProperty("web_id")&&this.emit(Zs.ConfigWebId,n.web_id),n.hasOwnProperty("user_unique_id")&&this.emit(Zs.ConfigUuid,n.user_unique_id),this.configManager.set(o),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Config",level:"info",time:Date.now(),data:n,infoType:"cus"})}}else console.warn("config params is error, please check");else console.warn("config must be use after function init")},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(Zs.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(Zs.Start),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Start",level:"info",time:Date.now(),infoType:"cus"}),this.bridgeReport&&(this.pageView(),this.emit(Zs.Ready)))},e.prototype.event=function(e,t){var n=this;try{var i=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&i.push(t)}));else{var o=this.processEvent(e,t);if(!o)return;i.push(o)}this.bridgeReport?i.forEach((function(e){var t=e.event,i=e.params;n.appBridge.onEventV3(t,JSON.stringify(i))})):i.length&&(this.emit(Zs.Event,i),this.emit(Zs.SessionResetTime)),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event",level:"info",time:Date.now(),data:e,infoType:"cus"})}catch(e){this.logger.warn("something error, please check"),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))this.logger.warn("beconEvent not support batch report, please check");else{var n=[],i=this.processEvent(e,t||{});i&&(n.push(i),n.length&&(this.emit(Zs.BeconEvent,n),this.emit(Zs.SessionResetTime)),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Beacon Event",level:"info",time:Date.now(),data:e,infoType:"sdk"}))}},e.prototype.beaconEvent=function(e,t){this.beconEvent(e,t)},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return console.warn("eventName is null please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var i=t;"object"!=$(i)&&(i={}),i.profile?delete i.profile:i.event_index=zs();var o=void 0;return i.local_ms?(o=i.local_ms,delete i.local_ms):o=+new Date,{event:n,params:i,local_time_ms:o,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:n.message,infoType:"sdk"}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=ws(ws({},t),e);this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Report PV",level:"info",time:Date.now(),infoType:"sdk"}),this.event("predefine_pageview",n)}else console.warn("predefinePageView should call after init")},e.prototype.clearEventCache=function(){this.emit(Zs.CleanEvents)},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.getSessionId=function(){return lc()},e.prototype.setSessionId=function(e){this.emit(Zs.SessionReset,e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(Zs.ResetStay,{url_path:e,title:t,url:n},Zs.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(Zs.SetStay,{url_path:e,title:t,url:n},Zs.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var i=!1,o=function(t){if(!i){i=!0;var o=n.configManager.get().user;return t&&(o.tobid=t,o["diss".split("").reverse().join("")]=t),e(ws({},o))}},r=function(){n.tokenManager.getTobId().then((function(e){o(e)}))};this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute GetToken",level:"info",time:Date.now(),infoType:"cus"}),this.sdkReady?r():(t&&setTimeout((function(){o()}),t),this.on(Zs.Ready,(function(){r()})))}else console.warn("predefinePageView should call after init")},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(Zs.ProfileSet,e,Zs.Profile),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(Zs.ProfileSetOnce,e,Zs.Profile),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(Zs.ProfileIncrement,e,Zs.Profile),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(Zs.ProfileUnset,e,Zs.Profile),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(Zs.ProfileAppend,e,Zs.Profile),this.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(Zs.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,Zs.Ab)},e.prototype.getVar=function(e,t,n,i){this.emit(Zs.AbVar,{name:e,defaultValue:t,callback:n,uuid:i},Zs.Ab)},e.prototype.getABconfig=function(e,t){this.emit(Zs.AbConfig,{params:e,callback:t},Zs.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(Zs.AbVersionChangeOn,e,Zs.Ab),function(){t.emit(Zs.AbVersionChangeOff,e,Zs.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(Zs.AbVersionChangeOff,e,Zs.Ab)},e.prototype.openOverlayer=function(){this.emit(Zs.AbOpenLayer,"",Zs.Ab)},e.prototype.closeOverlayer=function(){this.emit(Zs.AbCloseLayer,"",Zs.Ab)},e.prototype.getAllVars=function(e){this.emit(Zs.AbAllVars,e,Zs.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(Zs.TokenComplete),this.emit(Zs.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(Zs.TokenComplete),this.emit(Zs.DestoryInstance))},e.plugins=[],e}(),mc="__rangers_ab_style__";!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(Ys||(Ys={}));var _c=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="no",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data={},this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var i=t.enable_multilink,o=t.ab_channel_domain,r=t.enable_ab_visual,a=t.ab_cross,s=t.ab_cookie_domain,c=t.ab_timeout,u=t.disable_auto_ab,l=Ws[t.channel||"sg"]||Ws.sg,f=o||Is(l),h=e.adapters.storage;this.cacheStorgae=new h(!1),this.timeout=c||3e3,this.enable_multilink=i,this.enable_ab_visual=r,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=a,this.ab_cookie_domain=s||"",this.fetchUrl=f+"/service/2/abtest_config/",this.reportUrl=this.collect.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500,this.ab_user_mode=t.ab_user_mode||"user_unique_id",this.callbackMap=new Map;var d=this.collect.Types;this.types=d,this.collect.on(d.TokenChange,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(d.AbVar,(function(e){var t=e.name,i=e.defaultValue,o=e.callback;n.getVar(t,i,o)})),this.collect.on(d.AbAllVars,(function(e){n.getAllVars(e)})),this.collect.on(d.AbConfig,(function(e){var t=e.params,i=e.callback;n.getABconfig(t,i)})),this.collect.on(d.AbExternalVersion,(function(e){n.setExternalAbVersion(e)})),this.collect.on(d.AbOpenLayer,(function(){n.openOverlayer()})),this.collect.on(d.AbCloseLayer,(function(){n.closeOverlayer()})),this.collect.on(d.AbVersionChangeOn,(function(e){n.changeListener.set(e,e)})),this.collect.on(d.AbVersionChangeOff,(function(e){n.changeListener.get(e)&&n.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(!u&&this.fetchAB(),this.readyStatus=!0),this.collect.emit(d.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var i=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var o in n)i(o)}},e.prototype.loadMode=function(){var e=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e){return}}(),t="";if(e){var n=e.scenario,i=e.href;n?(this.editMode=!0,t=n):!i||-1===i.indexOf("datatester")&&-1===i.indexOf("visual-editor")||(this.editMode=!0,t="visual-editor")}this.enable_ab_visual&&"visual-editor"===t&&this.collect.destoryInstace()},e.prototype.checkLocal=function(){var e=this.getABCache(),t=e.ab_version,n=e.ab_ext_version,i=e.ab_version_multilink,o=(e.data,this.checkFromUrl());o?this.mulilinkVersions.push(o):this.mulilinkVersions=i||[],this.extVersions=n||[],this.versions=t||[];var r=this.versions.concat(this.extVersions);this.enable_multilink&&(r=r.concat(this.mulilinkVersions))},e.prototype.checkFromUrl=function(){var e=Us(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e=this.extVersions.length?this.versions.concat(this.extVersions):this.versions;this.enable_multilink&&(e=e.concat(this.mulilinkVersions)),this.configVersions(e.join(",")),this.updateABCache(),this.changeListener.size>0&&this.changeListener.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,n,i){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var o={name:e,defaultValue:t,callback:n,type:Ys.Var};this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetVar",level:"info",time:Date.now(),data:e,infoType:"cus"}),"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(o,e,i):(this.callbackMap.get(e),this.callbackMap.set(e,o))},e.prototype.setAbUuid=function(e,t){this.collect.configManager.setAbUuidCache(e,t)},e.prototype.getRealVar=function(e,t,n){var i=e.name,o=e.defaultValue,r=e.callback,a=this.data;if(a){var s=a[i];if(s&&Rs(s)){var c=s.vid;return"$ab_url"===t?this.mulilinkVersions.includes(c)||this.mulilinkVersions.push(c):this.versions.includes(c)||this.versions.push(c),this.setAbUuid(c,n),this.updateVersions(),this.fechEvent(c,t||i,o,r,s.val),void this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetVar, Exposure Experiment "+i,level:"info",time:Date.now(),data:a[i],infoType:"sdk"})}this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GerVar Default Callback",level:"info",time:Date.now(),data:this.data,infoType:"sdk"}),r(o)}else r(o)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:Ys.All};this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetAllVars",level:"info",time:Date.now(),infoType:"cus"}),"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbackMap.set("allVars",t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{}),this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetAllVars Callback",level:"info",time:Date.now(),data:this.data,infoType:"sdk"})},e.prototype.fechEvent=function(e,t,n,i,o){try{if(this.config.disable_track_event)return;if(!e)return;var r=this.collect.configManager.get(),a=r.header,s=r.user,c=this.getABCache(),u=s[this.ab_user_mode]||s.user_unique_id;if(c&&c.uuid&&c.uuid!==u)return;var l={event:"abtest_exposure",ab_sdk_version:""+e,params:JSON.stringify({app_id:this.config.appId,ab_url:"$ab_url"===t?n:window.location.href,data:this.data}),local_time_ms:Date.now()};a.custom=JSON.stringify(a.custom);var f={events:[l],user:s,header:a};this.reportExposure(f,t),i&&i(o)}catch(e){this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.reportExposure=function(e,t){var n=this;this.exposureCache.push(e),this.reportTimeout&&clearTimeout(this.reportTimeout),this.exposureCache.length>=this.exposureLimit?this.report(t):this.reportTimeout=setTimeout((function(){n.report(t),clearTimeout(n.reportTimeout)}),this.ab_batch_time)},e.prototype.report=function(e){var t=this;this.collect.requestManager.useRequest({url:this.reportUrl,data:this.exposureCache,timeout:2e4,useBeacon:"$ab_url"===e}),this.exposureCache.forEach((function(e){t.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_EVENT,info:"SDK Report Exposure Event Success",time:Date.now(),data:[e],code:200,status:"success",infoType:"sdk"})})),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var n=Object.keys(e);n&&n.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){return this.cacheStorgae.getItem(e)},e.prototype.set=function(e,t){this.cacheStorgae.setItem(e,t),this.collect.configManager.setAbCache(t),this.collect.event("abtest_cache",{env_uuid:this.collect.configManager.get("user").user_unique_id||"",cache:JSON.stringify(t)})},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[],this.collect.configManager.clearAbCache()},e.prototype.openOverlayer=function(e){var t=this;if(function(){if(!document.getElementById(mc)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=mc,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}(),e)var n=setTimeout((function(){t.closeOverlayer(),clearTimeout(n)}),e)},e.prototype.closeOverlayer=function(){var e;(e=document.getElementById(mc))&&e.parentElement.removeChild(e)},e.prototype.fetchComplete=function(e,t){var n=this;try{if(e&&"[object Object]"==Object.prototype.toString.call(e)){var i=this.collect.configManager.get().user;if(t&&t!==i.user_unique_id)return;this.data=e,this.setAbCache(t);var o=[];Object.keys(e).forEach((function(t){var n=e[t].vid;n&&o.push(n)})),this.versions=this.versions.filter((function(e){return o.includes(e)}));var r=e.$ab_url,a=e.$ab_modification;if(a&&a.val&&this.enable_ab_visual){if(this.collect.destroy)return}else if(r&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter((function(e){return o.includes(e)}));var s=r.val,c=r.vid;s&&c&&this.getVar("$ab_url",s,(function(){n.editMode||(s!==window.location.href?setTimeout((function(){if(!n.collect.destroy){var e=""+s;e=-1===e.indexOf("http")?"https://"+e:e,Ns(e).host!==location.host?e=e+"&vid="+c:window.history.replaceState("","",e),window.location.href=e}}),100):n.closeOverlayer())}))}this.updateVersions()}else this.closeOverlayer();this.callbackMap.forEach((function(e){return n[e.type===Ys.Var?"getRealVar":"getRealAllVars"](e,"")}))}catch(e){}},e.prototype.fetchAB=function(e){var t=this,n=this.collect.configManager.get(),i={header:ws(ws(ws({aid:this.config.app_id},n.user||{}),n.header||{}),{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:window.location.href})};this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch AB Request",level:"info",logType:"fetch",time:Date.now(),data:i,infoType:"sdk"});var o=n.user[this.ab_user_mode]||n.user.user_unique_id;this.collect.requestManager.useRequest({url:this.fetchUrl,data:i,success:function(n){t.fetchStatus="complete",t.refreshFetchStatus="complete";var i=n.data;"success"===n.message?(t.fetchComplete(i,o),e&&e(i)):(t.fetchComplete(null,o),e&&e(null)),t.collect.emit(t.types.AbComplete,i),t.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Fetch AB Request Success",level:"info",logType:"fetch",time:Date.now(),data:i,infoType:"sdk"})},fail:function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,o),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Fetch AB Request Network Error",level:"error",logType:"fetch",time:Date.now(),infoType:"sdk"})},timeout:this.timeout})},e.prototype.filterUrl=function(e){try{var t="";-1!==e.indexOf("&multilink=true")?t="&multilink=true[\0-]*":-1!==e.indexOf("?multilink=true")&&(t="\\?multilink=true[\0-]*");var n=new RegExp(t,"g");e=e.replace(n,"")}catch(e){}return e},e}(),yc=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var i=e.Types;e.on(i.SubmitBefore,(function(t){e.requestManager.useBeacon({url:n.url,data:t}),e.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_EVENT,info:"SDK Report ByteIo Verify Request",time:Date.now(),data:t,code:200,status:"success",verifyType:!0})}))}}else console.log("please use correct et_test url")},e}(),bc=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.focusState=!0,this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,Rs(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageAlive(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var n=t?this.aliveDTime:Date.now()-this.sessionStartTime;n<0||n>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||t&&"hidden"===document.visibilityState||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.aliveName,ws({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:n,is_support_visibility_change:Ps(),startTime:this.sessionStartTime,hidden:document.visibilityState,leave:e,mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.sessionStartTime=Date.now())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval((function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent(!0)},e.prototype.enablePageAlive=function(){var e=this;this.timerHandler=this.setUpTimer();var t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),Bs(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.timerHandler&&(clearInterval(e.timerHandler),e.sendEvent(!1)),e.focusState=!1},n=function(){e.focusState=!0,e.sessionStartTime=Date.now(),e.timerHandler=e.setUpTimer()};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),Ec=function(){function e(e,t){var n=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.focusState=!0,this.visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=Date.now():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=Date.now())},this.beforeunload=function(){if(n.totalTime+=(n.activeEndTime||Date.now())-n.activeStartTime,n.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:n.totalTime,page_title:document.title||location.pathname}))}catch(e){}n.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||864e5,this.pageStartTime=Date.now(),Rs(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus(),this.resetData()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.resetParams=function(e,t,n){this.url_path=e,this.url=n,this.title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageClose(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0,this.resetParams(location.pathname,document.title,location.href)},e.prototype.sendEventPageClose=function(){var e=Date.now()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.closeName,ws({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:Ps(),mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.pageStartTime=Date.now(),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e=this,t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),Bs(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.focusState=!1},n=function(){e.focusState=!0};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),kc=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new bc(e,t),this.pageClose=new Ec(e,t);var i=this.collect.Types;this.collect.on(i.ResetStay,(function(e){var t=e.url_path,i=e.title,o=e.url;n.resetStayDuration(t,i,o)})),this.collect.on(i.RouteChange,(function(e){e.init||t.disable_route_report||n.resetStayDuration()})),this.collect.on(i.SetStay,(function(e){var t=e.url_path,i=e.title,o=e.url;n.setStayParmas(t,i,o)})),this.enable(this.url_path,this.title,this.url),this.ready(i.Stay),this.collect.emit(i.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var i=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var o in n)i(o)}},e.prototype.enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.pageAlive.setParams(e,t,n),this.pageClose.setParams(e,t,n),this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute resetStayParams",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e.prototype.reset=function(e,t,n){this.disable(),this.enable(e,t,n)},e.prototype.resetStayDuration=function(e,t,n){this.reset(e,t,n),this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"SDK Execute resetStayDuration",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e}(),wc=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,i=Date.now()+t;return n=window.setTimeout((function o(){var r=Date.now()-i;e(),i+=t,n=window.setTimeout(o,Math.max(0,t-r))}),t),function(){window.clearTimeout(n)}}((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var i=this.collect.Types;this.collect.on(i.SessionReset,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),Sc=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var i=this.collect.Types;this.collect.on(i.Ready,(function(){n.sdkOnload()})),this.collect.on(i.SubmitError,(function(e){var t=e.type,i=e.eventData,o=e.errorCode;"f_data"===t&&n.sdkError(i,o)}))}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,i=t.user,o=n.app_id,r=n.app_name,a=n.sdk_version,s=i.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:o,app_name:r||"",sdk_version:a,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA"}),local_time_ms:Date.now()}],user:{user_unique_id:s},header:{}};setTimeout((function(){e.collect.requestManager.useRequest({url:e.url,data:[c],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e.prototype.sdkError=function(e,t){var n=this;try{var i=e[0],o=i.user,r=i.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var s={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:r.app_id,app_name:r.app_name||"",error_event:e.event,sdk_version:r.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(r),user:JSON.stringify(o)}),local_time_ms:Date.now()}})),user:{user_unique_id:o.user_unique_id},header:{}};setTimeout((function(){n.collect.requestManager.useRequest({url:n.url,data:[s],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e}();function Ac(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}function xc(e){for(var t=e;t&&!Ac(t,"container");){if("HTML"===t.nodeName||"BODY"===t.nodeName)return e;t=t.parentElement}return t||e}function Cc(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}var Tc=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},Dc=function(){function e(e,t,n){var i=this;this.statistics=!1,this.pageView=!1,this.clickEvent=function(e){(function(e,t){if(1!==e.nodeType)return!1;if(!t.svg&&function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n}(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var n=e;return!("none"===n.style.display||!Ac(n,"container")&&!function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some((function(e){return e.children.length>0}))}return!0}(n)&&!t.svg)})(e.target,i.options)&&i.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){i.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){i.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&i.eventHandel({eventType:"dom",eventName:"beat"},ws({beat_type:0},e)),i.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){i.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=n.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e){if(this.config.click&&window.document.addEventListener("click",this.clickEvent,!0),this.config.change&&window.document.addEventListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),this.config.pv){this.collect.on("route-change",(function(e){var n=e.config,i=e.name;t.getPageViewEvent(n,i),t.pageView=!0}));var n=setTimeout((function(){t.pageView||(t.getPageViewEvent(t.getDefaultConfig()),t.pageView=!0,clearTimeout(n))}),2e3)}if(this.config.beat){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var i=0,o=null;window.addEventListener("scroll",(function(){clearTimeout(o),o=setTimeout(r,500),i=document.documentElement.scrollTop||document.body.scrollTop}));var r=function(){(document.documentElement.scrollTop||document.body.scrollTop)==i&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}try{var a=window.performance&&window.performance.getEntriesByType("paint");a&&a.length?(new PerformanceObserver((function(e){var n=e.getEntries(),i=n[n.length-1],o=i.renderTime||i.loadTime;t.statistics||(t.getPageLoadEvent(o),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]}),setTimeout((function(){t.statistics||(t.getPageLoadEvent(a[0].startTime||0),t.statistics=!0)}),2e3)):this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}}},e.prototype.removeListener=function(){window.document.removeEventListener("click",this.clickEvent,!0),window.document.removeEventListener("change",this.changeEvent,!0),window.document.removeEventListener("submit",this.submitEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var n;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(n=setInterval((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),Bs((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(n)}))}catch(e){}},e.prototype.getDefaultConfig=function(){return{is_html:1,url:location.href,referrer:document.referrer,page_key:location.href,refer_page_key:document.referrer,page_title:document.title||location.pathname,page_manual_key:"",refer_page_manual_key:"",refer_page_title:"",page_path:location.pathname,page_host:location.host}},e}(),Rc={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},Oc=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();function zc(e,t,n,i){var o={},r=function(e){if(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return{left:t.left,top:t.top,element_width:n,element_height:i}}}(t),a=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,i=e.clientY,o=t.left,r=t.top,a=n-o>=0?n-o:0,s=i-r>=0?i-r:0;return{touch_x:Math.floor(a),touch_y:Math.floor(s)}}(e,r),s=r.element_width,c=r.element_height,u=a.touch_x,l=a.touch_y,f=function(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElement;var n=[],i=[];return t.forEach((function(e){var t=function(e){if(null===e)return{str:"",index:0};var t=0,n=e.parentElement;if(n)for(var i=n.children,o=0;o<i.length&&i[o]!==e;o++)i[o].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),Ac(e,"list")?"[]":""].join(""),index:t}}(e),o=t.str,r=t.index;n.unshift(o),i.unshift(r)})),{element_path:"/"+n.join("/"),positions:i}}(t),h=f.element_path,d=f.positions,p=function(e){var t=xc(e),n=[];return function e(t){var i=Cc(t);if(i&&-1===n.indexOf(i)&&n.push(i),t.childNodes.length>0)for(var o=t.childNodes,r=0;r<o.length;r++)8!==o[r].nodeType&&e(o[r])}(t),n}(t),g=window.performance.timing.navigationStart,v=Date.now()-g,m=d.map((function(e){return""+e})),_=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(_=window.TEAVisualEditor.getOriginXpath({xpath:h,positions:m})),o.element_path=_&&_.xpath||h,o.positions=_&&_.positions||m,i&&!i.text&&(o.texts=p,o.element_title=function(e){var t=xc(e),n="";return function e(t){var i=Cc(t);if(i&&(n+=i),t.childNodes.length>0)for(var o=t.childNodes,r=0;r<o.length;r++)3===o[r].nodeType&&e(o[r])}(t),n}(t)),o.element_id=t.getAttribute("id")||"",o.element_class_name=t.getAttribute("class")||"",o.element_type=t.nodeType,o.element_width=Math.floor(s),o.element_height=Math.floor(c),o.touch_x=u,o.touch_y=l,o.page_manual_key="",o.elememt_manual_key="",o.since_page_start_ms=v,o.page_start_ms=g,o.page_path=location.pathname,o.page_host=location.host,n.track_attr&&function(e,t){return!!function(e,t){if("string"==typeof t)return Tc(e,t);if(Os(t)){for(var n=!1,i=0;i<t.length;i++)if(Tc(e,t[i])){n=!0;break}return n}}(e,t)}(t,n.track_attr)){var y=function(e,t){var n={};if("string"==typeof t)Tc(e,t)&&(n.attrs=e.getAttribute(t));else if(Os(t))for(var i=0;i<t.length;i++)Tc(e,t[i])&&(n[t[i]]=e.getAttribute(t[i]));return n}(t,n.track_attr);for(var b in y)o[b]=y[b]}var E=xc(t);return"A"===E.tagName&&(o.href=E.getAttribute("href")),"IMG"===t.tagName&&(o.src=t.getAttribute("src")),o}var Ic=function(e,t,n,i,o){return ws(ws({event:e},zc(t,n,i,o)),{is_html:1,page_key:window.location.href,page_title:document.title})},Mc=function(){function e(e,t){this.ignore={text:!0},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!0===t.text&&(this.ignore.text=!1),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return e.prototype.handleEvent=function(e,t){try{if(function(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}(e.target))return null;var n="bav2b_click";switch(t){case"click":return n=this.eventName.click,Ic(n,e,e.target,this.options,this.ignore);case"exposure":return n=this.eventName.exposure,Ic(n,e,e.target,this.options,this.ignore);case"change":return ws(ws({},Ic(n="bav2b_change",e,e.target,this.options)),function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}}(n,e.target));case"submit":return Ic(n="bav2b_submit",e,e.target,this.options)}}catch(e){return console.error(e),null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:""}e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("page event error "+JSON.stringify(e))}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,i=window.performance.timing,o=i.loadEventEnd-i.navigationStart;t.page_init_cost_ms=parseInt(n||(o>0?o:0)),t.page_start_ms=i.navigationStart}catch(e){console.log("page_statistics event error "+JSON.stringify(e))}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("beat event error "+JSON.stringify(e))}return e},e}(),Bc=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,i=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(i,t):this.collect.event(i,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),Pc={},Nc=[];function Uc(e,t,n,i){var o=e&&e.source||window.opener||window.parent,r=e&&e.origin||i||"*",a={type:t,payload:n};o.postMessage(JSON.stringify(a),r)}function Gc(e){if(Nc.some((function(e){return"*"===e}))||Nc.some((function(t){return e.origin.indexOf(t)>-1}))){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){t=void 0}if(!t)return;var n=t.type,i=t.payload;Pc[n]&&Pc[n].forEach((function(t){"function"==typeof t&&t(e,i)}))}}var jc=!1;function Lc(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.appId=t.app_id;var n,i,o,r,a=t.channel_domain,s="";if((n=["*"]).length&&n.forEach((function(e){Nc.push(e)})),a){var c,u="";try{var l=window.performance.getEntriesByType("resource");if(l&&l.length&&(l.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(u=e.name)})),u&&(c=u.split("/"))&&c.length)){s="https:/";for(var f=2;f<c.length&&f!==c.length-1;f++)s=s+"/"+c[f];if(s&&s.indexOf("/5.0")){var h=s.split("/5.0");s=h[0]||s}}}catch(e){}}delete(i=ws({},t)).filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",config:i,version:"5.3.3_oversea"},"*"),window.addEventListener("message",Gc,!1);try{r=function(n){var i=n.data.app_id;i&&i!==t.app_id||function(e){var t,n,i,o,r=e.event,a=e.editorUrl,s=e.autoTrackInstance;jc||(jc=!0,t=a,n=function(){Uc(r,"editorScriptloadSuccess"),s.destroy()},i=function(){r&&Uc(r,"editorScriptloadError"),jc=!1},(o=document.createElement("script")).src=t,o.onerror=function(){i()},o.onload=function(){n()},document.getElementsByTagName("head")[0].appendChild(o))}({event:n,editorUrl:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/log-sdk/collect/heatmap-core.js?query="+Date.now(),autoTrackInstance:e})},Pc[o="tea:openHeatMapCore"]=Pc[o]||[],Pc[o].push(r)}catch(e){console.log("openHeatMapCore error")}}var Vc,Kc=function(){function e(e){this._instance=null,this._intersection=e,this.init()}return e.prototype.init=function(){var e=this;this._instance=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&e.attributeChangeObserve(t),"childList"===t.type&&e.modifyNodeObserve(t)}))})),this._instance.observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1})},e.prototype.attributeChangeObserve=function(e){e.target.hasAttribute("data-exposure")?this.exposureAdd(e,"mutation"):this.exposureRemove(e)},e.prototype.modifyNodeObserve=function(e){var t=this;Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureAdd(e,"intersect"),t.mapChild(e,t.exposureAdd)})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureRemove(e),t.mapChild(e,t.exposureRemove)}))},e.prototype.mapChild=function(e,t){var n=this;1===e.nodeType&&e.children.length&&Array.prototype.forEach.call(e.children,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t(e),n.mapChild(e,t)}))},e.prototype.exposureAdd=function(e,t){this._intersection.exposureAdd(e,t)},e.prototype.exposureRemove=function(e){this._intersection.exposureRemove(e)},e._exposure_observer=null,e}(),Fc=function(){function e(t,n){this.count=1,this.instance=this.buildObserver(),this.observeMap=e._observer_map,t.autotrack.exposure.ratio?this.Ratio=t.autotrack.exposure.ratio:0===t.autotrack.exposure.ratio?this.Ratio=0:this.Ratio=.5,this.EventHandle=n}return e.prototype.buildObserver=function(){var t=this;if(!e._observer_instance)return IntersectionObserver&&(e._observer_instance=new IntersectionObserver((function(e){e.forEach((function(e){t.observeMap.get(e.target._observeId)&&t.exposureEvent(e)}))}),{threshold:[.01,.25,.5,.75,1]})),e._observer_instance},e.prototype.exposureAdd=function(e,t){var n=e;"mutation"===t&&(n=e.target);var i=n._observeId;if(i||this.observeMap.has(i)){if(!1===n.visible){var o=n.getBoundingClientRect(),r=o.top,a=o.left,s=o.right,c=o.bottom;r>=0&&c<=window.innerHeight&&a>=0&&s<=window.innerWidth&&(n.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e))}}else n._observeId=this.count,n.visible=!1,this.observeMap.set(this.count,n),this.observe(n),this.count++},e.prototype.exposureRemove=function(e){this.observeMap.has(e._observeId)&&(this.observeMap.delete(e._observeId),this.unobserve(e))},e.prototype.exposureEvent=function(e){if(e.intersectionRatio>=this.Ratio&&e.isIntersecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e)}else e.target.visible=!1},e.prototype.observe=function(e){this.instance.observe(e)},e.prototype.unobserve=function(e){this.instance.unobserve(e)},e._observer_instance=null,e._observer_map=new Map,e}(),Hc=function(){function e(e,t){e.autotrack&&e.autotrack.exposure&&(this._intersection=new Fc(e,t),this._observer=new Kc(this._intersection),this.initObserver())}return e.prototype.initObserver=function(){var e=this;Array.prototype.forEach.call(document.querySelectorAll("[data-exposure]"),(function(t){e._intersection.exposureAdd(t,"intersect")}))},e}(),qc={hashTag:!1,impr:!1},$c=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;t.autotrack&&t.autotrack.collect_url&&!t.autotrack.collect_url()||(this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady))}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==$(t)?t:{},t=Object.assign(qc,t),this.destroyed=!1,this.options=t,this.Config=new Oc(Rc,this.options),this.Exposure=new Hc(this.config,this.handle.bind(this)),this.Listener=new Dc(t,this.collect,this.Config),this.EventHandle=new Mc(this.config,t),this.Request=new Bc(this.collect),this.autoTrackStart=!0,this.init(),Lc(this,this.config)},e.prototype.init=function(){this.Listener.init(this.handle.bind(this)),"base"===this.collect.loadType&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"exposure"===n||"change"===n||"submit"===n){var i=this.EventHandle.handleEvent(t,n);null!==i&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},i)}else if("page_view"===n||"page_statistics"===n){var o;o="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},o)}else if("beat"===n){var r=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},r)}}catch(e){console.log("handel dom event error "+JSON.stringify(e))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}();!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(Vc||(Vc={}));var Wc={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Jc=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.ready=t.app_id&&t.enable_tracer&&!t.disable_track_event,this.ready){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var i=this.collect.Types;e.adapters.fetch,this.collect.on(i.Event,(function(e){Os(e)?e.forEach((function(e){n.addCount("log")})):n.addCount("log")})),this.collect.on(i.SubmitError,(function(e){var t=e.type,i=e.eventDate,o=e.errorCode,r=e.response;n.addErrorCount(i,t,o,r)})),this.listener(),this.collect.emit(i.TracerReady)}},e.prototype.addCount=function(e,t,n){void 0===t&&(t="net"),void 0===n&&(n=1);try{this.tracerCache||(this.tracerCache=new Map);var i=void 0;if(this.tracerCache.has(e))(o=this.tracerCache.get(e)).has(t)?(i=o.get(t).params.count,i++,o.set(t,this.processTracer(i,e,t))):(i=n,o.set(t,this.processTracer(n,e,t)));else{var o=new Map;i=n,o.set(t,this.processTracer(n,e,t)),this.tracerCache.set(e,o)}"net"===t&&i>=this.limit[e]&&this.report(!1)}catch(e){console.log(e)}},e.prototype.addErrorCount=function(e,t,n,i){var o=this;try{if(e&&e.length){var r=e[0].events;r&&r.length&&("f_data"===t?(i&&i.hasOwnProperty("sc")?this.addCount("log",t,r.length-i.sc):this.addCount("log",t,r.length),this.errorCode[t]=n):r.forEach((function(e){var i="log";for(var r in Wc)if(-1!==Wc[r].indexOf(e.event)){i=r;break}o.addCount(i,t,1),o.errorCode[t]=n})))}}catch(e){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCache.forEach((function(e){console.log(e),e.forEach((function(e){t.push(e)}))})),t&&t.length&&this.sendTracer(t,e)}},e.prototype.sendTracer=function(e,t){try{var n=this.collect.eventManager.merge(e);this.collect.requestManager.useRequest({url:this.reportUrl,data:n,useBeacon:t}),this.tracerCache=null}catch(e){}},e.prototype.processTracer=function(e,t,n){try{var i={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:"5.3.3_oversea"};"f_net"!==n&&"f_data"!==n||(i.errorCode=this.errorCode[n]);var o=this.collect.processEvent("applog_trace",i);if(o&&o.event)return delete o.is_bav,o}catch(e){console.warn("something error")}},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),Bs((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),Xc="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,Yc=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t)if(pc.hasOwnProperty(n)){var i=pc[n].object,o=""+pc[n].src[e.channel];e.exist(n,i,o)}else console.warn("your "+n+" is not existplease check plugin name");else"object"==$(t)&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(e){this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"LoadExtend Fail",level:"error",time:Date.now(),data:e.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var i=this;Xc[t]?(this.process(e,Xc[t]),console.log("already has "+e+" plugin~")):this.loadPlugin(e,n,(function(){i.process(e,Xc[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","","load plugin:"+e+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","","load plugin:"+e+" error","-")}))},e.prototype.process=function(e,t,n){try{if(n){var i=new t;i.apply&&i.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(t){this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Extend Process Fail",level:"error",time:Date.now(),data:t.message}),console.log("excude "+e+" error, message:"+t.message)}},e.prototype.loadPlugin=function(e,t,n,i){var o=this;try{var r=document.createElement("script");r.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),r.onerror=function(){i(t)},r.onload=function(){o._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(r)}catch(e){this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"Extend LoadPlugin Fail",level:"error",time:Date.now(),data:e.message})}},e}(),Zc=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var n=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(n.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:"",refer_title:document.title||location.pathname,refer_manual_key:"",routeChange:!1},this.config.autotrack&&"object"==$(this.config.autotrack)&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];"function"==typeof history.onpushstate&&history.onpushstate({state:n});var r=t.call.apply(t,As([history,n],i));if(e.collect.sdkStop||e.collect.destroy)return r;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){e.setReferCache(e.lastLocation);var a=e.getPopStateChangeEventData();return e.lastLocation=location.href,e.sendPv(a,"pushState"),r}};var n=history.replaceState;history.replaceState=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var r=n.call.apply(n,As([history,t],i));if(e.collect.sdkStop||e.collect.destroy)return r;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){e.setReferCache(e.lastLocation);var a=e.getPopStateChangeEventData();return e.lastLocation=location.href,e.sendPv(a),r}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.getLocation=function(){return this.lastLocation},e.prototype.pathEquel=function(){try{return new URL(this.lastLocation).origin+new URL(this.lastLocation).pathname===new URL(location.href).origin+new URL(location.href).pathname}catch(e){return!1}},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this;window.addEventListener("hashchange",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&e.lastLocation!==window.location.href&&(!e.config.disable_spa_query||!e.pathEquel())&&e.allowHash){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}})),window.addEventListener("popstate",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&!(e.lastLocation===window.location.href||e.config.disable_spa_query&&e.pathEquel())){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e,t=this.storage.getItem(this.cache_key)||{},n=this.storage.getItem("__tea_cache_first_"+this.appid);return e=!n||1!=n,{is_html:1,url:location.href,referrer:this.handleRefer(),page_key:location.href,refer_page_key:this.handleRefer(),page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:t&&t.refer_manual_key||"",refer_page_title:t&&t.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+e}}catch(t){return this.collect.emit(Ts.DEBUGGER_MESSAGE,{type:Ts.DEBUGGER_MESSAGE_SDK,info:"something error",level:"error",time:Date.now(),data:t.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e.prototype.handleRefer=function(){var e="";try{var t=this.storage.getItem(this.cache_key)||{};e=t.routeChange?t.refer_key:this.collect.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.setReferCache=function(e){var t=this.storage.getItem(this.cache_key)||{};t.refer_key=e,t.routeChange=!0,this.storage.setItem(this.cache_key,t)},e}();vc.usePlugin(Yc,"extend"),vc.usePlugin(Jc,"tracer"),vc.usePlugin(_c,"ab"),vc.usePlugin(kc,"stay"),vc.usePlugin($c,"autotrack"),vc.usePlugin(yc,"et"),vc.usePlugin(wc,"heartbeat"),vc.usePlugin(Sc,"monitor"),vc.usePlugin(Zc,"route"),vc.usePlugin(Jc,"tracer"),new vc("default");var Qc=vc,eu=Object.defineProperty,tu=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,iu=Object.prototype.propertyIsEnumerable,ou=function(e,t,n){return t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ru=function(e,t){for(var n in t||(t={}))nu.call(t,n)&&ou(e,n,t[n]);if(tu){var i,o=L(tu(t));try{for(o.s();!(i=o.n()).done;){n=i.value;iu.call(t,n)&&ou(e,n,t[n])}}catch(e){o.e(e)}finally{o.f()}}return e},au=function(e){var t=null;try{var n=e.appId,i=e.tea,o=e.region,r=e.debug,a=function(e){var t={};switch(e){case $a.US_EASTRED:t={channel:"in",channel_type:"tcpy",channel_domain:"https://mcs-i18n.tiktok.com"};break;case $a.EU_TTP:t={channel:"ie",channel_type:"ttp",channel_domain:"https://mcs-ie.tiktokw.eu"};break;case $a.EU_TTP2:t={channel:"ie2",channel_type:"ttp",channel_domain:"https://mcs-ie2.tiktokw.eu"};break;case $a.US_TTP:t={channel_type:"ttp",channel_domain:"https://mcs.tiktokv.us"};break;case $a.US_TTP2:t={channel_type:"ttp",channel_domain:"https://mcs.tiktokw.us"};break;case $a.SINGAPORE_CENTRAL:t={channel:"sg",channel_type:"tcpy",channel_domain:"https://mcs-sg.tiktokv.com"};break;case $a.US_EAST:t={channel:"va",channel_type:"tcpy",channel_domain:"https://mcs-va.tiktokv.com"}}return t}(o),s=ru(ru({},a),null!=i?i:{});(function(e){return!(!e||!e.channel_type||!e.channel&&!e.channel_domain)})(s)&&((t=new Qc("".concat(qa,"_").concat(Va,"_").concat(Date.now()))).init(ru({app_id:null!=n?n:1988,log:r},s)),t.start())}catch(e){}return t},su=Object.defineProperty,cu=Object.getOwnPropertySymbols,uu=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable,fu=function(e,t,n){return t in e?su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},hu=q((function e(){var t=this;F(this,e),this._name="".concat(qa,"_").concat(Va,"_").concat(Date.now()),this._trackingModule=us(this._name),this._tea=null,this._slardar=null,this.init=function(e){t._tea=au(e),t._slardar=function(e){var t=null;try{t=new ks(e)}catch(e){}return t}(e),t._slardar&&t._trackingModule.init({slardarContainer:t._slardar})},this.reportCUJ=function(e,n,i){if(e)try{t._trackingModule.reportCUJ(e,n),t._tea&&t._tea.event(fs[e],function(e,t){for(var n in t||(t={}))uu.call(t,n)&&fu(e,n,t[n]);if(cu){var i,o=L(cu(t));try{for(o.s();!(i=o.n()).done;)n=i.value,lu.call(t,n)&&fu(e,n,t[n])}catch(e){o.e(e)}finally{o.f()}}return e}({status:n},null!=i?i:{}))}catch(e){}}})),du=hu,pu=Object.defineProperty,gu=Object.getOwnPropertySymbols,vu=Object.prototype.hasOwnProperty,mu=Object.prototype.propertyIsEnumerable,_u=function(e,t,n){return t in e?pu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},yu=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.call(this))._monitorModule=new du,e._isInitialized=!1,e.region="",e.bid="",e.debug=!1,n._instance||(n._instance=B(e)),M(e,n._instance)}return q(n,[{key:"init",value:function(e){if(!this._isInitialized){this._monitorModule.init(e);var t=null!=e?e:{},n=t.region,i=void 0===n?"":n,o=t.bid,r=void 0===o?"":o,a=t.appId,s=t.debug,c=void 0!==s&&s,u=t.modules;this.appId=a,this.region=i,this.bid=r,this.debug=c;var l=null==u?void 0:u.logging;l&&l instanceof Ja?this._customLogger=l:this.warn("[LoggingModule]: init - incorrect implementation of LoggingModule"),this._isInitialized=!0}}},{key:"sendDebugMessage",value:function(e){if(this.debug){var t=e.level;console[t](e.message,e);try{chrome.runtime.sendMessage(e)}catch(e){}}}},{key:"send",value:function(e){this.sendDebugMessage(e)}},{key:"getMeta",value:function(){return function(e,t){for(var n in t||(t={}))vu.call(t,n)&&_u(e,n,t[n]);if(gu){var i,o=L(gu(t));try{for(o.s();!(i=o.n()).done;)n=i.value,mu.call(t,n)&&_u(e,n,t[n])}catch(e){o.e(e)}finally{o.f()}}return e}({version:Va,bid:this.bid,region:this.region,appId:this.appId},La())}},{key:"info",value:function(e,t){var n;"function"==typeof(null==(n=this._customLogger)?void 0:n.info)&&this._customLogger.info(e,t),this.send({message:e,level:Za.INFO,meta:this.getMeta(),data:t})}},{key:"warn",value:function(e,t){var n;"function"==typeof(null==(n=this._customLogger)?void 0:n.warn)&&this._customLogger.warn(e,t),this.send({message:e,level:Za.WARN,meta:this.getMeta(),data:t})}},{key:"error",value:function(e,t){var n;"function"==typeof(null==(n=this._customLogger)?void 0:n.error)&&this._customLogger.error(e,t),this.send({message:e,level:Za.ERROR,meta:this.getMeta(),data:t})}},{key:"destruct",value:function(){var e;"function"==typeof(null==(e=this._customLogger)?void 0:e.destruct)&&this._customLogger.destruct(),this._isInitialized=!1}},{key:"reportCUJ",value:function(e,t,n){this._monitorModule.reportCUJ(e,t,n)}}]),n}(Ja),bu=new yu,Eu=Object.defineProperty,ku=Object.getOwnPropertySymbols,wu=Object.prototype.hasOwnProperty,Su=Object.prototype.propertyIsEnumerable,Au=function(e,t,n){return t in e?Eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},xu=function(e,t){for(var n in t||(t={}))wu.call(t,n)&&Au(e,n,t[n]);if(ku){var i,o=L(ku(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Su.call(t,n)&&Au(e,n,t[n])}}catch(e){o.e(e)}finally{o.f()}}return e},Cu=/^(https?:\/\/)/,Tu=q((function e(){var t=this;return F(this,e),this._region="",this._bid="",this._debug=!1,this.init=function(e){bu.info("[ServiceModule]: init");var n=null!=e?e:{},i=n.region,o=void 0===i?"":i,r=n.bid,a=void 0===r?"":r,s=n.appId,c=n.domain;t._appId=s,t._region=o,t._bid=a,t._domain=c},this.sendRequest=function(e,n,i,o){var r=Cu.test(e)?e:"".concat(t._domain).concat(e),a=new URL(r),s=Array.from(a.searchParams.entries()).reduce((function(e,t){var n=C(t,2),i=n[0],o=n[1];return void 0===o&&""===o||(e[i]=o),e}),{}),c=null!=o?o:{},u=c.params,l=c.timeout,f=function(e,t){var n={};for(var i in e)wu.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&ku){var o,r=L(ku(e));try{for(r.s();!(o=r.n()).done;)i=o.value,t.indexOf(i)<0&&Su.call(e,i)&&(n[i]=e[i])}catch(e){r.e(e)}finally{r.f()}}return n}(c,["params","timeout"]),h=xu(xu(xu({region:t._region,aid:t._appId,bid:t._bid},s),null!=u?u:{}),La());"GET"===n&&i&&"object"===$(i)&&(h=xu(xu({},h),i));var d=new URLSearchParams(function(e){if(!e)return"";var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var n=C(e,2),i=n[0],o=n[1];Array.isArray(o)?o.forEach((function(e){t.append(i,e)})):null!=o&&t.append(i,o)})),t.toString()}(h)),p=new URL("".concat(a.origin).concat(a.pathname,"?").concat(d.toString())),g=Ar({},f,{method:n,timeout:null!=l?l:0,data:i});return bu.info("[ServiceModule]: sendRequest start",g),za(p.href,g).then((function(e){return bu.info("[ServiceModule]: sendRequest finish",e),e})).catch((function(e){throw bu.error("[ServiceModule]: sendRequest error",e),e}))},this.destruct=function(){bu.info("[ServiceModule]: destruct")},e._instance||(e._instance=this),e._instance})),Du=new Tu;var Ru=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e},Ou=bo(Object.keys,Object),zu=Object.prototype.hasOwnProperty;var Iu=function(e){if(!wo(e))return Ou(e);var t=[];for(var n in Object(e))zu.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Mu=function(e){return Mo(e)?or(e):Iu(e)};var Bu=function(e,t){return e&&Qo(t,Mu(t),e)};var Pu=function(e,t){return e&&Qo(t,cr(t),e)};var Nu=function(e,t){for(var n=-1,i=null==e?0:e.length,o=0,r=[];++n<i;){var a=e[n];t(a,n,e)&&(r[o++]=a)}return r};var Uu=function(){return[]},Gu=Object.prototype.propertyIsEnumerable,ju=Object.getOwnPropertySymbols,Lu=ju?function(e){return null==e?[]:(e=Object(e),Nu(ju(e),(function(t){return Gu.call(e,t)})))}:Uu;var Vu=function(e,t){return Qo(e,Lu(e),t)};var Ku=function(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e},Fu=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ku(t,Lu(e)),e=Eo(e);return t}:Uu;var Hu=function(e,t){return Qo(e,Fu(e),t)};var qu=function(e,t,n){var i=t(e);return zo(e)?i:Ku(i,n(e))};var $u=function(e){return qu(e,Mu,Lu)};var Wu=function(e){return qu(e,cr,Fu)},Ju=Ui(fi,"DataView"),Xu=Ui(fi,"Promise"),Yu=Ui(fi,"Set"),Zu=Ui(fi,"WeakMap"),Qu="[object Map]",el="[object Promise]",tl="[object Set]",nl="[object WeakMap]",il="[object DataView]",ol=Di(Ju),rl=Di(Gi),al=Di(Xu),sl=Di(Yu),cl=Di(Zu),ul=Ei;(Ju&&ul(new Ju(new ArrayBuffer(1)))!=il||Gi&&ul(new Gi)!=Qu||Xu&&ul(Xu.resolve())!=el||Yu&&ul(new Yu)!=tl||Zu&&ul(new Zu)!=nl)&&(ul=function(e){var t=Ei(e),n="[object Object]"==t?e.constructor:void 0,i=n?Di(n):"";if(i)switch(i){case ol:return il;case rl:return Qu;case al:return el;case sl:return tl;case cl:return nl}return t});var ll=ul,fl=Object.prototype.hasOwnProperty;var hl=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&fl.call(e,"index")&&(n.index=e.index,n.input=e.input),n};var dl=function(e,t){var n=t?go(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},pl=/\w*$/;var gl=function(e){var t=new e.constructor(e.source,pl.exec(e));return t.lastIndex=e.lastIndex,t},vl=hi?hi.prototype:void 0,ml=vl?vl.valueOf:void 0;var _l=function(e){return ml?Object(ml.call(e)):{}};var yl=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return go(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return dl(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vo(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return gl(e);case"[object Symbol]":return _l(e)}};var bl=function(e){return Ao(e)&&"[object Map]"==ll(e)},El=$o&&$o.isMap,kl=El?qo(El):bl;var wl=function(e){return Ao(e)&&"[object Set]"==ll(e)},Sl=$o&&$o.isSet,Al=Sl?qo(Sl):wl,xl="[object Arguments]",Cl="[object Function]",Tl="[object Object]",Dl={};Dl[xl]=Dl["[object Array]"]=Dl["[object ArrayBuffer]"]=Dl["[object DataView]"]=Dl["[object Boolean]"]=Dl["[object Date]"]=Dl["[object Float32Array]"]=Dl["[object Float64Array]"]=Dl["[object Int8Array]"]=Dl["[object Int16Array]"]=Dl["[object Int32Array]"]=Dl["[object Map]"]=Dl["[object Number]"]=Dl[Tl]=Dl["[object RegExp]"]=Dl["[object Set]"]=Dl["[object String]"]=Dl["[object Symbol]"]=Dl["[object Uint8Array]"]=Dl["[object Uint8ClampedArray]"]=Dl["[object Uint16Array]"]=Dl["[object Uint32Array]"]=!0,Dl["[object Error]"]=Dl[Cl]=Dl["[object WeakMap]"]=!1;var Rl=function e(t,n,i,o,r,a){var s,c=1&n,u=2&n,l=4&n;if(i&&(s=r?i(t,o,r,a):i(t)),void 0!==s)return s;if(!ki(t))return t;var f=zo(t);if(f){if(s=hl(t),!c)return mo(t,s)}else{var h=ll(t),d=h==Cl||"[object GeneratorFunction]"==h;if(No(t))return ho(t,c);if(h==Tl||h==xl||d&&!r){if(s=u||d?{}:So(t),!c)return u?Hu(t,Pu(s,t)):Vu(t,Bu(s,t))}else{if(!Dl[h])return r?t:{};s=yl(t,h,c)}}a||(a=new so);var p=a.get(t);if(p)return p;a.set(t,s),Al(t)?t.forEach((function(o){s.add(e(o,n,i,o,t,a))})):kl(t)&&t.forEach((function(o,r){s.set(r,e(o,n,i,r,t,a))}));var g=f?void 0:(l?u?Wu:$u:u?cr:Mu)(t);return Ru(g||t,(function(o,r){g&&(o=t[r=o]),Zo(s,r,e(o,n,i,r,t,a))})),s};var Ol=function(e){return Rl(e,5)};var zl,Il,Ml,Bl,Pl,Nl,Ul,Gl,jl,Ll,Vl,Kl,Fl,Hl,ql,$l,Wl=function e(t,n,i,o,r,a){return ki(t)&&ki(n)&&(a.set(n,t),fr(t,n,void 0,e,a),a.delete(n)),t},Jl=Sr((function(e,t,n,i){fr(e,t,n,i)})),Xl=Er((function(e){return e.push(void 0,Wl),dr(Jl,void 0,e)})),Yl=Object.defineProperty,Zl=Object.defineProperties,Ql=Object.getOwnPropertyDescriptors,ef=Object.getOwnPropertySymbols,tf=Object.prototype.hasOwnProperty,nf=Object.prototype.propertyIsEnumerable,of=function(e,t,n){return t in e?Yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},rf=function(e,t){for(var n in t||(t={}))tf.call(t,n)&&of(e,n,t[n]);if(ef){var i,o=L(ef(t));try{for(o.s();!(i=o.n()).done;){n=i.value;nf.call(t,n)&&of(e,n,t[n])}}catch(e){o.e(e)}finally{o.f()}}return e},af=function(e,t){return Zl(e,Ql(t))},sf={data:{},timestamp:0},cf=q((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BaseStorageWrapper",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];F(this,e),this.insertDataByStorageName=function(e,n,i,o){bu.info("[".concat(t.name,"]: insertDataByStorageName"),{data:i,storageName:n,timestamp:o});var r=e[n],a=r.data,s=void 0===a?{}:a,c=r.timestamp;if((void 0===c?0:c)<o){var u=Xl({},i,s);e[n]={data:u,timestamp:o}}},this.getConsentData=function(e,n){bu.info("[".concat(t.name,"]: getConsentData"),{userInfo:e,keys:n});var i={};try{var o=null!=e?e:{},r=o.user_id,a=void 0===r?"":r,s=o.device_id,c=void 0===s?"":s,u=t.getConsentStore(e);((null==n?void 0:n.length)?n:Object.keys(u.consentEntityValidationMap)).forEach((function(e){var t,n,o,r,s;if(e)switch(null==(t=u.consentEntityValidationMap)?void 0:t[e]){case ts.BOTH:a&&c&&(i[e]=u[ns.BOTH_CONSENT].data[e]);break;case ts.DEVICE_ID:c&&(i[e]=u[ns.DEVICE_CONSENT].data[e]);break;case ts.USER_ID:a&&(i[e]=u[ns.USER_CONSENT].data[e]);break;case ts.ANY:var l=u[ns.USER_CONSENT].data[e],f=u[ns.DEVICE_CONSENT].data[e],h=null!=(o=null==(n=null==l?void 0:l.record)?void 0:n.created_at)?o:0,d=null!=(s=null==(r=null==f?void 0:f.record)?void 0:r.created_at)?s:0;a&&h>=d?i[e]=l:c&&(i[e]=f)}}))}catch(i){bu.error("[".concat(t.name,"]: getConsentData Error"),{userInfo:e,keys:n,error:i})}return i},this.getNotificationData=function(e){return bu.info("[".concat(t.name,"]: getNotificationData"),{userInfo:e}),t.getNotificationStore(e).notification.data},this.splitConsentEntityData=function(e,n){bu.info("[".concat(t.name,"]: splitConsentEntityData"),{userInfo:n,data:e});var i={},o={},r={},a={},s=null!=n?n:{},c=s.device_id,u=void 0===c?"":c,l=s.user_id,f=void 0===l?"":l;return e&&"object"===$(e)&&Object.keys(e).forEach((function(t){var n=e[t];if(n)switch(a[t]=n.validator,n.validator){case ts.ANY:u&&(i[t]=n),f&&(o[t]=n);break;case ts.DEVICE_ID:u&&(i[t]=n);break;case ts.USER_ID:f&&(o[t]=n);break;case ts.BOTH:f&&u&&(r[t]=n)}})),{deviceConsentData:i,userConsentData:o,bothRequiredConsentData:r,consentEntityValidationMap:a}},this.insertDataIntoStore=function(e,n,i){bu.info("[".concat(t.name,"]: insertDataIntoStore"),{userInfo:i,data:e,timestamp:n});var o=t.getConsentStore(i),r=t.splitConsentEntityData(e,i),a=r.deviceConsentData,s=r.userConsentData,c=r.bothRequiredConsentData,u=r.consentEntityValidationMap;return t.insertDataByStorageName(o,ns.DEVICE_CONSENT,a,n),t.insertDataByStorageName(o,ns.USER_CONSENT,s,n),t.insertDataByStorageName(o,ns.BOTH_CONSENT,c,n),o.consentEntityValidationMap=Xl({},u,o.consentEntityValidationMap),o},this._formatConsentRecord=function(e){var t=null!=e?e:{},n=t.key,i=t.type,o=t.name,r=t.category,a=t.validator,s=t.record;return s&&i&&o&&r&&a&&n?af(rf({},s),{entity_key:n,entity_type:i,entity_name:o,entity_category:r,entity_validator:a}):null},this.getRecord=function(e,n){bu.info("[".concat(t.name,"]: getRecord"),{userInfo:n,key:e});var i=t.getConsentData(n,[e]),o=t._formatConsentRecord(null==i?void 0:i[e]);return o?t.shouldClone?Ol(o):o:(bu.info("[".concat(t.name,"]: getRecord - no record for ").concat(e),{key:e}),null)},this.getEntity=function(e,n){var i;bu.info("[".concat(t.name,"]: getEntity"),{userInfo:n,key:e});var o=t.getConsentData(n,[e]),r=null!=(i=null==o?void 0:o[e])?i:null;return r||bu.info("[".concat(t.name,"]: getEntity - no entity for ").concat(e),{key:e}),t.shouldClone?Ol(r):r},this.getEntities=function(e,n){var i;bu.info("[".concat(t.name,"]: getEntities"),{userInfo:n,keys:e});var o=[],r=null!=(i=t.getConsentData(n,e))?i:{};if(null==e?void 0:e.length){var a=[];e.forEach((function(e){var n,i=null!=(n=null==r?void 0:r[e])?n:null;i?o.push(t.shouldClone?Ol(i):i):a.push(e)})),a.length&&bu.info("[".concat(t.name,"]: getEntities - missing some entities"),{entityKeys:a})}else Object.keys(null!=r?r:{}).forEach((function(e){var n,i=null!=(n=null==r?void 0:r[e])?n:null;i&&o.push(t.shouldClone?Ol(i):i)}));return o},this.getRecords=function(e,n){bu.info("[".concat(t.name,"]: getRecords"),{userInfo:n,keys:e});var i=[],o=t.getConsentData(n,e);if(null==e?void 0:e.length){var r=[];e.forEach((function(e){var n=t._formatConsentRecord(null==o?void 0:o[e]);n?i.push(t.shouldClone?Ol(n):n):r.push(e)})),r.length&&bu.info("[".concat(t.name,"]: getRecords - missing some records"),{entityKeys:r})}else Object.keys(null!=o?o:{}).forEach((function(e){var n=t._formatConsentRecord(null==o?void 0:o[e]);n&&i.push(t.shouldClone?Ol(n):n)}));return i},this.clean=function(){t.cleanConsentData(),t.cleanNotificationData()},this.destruct=function(){t.clean()},this.name=n,this.shouldClone=i})),uf=cf,lf=(S(o={consentEntityValidationMap:{}},ns.USER_CONSENT,Ol(sf)),S(o,ns.DEVICE_CONSENT,Ol(sf)),S(o,ns.BOTH_CONSENT,Ol(sf)),o),ff=S({},ns.NOTIFICATION,Ol(sf)),hf=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.call(this,"InMemStorageWrapper",!0))._updateUserInfo=function(t,n){bu.info("[".concat(e.name,"]: _updateUserInfo"),{userId:n,deviceId:t}),e._did=t,e._uid=n},e.insertConsentData=function(t,n,i){bu.info("[".concat(e.name,"]: insertConsentData"),{data:t,timestamp:n,userInfo:i});try{e.insertDataIntoStore(t,n,i)}catch(t){bu.error("[".concat(e.name,"]: insert - ").concat(t.message),t)}},e.insertNotificationData=function(t,n,i){bu.info("[".concat(e.name,"]: insertNotificationData"),{data:t,timestamp:n,userInfo:i});try{var o=e.getNotificationStore(i);e.insertDataByStorageName(o,ns.NOTIFICATION,t,n)}catch(t){bu.error("[".concat(e.name,"]: insert - ").concat(t.message),t)}},e.getConsentStore=function(t){return e._cleanUpUnrelatedUserData(t),e._consentStore},e.getNotificationStore=function(t){return e._notificationStore},e._cleanUpUnrelatedUserData=function(t){var n=null!=t?t:{},i=n.device_id,o=void 0===i?"":i,r=n.user_id,a=void 0===r?"":r;o!==e._did&&(e._consentStore[ns.DEVICE_CONSENT]=Ol(sf),e._consentStore[ns.BOTH_CONSENT]=Ol(sf)),a!==e._uid&&(e._consentStore[ns.USER_CONSENT]=Ol(sf),e._consentStore[ns.BOTH_CONSENT]=Ol(sf)),e._updateUserInfo(o,a)},e.cleanConsentData=function(){e._consentStore.consentEntityValidationMap={},e._consentStore[ns.USER_CONSENT]=Ol(sf),e._consentStore[ns.DEVICE_CONSENT]=Ol(sf),e._consentStore[ns.BOTH_CONSENT]=Ol(sf)},e.cleanNotificationData=function(){e._notificationStore[ns.NOTIFICATION]=Ol(sf)},e.clean=function(){e._consentStore=Ol(lf),e._notificationStore=Ol(ff)},e.destruct=function(){e.clean()},e.clean(),e}return q(n)}(uf),df=hf,pf=function(e){return e&&e.default||e}(Object.freeze({__proto__:null,default:{}})),gf=ci((function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==si&&si.crypto&&(n=si.crypto),!n)try{n=pf}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},s=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var a=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=a<<24-(i+r)%4*8}else for(var s=0;s<o;s+=4)t[i+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new c.init(t,e)}}),u=r.enc={},l=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(n,t/2)}},f=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(n,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,o=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*u,r);if(u){for(var f=0;f<u;f+=a)this._doProcessBlock(o,f);n=o.splice(0,u),i.sigBytes-=l}return new c.init(n,l)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=r.algo={};return r}(Math),n)})),vf=(ci((function(e,t){var n;e.exports=(n=gf,function(e){var t=n,i=t.lib,o=i.Base,r=i.WordArray,a=t.x64={};a.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var o=e[i];n.push(o.high),n.push(o.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),n)})),ci((function(e,t){var n;e.exports=(n=gf,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,i=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,i=[],o=0;o<n;o++)i[o>>>2]|=e[o]<<24-o%4*8;t.call(this,i,n)}else t.apply(this,arguments)};i.prototype=e}}(),n.lib.WordArray)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.WordArray,i=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var r=t[o>>>2]>>>16-o%4*8&65535;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var n=e.length,i=[],o=0;o<n;o++)i[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return t.create(i,2*n)}},i.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r+=2){var a=o(t[r>>>2]>>>16-r%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var n=e.length,i=[],r=0;r<n;r++)i[r>>>1]|=o(e.charCodeAt(r)<<16-r%2*16);return t.create(i,2*n)}}}(),n.enc.Utf16)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.WordArray;function i(e,n,i){for(var o=[],r=0,a=0;a<n;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;o[r>>>2]|=s<<24-r%4*8,r++}return t.create(o,r)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var o=[],r=0;r<n;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<n;s++)o.push(i.charAt(a>>>6*(3-s)&63));var c=i.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var r=0;r<n.length;r++)o[n.charCodeAt(r)]=r}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return i(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.WordArray;function i(e,n,i){for(var o=[],r=0,a=0;a<n;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;o[r>>>2]|=s<<24-r%4*8,r++}return t.create(o,r)}e.enc.Base64url={stringify:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.words,i=e.sigBytes,o=t?this._safe_map:this._map;e.clamp();for(var r=[],a=0;a<i;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<i;c++)r.push(o.charAt(s>>>6*(3-c)&63));var u=o.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length,o=t?this._safe_map:this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<o.length;a++)r[o.charCodeAt(a)]=a}var s=o.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(n=c)}return i(e,n,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)})),ci((function(e,t){var n;e.exports=(n=gf,function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=r.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,o=e[i];e[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var r=this._hash.words,a=e[t+0],c=e[t+1],d=e[t+2],p=e[t+3],g=e[t+4],v=e[t+5],m=e[t+6],_=e[t+7],y=e[t+8],b=e[t+9],E=e[t+10],k=e[t+11],w=e[t+12],S=e[t+13],A=e[t+14],x=e[t+15],C=r[0],T=r[1],D=r[2],R=r[3];C=u(C,T,D,R,a,7,s[0]),R=u(R,C,T,D,c,12,s[1]),D=u(D,R,C,T,d,17,s[2]),T=u(T,D,R,C,p,22,s[3]),C=u(C,T,D,R,g,7,s[4]),R=u(R,C,T,D,v,12,s[5]),D=u(D,R,C,T,m,17,s[6]),T=u(T,D,R,C,_,22,s[7]),C=u(C,T,D,R,y,7,s[8]),R=u(R,C,T,D,b,12,s[9]),D=u(D,R,C,T,E,17,s[10]),T=u(T,D,R,C,k,22,s[11]),C=u(C,T,D,R,w,7,s[12]),R=u(R,C,T,D,S,12,s[13]),D=u(D,R,C,T,A,17,s[14]),C=l(C,T=u(T,D,R,C,x,22,s[15]),D,R,c,5,s[16]),R=l(R,C,T,D,m,9,s[17]),D=l(D,R,C,T,k,14,s[18]),T=l(T,D,R,C,a,20,s[19]),C=l(C,T,D,R,v,5,s[20]),R=l(R,C,T,D,E,9,s[21]),D=l(D,R,C,T,x,14,s[22]),T=l(T,D,R,C,g,20,s[23]),C=l(C,T,D,R,b,5,s[24]),R=l(R,C,T,D,A,9,s[25]),D=l(D,R,C,T,p,14,s[26]),T=l(T,D,R,C,y,20,s[27]),C=l(C,T,D,R,S,5,s[28]),R=l(R,C,T,D,d,9,s[29]),D=l(D,R,C,T,_,14,s[30]),C=f(C,T=l(T,D,R,C,w,20,s[31]),D,R,v,4,s[32]),R=f(R,C,T,D,y,11,s[33]),D=f(D,R,C,T,k,16,s[34]),T=f(T,D,R,C,A,23,s[35]),C=f(C,T,D,R,c,4,s[36]),R=f(R,C,T,D,g,11,s[37]),D=f(D,R,C,T,_,16,s[38]),T=f(T,D,R,C,E,23,s[39]),C=f(C,T,D,R,S,4,s[40]),R=f(R,C,T,D,a,11,s[41]),D=f(D,R,C,T,p,16,s[42]),T=f(T,D,R,C,m,23,s[43]),C=f(C,T,D,R,b,4,s[44]),R=f(R,C,T,D,w,11,s[45]),D=f(D,R,C,T,x,16,s[46]),C=h(C,T=f(T,D,R,C,d,23,s[47]),D,R,a,6,s[48]),R=h(R,C,T,D,_,10,s[49]),D=h(D,R,C,T,A,15,s[50]),T=h(T,D,R,C,v,21,s[51]),C=h(C,T,D,R,w,6,s[52]),R=h(R,C,T,D,p,10,s[53]),D=h(D,R,C,T,E,15,s[54]),T=h(T,D,R,C,c,21,s[55]),C=h(C,T,D,R,y,6,s[56]),R=h(R,C,T,D,x,10,s[57]),D=h(D,R,C,T,m,15,s[58]),T=h(T,D,R,C,S,21,s[59]),C=h(C,T,D,R,g,6,s[60]),R=h(R,C,T,D,k,10,s[61]),D=h(D,R,C,T,d,15,s[62]),T=h(T,D,R,C,b,21,s[63]),r[0]=r[0]+C|0,r[1]=r[1]+T|0,r[2]=r[2]+D|0,r[3]=r[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var r=e.floor(i/4294967296),a=i;n[15+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,i,o,r,a){var s=e+(t&n|~t&i)+o+a;return(s<<r|s>>>32-r)+t}function l(e,t,n,i,o,r,a){var s=e+(t&i|n&~i)+o+a;return(s<<r|s>>>32-r)+t}function f(e,t,n,i,o,r,a){var s=e+(t^n^i)+o+a;return(s<<r|s>>>32-r)+t}function h(e,t,n,i,o,r,a){var s=e+(n^(t|~i))+o+a;return(s<<r|s>>>32-r)+t}t.MD5=r._createHelper(c),t.HmacMD5=r._createHmacHelper(c)}(Math),n.MD5)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib,i=t.WordArray,o=t.Hasher,r=e.algo,a=[],s=r.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],c=n[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var l=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=l<<1|l>>>31}var f=(i<<5|i>>>27)+c+a[u];f+=u<20?1518500249+(o&r|~o&s):u<40?1859775393+(o^r^s):u<60?(o&r|o&s|r&s)-1894007588:(o^r^s)-899497514,c=s,s=r,r=o<<30|o>>>2,o=i,i=f}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(s),e.HmacSHA1=o._createHmacHelper(s)}(),n.SHA1)})),ci((function(e,t){var n;e.exports=(n=gf,function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,o=0;o<64;)t(i)&&(o<8&&(s[o]=n(e.pow(i,.5))),c[o]=n(e.pow(i,1/3)),o++),i++}();var u=[],l=a.SHA256=r.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],l=n[5],f=n[6],h=n[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var p=u[d-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=u[d-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[d]=g+u[d-7]+m+u[d-16]}var _=i&o^i&r^o&r,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+c[d]+u[d];h=f,f=l,l=s,s=a+b|0,a=r,r=o,o=i,i=b+(y+_)|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(i/4294967296),n[15+(o+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(l),t.HmacSHA256=r._createHmacHelper(l)}(Math),n.SHA256)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.WordArray,i=e.algo,o=i.SHA256,r=i.SHA224=o.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=o._createHelper(r),e.HmacSHA224=o._createHmacHelper(r)}(),n.SHA224)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.Hasher,i=e.x64,o=i.Word,r=i.WordArray,a=e.algo;function s(){return o.create.apply(o,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var l=a.SHA512=t.extend({_doReset:function(){this._hash=new r.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],l=n[5],f=n[6],h=n[7],d=i.high,p=i.low,g=o.high,v=o.low,m=r.high,_=r.low,y=a.high,b=a.low,E=s.high,k=s.low,w=l.high,S=l.low,A=f.high,x=f.low,C=h.high,T=h.low,D=d,R=p,O=g,z=v,I=m,M=_,B=y,P=b,N=E,U=k,G=w,j=S,L=A,V=x,K=C,F=T,H=0;H<80;H++){var q,$,W=u[H];if(H<16)$=W.high=0|e[t+2*H],q=W.low=0|e[t+2*H+1];else{var J=u[H-15],X=J.high,Y=J.low,Z=(X>>>1|Y<<31)^(X>>>8|Y<<24)^X>>>7,Q=(Y>>>1|X<<31)^(Y>>>8|X<<24)^(Y>>>7|X<<25),ee=u[H-2],te=ee.high,ne=ee.low,ie=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),re=u[H-7],ae=re.high,se=re.low,ce=u[H-16],ue=ce.high,le=ce.low;$=($=($=Z+ae+((q=Q+se)>>>0<Q>>>0?1:0))+ie+((q+=oe)>>>0<oe>>>0?1:0))+ue+((q+=le)>>>0<le>>>0?1:0),W.high=$,W.low=q}var fe,he=N&G^~N&L,de=U&j^~U&V,pe=D&O^D&I^O&I,ge=R&z^R&M^z&M,ve=(D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7),me=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7),_e=(N>>>14|U<<18)^(N>>>18|U<<14)^(N<<23|U>>>9),ye=(U>>>14|N<<18)^(U>>>18|N<<14)^(U<<23|N>>>9),be=c[H],Ee=be.high,ke=be.low,we=K+_e+((fe=F+ye)>>>0<F>>>0?1:0),Se=me+ge;K=L,F=V,L=G,V=j,G=N,j=U,N=B+(we=(we=(we=we+he+((fe+=de)>>>0<de>>>0?1:0))+Ee+((fe+=ke)>>>0<ke>>>0?1:0))+$+((fe+=q)>>>0<q>>>0?1:0))+((U=P+fe|0)>>>0<P>>>0?1:0)|0,B=I,P=M,I=O,M=z,O=D,z=R,D=we+(ve+pe+(Se>>>0<me>>>0?1:0))+((R=fe+Se|0)>>>0<fe>>>0?1:0)|0}p=i.low=p+R,i.high=d+D+(p>>>0<R>>>0?1:0),v=o.low=v+z,o.high=g+O+(v>>>0<z>>>0?1:0),_=r.low=_+M,r.high=m+I+(_>>>0<M>>>0?1:0),b=a.low=b+P,a.high=y+B+(b>>>0<P>>>0?1:0),k=s.low=k+U,s.high=E+N+(k>>>0<U>>>0?1:0),S=l.low=S+j,l.high=w+G+(S>>>0<j>>>0?1:0),x=f.low=x+V,f.high=A+L+(x>>>0<V>>>0?1:0),T=h.low=T+F,h.high=C+K+(T>>>0<F>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(i+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),n.SHA512)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.x64,i=t.Word,o=t.WordArray,r=e.algo,a=r.SHA512,s=r.SHA384=a.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=a._createHelper(s),e.HmacSHA384=a._createHmacHelper(s)}(),n.SHA384)})),ci((function(e,t){var n;e.exports=(n=gf,function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.x64.Word,s=t.algo,c=[],u=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,r=0;r<24;r++){for(var s=0,f=0,h=0;h<7;h++){if(1&o){var d=(1<<h)-1;d<32?f^=1<<d:s^=1<<d-32}128&o?o=o<<1^113:o<<=1}l[r]=a.create(s,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=a.create()}();var h=s.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,o=0;o<i;o++){var r=e[t+2*o],a=e[t+2*o+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(T=n[o]).high^=a,T.low^=r}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var d=0,p=0,g=0;g<5;g++)d^=(T=n[h+5*g]).high,p^=T.low;var v=f[h];v.high=d,v.low=p}for(h=0;h<5;h++){var m=f[(h+4)%5],_=f[(h+1)%5],y=_.high,b=_.low;for(d=m.high^(y<<1|b>>>31),p=m.low^(b<<1|y>>>31),g=0;g<5;g++)(T=n[h+5*g]).high^=d,T.low^=p}for(var E=1;E<25;E++){var k=(T=n[E]).high,w=T.low,S=c[E];S<32?(d=k<<S|w>>>32-S,p=w<<S|k>>>32-S):(d=w<<S-32|k>>>64-S,p=k<<S-32|w>>>64-S);var A=f[u[E]];A.high=d,A.low=p}var x=f[0],C=n[0];for(x.high=C.high,x.low=C.low,h=0;h<5;h++)for(g=0;g<5;g++){var T=n[E=h+5*g],D=f[E],R=f[(h+1)%5+5*g],O=f[(h+2)%5+5*g];T.high=D.high^~R.high&O.high,T.low=D.low^~R.low&O.low}T=n[0];var z=l[s];T.high^=z.high,T.low^=z.low}},_doFinalize:function(){var t=this._data,n=t.words;this._nDataBytes;var i=8*t.sigBytes,r=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/r)*r>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],l=0;l<c;l++){var f=a[l],h=f.high,d=f.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(h)}return new o.init(u,s)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=r._createHelper(h),t.HmacSHA3=r._createHmacHelper(h)}(Math),n.SHA3)})),ci((function(e,t){var n;e.exports=(n=gf,
/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.algo,s=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=o.create([0,1518500249,1859775393,2400959708,2840853838]),h=o.create([1352829926,1548603684,1836072691,2053994217,0]),d=a.RIPEMD160=r.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,o=e[i];e[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var r,a,d,b,E,k,w,S,A,x,C,T=this._hash.words,D=f.words,R=h.words,O=s.words,z=c.words,I=u.words,M=l.words;for(k=r=T[0],w=a=T[1],S=d=T[2],A=b=T[3],x=E=T[4],n=0;n<80;n+=1)C=r+e[t+O[n]]|0,C+=n<16?p(a,d,b)+D[0]:n<32?g(a,d,b)+D[1]:n<48?v(a,d,b)+D[2]:n<64?m(a,d,b)+D[3]:_(a,d,b)+D[4],C=(C=y(C|=0,I[n]))+E|0,r=E,E=b,b=y(d,10),d=a,a=C,C=k+e[t+z[n]]|0,C+=n<16?_(w,S,A)+R[0]:n<32?m(w,S,A)+R[1]:n<48?v(w,S,A)+R[2]:n<64?g(w,S,A)+R[3]:p(w,S,A)+R[4],C=(C=y(C|=0,M[n]))+x|0,k=x,x=A,A=y(S,10),S=w,w=C;C=T[1]+d+A|0,T[1]=T[2]+b+x|0,T[2]=T[3]+E+k|0,T[3]=T[4]+r+w|0,T[4]=T[0]+a+S|0,T[0]=C},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,r=o.words,a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function v(e,t,n){return(e|~t)^n}function m(e,t,n){return e&n|t&~n}function _(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(d),t.HmacRIPEMD160=r._createHmacHelper(d)}(),n.RIPEMD160)})),ci((function(e,t){var n;e.exports=(n=gf,void function(){var e=n,t=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;r.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,r=e.algo,a=r.SHA1,s=r.HMAC,c=r.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=s.create(n.hasher,e),r=o.create(),a=o.create([1]),c=r.words,u=a.words,l=n.keySize,f=n.iterations;c.length<l;){var h=i.update(t).finalize(a);i.reset();for(var d=h.words,p=d.length,g=h,v=1;v<f;v++){g=i.finalize(g),i.reset();for(var m=g.words,_=0;_<p;_++)d[_]^=m[_]}r.concat(h),u[0]++}return r.sigBytes=4*l,r}});e.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),n.PBKDF2)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,r=e.algo,a=r.MD5,s=r.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,r=i.hasher.create(),a=o.create(),s=a.words,c=i.keySize,u=i.iterations;s.length<c;){n&&r.update(n),n=r.update(e).finalize(t),r.reset();for(var l=1;l<u;l++)n=r.finalize(n),r.reset();a.concat(n)}return a.sigBytes=4*c,a}});e.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),n.EvpKDF)})),ci((function(e,t){var n;e.exports=void((n=gf).lib.Cipher||function(e){var t=n,i=t.lib,o=i.Base,r=i.WordArray,a=i.BufferedBlockAlgorithm,s=t.enc;s.Utf8;var c=s.Base64,u=t.algo.EvpKDF,l=i.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?y:m}return function(t){return{encrypt:function(n,i,o){return e(i).encrypt(t,n,i,o)},decrypt:function(n,i,o){return e(i).decrypt(t,n,i,o)}}}}()});i.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=t.mode={},h=i.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=f.CBC=function(){var t=h.extend();function n(t,n,i){var o,r=this._iv;r?(o=r,this._iv=e):o=this._prevBlock;for(var a=0;a<i;a++)t[n+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,o=i.blockSize;n.call(this,e,t,o),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,o=i.blockSize,r=e.slice(t,t+o);i.decryptBlock(e,t),n.call(this,e,t,o),this._prevBlock=r}}),t}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=n-e.sigBytes%n,o=i<<24|i<<16|i<<8|i,a=[],s=0;s<i;s+=4)a.push(o);var c=r.create(a,i);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:p}),reset:function(){var e;l.reset.call(this);var t=this.cfg,n=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(i,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var g=i.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?r.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),i=n.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=r.create(i.slice(2,4)),i.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},m=i.SerializableCipher=o.extend({cfg:o.extend({format:v}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var o=e.createEncryptor(n,i),r=o.finalize(t),a=o.cfg;return g.create({ciphertext:r,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(t.kdf={}).OpenSSL={execute:function(e,t,n,i){i||(i=r.random(8));var o=u.create({keySize:t+n}).compute(e,i),a=r.create(o.words.slice(t),4*n);return o.sigBytes=4*t,g.create({key:o,iv:a,salt:i})}},y=i.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:_}),encrypt:function(e,t,n,i){var o=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize);i.iv=o.iv;var r=m.encrypt.call(this,e,t,o.key,i);return r.mixIn(o),r},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var o=i.kdf.execute(n,e.keySize,e.ivSize,t.salt);return i.iv=o.iv,m.decrypt.call(this,e,t,o.key,i)}})}())})),ci((function(e,t){var n;e.exports=((n=gf).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,i){var o,r=this._iv;r?(o=r.slice(0),this._iv=void 0):o=this._prevBlock,i.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var i=this._cipher,o=i.blockSize;t.call(this,e,n,o,i),this._prevBlock=e.slice(n,n+o)}}),e.Decryptor=e.extend({processBlock:function(e,n){var i=this._cipher,o=i.blockSize,r=e.slice(n,n+o);t.call(this,e,n,o,i),this._prevBlock=r}}),e}(),n.mode.CFB)})),ci((function(e,t){var n,i,o;e.exports=((o=gf).mode.CTR=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter;o&&(r=this._counter=o.slice(0),this._iv=void 0);var a=r.slice(0);n.encryptBlock(a,0),r[i-1]=r[i-1]+1|0;for(var s=0;s<i;s++)e[t+s]^=a[s]}}),n.Decryptor=i,n),o.mode.CTR)})),ci((function(e,t){var n;e.exports=(
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
(n=gf).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,i=255&e;255===t?(t=0,255===n?(n=0,255===i?i=0:++i):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=i}else e+=1<<24;return e}function i(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var o=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0),i(a);var s=a.slice(0);n.encryptBlock(s,0);for(var c=0;c<o;c++)e[t+c]^=s[c]}});return e.Decryptor=o,e}(),n.mode.CTRGladman)})),ci((function(e,t){var n,i,o;e.exports=((o=gf).mode.OFB=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._keystream;o&&(r=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var a=0;a<i;a++)e[t+a]^=r[a]}}),n.Decryptor=i,n),o.mode.OFB)})),ci((function(e,t){var n,i;e.exports=((i=gf).mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),i.mode.ECB)})),ci((function(e,t){var n;e.exports=((n=gf).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,i=4*t,o=i-n%i,r=n+o-1;e.clamp(),e.words[r>>>2]|=o<<24-r%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)})),ci((function(e,t){var n;e.exports=((n=gf).pad.Iso10126={pad:function(e,t){var i=4*t,o=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)})),ci((function(e,t){var n;e.exports=((n=gf).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)})),ci((function(e,t){var n;e.exports=((n=gf).pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},n.pad.ZeroPadding)})),ci((function(e,t){var n;e.exports=((n=gf).pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)})),ci((function(e,t){var n;e.exports=(n=gf,function(e){var t=n,i=t.lib.CipherParams,o=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}}}(),n.format.Hex)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.BlockCipher,i=e.algo,o=[],r=[],a=[],s=[],c=[],u=[],l=[],f=[],h=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,o[n]=p,r[p]=n;var g=e[n],v=e[g],m=e[v],_=257*e[p]^16843008*p;a[n]=_<<24|_>>>8,s[n]=_<<16|_>>>16,c[n]=_<<8|_>>>24,u[n]=_,_=16843009*m^65537*v^257*g^16843008*n,l[p]=_<<24|_>>>8,f[p]=_<<16|_>>>16,h[p]=_<<8|_>>>24,d[p]=_,n?(n=g^e[e[e[m^g]]],i^=e[e[i]]):n=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],a=0;a<i;a++)a<n?r[a]=t[a]:(u=r[a-1],a%n?n>6&&a%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=p[a/n|0]<<24),r[a]=r[a-n]^u);for(var s=this._invKeySchedule=[],c=0;c<i;c++){if(a=i-c,c%4)var u=r[a];else u=r[a-4];s[c]=c<4||a<=4?u:l[o[u>>>24]]^f[o[u>>>16&255]]^h[o[u>>>8&255]]^d[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,u,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,h,d,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,o,r,a,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;p<c;p++){var g=i[u>>>24]^o[l>>>16&255]^r[f>>>8&255]^a[255&h]^n[d++],v=i[l>>>24]^o[f>>>16&255]^r[h>>>8&255]^a[255&u]^n[d++],m=i[f>>>24]^o[h>>>16&255]^r[u>>>8&255]^a[255&l]^n[d++],_=i[h>>>24]^o[u>>>16&255]^r[l>>>8&255]^a[255&f]^n[d++];u=g,l=v,f=m,h=_}g=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[d++],v=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^n[d++],m=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[d++],_=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++],e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=_},keySize:8});e.AES=t._createHelper(g)}(),n.AES)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib,i=t.WordArray,o=t.BlockCipher,r=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=r.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var i=a[n]-1;t[n]=e[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],r=0;r<16;r++){var u=o[r]=[],l=c[r];for(n=0;n<24;n++)u[n/6|0]|=t[(s[n]-1+l)%28]<<31-n%6,u[4+(n/6|0)]|=t[28+(s[n+24]-1+l)%28]<<31-n%6;for(u[0]=u[0]<<1|u[0]>>>31,n=1;n<7;n++)u[n]=u[n]>>>4*(n-1)+3;u[7]=u[7]<<5|u[7]>>>27}var f=this._invSubKeys=[];for(n=0;n<16;n++)f[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),h.call(this,1,1431655765);for(var i=0;i<16;i++){for(var o=n[i],r=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=u[c][((a^o[c])&l[c])>>>0];this._lBlock=a,this._rBlock=r^s}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,h.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function d(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=o._createHelper(f);var p=r.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),o=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=f.createEncryptor(i.create(t)),this._des2=f.createEncryptor(i.create(n)),this._des3=f.createEncryptor(i.create(o))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=o._createHelper(p)}(),n.TripleDES)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.StreamCipher,i=e.algo,o=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,i=this._S=[],o=0;o<256;o++)i[o]=o;o=0;for(var r=0;o<256;o++){var a=o%n,s=t[a>>>2]>>>24-a%4*8&255;r=(r+i[o]+s)%256;var c=i[o];i[o]=i[r],i[r]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,n=this._j,i=0,o=0;o<4;o++){n=(n+e[t=(t+1)%256])%256;var r=e[t];e[t]=e[n],e[n]=r,i|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,i}e.RC4=t._createHelper(o);var a=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)r.call(this)}});e.RC4Drop=t._createHelper(a)}(),n.RC4)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.StreamCipher,i=e.algo,o=[],r=[],a=[],s=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=i[n+4&7];if(t){var r=t.words,a=r[0],s=r[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;for(o[0]^=u,o[1]^=f,o[2]^=l,o[3]^=h,o[4]^=u,o[5]^=f,o[6]^=l,o[7]^=h,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,s=i>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[n]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(s)}(),n.Rabbit)})),ci((function(e,t){var n;e.exports=(n=gf,function(){var e=n,t=e.lib.StreamCipher,i=e.algo,o=[],r=[],a=[],s=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)c.call(this);for(o=0;o<8;o++)i[o]^=n[o+4&7];if(t){var r=t.words,a=r[0],s=r[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;for(i[0]^=u,i[1]^=f,i[2]^=l,i[3]^=h,i[4]^=u,i[5]^=f,i[6]^=l,i[7]^=h,o=0;o<4;o++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,s=i>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[n]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(s)}(),n.RabbitLegacy)})),ci((function(e,t){e.exports=gf}))),mf=function(e){z(n,e);var t=I(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WebStorageWrapper",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ya.sessionStorage;return F(this,n),(e=t.call(this,i,!1))._decrypt=function(t,n,i){bu.info("[".concat(e.name,"]: _decrypt"));var o=null;if(n||i){var r="".concat(null!=n?n:"","_").concat(null!=i?i:"");try{var a=vf.AES.decrypt(t,r).toString(vf.enc.Utf8),s=JSON.parse(a);(null==s?void 0:s.data)&&"number"==typeof(null==s?void 0:s.timestamp)&&(o=s)}catch(t){bu.info("[".concat(e.name,"]: _decrypt - ").concat(t.message),t)}}return bu.info("[".concat(e.name,"]: _decrypt - finish"),o),o},e._encrypt=function(t,n,i){bu.info("[".concat(e.name,"]: _encrypt"));var o="";if(n||i){var r="".concat(null!=n?n:"","_").concat(null!=i?i:"");o=vf.AES.encrypt(JSON.stringify(t),r).toString()}return o},e._encryptConsentStorage=function(t){var n,i,o,r,a;return S(n={consentEntityValidationMap:t.consentEntityValidationMap},ns.BOTH_CONSENT,e._encrypt(t[ns.BOTH_CONSENT],null!=(i=e._did)?i:"",null!=(o=e._uid)?o:"")),S(n,ns.DEVICE_CONSENT,e._encrypt(t[ns.DEVICE_CONSENT],null!=(r=e._did)?r:"","")),S(n,ns.USER_CONSENT,e._encrypt(t[ns.USER_CONSENT],"",null!=(a=e._uid)?a:"")),n},e._updateUserInfo=function(t,n){e._did=t,e._uid=n},e._setConsentWebStorage=function(t){var n=e._encryptConsentStorage(t);window[e._storageName].setItem(Fa,JSON.stringify(n))},e.insertConsentData=function(t,n,i){bu.info("[".concat(e.name,"]: insertConsentData"),{data:t,timestamp:n,userInfo:i});try{var o=e.insertDataIntoStore(t,n,i);e._setConsentWebStorage(o)}catch(t){throw bu.error("[".concat(e.name,"]: insertConsentData - ").concat(t.message),t),t}},e.insertNotificationData=function(t,n,i){bu.info("[".concat(e.name,"]: insertNotificationData"),{data:t,timestamp:n,userInfo:i});try{var o=e.getNotificationStore(i);e.insertDataByStorageName(o,ns.NOTIFICATION,t,n),window[e._storageName].setItem(Ha,JSON.stringify(o))}catch(t){throw bu.error("[".concat(e.name,"]: insertNotificationData - ").concat(t.message),t),t}},e.getConsentStore=function(t){var n,i,o,r=null!=t?t:{},a=r.device_id,s=void 0===a?"":a,c=r.user_id,u=void 0===c?"":c,l={},f=Ol(sf),h=Ol(sf),d=Ol(sf);try{var p=null!=(i=window[e._storageName].getItem(Fa))?i:"{}",g=null!=(o=JSON.parse(p))?o:{};l=g.consentEntityValidationMap,d=e._retrieveConsentData(g,ns.BOTH_CONSENT,s,u),h=e._retrieveConsentData(g,ns.USER_CONSENT,"",u),f=e._retrieveConsentData(g,ns.DEVICE_CONSENT,s,""),e._updateUserInfo(s,u)}catch(t){bu.error("[".concat(e.name,"]: getConsentStore - ").concat(t.message),t)}var v=(S(n={consentEntityValidationMap:l},ns.DEVICE_CONSENT,f),S(n,ns.USER_CONSENT,h),S(n,ns.BOTH_CONSENT,d),n);return e._setConsentWebStorage(v),v},e.getNotificationStore=function(t){var n,i,o=Ol(sf);try{var r=null!=(n=window[e._storageName].getItem(Ha))?n:"{}";o=null!=(i=JSON.parse(r))?i:{}}catch(t){bu.error("[".concat(e.name,"]: getNotificationStore - ").concat(t.message),t)}return S({},ns.NOTIFICATION,o)},e.cleanConsentData=function(){window[e._storageName].removeItem(Fa)},e.cleanNotificationData=function(){window[e._storageName].removeItem(Ha)},e.clean=function(){window[e._storageName].removeItem(Fa),window[e._storageName].removeItem(Ha)},e.destruct=function(){e.clean()},e._storageName=o,e}return q(n,[{key:"_retrieveConsentData",value:function(e,t,n,i){var o=!1,r=Ol(sf);switch(t){case ns.BOTH_CONSENT:o=n===this._did&&i===this._uid;break;case ns.USER_CONSENT:o=i===this._uid;break;case ns.DEVICE_CONSENT:o=n===this._did}if(o){var a=this._decrypt(e[t],n,i);if(a)return a}return r}}]),n}(uf),_f=function(e){z(n,e);var t=I(n);function n(){return F(this,n),t.call(this,"LocalStorageWrapper",Ya.localStorage)}return q(n)}(mf),yf=function(e){z(n,e);var t=I(n);function n(){return F(this,n),t.call(this,"SessionStorageWrapper",Ya.sessionStorage)}return q(n)}(mf),bf=(S(r={},Ya.inMem,df),S(r,Ya.localStorage,_f),S(r,Ya.sessionStorage,yf),r),Ef=function(){function e(){return F(this,e),e._instance||(e._instance=this),e._instance}return q(e,[{key:"init",value:function(e){bu.info("[StorageModule]: init");var t=(null!=e?e:{}).storageType,n=void 0===t?Ya.sessionStorage:t;n&&(Object.values(Ya).includes(n)||bu.error("[StorageModule]: init - Invalid Storage Type ".concat(n),{storageType:n}),this._setupStorage(n))}},{key:"getRecord",value:function(e,t){return bu.info("[StorageModule]: getRecord",{key:e}),this._store.getRecord(e,t)}},{key:"getRecords",value:function(e,t){return bu.info("[StorageModule]: getRecords",{keys:e}),this._store.getRecords(e,t)}},{key:"getEntity",value:function(e,t){return bu.info("[StorageModule]: getEntity",{key:e}),this._store.getEntity(e,t)}},{key:"getEntities",value:function(e,t){return bu.info("[StorageModule]: getEntities",{keys:e}),this._store.getEntities(e,t)}},{key:"insertConsentData",value:function(e,t,n){bu.info("[StorageModule]: insertConsentData",{data:e,timestamp:t});try{this._inMemStore.insertConsentData(e,t,n),this._store.insertConsentData(e,t,n)}catch(e){e instanceof DOMException&&"QuotaExceededError"===e.name?bu.error("[StorageModule]: insertConsentData - Storage limit exceeded, switch to in mem storage",e):bu.error("[StorageModule]: insertConsentData - Error",e),this._store.destruct(),this._store=this._inMemStore}}},{key:"insertNotificationData",value:function(e,t,n){bu.info("[StorageModule]: insertNotificationData",{data:e,timestamp:t});try{this._inMemStore.insertNotificationData(e,t,n),this._store.insertNotificationData(e,t,n)}catch(e){e instanceof DOMException&&"QuotaExceededError"===e.name?bu.error("[StorageModule]: insertNotificationData - Storage limit exceeded, switch to in mem storage",e):bu.error("[StorageModule]: insertNotificationData - Error",e),this._store.destruct(),this._store=this._inMemStore}}},{key:"_checkStorage",value:function(e){return bu.info("[StorageModule]: checkStorage",{storageType:e}),e===Ya.inMem||!("undefined"==typeof window||!window[e])}},{key:"_setupStorage",value:function(e){if(bu.info("[StorageModule]: setupStorage",{storageType:e}),this._inMemStore=new df,e&&this._checkStorage(e)){var t=bf[e];this._store=new t}else this._checkStorage(Ya.sessionStorage)?this._store=new yf:this._checkStorage(Ya.localStorage)?this._store=new _f:this._store=this._inMemStore}},{key:"clean",value:function(){bu.info("[StorageModule]: clean"),this._store&&this._store.clean(),this._inMemStore&&this._inMemStore.clean()}},{key:"destruct",value:function(){bu.info("[StorageModule]: destruct"),this.clean()}}]),e}(),kf=new Ef,wf=function(){function e(){F(this,e),this.userInfo={}}return q(e,[{key:"init",value:function(e){bu.info("[BaseInfoModule]: init")}},{key:"getUserInfo",value:function(){return bu.info("[BaseInfoModule]: getUserInfo"),this.userInfo}},{key:"setUserInfo",value:function(e){bu.info("[BaseInfoModule]: setUserInfo"),this.userInfo=e}},{key:"fetchUserInfo",value:function(){return bu.info("[BaseInfoModule]: fetchUserInfo"),Promise.resolve({})}}]),e}(),Sf=function(){function e(){F(this,e)}return q(e,[{key:"getName",value:function(){return this.constructor.name}},{key:"getLifeCycleEvents",value:function(){var e=this;return Object.values(Xa).filter((function(t){return"function"==typeof(null==e?void 0:e[t])}))}}]),e}(),Af=Object.defineProperty,xf=Object.getOwnPropertySymbols,Cf=Object.prototype.hasOwnProperty,Tf=Object.prototype.propertyIsEnumerable,Df=function(e,t,n){return t in e?Af(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Rf=function(e,t){for(var n in t||(t={}))Cf.call(t,n)&&Df(e,n,t[n]);if(xf){var i,o=L(xf(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Tf.call(t,n)&&Df(e,n,t[n])}}catch(e){o.e(e)}finally{o.f()}}return e},Of=function(e,t){var n={};for(var i in e)Cf.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&xf){var o,r=L(xf(e));try{for(r.s();!(o=r.n()).done;){i=o.value;t.indexOf(i)<0&&Tf.call(e,i)&&(n[i]=e[i])}}catch(e){r.e(e)}finally{r.f()}}return n},zf=Object.keys(Xa).reduce((function(e,t){return e[Xa[t]]={},e}),{}),If=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments)).addEventListener=function(t,n,i){var o,r;bu.info("[DefaultEventPlugin]: addEventListener"),(null==(r=null==(o=e._registeredCallbackMap)?void 0:o[t])?void 0:r[n])?bu.error("[DefaultEventPlugin]: addEventListener - id for this event callback has been used"):e._registeredCallbackMap[t][n]=i},e.removeEventListener=function(t,n){var i,o;bu.info("[DefaultEventPlugin]: removeEventListener"),(null==(o=null==(i=e._registeredCallbackMap)?void 0:i[t])?void 0:o[n])&&delete e._registeredCallbackMap[t][n]},e[zl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeFetchUserInfo)),e._triggerEvent(Xa.beforeFetchUserInfo,t)},e[Il]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterFetchUserInfo)),e._triggerEvent(Xa.afterFetchUserInfo,t)},e[Ml]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeFetchConsentData)),e._triggerEvent(Xa.beforeFetchConsentData,t)},e[Bl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterFetchConsentData)),e._triggerEvent(Xa.afterFetchConsentData,t)},e[Pl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeFetchNotificationData)),e._triggerEvent(Xa.beforeFetchNotificationData,t)},e[Nl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterFetchNotificationData)),e._triggerEvent(Xa.afterFetchNotificationData,t)},e[Ul]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeUpdateRecords)),e._triggerEvent(Xa.beforeUpdateRecords,t)},e[Gl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterUpdateRecords)),e._triggerEvent(Xa.afterUpdateRecords,t)},e[jl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeNotify)),e._triggerEvent(Xa.beforeNotify,t)},e[Ll]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterNotify)),e._triggerEvent(Xa.afterNotify,t)},e[Vl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeRemoveNotification)),e._triggerEvent(Xa.beforeRemoveNotification,t)},e[Kl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterRemoveNotification)),e._triggerEvent(Xa.afterRemoveNotification,t)},e[Fl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeThirdPartyApprove)),e._triggerEvent(Xa.beforeThirdPartyApprove,t)},e[Hl]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterThirdPartyApprove)),e._triggerEvent(Xa.afterThirdPartyApprove,t)},e[ql]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.beforeThirdPartyReject)),e._triggerEvent(Xa.beforeThirdPartyReject,t)},e[$l]=function(t){bu.info("[DefaultEventPlugin]: ".concat(Xa.afterThirdPartyReject)),e._triggerEvent(Xa.afterThirdPartyReject,t)},e.destruct=function(){Object.keys(Xa).forEach((function(t){var n=Xa[t];Object.keys(e._registeredCallbackMap[n]).forEach((function(t){delete e._registeredCallbackMap[n][t]})),e._registeredCallbackMap[n]={}}))},e}return q(n,[{key:"init",value:function(){this._registeredCallbackMap=Ol(zf)}},{key:"_triggerEvent",value:function(e,t){return n=this,i=null,o=D().mark((function n(){var i;return D().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return bu.info("[DefaultEventPlugin]: triggerEvent"),i=[],Object.values(this._registeredCallbackMap[e]).forEach((function(e){if("function"==typeof e){var n=t,o=n.plugin,r=Of(n,["plugin"]);i.push(e(Rf({plugin:o},Ol(r))))}})),n.prev=3,n.next=6,Promise.all(i);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),bu.warn("[DefaultEventPlugin]: plugin callback error",n.t0);case 11:case"end":return n.stop()}}),n,this,[[3,8]])})),new Promise((function(e,t){var r=function(e){try{s(o.next(e))}catch(e){t(e)}},a=function(e){try{s(o.throw(e))}catch(e){t(e)}},s=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(r,a)};s((o=o.apply(n,i)).next())}));var n,i,o}}]),n}(Sf);zl=Xa.beforeFetchUserInfo,Il=Xa.afterFetchUserInfo,Ml=Xa.beforeFetchConsentData,Bl=Xa.afterFetchConsentData,Pl=Xa.beforeFetchNotificationData,Nl=Xa.afterFetchNotificationData,Ul=Xa.beforeUpdateRecords,Gl=Xa.afterUpdateRecords,jl=Xa.beforeNotify,Ll=Xa.afterNotify,Vl=Xa.beforeRemoveNotification,Kl=Xa.afterRemoveNotification,Fl=Xa.beforeThirdPartyApprove,Hl=Xa.afterThirdPartyApprove,ql=Xa.beforeThirdPartyReject,$l=Xa.afterThirdPartyReject;var Mf=If;var Bf=function(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(o);++i<o;)r[i]=e[i+t];return r},Pf=/\s/;var Nf=function(e){for(var t=e.length;t--&&Pf.test(e.charAt(t)););return t},Uf=/^\s+/;var Gf=function(e){return e?e.slice(0,Nf(e)+1).replace(Uf,""):e};var jf=function(e){return"symbol"==$(e)||Ao(e)&&"[object Symbol]"==Ei(e)},Lf=/^[-+]0x[0-9a-f]+$/i,Vf=/^0b[01]+$/i,Kf=/^0o[0-7]+$/i,Ff=parseInt;var Hf=function(e){if("number"==typeof e)return e;if(jf(e))return NaN;if(ki(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ki(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gf(e);var n=Vf.test(e);return n||Kf.test(e)?Ff(e.slice(2),n?2:8):Lf.test(e)?NaN:+e},qf=1/0;var $f=function(e){return e?(e=Hf(e))===qf||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var Wf=function(e){var t=$f(e),n=t%1;return t==t?n?t-n:t:0},Jf=Math.ceil,Xf=Math.max;var Yf=function(e,t,n){t=(n?kr(e,t,n):void 0===t)?1:Xf(Wf(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,r=0,a=Array(Jf(i/t));o<i;)a[r++]=Bf(e,o,o+=t);return a},Zf=Object.defineProperty,Qf=Object.defineProperties,eh=Object.getOwnPropertyDescriptors,th=Object.getOwnPropertySymbols,nh=Object.prototype.hasOwnProperty,ih=Object.prototype.propertyIsEnumerable,oh=function(e,t,n){return t in e?Zf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},rh=function(e,t){for(var n in t||(t={}))nh.call(t,n)&&oh(e,n,t[n]);if(th){var i,o=L(th(t));try{for(o.s();!(i=o.n()).done;){n=i.value;ih.call(t,n)&&oh(e,n,t[n])}}catch(e){o.e(e)}finally{o.f()}}return e},ah=function(e,t){return Qf(e,eh(t))},sh={fetch:{pageSize:100,version:is.V2},update:{pageSize:100,version:is.V2}},ch=function(){function e(){F(this,e),this.destruct=function(){bu.info("[ConsentModule]: destruct")}}return q(e,[{key:"init",value:function(e){bu.info("[ConsentModule]: init");var t=(null!=e?e:{}).api,n=(null!=t?t:{}).consent;this._config=Xl({},n,sh)}},{key:"getRecord",value:function(e,t){return bu.info("[ConsentModule]: getRecord",{entityKey:e,userInfo:t}),kf.getRecord(e,t)}},{key:"getEntity",value:function(e,t){return bu.info("[ConsentModule]: getEntity",{entityKey:e,userInfo:t}),kf.getEntity(e,t)}},{key:"getRecords",value:function(e,t){return bu.info("[ConsentModule]: getRecords",{entityKeys:e,userInfo:t}),kf.getRecords(e,t)}},{key:"getEntities",value:function(e,t){return bu.info("[ConsentModule]: getEntities",{entityKeys:e,userInfo:t}),kf.getEntities(e,t)}},{key:"getEntitiesWithApprovedRecord",value:function(e,t){return bu.info("[ConsentModule]: getEntitiesWithApprovedRecord",{entityKeys:e,userInfo:t}),kf.getEntities(e,t).filter((function(e){var t;return(null==(t=null==e?void 0:e.record)?void 0:t.status)===Qa.APPROVE}))}},{key:"shouldFetch",value:function(){return bu.info("[ConsentModule]: shouldFetch"),!0}},{key:"_fetchWithPagination",value:function(e,t,n,i,o,r,a,s,c){return Du.sendRequest("".concat(n,"/consent/api/combine/list/").concat(o),i,{entity_keys:e,page_size:r,page_token:null!=s?s:""},ah(rh({},c),{timeout:a,params:rh({},t)}))}},{key:"fetch",value:function(e,t){var n,i=this;bu.info("[ConsentModule]: fetch");var o="function"==typeof(null==(n=this._config)?void 0:n.fetch)?this._config.fetch():this._config.fetch,r=o.version,a=o.pageSize,s=o.timeout,c=o.domain,u=void 0===c?"":c,l=o.requestConfig,f=r===is.V1?"GET":"POST",h={data:{},pageSize:a},d=(new Date).getTime(),p=Yf(e,a).map((function(e){return i._fetchWithPagination(e,t,u,f,r,a,s,"",l).then((function(e){var t,n,i,o=null!=(t=null==e?void 0:e.data)?t:{},r=o.entities,a=o.data,s=o.status_code,c=o.extra,u=null!=(n=null!=r?r:a)?n:[];if(0===s&&u&&c){var l=null==(i=null==u?void 0:u.reduce)?void 0:i.call(u,(function(e,t){var n=(null!=t?t:{}).key;return n&&(e[n]=t),e}),{});h.data=rh(rh({},h.data),l),d<c.now&&(d=c.now)}else bu.error("[ConsentModule]: fetch - invalid response",e)})).catch((function(e){bu.error("[ConsentModule]: fetch - fail to fetch",e)}))}));return Promise.all(p).then((function(e){var n;return kf.insertConsentData(null!=(n=h.data)?n:{},d,t),h})).catch((function(e){bu.error("[ConsentModule]: fetch - fail to fetch",e)}))}},{key:"updateRecords",value:function(e,t){var n,i=this;if(0===(null==e?void 0:e.length))return bu.error("[ConsentModule]: updateRecords - invalid params",{params:e}),Promise.reject(new Error("[ConsentModule]: updateRecords - invalid params"));bu.info("[ConsentModule]: updateRecords");var o="function"==typeof(null==(n=this._config)?void 0:n.update)?this._config.update():this._config.update,r=o.version,a=o.domain,s=void 0===a?"":a,c=o.timeout,u=o.requestConfig;if(r===is.V1){var l="[ConsentModule]: updateRecords - v1 api is not supported anymore";return bu.error(l,{version:r,params:e}),Promise.reject(new Error(l))}return Du.sendRequest("".concat(s,"/consent/api/record/create/sync/").concat(r),"POST",function(e,t){var n;return{consent_records:null!=(n=null==t?void 0:t.filter((function(e){return null==e?void 0:e.key})).map((function(e){return rh({entity_key:e.key,flow:e.businessFlow,status:es[e.status]},e.extra?{extra:e.extra}:{})})))?n:[]}}(0,e),ah(rh({},null!=u?u:{}),{timeout:c,params:rh({},t)})).then((function(n){var o,a,s,c,u=function(e,t){return new Set(null==t?void 0:t.filter((function(e){return null==e?void 0:e.key})).map((function(e){return e.key})))}(0,e),l=null!=(o=null==n?void 0:n.data)?o:{},f=l.consent_record_ids,h=l.data,d=void 0===h?{}:h,p=l.status_code,g=l.extra,v={},m=null!=(a=null!=f?f:Object.keys(null!=d?d:{}))?a:[];return 0===p?(v=null==(s=null==m?void 0:m.reduce)?void 0:s.call(m,(function(e,n){var o=r===is.V1?n:d[n],a=r===is.V1?o.entity_key:n,s=null!=o?o:{},c=s.record_id,l=void 0===c?"":c,f=s.created_at,h=s.business_flow,p=s.status,v=function(e,t){var n={};for(var i in e)nh.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&th){var o,r=L(th(e));try{for(r.s();!(o=r.n()).done;)i=o.value,t.indexOf(i)<0&&ih.call(e,i)&&(n[i]=e[i])}catch(e){r.e(e)}finally{r.f()}}return n}(s,["record_id","created_at","business_flow","status"]);if(a){u.delete(a);var m=i.getEntity(a,t);e[a]=ah(rh({},m),{record:rh({id:l,entity_key:a,status:p,created_at:null!=f?f:g.now,business_flow:h},v)})}return e}),{}),kf.insertConsentData(v,g.now,t),bu.reportCUJ(ls.UPDATE_RECORD,Ua.FINISH,{data:v?null==(c=Object.keys(v))?void 0:c.map((function(e){var t,n;return{key:e,status:null==(n=null==(t=v[e])?void 0:t.record)?void 0:n.status}})):[]})):(bu.reportCUJ(ls.UPDATE_RECORD,Ua.FAILURE,{error:new Error("[ConsentModule]: updateRecords - invalid response")}),bu.error("[ConsentModule]: updateRecords - invalid response",{statusCode:p})),u.size&&(bu.reportCUJ(ls.UPDATE_RECORD,Ua.FAILURE,{error:new Error("[ConsentModule]: updateRecords - fail to create records for certain entities")}),bu.info("[ConsentModule]: updateRecords - fail to create records for certain entities",{keys:T(u)})),v})).catch((function(e){throw bu.reportCUJ(ls.UPDATE_RECORD,Ua.FAILURE,{error:e}),bu.error("[ConsentModule]: updateRecords - fail to create records",e),e}))}}]),e}(),uh=ch,lh=function(){function e(){F(this,e)}return q(e,[{key:"init",value:function(e){}},{key:"getData",value:function(){return null}},{key:"shouldNotify",value:function(e){return!0}},{key:"notify",value:function(e){}},{key:"canNotificationBeRemoved",value:function(e){return!1}},{key:"removeNotification",value:function(e){}},{key:"shouldFetch",value:function(){return!0}},{key:"fetch",value:function(){return Promise.resolve(null)}},{key:"destruct",value:function(){}}]),e}(),fh=Object.defineProperty,hh=Object.getOwnPropertySymbols,dh=Object.prototype.hasOwnProperty,ph=Object.prototype.propertyIsEnumerable,gh=function(e,t,n){return t in e?fh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},vh=function(e,t,n){return new Promise((function(i,o){var r=function(e){try{s(n.next(e))}catch(e){o(e)}},a=function(e){try{s(n.throw(e))}catch(e){o(e)}},s=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,a)};s((n=n.apply(e,t)).next())}))},mh=function(){function e(){var t=this;return F(this,e),this._thirdPartyMap={},this._cleanUpPlugins=function(){t._pluginsMap&&Object.keys(t._pluginsMap).forEach((function(e){var n=e,i=t._pluginsMap[n];(null==i?void 0:i.length)&&(i.forEach((function(e){var t;null==(t=null==e?void 0:e.destruct)||t.call(e)})),delete t._pluginsMap[n])})),t._defaultPlugin=null},this.dispatch=function(e,n){return vh(t,null,D().mark((function t(){var i,o,r;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(bu.info("[LifeCycleModule]: dispatch start"),!this._currentEvent.has(e)){t.next=4;break}return bu.error("[LifeCycleModule]: Dispatch is already in process",{currentEvent:T(this._currentEvent),upcomingEvent:e}),t.abrupt("return");case 4:return this._currentEvent.add(e),o=null==(i=this._pluginsMap)?void 0:i[e],r=[],(null==o?void 0:o.length)&&o.forEach((function(t){var i;(null==t?void 0:t[e])&&"function"==typeof t[e]&&r.push(null==(i=null==t?void 0:t[e])?void 0:i.call(t,{name:e,data:Ol(n),plugin:t}))})),t.prev=8,t.next=11,Promise.all(r);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(8),bu.warn("[LifeCycleModule]: plugin callback error",t.t0);case 16:this._currentEvent.delete(e),bu.info("[LifeCycleModule]: dispatch finish");case 18:case"end":return t.stop()}}),t,this,[[8,13]])})))},this._dispatchAfterEvent=function(e,n){bu.info("[LifeCycleModule]: dispatchAfterEvent"),n instanceof Promise?n.then((function(n){t.dispatch(e,n)})).catch((function(n){t.dispatch(e,n)})):t.dispatch(e,n)},this.addEventListener=function(e,n,i){var o;null==(o=t._defaultPlugin)||o.addEventListener(e,n,i)},this.removeEventListener=function(e,n){var i;null==(i=t._defaultPlugin)||i.removeEventListener(e,n)},e._instance||(e._instance=this),e._instance}return q(e,[{key:"init",value:function(e){this._entityKeys=e.entityKeys,this._currentEvent=new Set,bu.info("[LifeCycleModule]: init"),this._initPlugins(e),this._initModules(e),this._registerThirdParties(e)}},{key:"_initModules",value:function(e){var t,n;if(bu.info("[LifeCycleModule]: initModules"),this._consentModule=new uh,this._consentModule.init(e),(null==(t=null==e?void 0:e.modules)?void 0:t.notification)&&(e.modules.notification instanceof lh?(this._notificationModule=e.modules.notification,this._notificationModule.init(e)):bu.warn("[LifeCycleModule]: initModules - incorrect implementation of NotificationModule, will skip")),null==(n=null==e?void 0:e.modules)?void 0:n.info)if(e.modules.info instanceof wf)this._infoModule=e.modules.info,this._infoModule.init(e);else{bu.error("[LifeCycleModule]: initModules - incorrect implementation of InfoModule")}else{bu.error("[LifeCycleModule]: initModules - info module is required")}}},{key:"_initPlugins",value:function(e){var t,n=this;bu.info("[LifeCycleModule]: initPlugins"),this._cleanUpPlugins(),this._pluginsMap=Object.values(Xa).reduce((function(e,t){return e[t]=[],e}),{}),this._defaultPlugin=new Mf;var i=[this._defaultPlugin];(null==(t=e.plugins)?void 0:t.length)&&(i=i.concat(e.plugins));var o=new Set;i.forEach((function(e,t){var i;null==(i=e.init)||i.call(e),n._registerPlugin(e,t,o)}))}},{key:"_registerPlugin",value:function(e,t,n){var i,o,r,a=this,s=null==(i=null==e?void 0:e.getName)?void 0:i.call(e);if(s)if(n.has(s))bu.error("[LifeCycleModule]: registerPlugin - Duplicate Plugin ".concat(s,"."),{index:t,pluginName:s,plugin:e});else if(e instanceof Sf){bu.info("[LifeCycleModule]: registerPlugin ".concat(s," start"));var c=null==(r=null==(o=e.getLifeCycleEvents)?void 0:o.call(e))?void 0:r.filter((function(e){return e in Xa}));(null==c?void 0:c.length)&&c.forEach((function(t){a._pluginsMap[t].push(e)})),bu.info("[LifeCycleModule]: registerPlugin ".concat(s," finish"),{plugin:s,events:c})}else bu.error("[LifeCycleModule]: registerPlugin - ".concat(s," incorrectly implements of Plugin."),{index:t,pluginName:s,plugin:e});else bu.error("[LifeCycleModule]: registerPlugin - Plugin on index ".concat(t," is an invalid Plugin. Plugin should always have a unique name"),{index:t,plugin:e})}},{key:"_registerThirdParties",value:function(e){var t,n,i;bu.info("[LifeCycleModule]: registerThirdParties");var o=(null!=(t=null==e?void 0:e.modules)?t:{}).thirdParties;this._thirdPartyMap=null!=(i=null==(n=null==o?void 0:o.reduce)?void 0:n.call(o,(function(e,t){var n,i=L(t.getRelatedEntities());try{for(i.s();!(n=i.n()).done;){var o=n.value;e[o]?e[o].push(t):e[o]=[t]}}catch(e){i.e(e)}finally{i.f()}return e}),{}))?i:{}}},{key:"_initThirdParties",value:function(e){var t,n,i=this;if(bu.info("[LifeCycleModule]: initThirdParties"),e&&(null==(t=Object.values(e))?void 0:t.length)){var o=new Set,r=new Set;if(Object.values(e).forEach((function(e){var t,n=null==(t=i._thirdPartyMap)?void 0:t[null==e?void 0:e.key];(null==n?void 0:n.length)&&n.forEach((function(e){if(e){var t=e.getRelatedEntities();(null==t?void 0:t.length)&&(t.forEach((function(e){o.add(e)})),r.add(e))}}))})),r.size){var a,s=this._getUserInfo(),c=(null!=(n=this._consentModule.getEntitiesWithApprovedRecord(T(o),s))?n:[]).reduce((function(e,t){return e[t.key]=t,e}),{}),u=L(r);try{for(u.s();!(a=u.n()).done;){a.value.initThirdPartyModule(c,this.dispatch,this._dispatchAfterEvent)}}catch(e){u.e(e)}finally{u.f()}}}}},{key:"fetch",value:function(e){var t=this;return bu.info("[LifeCycleModule]: fetch"),this.fetchUserInfo().then((function(){var n=[t.shouldFetchConsentData()?t.fetchConsentData(t._entityKeys):Promise.resolve({}),t.shouldFetchNotificationData()?t.fetchNotificationData(null==e?void 0:e.notificationParam):Promise.resolve({})];return Promise.all(n).then((function(e){var n,i=C(e,2),o=i[0],r=i[1];return o&&(null==(n=Object.keys(o))?void 0:n.length)&&t._initThirdParties(o),r&&t._triggerNotification({notificationData:r,relatedConsentEntityMap:o}),{consentData:o,notificationData:r}}))})).catch((function(e){bu.error("[LifeCycleModule]: fetch failure",e)}))}},{key:"fetchUserInfo",value:function(){return vh(this,null,D().mark((function e(){var t,n,i,o,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bu.info("[LifeCycleModule]: fetchUserInfo"),this.dispatch(Xa.beforeFetchUserInfo),r={},e.prev=3,e.next=6,null!=(n=null==(t=this._infoModule)?void 0:t.fetchUserInfo())?n:Promise.resolve({});case 6:if(e.t0=i=e.sent,null==e.t0){e.next=11;break}e.t1=i,e.next=12;break;case 11:e.t1={};case 12:r=e.t1,null==(o=this._infoModule)||o.setUserInfo(r),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(3),bu.error("[LifeCycleModule]: fetchUserInfo - error",e.t2);case 19:return this.dispatch(Xa.afterFetchUserInfo,{userInfo:r}),e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this,[[3,16]])})))}},{key:"_getUserInfo",value:function(){var e,t;return bu.info("[LifeCycleModule]: _getUserInfo"),null!=(t=null==(e=this._infoModule)?void 0:e.getUserInfo())?t:{}}},{key:"shouldFetchConsentData",value:function(){var e,t;return bu.info("[LifeCycleModule]: shouldFetchConsentData"),null!=(t=null==(e=this._consentModule)?void 0:e.shouldFetch())&&t}},{key:"fetchConsentData",value:function(e){var t=this;bu.info("[LifeCycleModule]: fetchConsentData"),this.dispatch(Xa.beforeFetchConsentData,{entityKeys:e});var n=this._getUserInfo();return this._consentModule.fetch(e,n).then((function(n){var i=(null!=n?n:{}).data;return t.dispatch(Xa.afterFetchConsentData,{entityKeys:e,data:i}),i})).catch((function(n){bu.error("[LifeCycleModule]: fetchConsentData failure",n),t.dispatch(Xa.afterFetchConsentData,{entityKeys:e,data:null,error:n})}))}},{key:"shouldFetchNotificationData",value:function(){var e,t,n;return bu.info("[LifeCycleModule]: shouldFetchNotificationData"),this._notificationModule?null!=(n=null==(t=null==(e=this._notificationModule)?void 0:e.shouldFetch)?void 0:t.call(e))&&n:(bu.info("[LifeCycleModule]: no notification module"),!1)}},{key:"fetchNotificationData",value:function(){for(var e,t,n,i=this,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return bu.info("[LifeCycleModule]: fetchNotificationData"),this._notificationModule?(this.dispatch(Xa.beforeFetchNotificationData,{notificationParams:r}),null==(n=null==(t=this._notificationModule)?void 0:t.fetch)?void 0:(e=n).call.apply(e,[t].concat(r)).then((function(e){var t=(null!=e?e:{}).data;return i.dispatch(Xa.afterFetchNotificationData,{notificationParams:r,data:t}),t})).catch((function(e){bu.error("[LifeCycleModule]: fetchNotificationData failure",e),i.dispatch(Xa.afterFetchNotificationData,{notificationParams:r,data:null,error:e})}))):(bu.info("[LifeCycleModule]: no notification module"),Promise.resolve(null))}},{key:"getConsentRecord",value:function(e){bu.info("[LifeCycleModule]: getConsentRecord",{entityKey:e});var t=this._getUserInfo();return this._consentModule.getRecord(e,t)}},{key:"getConsentEntity",value:function(e){bu.info("[LifeCycleModule]: getConsentEntity",{entityKey:e});var t=this._getUserInfo();return this._consentModule.getEntity(e,t)}},{key:"getConsentRecords",value:function(e){var t;bu.info("[LifeCycleModule]: getConsentRecords",{entityKeys:e});var n=this._getUserInfo();return null!=(t=this._consentModule.getRecords(e,n))?t:[]}},{key:"getConsentEntities",value:function(e){bu.info("[LifeCycleModule]: getConsentEntities",{entityKeys:e});var t=this._getUserInfo();return this._consentModule.getEntities(e,t)}},{key:"updateConsentRecords",value:function(e){return vh(this,null,D().mark((function t(){var n,i;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bu.info("[LifeCycleModule]: updateConsentRecords",{params:e}),this.dispatch(Xa.beforeUpdateRecords,{params:e}),n={},i=this._getUserInfo(),t.prev=4,t.next=7,this._consentModule.updateRecords(e,i);case 7:n=t.sent,this.dispatch(Xa.afterUpdateRecords,{data:n}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),bu.error("[LifeCycleModule]: updateConsentRecords",t.t0),this.dispatch(Xa.afterUpdateRecords,{params:e,data:null,error:t.t0});case 15:return this._initThirdParties(n),t.abrupt("return",n);case 17:case"end":return t.stop()}}),t,this,[[4,11]])})))}},{key:"getNotificationData",value:function(){return bu.info("[LifeCycleModule]: getNotificationData"),this._notificationModule?this._notificationModule.getData():(bu.info("[LifeCycleModule]: no notification module"),null)}},{key:"removeNotification",value:function(e){if(bu.info("[LifeCycleModule]: removeNotification"),this._notificationModule){if(this._notificationModule.canNotificationBeRemoved(e)){this.dispatch(Xa.beforeRemoveNotification,e);var t=this._notificationModule.removeNotification(e);this._dispatchAfterEvent(Xa.afterRemoveNotification,t)}}else bu.info("[LifeCycleModule]: no notification module")}},{key:"notify",value:function(e){var t,n=e,i=n.relatedEntityKeys,o=void 0===i?[]:i,r=function(e,t){var n={};for(var i in e)dh.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&hh){var o,r=L(hh(e));try{for(r.s();!(o=r.n()).done;)i=o.value,t.indexOf(i)<0&&ph.call(e,i)&&(n[i]=e[i])}catch(e){r.e(e)}finally{r.f()}}return n}(n,["relatedEntityKeys"]);if(bu.info("[LifeCycleModule]: notify"),this._notificationModule){var a=(null!=(t=this.getConsentEntities(o))?t:[]).reduce((function(e,t){return t&&(e[t.key]=t),e}),{});this._triggerNotification(function(e,t){for(var n in t||(t={}))dh.call(t,n)&&gh(e,n,t[n]);if(hh){var i,o=L(hh(t));try{for(o.s();!(i=o.n()).done;)n=i.value,ph.call(t,n)&&gh(e,n,t[n])}catch(e){o.e(e)}finally{o.f()}}return e}({relatedEntityKeys:o,notificationData:this.getNotificationData(),relatedConsentEntityMap:a},r))}else bu.info("[LifeCycleModule]: no notification module")}},{key:"_triggerNotification",value:function(e){if(bu.info("[LifeCycleModule]: triggerNotification"),this._notificationModule){if(this._notificationModule.shouldNotify(e)){this.dispatch(Xa.beforeNotify,e);var t=this._notificationModule.notify(e);this._dispatchAfterEvent(Xa.afterNotify,t)}}else bu.info("[LifeCycleModule]: no notification module")}},{key:"destruct",value:function(){this._cleanUpPlugins(),bu.info("[LifeCycleModule]: destruct")}}]),e}(),_h=new mh,yh=function(e,t,n){return new Promise((function(i,o){var r=function(e){try{s(n.next(e))}catch(e){o(e)}},a=function(e){try{s(n.throw(e))}catch(e){o(e)}},s=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,a)};s((n=n.apply(e,t)).next())}))},bh={appId:-1,domain:"",entityKeys:[],mode:Wa.PRODUCTION,isPPE:!1,debug:!1,fetchDataAtInit:!0,region:$a.SINGAPORE_CENTRAL,storageType:Ya.sessionStorage,modules:{info:new wf}},Eh=function(){function e(){var t=this;return F(this,e),this._isInitialized=!1,this._validateInitStatus=function(){return!!t._isInitialized||(console.error("[SDK]: SDK is used before init"),!1)},this.getConsentRecord=function(e){if(!t._validateInitStatus())return null;bu.reportCUJ(ls.GET_RECORD,Ua.START);try{bu.info("[SDK]: getConsentRecord",{entityKey:e});var n=_h.getConsentRecord(e);return bu.reportCUJ(ls.GET_RECORD,Ua.FINISH),n}catch(e){return bu.reportCUJ(ls.GET_RECORD,Ua.FAILURE,{error:e}),null}},this.getConsentRecords=function(e){if(!t._validateInitStatus())return[];bu.reportCUJ(ls.GET_RECORDS,Ua.START);try{bu.info("[SDK]: getConsentRecords",{entityKeys:e});var n=_h.getConsentRecords(e);return bu.reportCUJ(ls.GET_RECORDS,Ua.FINISH),n}catch(e){return bu.reportCUJ(ls.GET_RECORDS,Ua.FAILURE,{error:e}),[]}},this.getConsentEntity=function(e){if(!t._validateInitStatus())return null;bu.reportCUJ(ls.GET_ENTITY,Ua.START);try{bu.info("[SDK]: getConsentEntity",{entityKey:e});var n=_h.getConsentEntity(e);return bu.reportCUJ(ls.GET_ENTITY,Ua.FINISH),n}catch(e){return bu.reportCUJ(ls.GET_ENTITY,Ua.FAILURE,{error:e}),null}},this.getConsentEntities=function(e){if(!t._validateInitStatus())return[];bu.reportCUJ(ls.GET_ENTITIES,Ua.START);try{bu.info("[SDK]: getConsentEntities",{entityKeys:e});var n=_h.getConsentEntities(e);return bu.reportCUJ(ls.GET_ENTITIES,Ua.FINISH),n}catch(e){return bu.reportCUJ(ls.GET_ENTITIES,Ua.FAILURE,{error:e}),[]}},this.updateConsentRecords=function(e){return yh(t,null,D().mark((function t(){var n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._validateInitStatus()){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return bu.reportCUJ(ls.UPDATE_RECORD,Ua.START,{data:e}),t.prev=3,bu.info("[SDK]: updateConsentRecords",{params:e}),t.next=7,_h.updateConsentRecords(e);case 7:return n=t.sent,t.abrupt("return",n);case 11:throw t.prev=11,t.t0=t.catch(3),bu.reportCUJ(ls.UPDATE_RECORD,Ua.FAILURE,{error:t.t0}),t.t0;case 15:case"end":return t.stop()}}),t,this,[[3,11]])})))},this.removeNotification=function(e){t._validateInitStatus()&&(bu.info("[SDK]: removeNotification",{arg:e}),_h.removeNotification(e))},this.notify=function(e){t._validateInitStatus()&&(bu.info("[SDK]: notify",{arg:e}),_h.notify(e))},this.fetch=function(e){return yh(t,null,D().mark((function t(){var n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._validateInitStatus()){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return bu.reportCUJ(ls.FETCH_DATA,Ua.START),t.prev=3,bu.info("[SDK]: fetch",{arg:e}),t.next=7,_h.fetch(e);case 7:return n=t.sent,bu.reportCUJ(ls.FETCH_DATA,Ua.FINISH),t.abrupt("return",n);case 12:throw t.prev=12,t.t0=t.catch(3),bu.reportCUJ(ls.FETCH_DATA,Ua.FAILURE,{error:t.t0}),t.t0;case 16:case"end":return t.stop()}}),t,this,[[3,12]])})))},this.refresh=function(e){return t._validateInitStatus()?(bu.info("[SDK]: refresh",{arg:e}),_h.fetch(e)):Promise.resolve()},this.addEventListener=function(e,n,i){if(t._validateInitStatus()){if(bu.reportCUJ(ls.SUBSCRIBE_EVENT,Ua.START),bu.info("[SDK]: addEventListener"),!e||!Xa[e]||!n||"function"!=typeof i){var o="[SDK]: addEventListener - invalid param for adding new event listener",r=new Error(o);return bu.error(o,r),void bu.reportCUJ(ls.SUBSCRIBE_EVENT,Ua.FAILURE,{error:r})}try{_h.addEventListener(e,n,i),bu.reportCUJ(ls.SUBSCRIBE_EVENT,Ua.FINISH)}catch(e){bu.reportCUJ(ls.SUBSCRIBE_EVENT,Ua.FAILURE,{error:e})}}},this.removeEventListener=function(e,n){if(t._validateInitStatus()){bu.reportCUJ(ls.UNSUBSCRIBE_EVENT,Ua.START),bu.info("[SDK]: removeEventListener");try{_h.removeEventListener(e,n),bu.reportCUJ(ls.UNSUBSCRIBE_EVENT,Ua.FINISH)}catch(e){bu.reportCUJ(ls.UNSUBSCRIBE_EVENT,Ua.FAILURE,{error:e})}}},this.destruct=function(){bu.info("[SDK]: destruct"),_h.destruct(),Du.destruct(),kf.destruct(),bu.destruct(),t._isInitialized=!1},e._instance||(e._instance=this),e._instance}return q(e,[{key:"init",value:function(e){return yh(this,null,D().mark((function t(){var n,i,o,r;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!=typeof window){t.next=3;break}return console.warn("ConsentClientFrameworkSDK can not be init on server"),t.abrupt("return",Promise.resolve());case 3:if(!this._isInitialized){t.next=5;break}throw new Error("ConsentClientFrameworkSDK has been initialized");case 5:if(n=Xl({},e,bh),i=n.debug,o=n.fetchDataAtInit,i&&(window.consentSDK=this,window.consentSDK.storage=kf),bu.init(n),bu.reportCUJ(ls.SDK_INIT,Ua.START),t.prev=10,bu.info("[SDK]: init global module"),Du.init(n),kf.init(n),bu.info("[SDK]: init life cycle"),_h.init(n),this._isInitialized=!0,!o){t.next=25;break}return bu.reportCUJ(ls.FETCH_DATA,Ua.START),t.next=21,_h.fetch();case 21:return r=t.sent,bu.reportCUJ(ls.FETCH_DATA,Ua.FINISH),bu.reportCUJ(ls.SDK_INIT,Ua.FINISH),t.abrupt("return",r);case 25:return bu.reportCUJ(ls.SDK_INIT,Ua.FINISH),t.abrupt("return",Promise.resolve());case 29:throw t.prev=29,t.t0=t.catch(10),bu.reportCUJ(ls.SDK_INIT,Ua.FAILURE,{error:t.t0}),t.t0;case 33:case"end":return t.stop()}}),t,this,[[10,29]])})))}},{key:"isInitialized",value:function(){return bu.info("[SDK]: isInitialized"),this._isInitialized}}]),e}(),kh=new Eh,wh={TTP:$a.US_TTP,TTP2:$a.US_TTP2,GCP:$a.US_EASTRED,EU_TTP:$a.EU_TTP,MALI_VA:$a.US_EAST,ALL_SG:$a.SINGAPORE_CENTRAL,EU_TTP2:$a.EU_TTP2},Sh=function(e){z(n,e);var t=I(n);function n(e){var i,o=e.wid,r=e.region;return F(this,n),(i=t.call(this)).wid="",i.region="",i.wid=o,i.region=r,i}return q(n,[{key:"getUserInfo",value:function(){return{device_id:this.wid,user_country:this.region,carrier_region:this.region}}}]),n}(wf),Ah=!1;function xh(e){return Ch.apply(this,arguments)}function Ch(){return(Ch=O(D().mark((function e(t){var n,i,o,r,a,s,c,u,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,i=t.region,o=t.consentApiDomain,r=t.idcRegion,e.prev=1,Ah){e.next=11;break}return Ah=!0,a=n.entityKeys,s=n.wid,c=E(n,y),u=[],Object.keys(a||{}).forEach((function(e){var t=a[e]||[];u.push.apply(u,T(t))})),l=w(w({},c),{},{entityKeys:u,region:wh[r]||wh.ALL_SG,bid:"tiktok-cookie-banner",modules:{info:new Sh({wid:s,region:i})}}),o&&(l.domain=o),e.next=11,kh.init(l);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("initConsentSDK failed: errMsg=".concat(e.t0.message,", config=").concat(JSON.stringify(n)));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Th(){return(Th=O(D().mark((function e(t){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.map((function(e){return{key:e.key,status:e.value?Qa.APPROVE:Qa.REJECT}})),e.next=4,kh.updateConsentRecords(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("updateConsentRecords failed: errMsg=".concat(e.t0.message,", value=").concat(JSON.stringify(t)));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Dh(){var e=window.location.hostname.split(".");if(e.length>3){var t=e.length-1;return".".concat(e.slice(-t).join("."))}return".".concat(e.slice(-2).join("."))}function Rh(e){return e?"1":"0"}var Oh=function(){function e(){F(this,e),this.isRequestInflight=!1,this.pendingTasks=[],this.entityKeys={}}return q(e,[{key:"getSettings",value:function(){var e,t;return(null===(t=null===(e=this.value)||void 0===e?void 0:e.settings)||void 0===t?void 0:t.length)?this.value.settings:(console.error("`CookieConfigManager.getSettings` returned undefined."),[])}},{key:"getSettingItemKeys",value:function(e,t){var n=Object.keys(e||{});return n.length?n:(null==t?void 0:t.length)?t.map((function(e){return e.entityKey})):[]}},{key:"getCategoryConsents",value:function(e){var t=e.groupName,n=e.value,i=this.getSettings().find((function(e){return e.groupName===t}));return i?this.getSettingItemKeys(i.items,i.groupEntityKeys).reduce((function(e,t){return e[t]=n,e}),{}):(console.error("`CookieConfigManager.getCategoryConsents` returned category undefined."),{})}},{key:"setFullConsents",value:function(){var e=this.getFullConsents();return this.setCookieConsents(e)}},{key:"getFullConsents",value:function(){var e=this,t=this.getSettings(),n={};return t.forEach((function(t){var i=e.getCategoryConsents({groupName:t.groupName,value:!0});n=w(w({},n),i)})),n}},{key:"setEmptyConsents",value:function(){var e=this.getEmptyConsents();return this.setCookieConsents(e)}},{key:"getEmptyConsents",value:function(){var e=this,t=this.getSettings(),n={};return t.forEach((function(t){var i=e.getCategoryConsents({groupName:t.groupName,value:!1});n=w(w({},n),i)})),n}},{key:"setCookieConsents",value:function(e){var t,n=this.getSettings();if(!n.length)return{};n.forEach((function(t){for(var n=0,i=Object.keys(t.items);n<i.length;n++){var o=i[n];if(!e[o]){var r=(t.items[o]||{}).cookies;(void 0===r?[]:r).forEach((function(e){return ht.remove(e,{domain:Dh()})}))}}}));var i=(null===(t=this.value)||void 0===t?void 0:t.version)||"",o=JSON.stringify(w(w({},e),{},{version:i}));return ht.set(at,o,{expires:390,domain:Dh(),secure:!0,sameSite:"None"}),setTimeout((function(){ht.get(at)!==o&&qn("cookie_banner_save_cookie_failed")}),100),this.updateConsentRecords(e),e}},{key:"updateConsentRecords",value:function(e){var t=this,n=[];Object.keys(e).forEach((function(i){var o,r=(null===(o=t.entityKeys)||void 0===o?void 0:o[i])||[];if(null==r?void 0:r.length){var a=e[i],s=r.map((function(e){return{key:e,value:a}}));n.push.apply(n,T(s))}})),function(e){Th.apply(this,arguments)}(n)}},{key:"getCookieConsents",value:function(e){var t=this.getSettings();if(!t.length)return{};var n=e.isEffective,i=e.cookie,o=e.isFTC,r=[],a=t.reduce((function(e,t){var n=t.groupEntityKeys||[],i={};return n.length&&(r.push.apply(r,T(n)),i=n.reduce((function(e,t){return w(w({},e),{},S({},t.entityKey,{default:t.default,cookies:t.cookies}))}),{})),w(w(w({},e),(null==t?void 0:t.items)||{}),i)}),{}),s=this.getSettingItemKeys(a),c=r.map((function(e){return e.entityKey}));s.push.apply(s,T(c));try{var u=i?decodeURIComponent(i):ht.get(at),l=s.reduce((function(e,t){return e[t]=!0,e}),{}),f=u&&JSON.parse(u);if(o)return this.getEmptyConsents();if(f)return function(e){return Object.keys(e).filter((function(e){return"version"!==e})).reduce((function(t,n){return t[n]=e[n],t}),{})}(Object.assign({},n?this.getDefaultConsents(a):l,f));if(!n)return l}catch(e){}return this.getDefaultConsents(a)}},{key:"getDefaultConsents",value:function(e){var t=Object.keys(e||{});if(t.length){var n={};return t.forEach((function(t){n[t]=!!e[t].default})),n}return{}}},{key:"isShowCookieBanner",value:function(e){var t;if(!e.isEffective)return!1;if(!this.value)return!1;var n=function(e){var t=(e||{}).cookie,n=t?decodeURIComponent(t):ht.get(at);if(!n)return null;try{return(n&&JSON.parse(n)).version||null}catch(e){return null}}(e);return function(e,t){if(!t)return!0;var n=/^v(\d+)$/,i=n.exec(e),o=n.exec(t);return i&&o?Number(i[1])>Number(o[1]):e!==t}((null===(t=this.value)||void 0===t?void 0:t.version)||"",n)}},{key:"setCookieConfig",value:function(e){var t=e.entityKeys,n=E(e,_);this.value=n,this.entityKeys=t||{}}}]),e}(),zh=new Oh;function Ih(e,t){var n,i,o,r;try{o=null===(n=document.getElementById(e))||void 0===n?void 0:n.textContent;var a=JSON.parse(o),s=a.i18n,c=void 0===s?{}:s,u=a.appProps,l=(u=void 0===u?{}:u).region,f=void 0===l?"":l,h=u.user,d=(h=void 0===h?{}:h).ftcUser,p=void 0!==d&&d,g=u.idcRegion,v=void 0===g?"":g,m=a.cookieBanner,_=(m=void 0===m?{}:m).disabled,y=void 0!==_&&_,b=m.isEffective,E=void 0!==b&&b,k=m.settings,S=void 0===k?{}:k,A=m.version,x=void 0===A?"":A,C=m.disabledAccessKeys,T=void 0===C?[]:C,D=m.resource,R=void 0===D?{}:D,O=a.consent,z=a.consentApiDomain,I=a.customTheme,M=void 0===I?[]:I;return function(e){if(!Hn&&Fn){Hn=!0;var t=null!=e?e:lt;Fn.init(w({app_id:345918,log:!1},t)),Fn.start()}}(a.tea),zh.setCookieConfig({settings:S,version:x,entityKeys:O.entityKeys}),r={locale:t,region:f,js_version:null!==(i=null==R?void 0:R.version)&&void 0!==i?i:"default"},Hn&&Fn&&Fn.config({evtParams:r}),{region:f,isFTC:p,i18n:c,disabled:y,isEffective:E,consent:O,disabledAccessKeys:T,consentApiDomain:z,customTheme:M.join(";")||"",idcRegion:v}}catch(e){return console.error(e),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Mh=function e(t,n){var i,o,r=t._$AN;if(void 0===r)return!1;var a,s=L(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;null===(o=(i=c)._$AO)||void 0===o||o.call(i,n,!1),e(c,n)}}catch(e){s.e(e)}finally{s.f()}return!0},Bh=function(e){var t,n;do{if(void 0===(t=e._$AM))break;(n=t._$AN).delete(e),e=t}while(0===(null==n?void 0:n.size))},Ph=function(e){for(var t;t=e._$AM;e=t){var n=t._$AN;if(void 0===n)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),Gh(t)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Nh(e){void 0!==this._$AN?(Bh(this),this._$AM=e,Ph(this)):this._$AM=e}function Uh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._$AH,o=this._$AN;if(void 0!==o&&0!==o.size)if(t)if(Array.isArray(i))for(var r=n;r<i.length;r++)Mh(i[r],!1),Bh(i[r]);else null!=i&&(Mh(i,!1),Bh(i));else Mh(this,e)}var Gh=function(e){var t,n,i,o;e.type==Ze&&(null!==(t=(i=e)._$AP)&&void 0!==t||(i._$AP=Uh),null!==(n=(o=e)._$AQ)&&void 0!==n||(o._$AQ=Nh))},jh=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments))._$AN=void 0,e}return q(n,[{key:"_$AT",value:function(e,t,i){A(j(n.prototype),"_$AT",this).call(this,e,t,i),Ph(this),this.isConnected=e._$AU}},{key:"_$AO",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.isConnected&&(this.isConnected=e,e?null===(t=this.reconnected)||void 0===t||t.call(this):null===(n=this.disconnected)||void 0===n||n.call(this)),i&&(Mh(this,e),Bh(this))}},{key:"setValue",value:function(e){if(function(e){return void 0===e.strings}(this._$Ct))this._$Ct._$AI(e,this);else{var t=T(this._$Ct._$AH);t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}},{key:"disconnected",value:function(){}},{key:"reconnected",value:function(){}}]),n}(et),Lh=function(){return new Vh},Vh=q((function e(){F(this,e)})),Kh=new WeakMap,Fh=Qe(function(e){z(n,e);var t=I(n);function n(){return F(this,n),t.apply(this,arguments)}return q(n,[{key:"render",value:function(e){return ze}},{key:"update",value:function(e,t){var n,i=C(t,1)[0],o=i!==this.Y;return o&&void 0!==this.Y&&this.rt(void 0),(o||this.lt!==this.dt)&&(this.Y=i,this.ct=null===(n=e.options)||void 0===n?void 0:n.host,this.rt(this.dt=e.element)),ze}},{key:"rt",value:function(e){var t;if("function"==typeof this.Y){var n=null!==(t=this.ct)&&void 0!==t?t:globalThis,i=Kh.get(n);void 0===i&&(i=new WeakMap,Kh.set(n,i)),void 0!==i.get(this.Y)&&this.Y.call(this.ct,void 0),i.set(this.Y,e),void 0!==e&&this.Y.call(this.ct,e)}else this.Y.value=e}},{key:"lt",get:function(){var e,t,n;return"function"==typeof this.Y?null===(t=Kh.get(null!==(e=this.ct)&&void 0!==e?e:globalThis))||void 0===t?void 0:t.get(this.Y):null===(n=this.Y)||void 0===n?void 0:n.value}},{key:"disconnected",value:function(){this.lt===this.dt&&this.rt(void 0)}},{key:"reconnected",value:function(){this.rt(this.dt)}}]),n}(jh)),Hh=[],qh=[];function $h(e,t){if(e&&"undefined"!=typeof document){var n,i=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,r="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var a=Hh.indexOf(r);-1===a&&(a=Hh.push(r)-1,qh[a]={}),n=qh[a]&&qh[a][i]?qh[a][i]:qh[a][i]=s()}else n=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),o=0;o<n.length;o++)e.setAttribute(n[o],t.attributes[n[o]]);var a="prepend"===i?"afterbegin":"beforeend";return r.insertAdjacentElement(a,e),e}}var Wh='.cookie-banner-toast {\n  font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n  font-weight: 600;\n  font-size: 17px;\n  line-height: 130%;\n  letter-spacing: 0%;\n  position: fixed;\n  left: 0;\n  top: 70px;\n  right: 0;\n  text-align: center;\n  padding: 12px 20px;\n  background: rgba(84, 84, 84, 0.92);\n  color: #fff;\n  box-sizing: border-box;\n  z-index: 10001;\n  transition: opacity 0.3s;\n  opacity: 0;\n}\n.cookie-banner-toast.show {\n  opacity: 1;\n}';$h(Wh,{});var Jh,Xh=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments)).visible=!0,e.timeoutId=-1,e.wrapperRef=Lh(),e}return q(n,[{key:"willUpdate",value:function(e){e.has("textId")&&this.resetAutoFadeOut()}},{key:"firstUpdated",value:function(){var e,t=this;this.resetAutoFadeOut(),null===(e=this.wrapperRef.value)||void 0===e||e.addEventListener("transitionend",(function(){t.visible||t.dispatchEvent(new Event("fadeOutComplete"))}))}},{key:"resetAutoFadeOut",value:function(){var e=this;this.text&&(clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((function(){e.visible=!1}),3e3))}},{key:"render",value:function(){return Re(a||(a=b(["<div ",' class="','">',"</div>"])),Fh(this.wrapperRef),tt({"cookie-banner-toast":!0,show:this.visible}),this.text)}}]),n}(We);function Yh(e){if(Jh)Jh.setAttribute("text",e),Jh.setAttribute("text-id",Date.now().toString(36));else{(Jh=document.createElement("tiktok-cookie-banner-toast")).setAttribute("text",e),Jh.setAttribute("text-id",Date.now().toString(36));Jh.addEventListener("fadeOutComplete",(function e(){Jh&&(Jh.removeEventListener("fadeOutComplete",e),document.body.removeChild(Jh),Jh=null)})),document.body.appendChild(Jh)}}Xh.styles=ne(Wh),W([it()],Xh.prototype,"text",void 0),W([it({attribute:"text-id"})],Xh.prototype,"textId",void 0),W([ot()],Xh.prototype,"visible",void 0),Xh=W([nt("tiktok-cookie-banner-toast")],Xh);var Zh='.tiktok-cookie-banner {\n  font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n  font-weight: 400;\n  font-size: 18px;\n  line-height: 130%;\n  letter-spacing: -0.16%;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: var(--banner-background-color--, #10a2c5);\n  z-index: 10001;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  color: #fff;\n  padding: 24px 64px 32px;\n  box-sizing: border-box;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.12);\n  -moz-text-size-adjust: 100%;\n       text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  -webkit-font-smoothing: antialiased;\n}\n.tiktok-cookie-banner .cookie-content .cookie-title {\n  font-family: "tiktok-display-bold", PingFangSC, sans-serif;\n  font-weight: 700;\n  font-size: 24px;\n  line-height: 125%;\n  letter-spacing: 1%;\n  margin-top: 0;\n  margin-bottom: 0;\n  color: var(--banner-title-color--, #fff);\n}\n.tiktok-cookie-banner .cookie-content .cookie-desc {\n  font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  margin-top: 8px;\n  margin-bottom: 0;\n  color: var(--banner-desc-color--, #fff);\n}\n.tiktok-cookie-banner .cookie-content .cookie-desc a {\n  font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  text-decoration: none;\n  color: var(--banner-link-color--, #fff);\n}\n.tiktok-cookie-banner .cookie-content .cookie-desc a:hover {\n  text-decoration: underline;\n  color: var(--banner-link-hover-color--, #fff);\n}\n.tiktok-cookie-banner .button-wrapper {\n  display: flex;\n  margin-left: 64px;\n}\n.tiktok-cookie-banner .button-wrapper a,\n.tiktok-cookie-banner .button-wrapper button {\n  font-family: "tiktok-text-bold", PingFangSC, sans-serif;\n  font-weight: 700;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  box-sizing: border-box;\n  padding: 0 24px;\n  height: 46px;\n  min-width: 153px;\n  white-space: nowrap;\n  border-radius: 4px;\n  border: 1px solid rgba(22, 24, 35, 0.12);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  cursor: pointer;\n  background: #fff;\n  color: #161823;\n  outline: none;\n  text-decoration: none;\n  border: 1px solid rgba(22, 24, 35, 0.12);\n}\n.tiktok-cookie-banner .button-wrapper a:hover,\n.tiktok-cookie-banner .button-wrapper button:hover {\n  background: #f8f8f8;\n}\n.tiktok-cookie-banner .button-wrapper button {\n  margin-left: 16px;\n  background: var(--banner-button-background-color--, #fff);\n  color: var(--banner-button-text-color--, #161823);\n}\n.tiktok-cookie-banner .button-wrapper button:hover {\n  background: var(--banner-button-hover-background-color--, #f8f8f8);\n}\n.tiktok-cookie-banner.is-rtl {\n  direction: rtl;\n}\n.tiktok-cookie-banner.is-rtl .button-wrapper {\n  margin-left: unset;\n  margin-right: 64px;\n}\n.tiktok-cookie-banner.is-rtl .button-wrapper button {\n  margin-left: unset;\n  margin-right: 16px;\n}\n@media (max-width: 991px) {\n  .tiktok-cookie-banner.is-rtl .button-wrapper button {\n    margin-right: 8px;\n  }\n}\n@media (max-width: 991px) {\n  .tiktok-cookie-banner {\n    flex-direction: column;\n    height: auto;\n    padding: 16px 16px 20px;\n    box-shadow: none;\n  }\n  .tiktok-cookie-banner .cookie-content .cookie-title {\n    font-family: "tiktok-text-bold", PingFangSC, sans-serif;\n    font-weight: 700;\n    font-size: 16px;\n    line-height: 130%;\n    letter-spacing: 0.19%;\n    text-align: center;\n    color: var(--banner-title-color--, #fff);\n  }\n  .tiktok-cookie-banner .cookie-content .cookie-desc {\n    font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n    font-weight: 400;\n    font-size: 12px;\n    line-height: 130%;\n    letter-spacing: 1.34%;\n    width: auto;\n    text-align: center;\n    color: var(--banner-desc-color--, #fff);\n  }\n  .tiktok-cookie-banner .cookie-content .cookie-desc a {\n    font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n    font-weight: 600;\n    font-size: 12px;\n    line-height: 130%;\n    letter-spacing: 1.34%;\n    text-decoration: none;\n    color: var(--banner-link-color--, #fff);\n  }\n  .tiktok-cookie-banner .cookie-content .cookie-desc a:hover {\n    text-decoration: underline;\n    color: var(--banner-link-hover-color--, #fff);\n  }\n  .tiktok-cookie-banner .button-wrapper {\n    align-self: flex-end;\n    margin-top: 16px;\n    margin-left: 0;\n    margin-right: 0;\n    width: 100%;\n  }\n  .tiktok-cookie-banner .button-wrapper a,\n  .tiktok-cookie-banner .button-wrapper button {\n    font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n    font-weight: 600;\n    font-size: 15px;\n    line-height: 130%;\n    letter-spacing: 0.4%;\n    min-width: unset;\n    padding: 0 6px;\n    width: 100%;\n    height: 44px;\n    border-radius: 2px;\n    white-space: pre-wrap;\n    margin: 0;\n  }\n  .tiktok-cookie-banner .button-wrapper button {\n    margin-left: 8px;\n  }\n}';$h(Zh,{});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Qh=Qe(function(e){z(n,e);var t=I(n);function n(e){var i,o;if(F(this,n),i=t.call(this,e),e.type!==Ye||"style"!==e.name||(null===(o=e.strings)||void 0===o?void 0:o.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");return M(i)}return q(n,[{key:"render",value:function(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return null==i?t:t+"".concat(n=n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase(),":").concat(i,";")}),"")}},{key:"update",value:function(e,t){var n=this,i=C(t,1)[0],o=e.element.style;if(void 0===this.vt){for(var r in this.vt=new Set,i)this.vt.add(r);return this.render(i)}for(var a in this.vt.forEach((function(e){null==i[e]&&(n.vt.delete(e),e.includes("-")?o.removeProperty(e):o[e]="")})),i){var s=i[a];null!=s&&(this.vt.add(a),a.includes("-")?o.setProperty(a,s):o[a]=s)}return Oe}}]),n}(et)),ed=':root body.disable-scroll {\n  overflow: hidden;\n}\n\n.tiktok-cookie-setting-portal {\n  font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 130%;\n  letter-spacing: 0.67%;\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  color: rgb(22, 24, 35);\n  -webkit-font-smoothing: antialiased;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-backdrop {\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 300ms linear;\n  opacity: 0;\n  position: fixed;\n  inset: 0;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-backdrop.visible {\n  opacity: 1;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-container {\n  position: fixed;\n  inset: 0;\n  left: 0;\n  top: 32px;\n  bottom: 32px;\n  left: 16px;\n  right: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: 0;\n  transform: scale(0.8);\n  transition: opacity 300ms cubic-bezier(0.65, 0, 0.35, 1), transform 300ms cubic-bezier(0.65, 0, 0.35, 1);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-container.visible {\n  opacity: 1;\n  transform: scale(1);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-container .tiktok-cookie-setting-modal {\n  position: relative;\n  max-width: 700px;\n  max-height: 100%;\n  background-color: var(--setting-modal-background-color--, #fff);\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: rgba(0, 0, 0, 0.12) 0 2px 12px;\n  outline: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n@media (max-width: 700px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-container .tiktok-cookie-setting-modal {\n    width: calc(100vw - 32px);\n  }\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-header-container {\n  font-family: "tiktok-display-bold", PingFangSC, sans-serif;\n  font-weight: 700;\n  font-size: 24px;\n  line-height: 125%;\n  letter-spacing: 1%;\n  padding: 24px 29px 16px 24px;\n  color: var(--setting-modal-title-color--, #161823);\n  border-bottom: 0.5px solid rgba(22, 24, 35, 0.2);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex: 0;\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-header-container {\n    border-bottom: none;\n    padding: 32px 24px 24px;\n    font-family: "tiktok-display-bold", PingFangSC, sans-serif;\n    font-weight: 700;\n    font-size: 20px;\n    line-height: 125%;\n    letter-spacing: 1.5%;\n    justify-content: center;\n  }\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-close {\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-close svg {\n  fill: var(--setting-modal-close-icon-color--, rgba(22, 24, 35, 0.6));\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-close {\n    position: absolute;\n    top: 14px;\n    right: 14px;\n    transform: scale(0.8);\n  }\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-description-container {\n  background-color: rgba(22, 24, 35, 0.03);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-modal-description-container .tiktok-cookie-setting-modal-description {\n  font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  margin: 20px 24px;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content {\n  padding: 12px 40px 12px 24px;\n  overflow-y: auto;\n  flex: 1 1 auto;\n}\n@media (max-width: 700px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-content {\n    width: calc(100% - 48px);\n  }\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-content {\n    padding: 6px 16px 0 16px;\n  }\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content::-webkit-scrollbar {\n  width: 6px;\n  margin-right: 8px;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content:hover::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.15);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content::-webkit-scrollbar-track {\n  background: transparent;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background: rgba(0, 0, 0, 0.15);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content .tiktok-cookie-setting-info-icon {\n  margin-left: auto;\n  justify-content: flex-end;\n  height: 48px;\n  cursor: pointer;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content .tiktok-cookie-setting-info-icon.hide {\n  transform: rotate(180deg);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content .tiktok-cookie-setting-info-icon svg {\n  width: 14px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 17px;\n  fill: var(--setting-modal-arrow-icon-color--, #161823);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content .tiktok-cookie-vertical-info-icon {\n  margin-left: auto;\n  margin-right: 20px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content .tiktok-cookie-vendor-group-name {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  margin-top: 0;\n  margin-bottom: 0;\n  color: var(--setting-modal-text-color--, #161823);\n  flex: 1 1 0;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-content .tiktok-cookie-vendor-group-name .tiktok-cookie-vendor-group-name-outside {\n  display: flex;\n  align-items: center;\n  flex-shrink: 1;\n  flex-grow: 1;\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-content .tiktok-cookie-vendor-group-name {\n    font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n    font-weight: 600;\n    font-size: 15px;\n    line-height: 130%;\n    letter-spacing: 0.4%;\n  }\n}\n.tiktok-cookie-setting-portal cookie-setting-switch {\n  line-height: 0;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer {\n  padding: 24px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 0.5px solid rgba(22, 24, 35, 0.2);\n  flex: 0 0 auto;\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-footer {\n    border-top: none;\n    padding: 20px;\n    flex-direction: column-reverse;\n    justify-content: center;\n    align-items: stretch;\n  }\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer .tiktok-cookie-setting-footer-btn-text,\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer .tiktok-cookie-setting-footer-btn-primary {\n  font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  min-width: 100px;\n  border-radius: 4px;\n  display: flex;\n  position: relative;\n  align-items: center;\n  justify-content: center;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  cursor: pointer;\n  box-sizing: border-box;\n  height: 36px;\n  outline: none;\n  border: none;\n  text-align: center;\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-footer .tiktok-cookie-setting-footer-btn-text,\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-footer .tiktok-cookie-setting-footer-btn-primary {\n    height: 44px;\n    margin-left: 0;\n    border-radius: 2px;\n  }\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer .tiktok-cookie-setting-footer-btn-text {\n  color: #fe2c55;\n  background-color: #fff;\n  text-decoration: none;\n  padding-left: 0;\n  padding-right: 0;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer .tiktok-cookie-setting-footer-btn-primary {\n  background-color: var(--setting-modal-button-background-color--, rgb(254, 44, 85));\n  color: var(--setting-modal-button-text-color--, #fff);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer .tiktok-cookie-setting-footer-btn-primary:hover {\n  background: var(--setting-modal-button-hover-background-color--, linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.06)), #fe2c55);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor-group {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor-group.show-detail {\n  margin-bottom: 16px;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor .tiktok-cookie-vendor-label-outside {\n  display: flex;\n  flex-shrink: 1;\n  flex-grow: 1;\n  color: var(--setting-modal-text-color--, #161823);\n  cursor: pointer;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor .tiktok-cookie-vendor-label-outside .tiktok-cookie-vendor-label {\n  margin-left: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  flex: 1 1 0;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-manage-tip-context {\n  padding: 0;\n  margin: 0;\n  margin-bottom: 8px;\n  padding-left: -16px;\n  color: var(--setting-modal-desc-color--, rgba(0, 0, 0, 0.7));\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-manage-tip-context .tiktok-cookie-manage-tip-context-ref {\n  text-decoration: none;\n  color: var(--setting-modal-link-color--, #fe2c55);\n  font-weight: bold;\n  text-decoration: none;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-manage-tip-context .tiktok-cookie-manage-tip-context-ref:hover {\n  text-decoration: underline;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor-context-ref {\n  text-decoration: none;\n  color: var(--setting-modal-link-color--, #fe2c55);\n  font-weight: bold;\n  text-decoration: none;\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor-context-ref:hover {\n  text-decoration: underline;\n  color: var(--setting-modal-link-hover-color--, #fe2c55);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor-context {\n  padding: 0;\n  margin-top: 4px;\n  margin-bottom: 8px;\n  padding-left: 16px;\n  color: var(--setting-modal-text-color--, rgba(0, 0, 0, 0.56));\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor-group p,\n.tiktok-cookie-setting-portal .tiktok-cookie-vendor p {\n  font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-vendor-group p,\n  .tiktok-cookie-setting-portal .tiktok-cookie-vendor p {\n    font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n    font-weight: 400;\n    font-size: 15px;\n    line-height: 130%;\n    letter-spacing: 0.4%;\n  }\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-desc {\n  color: var(--setting-modal-text-color--, rgba(0, 0, 0, 0.56));\n  font-family: "tiktok-text-regular", PingFangSC, sans-serif;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 130%;\n  letter-spacing: 0.67%;\n  margin-bottom: 24px;\n}\n.tiktok-cookie-setting-portal .cookie-setting-switch {\n  line-height: 0;\n  padding-left: 36px;\n  flex-grow: 0;\n  flex-shrink: 0;\n}\n.tiktok-cookie-setting-portal .cookie-setting-switch.checked {\n  background-color: var(--setting-modal-switch-toggle-color--, #0be09b);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer-desc {\n  font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  padding: 0;\n  margin: 0 16px 0 0;\n  color: var(--setting-modal-link-color--, #fe2c55);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer-desc a {\n  font-family: "tiktok-text-medium", PingFangSC, sans-serif;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 130%;\n  letter-spacing: 0.19%;\n  text-decoration: none;\n  color: var(--setting-modal-link-color--, #fe2c55);\n}\n.tiktok-cookie-setting-portal .tiktok-cookie-setting-footer-desc a:hover {\n  text-decoration: underline;\n  color: var(--setting-modal-link-color--, #fe2c55);\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal .tiktok-cookie-setting-footer-desc {\n    margin: 16px 0 0 0;\n    text-align: center;\n  }\n}\n.tiktok-cookie-setting-portal.is-rtl {\n  direction: rtl;\n}\n.tiktok-cookie-setting-portal.is-rtl .tiktok-cookie-setting-content {\n  padding: 12px 24px 12px 40px;\n}\n.tiktok-cookie-setting-portal.is-rtl .tiktok-cookie-vertical-info-icon {\n  margin-left: 20px;\n  margin-right: auto;\n}\n.tiktok-cookie-setting-portal.is-rtl .tiktok-cookie-setting-info-icon {\n  margin-right: auto;\n  margin-left: 0;\n}\n.tiktok-cookie-setting-portal.is-rtl .tiktok-cookie-vendor .tiktok-cookie-vendor-label-outside .tiktok-cookie-vendor-label {\n  margin-left: 0;\n  margin-right: 16px;\n}\n.tiktok-cookie-setting-portal.is-rtl .tiktok-cookie-vendor-context {\n  padding-left: 0;\n  padding-right: 16px;\n}\n.tiktok-cookie-setting-portal.is-rtl .tiktok-cookie-setting-footer-desc {\n  margin: 0 0 0 16px;\n}\n@media (max-width: 468px) {\n  .tiktok-cookie-setting-portal.is-rtl .tiktok-cookie-setting-footer-desc {\n    margin: 16px 0 0 0;\n    text-align: center;\n  }\n}';
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */$h(ed,{});var td="global_module_disableScroll__472ccca3";$h(":root body.global_module_disableScroll__472ccca3 {\n  overflow: hidden;\n}",{});var nd=".tiktok-cookie-setting-switch {\n  box-sizing: border-box;\n  display: inline-block;\n  border-radius: 12px;\n  border: 1px rgba(0, 0, 0, 0) solid;\n  position: relative;\n  cursor: pointer;\n  background-color: var(--setting-modal-switch-toggle-color--, rgba(46, 50, 56, 0.05));\n  transition: background-color 200ms ease-in-out;\n  width: 40px;\n  height: 24px;\n}\n.tiktok-cookie-setting-switch.checked {\n  background-color: var(--setting-modal-switch-toggle-checked-color--, #0be09b);\n}\n.tiktok-cookie-setting-switch.checked .tiktok-cookie-setting-switch-knob {\n  transform: translateX(18px);\n}\n.tiktok-cookie-setting-switch.disabled {\n  opacity: 0.34;\n  cursor: not-allowed;\n}\n\n.tiktok-cookie-setting-switch-knob {\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.08);\n  cursor: pointer;\n  border-radius: 9px;\n  background-color: #fff;\n  box-sizing: border-box;\n  position: absolute;\n  left: 0;\n  right: auto;\n  transition: transform 200ms ease-in-out, width 200ms ease-in-out;\n  width: 18px;\n  height: 18px;\n  top: 2px;\n  transform: translateX(2px);\n}\n\n.tiktok-cookie-setting-switch-native-control {\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  cursor: inherit;\n  pointer-events: auto;\n  margin: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n}";$h(nd,{});var id=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments)).value=!1,e.name="",e.disabled=!1,e}return q(n,[{key:"handleCheck",value:function(e){var t=e.target.checked;this.dispatchEvent(new CustomEvent("checkedChange",{detail:t}))}},{key:"render",value:function(){return Re(s||(s=b(['<div class="','" role="switch" aria-checked="','"><div class="tiktok-cookie-setting-switch-knob"></div><input @change="','" ?checked="','" type="checkbox" role="switch" class="tiktok-cookie-setting-switch-native-control" name="','"></div>'])),tt({"tiktok-cookie-setting-switch":!0,checked:this.value,disabled:this.disabled}),this.value,this.handleCheck,this.value,this.name)}}]),n}(We);id.styles=ne(nd),W([it({converter:function(e){return"true"===e}})],id.prototype,"value",void 0),W([it()],id.prototype,"name",void 0),W([it({converter:function(e){return"true"===e}})],id.prototype,"disabled",void 0),id=W([nt("cookie-setting-switch")],id);var od=["touchstart","touchmove","touchend","scroll"],rd=function(e){z(n,e);var t=I(n);function n(){var e;return F(this,n),(e=t.apply(this,arguments)).zIndex=10002,e.visible=!1,e.deferredVisible=!1,e.cookieConsent={},e.customTheme="",e.modalBackdropRef=Lh(),e.scrollableListRef=Lh(),e}return q(n,[{key:"connectedCallback",value:function(){var e=this;if(A(j(n.prototype),"connectedCallback",this).call(this),this.initUserConfig(),this.userConfig){this.cookieConsent=zh.getCookieConsents(this.userConfig);var t=this.userConfig;xh({config:t.consent,region:t.region,consentApiDomain:t.consentApiDomain,idcRegion:t.idcRegion})}this.visible&&requestAnimationFrame((function(){return e.deferredVisible=!0}))}},{key:"willUpdate",value:function(e){var t,n=this;if((e.has("userConfigEleId")||e.has("locale"))&&this.initUserConfig(),e.has("visible"))if(this.visible)this.cookieConsent=this.userConfig?zh.getCookieConsents(this.userConfig):{},requestAnimationFrame((function(){return n.deferredVisible=!0})),this.lockScroll(),qn("cookie_setting_show"),this.dispatchEvent(new CustomEvent("customBannerEvents",{detail:{eventName:"onSettingShow"},bubbles:!0,composed:!0}));else{var i=this.modalBackdropRef.value;null==i||i.addEventListener("transitionend",(function e(){null==i||i.removeEventListener("transitionend",e),n.deferredVisible=!1})),this.unlockScroll();var o,r=L(od);try{for(r.s();!(o=r.n()).done;){var a=o.value;null===(t=this.scrollableListRef.value)||void 0===t||t.removeEventListener(a,this.stopTouchEventPropagation)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"updated",value:function(e){if(e.has("visible")&&this.visible&&this.scrollableListRef.value){var t,n=L(od);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.scrollableListRef.value.addEventListener(i,this.stopTouchEventPropagation)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"stopTouchEventPropagation",value:function(e){e.stopPropagation()}},{key:"lockScroll",value:function(){document.body.classList.add(td)}},{key:"unlockScroll",value:function(){document.body.classList.remove(td)}},{key:"initUserConfig",value:function(){var e=Ih(this.userConfigEleId,this.locale);e&&(this.userConfig=e,this.customTheme=e.customTheme)}},{key:"handleClose",value:function(){qn("cookie_setting_close"),this.dispatchEvent(new Event("close"))}},{key:"disagreeToAll",value:function(e){var t=e.value,n=e.groupName,i=zh.getCategoryConsents({groupName:n,value:t});this.cookieConsent=w(w({},this.cookieConsent||{}),i),qn("cookie_setting_toggle",{state:t?1:0,type:"category",name:n})}},{key:"disagreeToOne",value:function(e){var t=this.cookieConsent[e];this.cookieConsent=w(w({},this.cookieConsent),{},S({},e,!t)),qn("cookie_setting_toggle",{state:t?0:1,type:"vendor",name:e})}},{key:"handleSave",value:function(){var e=this;zh.setCookieConsents(this.cookieConsent),this.dispatchEvent(new Event("close")),this.dispatchEvent(new CustomEvent("save",{detail:this.cookieConsent})),qn("cookie_setting_save",{result:Object.keys(this.cookieConsent).filter((function(t){return e.cookieConsent[t]})).join(",")})}},{key:"renderVendorDescription",value:function(e){for(var t,n=[],i=new RegExp("\\[([^\\]]+)\\]\\(([^)]+)\\)","g");null!==(t=i.exec(e));){var o=e.slice(0,t.index);o&&n.push({type:"normalText",value:o}),n.push({type:"linkText",value:t[1],ref:t[2]}),e=e.slice(t.index+t[0].length)}return e&&n.push({type:"normalText",value:e}),n.map((function(e){var t,n=e.type,i=e.value,o=e.ref;switch(n){case"normalText":return Re(c||(c=b(["<span>","</span>"])),i);case"linkText":return Re(u||(u=b(['<a class="tiktok-cookie-vendor-context-ref" href="','" target="_blank" rel="noopener noreferrer">',"</a>"])),null!=(t=o)?t:ze,i);default:return ze}}))}},{key:"render",value:function(){var e,t,n=this,i=this.locale,o=void 0===i?"en":i,r=null!==(t=null===(e=this.userConfig)||void 0===e?void 0:e.i18n)&&void 0!==t?t:{},a=r.cookieSettingsTitle,s=void 0===a?"":a,c=r.cookieSettingSaveBtn,u=void 0===c?"":c,g=r.cookieSettingsSubTitle,v=void 0===g?"":g,m=r.cookieSettingsFooter,_=void 0===m?"":m;if(!this.deferredVisible&&!this.visible)return ze;var y=zh.getSettings();return Re(l||(l=b(["<style>:host{",'}</style><div class="','" style="','"><div ',' class="','"></div><div class="','"><section class="tiktok-cookie-setting-modal"><div class="tiktok-cookie-setting-header-container">','<div class="tiktok-cookie-setting-modal-close" @click="','" .innerHTML="','"></div></div><div class="tiktok-cookie-setting-modal-description-container"><div class="tiktok-cookie-setting-modal-description"><p class="tiktok-cookie-manage-tip-context">',"</p></div></div><div ",' class="tiktok-cookie-setting-content">','</div><div class="tiktok-cookie-setting-footer"><p class="tiktok-cookie-setting-footer-desc" .innerHTML="','"></p><button class="tiktok-cookie-setting-footer-btn-primary" @click="','">',"</button></div></section></div></div>"])),this.customTheme,tt({"tiktok-cookie-setting-portal":!0,"is-rtl":rt.includes(o)}),Qh({zIndex:"".concat(this.zIndex)}),Fh(this.modalBackdropRef),tt({"tiktok-cookie-setting-backdrop":!0,visible:this.visible&&this.deferredVisible}),tt({"tiktok-cookie-setting-modal-container":!0,visible:this.visible&&this.deferredVisible}),s,this.handleClose,'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M21.1718 23.9999L10.2931 13.1212C9.90261 12.7307 9.90261 12.0975 10.2931 11.707L11.7074 10.2928C12.0979 9.90228 12.731 9.90228 13.1216 10.2928L24.0002 21.1715L34.8789 10.2928C35.2694 9.90228 35.9026 9.90228 36.2931 10.2928L37.7073 11.707C38.0979 12.0975 38.0979 12.7307 37.7073 13.1212L26.8287 23.9999L37.7073 34.8786C38.0979 35.2691 38.0979 35.9023 37.7073 36.2928L36.2931 37.707C35.9026 38.0975 35.2694 38.0975 34.8789 37.707L24.0002 26.8283L13.1216 37.707C12.731 38.0975 12.0979 38.0975 11.7074 37.707L10.2931 36.2928C9.90261 35.9023 9.90261 35.2691 10.2931 34.8786L21.1718 23.9999Z"></path></svg>',this.renderVendorDescription(v),Fh(this.scrollableListRef),y.map((function(e){return Re(f||(f=b(['<div class="tiktok-cookie-vendor-group show-detail"><h1 class="tiktok-cookie-vendor-group-name"><div class="tiktok-cookie-vendor-group-name-outside with-hover-effect">','</div><span class="tiktok-cookie-vertical-info-icon" .innerHTML="','"></span></h1><cookie-setting-switch .value="','" .disabled="','" @checkedChange="','"></cookie-setting-switch></div>'," ",""])),e.groupName,ct,!!e.disabled||function(e){var t=e.reduce((function(e,t){return w(w({},e),{},S({},t,n.cookieConsent[t]))}),{});return Object.values(t).every((function(e){return Boolean(e)}))}(zh.getSettingItemKeys(e.items,e.groupEntityKeys)),e.disabled,(function(t){e.disabled||n.disagreeToAll({value:t.detail,groupName:e.groupName})}),Re(h||(h=b(['<div class="tiktok-cookie-setting-desc">',"</div>"])),e.groupDescription),zh.getSettingItemKeys(e.items).map((function(t){var i,o;return Re(d||(d=b(['<div class="tiktok-cookie-vendor-container"><div class="tiktok-cookie-vendor"><div class="tiktok-cookie-vendor-label-outside with-hover-effect"><p class="tiktok-cookie-vendor-label">','</p></div><span class="tiktok-cookie-vertical-info-icon" .innerHTML="','"></span><cookie-setting-switch .value="','" .disabled="','" @checkedChange="','"></cookie-setting-switch></div>',"</div>"])),(null===(i=e.items[t])||void 0===i?void 0:i.vendorName)||"",ct,Boolean(n.cookieConsent[t]),e.disabled,(function(){e.disabled||n.disagreeToOne(t)}),Re(p||(p=b(['<p class="tiktok-cookie-vendor-context">',"</p>"])),n.renderVendorDescription(null===(o=e.items[t])||void 0===o?void 0:o.description)))})))})),_,this.handleSave,u)}}]),n}(We);function ad(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window.dataLayer.push(arguments)}function sd(e){var t,n={};return e&&(n=null===(t=Object.keys(e))||void 0===t?void 0:t.reduce((function(t,n){return t[n]=e[n]?"granted":"denied",t}),{})),n}rd.styles=ne(ed),W([it({attribute:"z-index"})],rd.prototype,"zIndex",void 0),W([it({converter:function(e){return"true"===e}})],rd.prototype,"visible",void 0),W([it({attribute:"user-config-ele-id"})],rd.prototype,"userConfigEleId",void 0),W([it()],rd.prototype,"locale",void 0),W([ot()],rd.prototype,"deferredVisible",void 0),W([ot()],rd.prototype,"userConfig",void 0),W([ot()],rd.prototype,"cookieConsent",void 0),W([ot()],rd.prototype,"customTheme",void 0),rd=W([nt("cookie-setting-modal")],rd),window.dataLayer=window.dataLayer||[];var cd=new(function(){function e(){F(this,e)}return q(e,[{key:"defaultGrantAll",value:function(e){ad("consent","default",w({ad_storage:"granted",analytics_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"},sd(e)))}},{key:"defaultDenyAll",value:function(e){ad("consent","default",w({ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"},sd(e)))}},{key:"updateGrantAll",value:function(e){ad("consent","update",w({ad_storage:"granted",analytics_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"},sd(e)))}},{key:"updateDenyAll",value:function(e){ad("consent","update",w({ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"},sd(e)))}},{key:"initializeWithConsent",value:function(e){e.ga||e.optional?this.defaultGrantAll(e):this.defaultDenyAll(e)}},{key:"updateWithConsent",value:function(e){e.ga||e.optional?this.updateGrantAll(e):this.updateDenyAll(e)}}]),e}());[["tiktok-display-bold","TikTokDisplayFont-Bold.woff2?_default_font=1&v=2"],["tiktok-display-regular","TikTokDisplayFont-Regular.woff2?_default_font=1&v=2"],["tiktok-display-medium","TikTokDisplayFont-Semibold.woff2?_default_font=1&v=2"],["tiktok-text-bold","TikTokFont-Bold.woff2?_default_font=1&v=2"],["tiktok-text-regular","TikTokFont-Regular.woff2?_default_font=1&v=2"],["tiktok-text-medium","TikTokFont-SEMIBOLD.woff2?_default_font=1&v=2"]].forEach((function(e){var t=C(e,2),n=t[0],i=t[1];!function(e,t){var n=document.querySelector("style[data-tiktok-cookie-banner-font='".concat(e,"']"));n||((n=document.createElement("style")).setAttribute("data-tiktok-cookie-banner-font",e),n.innerHTML='\n  @font-face {\n    font-family: "'.concat(e,'";\n    src: url("').concat(t,'");\n    font-display: swap;\n  }\n    '),document.head.appendChild(n))}(n,"".concat(st).concat(i))})),function(){var e,t=null===(e=document.currentScript)||void 0===e?void 0:e.src;t&&window.addEventListener("error",(function(e){e instanceof ErrorEvent&&e.filename===t&&qn("cookie_banner_js_error",w(w({},Kn(e.error,["name","message","stack"])),Kn(e,["filename","lineno","colno"])))}))}();var ud=function(e){z(i,e);var t,n=I(i);function i(){var e;return F(this,i),(e=n.apply(this,arguments)).disabled=!1,e.disabledAccessKey="",e.i18n={},e.disabledByPolicy=!1,e.settingVisible=!1,e.forceUpdater=1,e.disabledAccessKeyConfig=[],e.customTheme="",e.region="",e.isFTC=!1,e.previousShow=!1,e.isEffective=!1,e}return q(i,[{key:"showCookieBanner",get:function(){var e=!this._disabledByAccessKey()&&!this.disabledByPolicy&&zh.isShowCookieBanner({isEffective:this.isEffective,isFTC:this.isFTC});return e!==this.previousShow&&(e&&qn("cookie_banner_show"),this._sendEvent("bannerEvents",{type:e?"show":"hide"}),this.previousShow=e),e}},{key:"reload",value:(t=O(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"connectedCallback",value:function(){A(j(i.prototype),"connectedCallback",this).call(this);try{var e=Ih(this.userConfigEleId,this.locale);if(!e)return;qn("cookie_banner_load");var t=e.i18n,n=e.region,o=e.isFTC,r=e.disabled,a=e.isEffective,s=e.consent,c=e.disabledAccessKeys,u=e.consentApiDomain,l=e.customTheme;xh({config:s,region:n,consentApiDomain:u,idcRegion:e.idcRegion}),Object.assign(this,{i18n:t,region:n,isFTC:o,disabledByPolicy:r,isEffective:a,disabledAccessKeyConfig:c,customTheme:l});var f=zh.getCookieConsents({isEffective:a,isFTC:o});cd.initializeWithConsent(f),this._execConsentsGetCallback(f),this.cookieConsent=f,this._updatePumbaaContext(a,o),this._updateLocalStorage(a,o)}catch(e){console.error(e)}}},{key:"updated",value:function(e){if(e.has("locale")){var t=Ih(this.userConfigEleId,this.locale);(null==t?void 0:t.i18n)&&(this.i18n=t.i18n)}}},{key:"_disabledByAccessKey",value:function(){var e,t=this;try{return!!(this.disabled&&this.disabledAccessKey&&(null===(e=this.disabledAccessKeyConfig)||void 0===e?void 0:e.length))&&this.disabledAccessKeyConfig.some((function(e){var n=e.path,i=e.accessKeys,o=location.pathname;return new RegExp(n).test(o)&&(i.includes(t.disabledAccessKey)||i.includes("*"))}))}catch(e){return console.error("disabled by access key error, err=".concat(e)),!1}}},{key:"_updatePumbaaContext",value:function(e,t){var n,i,o;try{var r=Rh(e||t),a=document.head.querySelector('meta[name="pumbaa-ctx"]');a||((a=document.createElement("meta")).name="pumbaa-ctx",document.head.appendChild(a)),a.content="".concat(a.content?a.content+",":"","cb_enabled=").concat(r),(null===(n=window.__PNS_RUNTIME__)||void 0===n?void 0:n.updateContext)&&(null===(o=(i=window.__PNS_RUNTIME__).updateContext)||void 0===o||o.call(i,{cb_enabled:r}))}catch(e){console.error("update pumbaa context error"),console.error(e)}}},{key:"_updateLocalStorage",value:function(e,t){try{var n=Rh(e||t);localStorage.setItem(ut,n)}catch(n){console.error("update local is effective error"),console.error(n),this._updateWindow(e,t)}}},{key:"_updateWindow",value:function(e,t){try{var n=Rh(e||t);window[ut]=n}catch(e){console.error("window - update local is effective error"),console.error(e)}}},{key:"_execConsentsGetCallback",value:function(e){window.gtm_permission=e;var t={region:this.region,isFTC:this.isFTC,isEffective:this.isEffective};this._sendEvent("bannerEvents",{type:"consentGet",payload:[e,t]}),this._sendEvent("getConsent",{payload:{cookieConsent:e,consentOptions:t}})}},{key:"_handleDescClick",value:function(e){var t=e.target;if(t instanceof HTMLAnchorElement){var n=t.href;if(!n)return;n.includes("policy")?qn("cookie_banner_go_to_policy"):n.includes("cookie-settings")&&(e.preventDefault(),this.openSettingModal())}}},{key:"_handleConfirm",value:function(){var e=this.i18n.cookieBannerSaveToast,t=zh.setFullConsents();cd.updateWithConsent(t),this._execConsentsGetCallback(t),this._sendEvent("bannerEvents",{type:"accept"}),this.cookieConsent=t,Yh(e),qn("cookie_banner_accept")}},{key:"_handleDecline",value:function(){var e=this.i18n.cookieBannerSaveToast,t=zh.setEmptyConsents();cd.updateWithConsent(t),this._execConsentsGetCallback(t),this._sendEvent("bannerEvents",{type:"decline"}),this.cookieConsent=t,Yh(e),qn("cookie_banner_decline")}},{key:"_handleSave",value:function(e){var t=e.detail,n=this.i18n.cookieBannerSaveToast;cd.updateWithConsent(t),this._execConsentsGetCallback(t),this._sendEvent("bannerEvents",{type:"save",payload:[t]}),this.cookieConsent=t,Yh(n)}},{key:"_sendEvent",value:function(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))}},{key:"openSettingModal",value:function(){this.settingVisible=!0,qn("cookie_banner_go_to_settings")}},{key:"render",value:function(){var e=this,t=this.locale,n=void 0===t?"en":t,i=this.i18n,o=i.cookieBannerTitle,r=void 0===o?"":o,a=i.cookieBannerSubTitle,s=void 0===a?"":a,c=i.cookieBannerBtnDecline,u=void 0===c?"":c,l=i.cookieBannerBtnAccept,f=void 0===l?"":l,h=i.cookieBannerBtnSetting,d=void 0===h?"":h,p=this.showCookieBanner?Re(g||(g=b(['<div class="','"><div class="cookie-content"><p class="cookie-title">','</p><p class="cookie-desc" @click="','" .innerHTML="','"></p></div><div class="button-wrapper">',' <button type="button" @click="','">','</button> <button type="button" @click="','">',"</button></div></div>"])),tt({"tiktok-cookie-banner":!0,"is-rtl":rt.includes(n)}),r,this._handleDescClick,s,d?Re(v||(v=b(['<button type="button" @click="','">',"</button>"])),this.openSettingModal,d):ze,this._handleDecline,u,this._handleConfirm,f):ze;return Re(m||(m=b(["<style>:host{","}</style>",'<cookie-setting-modal .visible="','" .userConfigEleId="','" .locale="','" @close="','" @save="','"></cookie-setting-modal>'])),this.customTheme,p,this.settingVisible,this.userConfigEleId,this.locale,(function(){return e.settingVisible=!1}),this._handleSave)}}]),i}(We);ud.styles=ne(Zh),W([it()],ud.prototype,"locale",void 0),W([it({attribute:"user-config-ele-id"})],ud.prototype,"userConfigEleId",void 0),W([it({converter:function(e){return"true"===e}})],ud.prototype,"disabled",void 0),W([it({attribute:"disabled-access-key"})],ud.prototype,"disabledAccessKey",void 0),W([ot()],ud.prototype,"i18n",void 0),W([ot()],ud.prototype,"userConfig",void 0),W([ot()],ud.prototype,"cookieConsent",void 0),W([ot()],ud.prototype,"disabledByPolicy",void 0),W([ot()],ud.prototype,"settingVisible",void 0),W([ot()],ud.prototype,"forceUpdater",void 0),W([ot()],ud.prototype,"disabledAccessKeyConfig",void 0),W([ot()],ud.prototype,"customTheme",void 0),ud=W([nt("tiktok-cookie-banner")],ud)}(this.reactJsxRuntime,this.react);
//# sourceMappingURL=default.eu-ttp.esm.js.map
